(function($hx_exports,$global){"use strict";$hx_exports["kha"]=$hx_exports["kha"]||{};$hx_exports["kha"]["input"]=$hx_exports["kha"]["input"]||{};var $hxClasses={},$estr=function(){return js_Boot.__string_rec(this,"")},$hxEnums=$hxEnums||{},$_;class HxOverrides{static strDate(s){switch(s.length){case 8:let k=s.split(":");let d=new Date;d["setTime"](0);d["setUTCHours"](k[0]);d["setUTCMinutes"](k[1]);d["setUTCSeconds"](k[2]);return d;case 10:let k1=s.split("-");return new Date(k1[0],k1[1]-1,k1[2],0,0,0);case 19:let k2=s.split(" ");let y=k2[0].split("-");let t=k2[1].split(":");return new Date(y[0],y[1]-1,y[2],t[0],t[1],t[2]);default:throw haxe_Exception.thrown("Invalid date format : "+s)}}static substr(s,pos,len){if(len==null){len=s.length}else if(len<0){if(pos==0){len=s.length+len}else{return""}}return s.substr(pos,len)}static remove(a,obj){let i=a.indexOf(obj);if(i==-1){return false}a.splice(i,1);return true}static now(){return Date.now()}}$hxClasses["HxOverrides"]=HxOverrides;HxOverrides.__name__=true;class Main{static main(){iron_object_BoneAnimation.skinMaxBones=8;iron_object_LightObject.cascadeCount=4;iron_object_LightObject.cascadeSplitFactor=.800000011920929;armory_system_Starter.numAssets=18;armory_system_Starter.drawLoading=armory_trait_internal_LoadingScreen.render;armory_system_Starter.main("Scene",0,false,true,false,1920,1080,1,true,armory_renderpath_RenderPathCreator.get)}}$hxClasses["Main"]=Main;Main.__name__=true;Math.__name__=true;class Reflect{static field(o,field){try{return o[field]}catch(_g){return null}}static setProperty(o,field,value){let tmp;let tmp1;if(o.__properties__){tmp=o.__properties__["set_"+field];tmp1=tmp}else{tmp1=false}if(tmp1){o[tmp](value)}else{o[field]=value}}static isFunction(f){if(typeof f=="function"){return!(f.__name__||f.__ename__)}else{return false}}}$hxClasses["Reflect"]=Reflect;Reflect.__name__=true;class Std{static string(s){return js_Boot.__string_rec(s,"")}static parseInt(x){if(x!=null){let _g=0;let _g1=x.length;while(_g<_g1){let i=_g++;let c=x.charCodeAt(i);if(c<=8||c>=14&&c!=32&&c!=45){let nc=x.charCodeAt(i+1);let v=parseInt(x,nc==120||nc==88?16:10);if(isNaN(v)){return null}else{return v}}}}return null}static random(x){if(x<=0){return 0}else{return Math.floor(Math.random()*x)}}}$hxClasses["Std"]=Std;Std.__name__=true;class StringTools{static replace(s,sub,by){return s.split(sub).join(by)}}$hxClasses["StringTools"]=StringTools;StringTools.__name__=true;class Type{static createInstance(cl,args){let ctor=Function.prototype.bind.apply(cl,[null].concat(args));return new ctor}static createEnum(e,constr,params){let f=Reflect.field(e,constr);if(f==null){throw haxe_Exception.thrown("No such constructor "+constr)}if(Reflect.isFunction(f)){if(params==null){throw haxe_Exception.thrown("Constructor "+constr+" need parameters")}return f.apply(e,params)}if(params!=null&&params.length!=0){throw haxe_Exception.thrown("Constructor "+constr+" does not need parameters")}return f}}$hxClasses["Type"]=Type;Type.__name__=true;class UInt{static gt(a,b){let aNeg=a<0;let bNeg=b<0;if(aNeg!=bNeg){return aNeg}else{return a>b}}static gte(a,b){let aNeg=a<0;let bNeg=b<0;if(aNeg!=bNeg){return aNeg}else{return a>=b}}static toFloat(this1){let int=this1;if(int<0){return 4294967296+int}else{return int+0}}}class iron_Trait{constructor(){if(iron_Trait._hx_skip_constructor){return}this._hx_constructor()}_hx_constructor(){this._render2D=null;this._render=null;this._lateUpdate=null;this._update=null;this._remove=null;this._init=null;this._add=null}remove(){this.object.removeTrait(this)}notifyOnAdd(f){if(this._add==null){this._add=[]}this._add.push(f)}notifyOnInit(f){if(this._init==null){this._init=[]}this._init.push(f);iron_App.notifyOnInit(f)}notifyOnRemove(f){if(this._remove==null){this._remove=[]}this._remove.push(f)}notifyOnUpdate(f){if(this._update==null){this._update=[]}this._update.push(f);iron_App.notifyOnUpdate(f)}notifyOnLateUpdate(f){if(this._lateUpdate==null){this._lateUpdate=[]}this._lateUpdate.push(f);iron_App.notifyOnLateUpdate(f)}}$hxClasses["iron.Trait"]=iron_Trait;iron_Trait.__name__=true;Object.assign(iron_Trait.prototype,{__class__:iron_Trait});class arm_MyTrait extends iron_Trait{constructor(){super();let _gthis=this;this.notifyOnUpdate(function(){let kb=iron_system_Input.getKeyboard();if(kb.down("a")||kb.down("left")){_gthis.object.transform.rotate(new iron_math_Vec4(0,0,1),-3*iron_system_Time.get_delta())}else if(kb.down("d")||kb.down("right")){_gthis.object.transform.rotate(new iron_math_Vec4(0,0,1),3*iron_system_Time.get_delta())}})}}$hxClasses["arm.MyTrait"]=arm_MyTrait;arm_MyTrait.__name__=true;arm_MyTrait.__super__=iron_Trait;Object.assign(arm_MyTrait.prototype,{__class__:arm_MyTrait});class armory_logicnode_LogicTree extends iron_Trait{constructor(){super()}}$hxClasses["armory.logicnode.LogicTree"]=armory_logicnode_LogicTree;armory_logicnode_LogicTree.__name__=true;armory_logicnode_LogicTree.__super__=iron_Trait;Object.assign(armory_logicnode_LogicTree.prototype,{__class__:armory_logicnode_LogicTree});class arm_node_Zoom extends armory_logicnode_LogicTree{constructor(){super();this.functionNodes=new haxe_ds_StringMap;this.functionOutputNodes=new haxe_ds_StringMap;this.notifyOnAdd($bind(this,this.add))}add(){let _SetCameraFOV=new armory_logicnode_SetCameraFovNode(this);_SetCameraFOV.inputs.length=3;_SetCameraFOV.outputs.length=1;let _g=0;let _g1=_SetCameraFOV.outputs.length;while(_g<_g1){let i=_g++;_SetCameraFOV.outputs[i]=[]}let _OnUpdate=new armory_logicnode_OnUpdateNode(this);_OnUpdate.property0="Update";_OnUpdate.inputs.length=0;_OnUpdate.outputs.length=1;let _g2=0;let _g3=_OnUpdate.outputs.length;while(_g2<_g3){let i=_g2++;_OnUpdate.outputs[i]=[]}armory_logicnode_LogicNode.addLink(_OnUpdate,_SetCameraFOV,0,0);armory_logicnode_LogicNode.addLink(new armory_logicnode_ObjectNode(this,""),_SetCameraFOV,0,1);let _Math=new armory_logicnode_MathNode(this);_Math.property0="Add";_Math.property1=false;_Math.inputs.length=2;_Math.outputs.length=1;let _g4=0;let _g5=_Math.outputs.length;while(_g4<_g5){let i=_g4++;_Math.outputs[i]=[]}let _GetCameraFOV=new armory_logicnode_GetCameraFovNode(this);_GetCameraFOV.inputs.length=1;_GetCameraFOV.outputs.length=1;let _g6=0;let _g7=_GetCameraFOV.outputs.length;while(_g6<_g7){let i=_g6++;_GetCameraFOV.outputs[i]=[]}armory_logicnode_LogicNode.addLink(new armory_logicnode_ObjectNode(this,""),_GetCameraFOV,0,0);armory_logicnode_LogicNode.addLink(_GetCameraFOV,_Math,0,0);let _GetMouseMovement=new armory_logicnode_GetMouseMovementNode(this);_GetMouseMovement.inputs.length=3;_GetMouseMovement.outputs.length=6;let _g8=0;let _g9=_GetMouseMovement.outputs.length;while(_g8<_g9){let i=_g8++;_GetMouseMovement.outputs[i]=[]}armory_logicnode_LogicNode.addLink(new armory_logicnode_FloatNode(this,-1),_GetMouseMovement,0,0);armory_logicnode_LogicNode.addLink(new armory_logicnode_FloatNode(this,-1),_GetMouseMovement,0,1);armory_logicnode_LogicNode.addLink(new armory_logicnode_FloatNode(this,.05000000074505806),_GetMouseMovement,0,2);armory_logicnode_LogicNode.addLink(_GetMouseMovement,new armory_logicnode_FloatNode(this,0),0,0);armory_logicnode_LogicNode.addLink(_GetMouseMovement,new armory_logicnode_FloatNode(this,0),1,0);armory_logicnode_LogicNode.addLink(_GetMouseMovement,new armory_logicnode_FloatNode(this,0),2,0);armory_logicnode_LogicNode.addLink(_GetMouseMovement,new armory_logicnode_FloatNode(this,0),3,0);armory_logicnode_LogicNode.addLink(_GetMouseMovement,new armory_logicnode_IntegerNode(this,0),4,0);armory_logicnode_LogicNode.addLink(_GetMouseMovement,_Math,5,1);armory_logicnode_LogicNode.addLink(_Math,_SetCameraFOV,0,2);armory_logicnode_LogicNode.addLink(_SetCameraFOV,new armory_logicnode_NullNode(this),0,0)}}$hxClasses["arm.node.Zoom"]=arm_node_Zoom;arm_node_Zoom.__name__=true;arm_node_Zoom.__super__=armory_logicnode_LogicTree;Object.assign(arm_node_Zoom.prototype,{__class__:arm_node_Zoom});class armory_data_Config{}$hxClasses["armory.data.Config"]=armory_data_Config;armory_data_Config.__name__=true;class armory_logicnode_LogicNode{constructor(tree){if(armory_logicnode_LogicNode._hx_skip_constructor){return}this._hx_constructor(tree)}_hx_constructor(tree){this.outputs=[];this.inputs=[];this.tree=tree}run(from){}runOutput(i){if(i>=this.outputs.length){return}let _g=0;let _g1=this.outputs[i];while(_g<_g1.length){let outLink=_g1[_g];++_g;outLink.toNode.run(outLink.toIndex)}}get(from){return this}static addLink(fromNode,toNode,fromIndex,toIndex){let link=new armory_logicnode_LogicNodeLink(fromNode,toNode,fromIndex,toIndex);if(toNode.inputs.length<=toIndex){toNode.inputs.length=toIndex+1}toNode.inputs[toIndex]=link;let fromNodeOuts=fromNode.outputs;let outLen=fromNodeOuts.length;if(outLen<=fromIndex){fromNodeOuts.length=fromIndex+1;let _g=outLen;let _g1=fromIndex+1;while(_g<_g1){let i=_g++;fromNodeOuts[i]=[]}}fromNodeOuts[fromIndex].push(link);return link}}$hxClasses["armory.logicnode.LogicNode"]=armory_logicnode_LogicNode;armory_logicnode_LogicNode.__name__=true;Object.assign(armory_logicnode_LogicNode.prototype,{__class__:armory_logicnode_LogicNode});class armory_logicnode_FloatNode extends armory_logicnode_LogicNode{constructor(tree,value){if(value==null){value=0}super(tree);this.value=value}get(from){if(this.inputs.length>0){let _this=this.inputs[0];return _this.fromNode.get(_this.fromIndex)}return this.value}}$hxClasses["armory.logicnode.FloatNode"]=armory_logicnode_FloatNode;armory_logicnode_FloatNode.__name__=true;armory_logicnode_FloatNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_FloatNode.prototype,{__class__:armory_logicnode_FloatNode});class armory_logicnode_FunctionNode extends armory_logicnode_LogicNode{constructor(tree){armory_logicnode_LogicNode._hx_skip_constructor=true;super();armory_logicnode_LogicNode._hx_skip_constructor=false;this._hx_constructor(tree)}_hx_constructor(tree){this.args=[];super._hx_constructor(tree)}run(from){this.runOutput(0)}get(from){return this.args[from-1]}}$hxClasses["armory.logicnode.FunctionNode"]=armory_logicnode_FunctionNode;armory_logicnode_FunctionNode.__name__=true;armory_logicnode_FunctionNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_FunctionNode.prototype,{__class__:armory_logicnode_FunctionNode});class armory_logicnode_FunctionOutputNode extends armory_logicnode_LogicNode{constructor(tree){super(tree)}run(from){let _this=this.inputs[1];this.result=_this.fromNode.get(_this.fromIndex);this.runOutput(0)}}$hxClasses["armory.logicnode.FunctionOutputNode"]=armory_logicnode_FunctionOutputNode;armory_logicnode_FunctionOutputNode.__name__=true;armory_logicnode_FunctionOutputNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_FunctionOutputNode.prototype,{__class__:armory_logicnode_FunctionOutputNode});class armory_logicnode_GetCameraFovNode extends armory_logicnode_LogicNode{constructor(tree){super(tree)}get(from){let _this=this.inputs[0];let camera=_this.fromNode.get(_this.fromIndex);if(camera==null){return 0}return camera.data.raw.fov}}$hxClasses["armory.logicnode.GetCameraFovNode"]=armory_logicnode_GetCameraFovNode;armory_logicnode_GetCameraFovNode.__name__=true;armory_logicnode_GetCameraFovNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_GetCameraFovNode.prototype,{__class__:armory_logicnode_GetCameraFovNode});class armory_logicnode_GetMouseMovementNode extends armory_logicnode_LogicNode{constructor(tree){super(tree)}get(from){let mouse=iron_system_Input.getMouse();let _this=this.inputs[0];let multX=_this.fromNode.get(_this.fromIndex);let _this1=this.inputs[1];let multY=_this1.fromNode.get(_this1.fromIndex);let _this2=this.inputs[2];let multWheelDelta=_this2.fromNode.get(_this2.fromIndex);switch(from){case 0:return mouse.movementX;case 1:return mouse.movementY;case 2:return mouse.movementX*multX;case 3:return mouse.movementY*multY;case 4:return mouse.wheelDelta;case 5:return mouse.wheelDelta*multWheelDelta;default:return 0}}}$hxClasses["armory.logicnode.GetMouseMovementNode"]=armory_logicnode_GetMouseMovementNode;armory_logicnode_GetMouseMovementNode.__name__=true;armory_logicnode_GetMouseMovementNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_GetMouseMovementNode.prototype,{__class__:armory_logicnode_GetMouseMovementNode});class armory_logicnode_IntegerNode extends armory_logicnode_LogicNode{constructor(tree,value){if(value==null){value=0}super(tree);this.value=value}get(from){if(this.inputs.length>0){let _this=this.inputs[0];return _this.fromNode.get(_this.fromIndex)}return this.value}}$hxClasses["armory.logicnode.IntegerNode"]=armory_logicnode_IntegerNode;armory_logicnode_IntegerNode.__name__=true;armory_logicnode_IntegerNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_IntegerNode.prototype,{__class__:armory_logicnode_IntegerNode});class armory_logicnode_LogicNodeLink{constructor(fromNode,toNode,fromIndex,toIndex){this.fromNode=fromNode;this.toNode=toNode;this.fromIndex=fromIndex;this.toIndex=toIndex}}$hxClasses["armory.logicnode.LogicNodeLink"]=armory_logicnode_LogicNodeLink;armory_logicnode_LogicNodeLink.__name__=true;Object.assign(armory_logicnode_LogicNodeLink.prototype,{__class__:armory_logicnode_LogicNodeLink});class armory_logicnode_MathNode extends armory_logicnode_LogicNode{constructor(tree){super(tree)}fract(a){return a-Math.floor(a)}pingpong(a,b){if(b==0){return 0}else{return Math.abs(this.fract((a-b)/(b*2))*b*2-b)}}get(from){let r=0;switch(this.property0){case"Abs":let _this=this.inputs[0];r=Math.abs(_this.fromNode.get(_this.fromIndex));break;case"Add":let _g=0;let _g1=this.inputs;while(_g<_g1.length){let inp=_g1[_g];++_g;r+=inp.fromNode.get(inp.fromIndex)}break;case"Arccosine":let _this1=this.inputs[0];r=Math.acos(_this1.fromNode.get(_this1.fromIndex));break;case"Arcsine":let _this2=this.inputs[0];r=Math.asin(_this2.fromNode.get(_this2.fromIndex));break;case"Arctan2":let _this3=this.inputs[0];let r1=_this3.fromNode.get(_this3.fromIndex);let _this4=this.inputs[1];r=Math.atan2(r1,_this4.fromNode.get(_this4.fromIndex));break;case"Arctangent":let _this5=this.inputs[0];r=Math.atan(_this5.fromNode.get(_this5.fromIndex));break;case"Ceil":let _this6=this.inputs[0];r=Math.ceil(_this6.fromNode.get(_this6.fromIndex));break;case"Cosine":let _this7=this.inputs[0];r=Math.cos(_this7.fromNode.get(_this7.fromIndex));break;case"Divide":let _this8=this.inputs[0];r=_this8.fromNode.get(_this8.fromIndex);let i=1;while(i<this.inputs.length){let _this=this.inputs[i];r/=_this.fromNode.get(_this.fromIndex);++i}break;case"Exp":let _this9=this.inputs[0];r=Math.exp(_this9.fromNode.get(_this9.fromIndex));break;case"Floor":let _this10=this.inputs[0];r=Math.floor(_this10.fromNode.get(_this10.fromIndex));break;case"Fract":let _this11=this.inputs[0];let v=_this11.fromNode.get(_this11.fromIndex);r=v-(v|0);break;case"Greater Than":let _this12=this.inputs[0];let r2=_this12.fromNode.get(_this12.fromIndex);let _this13=this.inputs[1];r=r2>_this13.fromNode.get(_this13.fromIndex)?1:0;break;case"Less Than":let _this14=this.inputs[0];let r3=_this14.fromNode.get(_this14.fromIndex);let _this15=this.inputs[1];r=r3<_this15.fromNode.get(_this15.fromIndex)?1:0;break;case"Logarithm":let _this16=this.inputs[0];r=Math.log(_this16.fromNode.get(_this16.fromIndex));break;case"Max":let _this17=this.inputs[0];let r4=_this17.fromNode.get(_this17.fromIndex);let _this18=this.inputs[1];r=Math.max(r4,_this18.fromNode.get(_this18.fromIndex));break;case"Min":let _this19=this.inputs[0];let r5=_this19.fromNode.get(_this19.fromIndex);let _this20=this.inputs[1];r=Math.min(r5,_this20.fromNode.get(_this20.fromIndex));break;case"Modulo":let _this21=this.inputs[0];let r6=_this21.fromNode.get(_this21.fromIndex);let _this22=this.inputs[1];r=r6%_this22.fromNode.get(_this22.fromIndex);break;case"Multiply":let _this23=this.inputs[0];r=_this23.fromNode.get(_this23.fromIndex);let i1=1;while(i1<this.inputs.length){let _this=this.inputs[i1];r*=_this.fromNode.get(_this.fromIndex);++i1}break;case"Ping-Pong":let _this24=this.inputs[0];let r7=_this24.fromNode.get(_this24.fromIndex);let _this25=this.inputs[1];r=this.pingpong(r7,_this25.fromNode.get(_this25.fromIndex));break;case"Power":let _this26=this.inputs[0];let r8=_this26.fromNode.get(_this26.fromIndex);let _this27=this.inputs[1];r=Math.pow(r8,_this27.fromNode.get(_this27.fromIndex));break;case"Round":let _this28=this.inputs[0];let r9=_this28.fromNode.get(_this28.fromIndex);let _this29=this.inputs[1];r=armory_logicnode_MathNode.round(r9,_this29.fromNode.get(_this29.fromIndex));break;case"Sine":let _this30=this.inputs[0];r=Math.sin(_this30.fromNode.get(_this30.fromIndex));break;case"Square Root":let _this31=this.inputs[0];r=Math.sqrt(_this31.fromNode.get(_this31.fromIndex));break;case"Subtract":let _this32=this.inputs[0];r=_this32.fromNode.get(_this32.fromIndex);let i2=1;while(i2<this.inputs.length){let _this=this.inputs[i2];r-=_this.fromNode.get(_this.fromIndex);++i2}break;case"Tangent":let _this33=this.inputs[0];r=Math.tan(_this33.fromNode.get(_this33.fromIndex));break}if(this.property1){if(r<0){r=0}else if(r>1){r=1}}return r}static round(number,precision){if(precision==null){precision=2}precision=Math.round(Math.abs(precision));number*=Math.pow(10,precision);return Math.round(number)/Math.pow(10,precision)}}$hxClasses["armory.logicnode.MathNode"]=armory_logicnode_MathNode;armory_logicnode_MathNode.__name__=true;armory_logicnode_MathNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_MathNode.prototype,{__class__:armory_logicnode_MathNode});class armory_logicnode_NullNode extends armory_logicnode_LogicNode{constructor(tree){super(tree)}get(from){return null}}$hxClasses["armory.logicnode.NullNode"]=armory_logicnode_NullNode;armory_logicnode_NullNode.__name__=true;armory_logicnode_NullNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_NullNode.prototype,{__class__:armory_logicnode_NullNode});class armory_logicnode_ObjectNode extends armory_logicnode_LogicNode{constructor(tree,objectName){armory_logicnode_LogicNode._hx_skip_constructor=true;super();armory_logicnode_LogicNode._hx_skip_constructor=false;this._hx_constructor(tree,objectName)}_hx_constructor(tree,objectName){if(objectName==null){objectName=""}this.value=null;this.objectName=objectName;super._hx_constructor(tree)}get(from){if(this.inputs.length>0){let _this=this.inputs[0];return _this.fromNode.get(_this.fromIndex)}if(this.value==null){this.value=this.objectName!=""?iron_Scene.active.getChild(this.objectName):this.tree.object}return this.value}}$hxClasses["armory.logicnode.ObjectNode"]=armory_logicnode_ObjectNode;armory_logicnode_ObjectNode.__name__=true;armory_logicnode_ObjectNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_ObjectNode.prototype,{__class__:armory_logicnode_ObjectNode});class armory_logicnode_OnUpdateNode extends armory_logicnode_LogicNode{constructor(tree){super(tree);tree.notifyOnInit($bind(this,this.init))}init(){if(this.property0=="Late Update"){this.tree.notifyOnLateUpdate($bind(this,this.update))}else{this.tree.notifyOnUpdate($bind(this,this.update))}}update(){this.runOutput(0)}}$hxClasses["armory.logicnode.OnUpdateNode"]=armory_logicnode_OnUpdateNode;armory_logicnode_OnUpdateNode.__name__=true;armory_logicnode_OnUpdateNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_OnUpdateNode.prototype,{__class__:armory_logicnode_OnUpdateNode});class armory_logicnode_SetCameraFovNode extends armory_logicnode_LogicNode{constructor(tree){super(tree)}run(from){let _this=this.inputs[1];let camera=_this.fromNode.get(_this.fromIndex);let _this1=this.inputs[2];let fov=_this1.fromNode.get(_this1.fromIndex);if(camera==null){return}camera.data.raw.fov=fov;camera.buildProjection();this.runOutput(0)}}$hxClasses["armory.logicnode.SetCameraFovNode"]=armory_logicnode_SetCameraFovNode;armory_logicnode_SetCameraFovNode.__name__=true;armory_logicnode_SetCameraFovNode.__super__=armory_logicnode_LogicNode;Object.assign(armory_logicnode_SetCameraFovNode.prototype,{__class__:armory_logicnode_SetCameraFovNode});class armory_object_Uniforms{static register(){iron_object_Uniforms.externalTextureLinks=[armory_object_Uniforms.textureLink];iron_object_Uniforms.externalVec2Links=[armory_object_Uniforms.vec2Link];iron_object_Uniforms.externalVec3Links=[armory_object_Uniforms.vec3Link];iron_object_Uniforms.externalVec4Links=[];iron_object_Uniforms.externalFloatLinks=[armory_object_Uniforms.floatLink];iron_object_Uniforms.externalIntLinks=[]}static textureLink(object,mat,link){switch(link){case"_morphDataNor":return js_Boot.__cast(object,iron_object_MeshObject).morphTarget.morphDataNor;case"_morphDataPos":return js_Boot.__cast(object,iron_object_MeshObject).morphTarget.morphDataPos;case"_nishitaLUT":if(armory_renderpath_Nishita.data==null){armory_renderpath_Nishita.recompute(iron_Scene.active.world)}return armory_renderpath_Nishita.data.lut}let this1=iron_RenderPath.active.renderTargets;let key=link.endsWith("_depth")?HxOverrides.substr(link,0,link.length-6):link;let target=this1.h[key];if(target!=null){return target.image}else{return null}}static vec3Link(object,mat,link){let v=null;return v}static vec2Link(object,mat,link){let v=null;if(link=="_nishitaDensity"){let w=iron_Scene.active.world;if(w!=null){v=iron_object_Uniforms.helpVec;v.x=w.raw.nishita_density.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);v.y=w.raw.nishita_density.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)}}return v}static floatLink(object,mat,link){return null}}$hxClasses["armory.object.Uniforms"]=armory_object_Uniforms;armory_object_Uniforms.__name__=true;class armory_renderpath_Inc{static init(_path){armory_renderpath_Inc.path=_path}static bindShadowMap(){let _g=0;let _g1=iron_Scene.active.lights;while(_g<_g1.length){let l=_g1[_g];++_g;if(!l.visible||l.data.raw.type!="sun"){continue}let n="shadowMap";armory_renderpath_Inc.path.bindTarget(n,n);break}let _g2=0;let _g3=armory_renderpath_Inc.pointIndex;while(_g2<_g3){let i=_g2++;let n="shadowMapPoint["+i+"]";armory_renderpath_Inc.path.bindTarget(n,n)}let _g4=0;let _g5=armory_renderpath_Inc.spotIndex;while(_g4<_g5){let i=_g4++;let n="shadowMapSpot["+i+"]";armory_renderpath_Inc.path.bindTarget(n,n)}}static shadowMapName(light){switch(light.data.raw.type){case"point":return"shadowMapPoint["+armory_renderpath_Inc.pointIndex+"]";case"sun":return"shadowMap";default:return"shadowMapSpot["+armory_renderpath_Inc.spotIndex+"]"}}static getShadowMap(l){let target=armory_renderpath_Inc.shadowMapName(l);let rt=armory_renderpath_Inc.path.renderTargets.h[target];if(rt==null){if(armory_renderpath_Inc.path.light.data.raw.shadowmap_cube){let size=armory_renderpath_Inc.path.light.data.raw.shadowmap_size;let t=new iron_RenderTargetRaw;t.name=target;t.width=size;t.height=size;t.format="DEPTH16";t.is_cubemap=true;rt=armory_renderpath_Inc.path.createRenderTarget(t)}else{let sizew=armory_renderpath_Inc.path.light.data.raw.shadowmap_size;let sizeh=sizew;if(l.data.raw.type=="sun"){sizew*=iron_object_LightObject.cascadeCount}let t=new iron_RenderTargetRaw;t.name=target;t.width=sizew;t.height=sizeh;t.format="DEPTH16";rt=armory_renderpath_Inc.path.createRenderTarget(t)}}return target}static drawShadowMap(){armory_renderpath_Inc.pointIndex=0;armory_renderpath_Inc.spotIndex=0;let _g=0;let _g1=iron_Scene.active.lights;while(_g<_g1.length){let l=_g1[_g];++_g;if(!l.visible){continue}armory_renderpath_Inc.path.light=l;let shadowmap=armory_renderpath_Inc.getShadowMap(l);let faces=l.data.raw.shadowmap_cube?6:1;let _g2=0;let _g3=faces;while(_g2<_g3){let i=_g2++;if(faces>1){armory_renderpath_Inc.path.currentFace=i}armory_renderpath_Inc.path.setTarget(shadowmap);armory_renderpath_Inc.path.clearTarget(null,1);if(l.data.raw.cast_shadow){armory_renderpath_Inc.path.drawMeshes("shadowmap")}}armory_renderpath_Inc.path.currentFace=-1;if(l.data.raw.type=="point"){armory_renderpath_Inc.pointIndex++}else if(l.data.raw.type=="spot"||l.data.raw.type=="area"){armory_renderpath_Inc.spotIndex++}}}}$hxClasses["armory.renderpath.Inc"]=armory_renderpath_Inc;armory_renderpath_Inc.__name__=true;class armory_renderpath_Nishita{static recompute(world){if(world==null||world.raw.nishita_density==null){return}if(armory_renderpath_Nishita.data==null){armory_renderpath_Nishita.data=new armory_renderpath_NishitaData}let density=world.raw.nishita_density;armory_renderpath_Nishita.data.computeLUT(new iron_math_Vec3(density.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),density.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),density.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)))}}$hxClasses["armory.renderpath.Nishita"]=armory_renderpath_Nishita;armory_renderpath_Nishita.__name__=true;class iron_math_Vec3{constructor(x,y,z){if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.z=z}}$hxClasses["iron.math.Vec3"]=iron_math_Vec3;iron_math_Vec3.__name__=true;Object.assign(iron_math_Vec3.prototype,{__class__:iron_math_Vec3});class armory_renderpath_NishitaData{constructor(){}getOzoneDensity(height){if(height<1e4||height>=4e4){return 0}if(height<25e3){return(height-1e4)/15e3}return-((height-4e4)/15e3)}raySphereIntersection(rayOrigin,rayDirection,sphereRadius){let a=rayDirection.x*rayDirection.x+rayDirection.y*rayDirection.y+rayDirection.z*rayDirection.z;let b=2*(rayDirection.x*rayOrigin.x+rayDirection.y*rayOrigin.y+rayDirection.z*rayOrigin.z);let c=rayOrigin.x*rayOrigin.x+rayOrigin.y*rayOrigin.y+rayOrigin.z*rayOrigin.z-sphereRadius*sphereRadius;let d=b*b-4*a*c;if(d<0){return new iron_math_Vec2(1e5,-1e5)}return new iron_math_Vec2((-b-Math.sqrt(d))/(2*a),(-b+Math.sqrt(d))/(2*a))}computeLUT(density){let this1=new Float32Array(armory_renderpath_NishitaData.lutHeightSteps*armory_renderpath_NishitaData.lutAngleSteps*4);let imageData=this1;let _g=0;let _g1=armory_renderpath_NishitaData.lutHeightSteps;while(_g<_g1){let x=_g++;let height=x/(armory_renderpath_NishitaData.lutHeightSteps-1);height*=height;height*=armory_renderpath_NishitaData.radiusAtmo*1e3;let _g1=0;let _g2=armory_renderpath_NishitaData.lutAngleSteps;while(_g1<_g2){let y=_g1++;let sunTheta=y/(armory_renderpath_NishitaData.lutAngleSteps-1)*2-1;sunTheta=(sunTheta==0?0:sunTheta<0?-1:1)*sunTheta*sunTheta;sunTheta=sunTheta*Math.PI/2+Math.PI/2;let jODepth=this.sampleSecondaryRay(height,sunTheta,density);let pixelIndex=(x+y*armory_renderpath_NishitaData.lutHeightSteps)*4;imageData[pixelIndex]=jODepth.x;imageData[pixelIndex+1]=jODepth.y;imageData[pixelIndex+2]=jODepth.z;imageData[pixelIndex+3]=1}}this.lut=kha_Image.fromBytes(haxe_io_Bytes.ofData(imageData.buffer),armory_renderpath_NishitaData.lutHeightSteps,armory_renderpath_NishitaData.lutAngleSteps,2,0)}sampleSecondaryRay(height,sunTheta,density){let radiusPlanetMeters=armory_renderpath_NishitaData.radiusPlanet*1e3;let x=0;let y=0;let z=height+radiusPlanetMeters;if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let iPos_x=x;let iPos_y=y;let iPos_z=z;let _this=new iron_math_Vec3(0,Math.sin(sunTheta),Math.cos(sunTheta));let n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){let invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}let pSun=_this;let jTime=0;let _this1=new iron_math_Vec3(iPos_x,iPos_y,iPos_z);_this1.x*=.001;_this1.y*=.001;_this1.z*=.001;let jStepSize=this.raySphereIntersection(_this1,pSun,armory_renderpath_NishitaData.radiusAtmo).y/armory_renderpath_NishitaData.jSteps;jStepSize*=1e3;let jODepth_x=0;let jODepth_y=0;let jODepth_z=0;let _g=0;let _g1=armory_renderpath_NishitaData.jSteps;while(_g<_g1){let i=_g++;let x=iPos_x;let y=iPos_y;let z=iPos_z;if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let jPos_x=x;let jPos_y=y;let jPos_z=z;let x1=pSun.x;let y1=pSun.y;let z1=pSun.z;if(z1==null){z1=0}if(y1==null){y1=0}if(x1==null){x1=0}let v_x=x1;let v_y=y1;let v_z=z1;let f=jTime+jStepSize*.5;v_x*=f;v_y*=f;v_z*=f;jPos_x+=v_x;jPos_y+=v_y;jPos_z+=v_z;let jHeight=Math.sqrt(jPos_x*jPos_x+jPos_y*jPos_y+jPos_z*jPos_z)-radiusPlanetMeters;let optDepthRayleigh=Math.exp(-jHeight/armory_renderpath_NishitaData.rayleighScale)*density.x;let optDepthMie=Math.exp(-jHeight/armory_renderpath_NishitaData.mieScale)*density.y;let optDepthOzone=this.getOzoneDensity(jHeight)*density.z;jODepth_x+=optDepthRayleigh;jODepth_y+=optDepthMie;jODepth_z+=optDepthOzone;jTime+=jStepSize}jODepth_x*=jStepSize;jODepth_y*=jStepSize;jODepth_z*=jStepSize;let jAttenuation=new iron_math_Vec3;let mie=armory_renderpath_NishitaData.mieCoeff*jODepth_y;jAttenuation.x+=mie;jAttenuation.y+=mie;jAttenuation.z+=mie;let _this2=armory_renderpath_NishitaData.rayleighCoeff;let x1=_this2.x;let y1=_this2.y;let z1=_this2.z;if(z1==null){z1=0}if(y1==null){y1=0}if(x1==null){x1=0}let v_x=x1;let v_y=y1;let v_z=z1;let f=jODepth_x;v_x*=f;v_y*=f;v_z*=f;jAttenuation.x+=v_x;jAttenuation.y+=v_y;jAttenuation.z+=v_z;let _this3=armory_renderpath_NishitaData.ozoneCoeff;let x2=_this3.x;let y2=_this3.y;let z2=_this3.z;if(z2==null){z2=0}if(y2==null){y2=0}if(x2==null){x2=0}let v_x1=x2;let v_y1=y2;let v_z1=z2;let f1=jODepth_z;v_x1*=f1;v_y1*=f1;v_z1*=f1;jAttenuation.x+=v_x1;jAttenuation.y+=v_y1;jAttenuation.z+=v_z1;jAttenuation.x*=-1;jAttenuation.y*=-1;jAttenuation.z*=-1;let v=jAttenuation;jAttenuation.x=Math.exp(v.x);jAttenuation.y=Math.exp(v.y);jAttenuation.z=Math.exp(v.z);return jAttenuation}}$hxClasses["armory.renderpath.NishitaData"]=armory_renderpath_NishitaData;armory_renderpath_NishitaData.__name__=true;Object.assign(armory_renderpath_NishitaData.prototype,{__class__:armory_renderpath_NishitaData});class armory_renderpath_RenderPathDeferred{static setTargetMeshes(){armory_renderpath_RenderPathDeferred.path.setTarget("gbuffer0",["gbuffer1"])}static drawMeshes(){armory_renderpath_RenderPathDeferred.path.drawMeshes("mesh")}static init(_path){armory_renderpath_RenderPathDeferred.path=_path;armory_renderpath_RenderPathDeferred.path.createDepthBuffer("main","DEPTH24");let t=new iron_RenderTargetRaw;t.name="gbuffer0";t.width=0;t.height=0;t.displayp=null;t.format="RGBA64";t.scale=armory_renderpath_Inc.superSample;t.depth_buffer="main";armory_renderpath_RenderPathDeferred.path.createRenderTarget(t);let t1=new iron_RenderTargetRaw;t1.name="tex";t1.width=0;t1.height=0;t1.displayp=null;t1.format="RGBA64";t1.scale=armory_renderpath_Inc.superSample;t1.depth_buffer="main";armory_renderpath_RenderPathDeferred.path.createRenderTarget(t1);let t2=new iron_RenderTargetRaw;t2.name="buf";t2.width=0;t2.height=0;t2.displayp=null;t2.format="RGBA64";t2.scale=armory_renderpath_Inc.superSample;armory_renderpath_RenderPathDeferred.path.createRenderTarget(t2);let t3=new iron_RenderTargetRaw;t3.name="gbuffer1";t3.width=0;t3.height=0;t3.displayp=null;t3.format="RGBA64";t3.scale=armory_renderpath_Inc.superSample;armory_renderpath_RenderPathDeferred.path.createRenderTarget(t3);armory_renderpath_RenderPathDeferred.path.loadShader("shader_datas/deferred_light/deferred_light");armory_renderpath_RenderPathDeferred.path.loadShader("shader_datas/ssao_pass/ssao_pass");armory_renderpath_RenderPathDeferred.path.loadShader("shader_datas/blur_edge_pass/blur_edge_pass_x");armory_renderpath_RenderPathDeferred.path.loadShader("shader_datas/blur_edge_pass/blur_edge_pass_y");let t4=new iron_RenderTargetRaw;t4.name="singlea";t4.width=0;t4.height=0;t4.displayp=null;t4.format="R8";t4.scale=armory_renderpath_Inc.superSample;armory_renderpath_RenderPathDeferred.path.createRenderTarget(t4);let t5=new iron_RenderTargetRaw;t5.name="singleb";t5.width=0;t5.height=0;t5.displayp=null;t5.format="R8";t5.scale=armory_renderpath_Inc.superSample;armory_renderpath_RenderPathDeferred.path.createRenderTarget(t5);let t6=new iron_RenderTargetRaw;t6.name="bufa";t6.width=0;t6.height=0;t6.displayp=null;t6.format="RGBA32";t6.scale=armory_renderpath_Inc.superSample;armory_renderpath_RenderPathDeferred.path.createRenderTarget(t6);let t7=new iron_RenderTargetRaw;t7.name="bufb";t7.width=0;t7.height=0;t7.displayp=null;t7.format="RGBA32";t7.scale=armory_renderpath_Inc.superSample;armory_renderpath_RenderPathDeferred.path.createRenderTarget(t7);armory_renderpath_RenderPathDeferred.path.loadShader("shader_datas/compositor_pass/compositor_pass");armory_renderpath_RenderPathDeferred.path.loadShader("shader_datas/smaa_edge_detect/smaa_edge_detect");armory_renderpath_RenderPathDeferred.path.loadShader("shader_datas/smaa_blend_weight/smaa_blend_weight");armory_renderpath_RenderPathDeferred.path.loadShader("shader_datas/smaa_neighborhood_blend/smaa_neighborhood_blend")}static commands(){armory_renderpath_RenderPathDeferred.path.setTarget("gbuffer0");armory_renderpath_RenderPathDeferred.path.clearTarget(null,1);armory_renderpath_RenderPathCreator.setTargetMeshes();armory_renderpath_RenderPathCreator.drawMeshes();if(armory_data_Config.raw.rp_ssgi!=false){armory_renderpath_RenderPathDeferred.path.setTarget("singlea");armory_renderpath_RenderPathDeferred.path.bindTarget("_main","gbufferD");armory_renderpath_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/ssao_pass/ssao_pass");armory_renderpath_RenderPathDeferred.path.setTarget("singleb");armory_renderpath_RenderPathDeferred.path.bindTarget("singlea","tex");armory_renderpath_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/blur_edge_pass/blur_edge_pass_x");armory_renderpath_RenderPathDeferred.path.setTarget("singlea");armory_renderpath_RenderPathDeferred.path.bindTarget("singleb","tex");armory_renderpath_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/blur_edge_pass/blur_edge_pass_y")}armory_renderpath_Inc.drawShadowMap();armory_renderpath_RenderPathDeferred.path.setDepthFrom("tex","gbuffer1");armory_renderpath_RenderPathDeferred.path.setTarget("tex");armory_renderpath_RenderPathDeferred.path.bindTarget("_main","gbufferD");armory_renderpath_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");armory_renderpath_RenderPathDeferred.path.bindTarget("gbuffer1","gbuffer1");if(armory_data_Config.raw.rp_ssgi!=false){armory_renderpath_RenderPathDeferred.path.bindTarget("singlea","ssaotex")}else{armory_renderpath_RenderPathDeferred.path.bindTarget("empty_white","ssaotex")}let voxelao_pass=false;armory_renderpath_Inc.bindShadowMap();if(voxelao_pass){armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/deferred_light/deferred_light_VoxelAOvar")}else{armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/deferred_light/deferred_light")}armory_renderpath_RenderPathDeferred.path.setDepthFrom("tex","gbuffer0");if(iron_Scene.active.raw.world_ref!=null){armory_renderpath_RenderPathDeferred.path.setTarget("tex");armory_renderpath_RenderPathDeferred.path.drawSkydome("shader_datas/World_"+iron_Scene.active.raw.world_ref+"/World_"+iron_Scene.active.raw.world_ref)}let framebuffer="";armory_renderpath_RenderPathCreator.finalTarget=armory_renderpath_RenderPathDeferred.path.currentTarget;let target="";target="buf";armory_renderpath_RenderPathDeferred.path.setTarget(target);armory_renderpath_RenderPathDeferred.path.bindTarget("tex","tex");let isProbe=false;if(!isProbe){armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/compositor_pass/compositor_pass")}else{armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/copy_pass/copy_pass")}armory_renderpath_RenderPathDeferred.path.setTarget("bufa");armory_renderpath_RenderPathDeferred.path.clearTarget(0);armory_renderpath_RenderPathDeferred.path.bindTarget("buf","colorTex");armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/smaa_edge_detect/smaa_edge_detect");armory_renderpath_RenderPathDeferred.path.setTarget("bufb");armory_renderpath_RenderPathDeferred.path.clearTarget(0);armory_renderpath_RenderPathDeferred.path.bindTarget("bufa","edgesTex");armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/smaa_blend_weight/smaa_blend_weight");armory_renderpath_RenderPathDeferred.path.setTarget(framebuffer);armory_renderpath_RenderPathDeferred.path.bindTarget("buf","colorTex");armory_renderpath_RenderPathDeferred.path.bindTarget("bufb","blendTex");armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/smaa_neighborhood_blend/smaa_neighborhood_blend")}static setupDepthTexture(){armory_renderpath_RenderPathDeferred.path.setDepthFrom("gbuffer0","gbuffer1");armory_renderpath_RenderPathDeferred.path.depthToRenderTarget.h["main"]=armory_renderpath_RenderPathDeferred.path.renderTargets.h["tex"];armory_renderpath_RenderPathDeferred.path.setTarget("depthtex");armory_renderpath_RenderPathDeferred.path.bindTarget("_main","tex");armory_renderpath_RenderPathDeferred.path.drawShader("shader_datas/copy_pass/copy_pass");armory_renderpath_RenderPathDeferred.path.setDepthFrom("gbuffer0","tex");armory_renderpath_RenderPathDeferred.path.depthToRenderTarget.h["main"]=armory_renderpath_RenderPathDeferred.path.renderTargets.h["gbuffer0"];armory_renderpath_RenderPathDeferred.path.setTarget("gbuffer0",["gbuffer1"]);armory_renderpath_RenderPathDeferred.path.bindTarget("depthtex","depthtex")}}$hxClasses["armory.renderpath.RenderPathDeferred"]=armory_renderpath_RenderPathDeferred;armory_renderpath_RenderPathDeferred.__name__=true;class armory_renderpath_RenderPathCreator{static get(){armory_renderpath_RenderPathCreator.path=new iron_RenderPath;armory_renderpath_Inc.init(armory_renderpath_RenderPathCreator.path);armory_renderpath_RenderPathDeferred.init(armory_renderpath_RenderPathCreator.path);armory_renderpath_RenderPathCreator.path.commands=function(){armory_renderpath_RenderPathDeferred.commands();armory_renderpath_RenderPathCreator.commands()};armory_renderpath_RenderPathCreator.path.setupDepthTexture=armory_renderpath_RenderPathDeferred.setupDepthTexture;return armory_renderpath_RenderPathCreator.path}}armory_renderpath_RenderPathCreator.commands=function(){};$hxClasses["armory.renderpath.RenderPathCreator"]=armory_renderpath_RenderPathCreator;armory_renderpath_RenderPathCreator.__name__=true;class haxe_Exception extends Error{constructor(message,previous,native){super(message);this.message=message;this.__previousException=previous;this.__nativeException=native!=null?native:this}unwrap(){return this.__nativeException}toString(){return this.get_message()}get_message(){return this.message}get_native(){return this.__nativeException}static caught(value){if(value instanceof haxe_Exception){return value}else if(value instanceof Error){return new haxe_Exception(value.message,null,value)}else{return new haxe_ValueException(value,null,value)}}static thrown(value){if(value instanceof haxe_Exception){return value.get_native()}else if(value instanceof Error){return value}else{let e=new haxe_ValueException(value);return e}}}$hxClasses["haxe.Exception"]=haxe_Exception;haxe_Exception.__name__=true;haxe_Exception.__super__=Error;Object.assign(haxe_Exception.prototype,{__class__:haxe_Exception,__properties__:{get_native:"get_native",get_message:"get_message"}});class haxe_exceptions_PosException extends haxe_Exception{constructor(message,previous,pos){super(message,previous);if(pos==null){this.posInfos={fileName:"(unknown)",lineNumber:0,className:"(unknown)",methodName:"(unknown)"}}else{this.posInfos=pos}}toString(){return""+super.toString()+" in "+this.posInfos.className+"."+this.posInfos.methodName+" at "+this.posInfos.fileName+":"+this.posInfos.lineNumber}}$hxClasses["haxe.exceptions.PosException"]=haxe_exceptions_PosException;haxe_exceptions_PosException.__name__=true;haxe_exceptions_PosException.__super__=haxe_Exception;Object.assign(haxe_exceptions_PosException.prototype,{__class__:haxe_exceptions_PosException});class armory_system_Starter{static main(scene,mode,resize,min,max,w,h,msaa,vsync,getRenderPath){let tasks=0;let start=function(){if(tasks>0){return}if(armory_data_Config.raw==null){armory_data_Config.raw={}}let c=armory_data_Config.raw;if(c.window_mode==null){c.window_mode=mode}if(c.window_resizable==null){c.window_resizable=resize}if(c.window_minimizable==null){c.window_minimizable=min}if(c.window_maximizable==null){c.window_maximizable=max}if(c.window_w==null){c.window_w=w}if(c.window_h==null){c.window_h=h}if(c.window_scale==null){c.window_scale=1}if(c.window_msaa==null){c.window_msaa=msaa}if(c.window_vsync==null){c.window_vsync=vsync}armory_object_Uniforms.register();let windowMode=c.window_mode==0?0:1;let windowFeatures=0;if(c.window_resizable){windowFeatures|=1}if(c.window_maximizable){windowFeatures|=4}if(c.window_minimizable){windowFeatures|=2}kha_System.start(new kha_SystemOptions("turntabletest",c.window_w,c.window_h,new kha_WindowOptions(null,-1,-1,800,600,-1,true,windowFeatures,windowMode),new kha_FramebufferOptions(60,c.window_vsync,32,16,8,c.window_msaa)),function($window){iron_App.init(function(){let load=null;load=function(g){if(iron_Scene.active!=null&&iron_Scene.active.ready){iron_App.removeRender2D(load)}else{armory_system_Starter.drawLoading(g,iron_data_Data.assetsLoaded,armory_system_Starter.numAssets)}};iron_App.notifyOnRender2D(load);iron_Scene.setActive(scene,function(object){iron_RenderPath.setActive(getRenderPath())})})})};tasks=1;tasks-=1;start()}}$hxClasses["armory.system.Starter"]=armory_system_Starter;armory_system_Starter.__name__=true;class armory_trait_internal_LoadingScreen{static render(g,assetsLoaded,assetsTotal){g.set_color(-3200189);g.fillRect(0,iron_App.h()-6,iron_App.w()/assetsTotal*assetsLoaded,6)}}$hxClasses["armory.trait.internal.LoadingScreen"]=armory_trait_internal_LoadingScreen;armory_trait_internal_LoadingScreen.__name__=true;class armory_trait_internal_UniformsManager extends iron_Trait{constructor(){iron_Trait._hx_skip_constructor=true;super();iron_Trait._hx_skip_constructor=false;this._hx_constructor()}_hx_constructor(){this.uniformExists=false;super._hx_constructor();this.notifyOnAdd($bind(this,this.init));this.notifyOnRemove($bind(this,this.removeObject));if(!armory_trait_internal_UniformsManager.sceneRemoveInitalized){iron_Scene.active.notifyOnRemove(armory_trait_internal_UniformsManager.removeScene)}}init(){if(this.object instanceof iron_object_MeshObject){let materials=js_Boot.__cast(this.object,iron_object_MeshObject).materials;let _g=0;while(_g<materials.length){let material=materials[_g];++_g;let exists=armory_trait_internal_UniformsManager.registerShaderUniforms(material);if(exists){this.uniformExists=true}}}}removeObject(){armory_trait_internal_UniformsManager.removeObjectFromAllMaps(this.object)}static removeScene(){armory_trait_internal_UniformsManager.removeObjectFromAllMaps(iron_Scene.active.root)}static register(type){switch(type){case 0:if(!armory_trait_internal_UniformsManager.floatsRegistered){armory_trait_internal_UniformsManager.floatsRegistered=true;iron_object_Uniforms.externalFloatLinks.push(armory_trait_internal_UniformsManager.floatLink)}break;case 1:if(!armory_trait_internal_UniformsManager.vectorsRegistered){armory_trait_internal_UniformsManager.vectorsRegistered=true;iron_object_Uniforms.externalVec3Links.push(armory_trait_internal_UniformsManager.vec3Link)}break;case 2:if(!armory_trait_internal_UniformsManager.texturesRegistered){armory_trait_internal_UniformsManager.texturesRegistered=true;iron_object_Uniforms.externalTextureLinks.push(armory_trait_internal_UniformsManager.textureLink)}break}}static registerShaderUniforms(material){let uniformExist=false;if(armory_trait_internal_UniformsManager.floatsMap.h.__keys__[iron_Scene.active.root.__id__]==null){armory_trait_internal_UniformsManager.floatsMap.set(iron_Scene.active.root,null)}if(armory_trait_internal_UniformsManager.vectorsMap.h.__keys__[iron_Scene.active.root.__id__]==null){armory_trait_internal_UniformsManager.vectorsMap.set(iron_Scene.active.root,null)}if(armory_trait_internal_UniformsManager.texturesMap.h.__keys__[iron_Scene.active.root.__id__]==null){armory_trait_internal_UniformsManager.texturesMap.set(iron_Scene.active.root,null)}let _g=0;let _g1=material.shader.raw.contexts;while(_g<_g1.length){let context=_g1[_g];++_g;let _g2=0;let _g3=context.constants;while(_g2<_g3.length){let constant=_g3[_g2];++_g2;if(constant.is_arm_parameter){uniformExist=true;let object=iron_Scene.active.root;switch(constant.type){case"float":let link=constant.link;let value=constant.float;armory_trait_internal_UniformsManager.setFloatValue(material,object,link,value);armory_trait_internal_UniformsManager.register(0);break;case"vec3":let vec=new iron_math_Vec4;vec.x=constant.vec3.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);vec.y=constant.vec3.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);vec.z=constant.vec3.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);armory_trait_internal_UniformsManager.setVec3Value(material,object,constant.link,vec);armory_trait_internal_UniformsManager.register(1);break}}}let _g4=0;let _g5=context.texture_units;while(_g4<_g5.length){let texture=_g5[_g4];++_g4;if(texture.is_arm_parameter){uniformExist=true;let object=iron_Scene.active.root;if(texture.default_image_file==null){armory_trait_internal_UniformsManager.setTextureValue(material,object,texture.link,null)}else{iron_data_Data.getImage(texture.default_image_file,function(image){armory_trait_internal_UniformsManager.setTextureValue(material,object,texture.link,image)})}armory_trait_internal_UniformsManager.register(2)}}}return uniformExist}static setFloatValue(material,object,link,value){if(object==null||material==null||link==null){return}let map=armory_trait_internal_UniformsManager.floatsMap;let matMap=map.h[object.__id__];if(matMap==null){matMap=new haxe_ds_ObjectMap;map.set(object,matMap)}let entry=matMap.h[material.__id__];if(entry==null){entry=new haxe_ds_StringMap;matMap.set(material,entry)}entry.h[link]=value}static setVec3Value(material,object,link,value){if(object==null||material==null||link==null){return}let map=armory_trait_internal_UniformsManager.vectorsMap;let matMap=map.h[object.__id__];if(matMap==null){matMap=new haxe_ds_ObjectMap;map.set(object,matMap)}let entry=matMap.h[material.__id__];if(entry==null){entry=new haxe_ds_StringMap;matMap.set(material,entry)}entry.h[link]=value}static setTextureValue(material,object,link,value){if(object==null||material==null||link==null){return}let map=armory_trait_internal_UniformsManager.texturesMap;let matMap=map.h[object.__id__];if(matMap==null){matMap=new haxe_ds_ObjectMap;map.set(object,matMap)}let entry=matMap.h[material.__id__];if(entry==null){entry=new haxe_ds_StringMap;matMap.set(material,entry)}entry.h[link]=value}static floatLink(object,mat,link){if(object==null||mat==null){return null}let res=armory_trait_internal_UniformsManager.getObjectFloatLink(object,mat,link);if(res==null){res=armory_trait_internal_UniformsManager.getObjectFloatLink(iron_Scene.active.root,mat,link)}return res}static getObjectFloatLink(object,mat,link){let material=armory_trait_internal_UniformsManager.floatsMap.h[object.__id__];if(material==null){return null}let entry=material.h[mat.__id__];if(entry==null){return null}return entry.h[link]}static vec3Link(object,mat,link){if(object==null||mat==null){return null}let res=armory_trait_internal_UniformsManager.getObjectVec3Link(object,mat,link);if(res==null){res=armory_trait_internal_UniformsManager.getObjectVec3Link(iron_Scene.active.root,mat,link)}return res}static getObjectVec3Link(object,mat,link){let material=armory_trait_internal_UniformsManager.vectorsMap.h[object.__id__];if(material==null){return null}let entry=material.h[mat.__id__];if(entry==null){return null}return entry.h[link]}static textureLink(object,mat,link){if(object==null||mat==null){return null}let res=armory_trait_internal_UniformsManager.getObjectTextureLink(object,mat,link);if(res==null){res=armory_trait_internal_UniformsManager.getObjectTextureLink(iron_Scene.active.root,mat,link)}return res}static getObjectTextureLink(object,mat,link){let material=armory_trait_internal_UniformsManager.texturesMap.h[object.__id__];if(material==null){return null}let entry=material.h[mat.__id__];if(entry==null){return null}return entry.h[link]}static getFloatsMap(){return armory_trait_internal_UniformsManager.floatsMap}static getVectorsMap(){return armory_trait_internal_UniformsManager.vectorsMap}static getTexturesMap(){return armory_trait_internal_UniformsManager.texturesMap}static removeObjectFromAllMaps(object){armory_trait_internal_UniformsManager.floatsMap.remove(object);armory_trait_internal_UniformsManager.vectorsMap.remove(object);armory_trait_internal_UniformsManager.texturesMap.remove(object)}static removeObjectFromMap(object,type){switch(type){case 0:armory_trait_internal_UniformsManager.floatsMap.remove(object);break;case 1:armory_trait_internal_UniformsManager.vectorsMap.remove(object);break;case 2:armory_trait_internal_UniformsManager.texturesMap.remove(object);break}}static removeFloatValue(object,mat,link){let material=armory_trait_internal_UniformsManager.floatsMap.h[object.__id__];if(material==null){return}let entry=material.h[mat.__id__];if(entry==null){return}if(Object.prototype.hasOwnProperty.call(entry.h,link)){delete entry.h[link]}let h=entry.h;let inlStringMapKeyIterator_h=h;let inlStringMapKeyIterator_keys=Object.keys(h);let inlStringMapKeyIterator_length=inlStringMapKeyIterator_keys.length;let inlStringMapKeyIterator_current=0;if(inlStringMapKeyIterator_current>=inlStringMapKeyIterator_length){material.remove(mat)}if(!material.keys().hasNext()){armory_trait_internal_UniformsManager.floatsMap.remove(object)}}static removeVectorValue(object,mat,link){let material=armory_trait_internal_UniformsManager.vectorsMap.h[object.__id__];if(material==null){return}let entry=material.h[mat.__id__];if(entry==null){return}if(Object.prototype.hasOwnProperty.call(entry.h,link)){delete entry.h[link]}let h=entry.h;let inlStringMapKeyIterator_h=h;let inlStringMapKeyIterator_keys=Object.keys(h);let inlStringMapKeyIterator_length=inlStringMapKeyIterator_keys.length;let inlStringMapKeyIterator_current=0;if(inlStringMapKeyIterator_current>=inlStringMapKeyIterator_length){material.remove(mat)}if(!material.keys().hasNext()){armory_trait_internal_UniformsManager.vectorsMap.remove(object)}}static removeTextureValue(object,mat,link){let material=armory_trait_internal_UniformsManager.texturesMap.h[object.__id__];if(material==null){return}let entry=material.h[mat.__id__];if(entry==null){return}if(Object.prototype.hasOwnProperty.call(entry.h,link)){delete entry.h[link]}let h=entry.h;let inlStringMapKeyIterator_h=h;let inlStringMapKeyIterator_keys=Object.keys(h);let inlStringMapKeyIterator_length=inlStringMapKeyIterator_keys.length;let inlStringMapKeyIterator_current=0;if(inlStringMapKeyIterator_current>=inlStringMapKeyIterator_length){material.remove(mat)}if(!material.keys().hasNext()){armory_trait_internal_UniformsManager.texturesMap.remove(object)}}}$hxClasses["armory.trait.internal.UniformsManager"]=armory_trait_internal_UniformsManager;armory_trait_internal_UniformsManager.__name__=true;armory_trait_internal_UniformsManager.__super__=iron_Trait;Object.assign(armory_trait_internal_UniformsManager.prototype,{__class__:armory_trait_internal_UniformsManager});class armory_trait_physics_PhysicsWorld extends iron_Trait{constructor(){super()}}$hxClasses["armory.trait.physics.PhysicsWorld"]=armory_trait_physics_PhysicsWorld;armory_trait_physics_PhysicsWorld.__name__=true;armory_trait_physics_PhysicsWorld.__super__=iron_Trait;Object.assign(armory_trait_physics_PhysicsWorld.prototype,{__class__:armory_trait_physics_PhysicsWorld});class haxe_IMap{}$hxClasses["haxe.IMap"]=haxe_IMap;haxe_IMap.__name__=true;haxe_IMap.__isInterface__=true;class haxe_Log{static formatOutput(v,infos){let str=Std.string(v);if(infos==null){return str}let pstr=infos.fileName+":"+infos.lineNumber;if(infos.customParams!=null){let _g=0;let _g1=infos.customParams;while(_g<_g1.length){let v=_g1[_g];++_g;str+=", "+Std.string(v)}}return pstr+": "+str}static trace(v,infos){let str=haxe_Log.formatOutput(v,infos);if(typeof console!="undefined"&&console.log!=null){console.log(str)}}}$hxClasses["haxe.Log"]=haxe_Log;haxe_Log.__name__=true;class haxe__$Unserializer_DefaultResolver{constructor(){}resolveClass(name){return $hxClasses[name]}resolveEnum(name){return $hxEnums[name]}}$hxClasses["haxe._Unserializer.DefaultResolver"]=haxe__$Unserializer_DefaultResolver;haxe__$Unserializer_DefaultResolver.__name__=true;Object.assign(haxe__$Unserializer_DefaultResolver.prototype,{__class__:haxe__$Unserializer_DefaultResolver});class haxe_Unserializer{constructor(buf){this.buf=buf;this.length=this.buf.length;this.pos=0;this.scache=[];this.cache=[];let r=haxe_Unserializer.DEFAULT_RESOLVER;if(r==null){r=new haxe__$Unserializer_DefaultResolver;haxe_Unserializer.DEFAULT_RESOLVER=r}this.resolver=r}readDigits(){let k=0;let s=false;let fpos=this.pos;while(true){let c=this.buf.charCodeAt(this.pos);if(c!=c){break}if(c==45){if(this.pos!=fpos){break}s=true;this.pos++;continue}if(c<48||c>57){break}k=k*10+(c-48);this.pos++}if(s){k*=-1}return k}readFloat(){let p1=this.pos;while(true){let c=this.buf.charCodeAt(this.pos);if(c!=c){break}if(c>=43&&c<58||c==101||c==69){this.pos++}else{break}}return parseFloat(HxOverrides.substr(this.buf,p1,this.pos-p1))}unserializeObject(o){while(true){if(this.pos>=this.length){throw haxe_Exception.thrown("Invalid object")}if(this.buf.charCodeAt(this.pos)==103){break}let k=this.unserialize();if(typeof k!="string"){throw haxe_Exception.thrown("Invalid object key")}let v=this.unserialize();o[k]=v}this.pos++}unserializeEnum(edecl,tag){if(this.buf.charCodeAt(this.pos++)!=58){throw haxe_Exception.thrown("Invalid enum format")}let nargs=this.readDigits();if(nargs==0){return Type.createEnum(edecl,tag)}let args=[];while(nargs-- >0)args.push(this.unserialize());return Type.createEnum(edecl,tag,args)}unserialize(){switch(this.buf.charCodeAt(this.pos++)){case 65:let name=this.unserialize();let cl=this.resolver.resolveClass(name);if(cl==null){throw haxe_Exception.thrown("Class not found "+name)}return cl;case 66:let name1=this.unserialize();let e=this.resolver.resolveEnum(name1);if(e==null){throw haxe_Exception.thrown("Enum not found "+name1)}return e;case 67:let name2=this.unserialize();let cl1=this.resolver.resolveClass(name2);if(cl1==null){throw haxe_Exception.thrown("Class not found "+name2)}let o=Object.create(cl1.prototype);this.cache.push(o);o.hxUnserialize(this);if(this.buf.charCodeAt(this.pos++)!=103){throw haxe_Exception.thrown("Invalid custom data")}return o;case 77:let h=new haxe_ds_ObjectMap;this.cache.push(h);let buf=this.buf;while(this.buf.charCodeAt(this.pos)!=104){let s=this.unserialize();h.set(s,this.unserialize())}this.pos++;return h;case 82:let n=this.readDigits();if(n<0||n>=this.scache.length){throw haxe_Exception.thrown("Invalid string reference")}return this.scache[n];case 97:let buf1=this.buf;let a=[];this.cache.push(a);while(true){let c=this.buf.charCodeAt(this.pos);if(c==104){this.pos++;break}if(c==117){this.pos++;let n=this.readDigits();a[a.length+n-1]=null}else{a.push(this.unserialize())}}return a;case 98:let h1=new haxe_ds_StringMap;this.cache.push(h1);let buf2=this.buf;while(this.buf.charCodeAt(this.pos)!=104){let s=this.unserialize();let value=this.unserialize();h1.h[s]=value}this.pos++;return h1;case 99:let name3=this.unserialize();let cl2=this.resolver.resolveClass(name3);if(cl2==null){throw haxe_Exception.thrown("Class not found "+name3)}let o1=Object.create(cl2.prototype);this.cache.push(o1);this.unserializeObject(o1);return o1;case 100:return this.readFloat();case 102:return false;case 105:return this.readDigits();case 106:let name4=this.unserialize();let edecl=this.resolver.resolveEnum(name4);if(edecl==null){throw haxe_Exception.thrown("Enum not found "+name4)}this.pos++;let index=this.readDigits();let _this=edecl.__constructs__;let result=new Array(_this.length);let _g=0;let _g1=_this.length;while(_g<_g1){let i=_g++;result[i]=_this[i]._hx_name}let tag=result[index];if(tag==null){throw haxe_Exception.thrown("Unknown enum index "+name4+"@"+index)}let e1=this.unserializeEnum(edecl,tag);this.cache.push(e1);return e1;case 107:return NaN;case 108:let l=new haxe_ds_List;this.cache.push(l);let buf3=this.buf;while(this.buf.charCodeAt(this.pos)!=104)l.add(this.unserialize());this.pos++;return l;case 109:return-Infinity;case 110:return null;case 111:let o2={};this.cache.push(o2);this.unserializeObject(o2);return o2;case 112:return Infinity;case 113:let h2=new haxe_ds_IntMap;this.cache.push(h2);let buf4=this.buf;let c=this.buf.charCodeAt(this.pos++);while(c==58){let i=this.readDigits();let value=this.unserialize();h2.h[i]=value;c=this.buf.charCodeAt(this.pos++)}if(c!=104){throw haxe_Exception.thrown("Invalid IntMap format")}return h2;case 114:let n1=this.readDigits();if(n1<0||n1>=this.cache.length){throw haxe_Exception.thrown("Invalid reference")}return this.cache[n1];case 115:let len=this.readDigits();let buf5=this.buf;if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<len){throw haxe_Exception.thrown("Invalid bytes length")}let codes=haxe_Unserializer.CODES;if(codes==null){codes=haxe_Unserializer.initCodes();haxe_Unserializer.CODES=codes}let i=this.pos;let rest=len&3;let size=(len>>2)*3+(rest>=2?rest-1:0);let max=i+(len-rest);let bytes=new haxe_io_Bytes(new ArrayBuffer(size));let bpos=0;while(i<max){let c1=codes[buf5.charCodeAt(i++)];let c2=codes[buf5.charCodeAt(i++)];bytes.b[bpos++]=c1<<2|c2>>4;let c3=codes[buf5.charCodeAt(i++)];bytes.b[bpos++]=c2<<4|c3>>2;let c4=codes[buf5.charCodeAt(i++)];bytes.b[bpos++]=c3<<6|c4}if(rest>=2){let c1=codes[buf5.charCodeAt(i++)];let c2=codes[buf5.charCodeAt(i++)];bytes.b[bpos++]=c1<<2|c2>>4;if(rest==3){let c3=codes[buf5.charCodeAt(i++)];bytes.b[bpos++]=c2<<4|c3>>2}}this.pos+=len;this.cache.push(bytes);return bytes;case 116:return true;case 118:let d;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&this.buf.charCodeAt(this.pos+4)==45){d=HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19));this.pos+=19}else{d=new Date(this.readFloat())}this.cache.push(d);return d;case 119:let name5=this.unserialize();let edecl1=this.resolver.resolveEnum(name5);if(edecl1==null){throw haxe_Exception.thrown("Enum not found "+name5)}let e2=this.unserializeEnum(edecl1,this.unserialize());this.cache.push(e2);return e2;case 120:throw haxe_Exception.thrown(this.unserialize());case 121:let len1=this.readDigits();if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<len1){throw haxe_Exception.thrown("Invalid string length")}let s=HxOverrides.substr(this.buf,this.pos,len1);this.pos+=len1;s=decodeURIComponent(s.split("+").join(" "));this.scache.push(s);return s;case 122:return 0;default:}this.pos--;throw haxe_Exception.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)}static initCodes(){let codes=[];let _g=0;let _g1=haxe_Unserializer.BASE64.length;while(_g<_g1){let i=_g++;codes[haxe_Unserializer.BASE64.charCodeAt(i)]=i}return codes}static run(v){return new haxe_Unserializer(v).unserialize()}}$hxClasses["haxe.Unserializer"]=haxe_Unserializer;haxe_Unserializer.__name__=true;Object.assign(haxe_Unserializer.prototype,{__class__:haxe_Unserializer});class haxe_ValueException extends haxe_Exception{constructor(value,previous,native){super(String(value),previous,native);this.value=value}unwrap(){return this.value}}$hxClasses["haxe.ValueException"]=haxe_ValueException;haxe_ValueException.__name__=true;haxe_ValueException.__super__=haxe_Exception;Object.assign(haxe_ValueException.prototype,{__class__:haxe_ValueException});class haxe_ds_IntMap{constructor(){this.h={}}}$hxClasses["haxe.ds.IntMap"]=haxe_ds_IntMap;haxe_ds_IntMap.__name__=true;haxe_ds_IntMap.__interfaces__=[haxe_IMap];Object.assign(haxe_ds_IntMap.prototype,{__class__:haxe_ds_IntMap});class haxe_ds_List{constructor(){this.length=0}add(item){let x=new haxe_ds__$List_ListNode(item,null);if(this.h==null){this.h=x}else{this.q.next=x}this.q=x;this.length++}}$hxClasses["haxe.ds.List"]=haxe_ds_List;haxe_ds_List.__name__=true;Object.assign(haxe_ds_List.prototype,{__class__:haxe_ds_List});class haxe_ds__$List_ListNode{constructor(item,next){this.item=item;this.next=next}}$hxClasses["haxe.ds._List.ListNode"]=haxe_ds__$List_ListNode;haxe_ds__$List_ListNode.__name__=true;Object.assign(haxe_ds__$List_ListNode.prototype,{__class__:haxe_ds__$List_ListNode});class haxe_ds_ObjectMap{constructor(){this.h={__keys__:{}}}set(key,value){let id=key.__id__;if(id==null){id=key.__id__=$global.$haxeUID++}this.h[id]=value;this.h.__keys__[id]=key}remove(key){let id=key.__id__;if(this.h.__keys__[id]==null){return false}delete this.h[id];delete this.h.__keys__[id];return true}keys(){let a=[];for(var key in this.h.__keys__){if(this.h.hasOwnProperty(key)){a.push(this.h.__keys__[key])}}return new haxe_iterators_ArrayIterator(a)}}$hxClasses["haxe.ds.ObjectMap"]=haxe_ds_ObjectMap;haxe_ds_ObjectMap.__name__=true;haxe_ds_ObjectMap.__interfaces__=[haxe_IMap];Object.assign(haxe_ds_ObjectMap.prototype,{__class__:haxe_ds_ObjectMap});class haxe_ds_StringMap{constructor(){this.h=Object.create(null)}}$hxClasses["haxe.ds.StringMap"]=haxe_ds_StringMap;haxe_ds_StringMap.__name__=true;haxe_ds_StringMap.__interfaces__=[haxe_IMap];Object.assign(haxe_ds_StringMap.prototype,{__class__:haxe_ds_StringMap});class haxe_exceptions_NotImplementedException extends haxe_exceptions_PosException{constructor(message,previous,pos){if(message==null){message="Not implemented"}super(message,previous,pos)}}$hxClasses["haxe.exceptions.NotImplementedException"]=haxe_exceptions_NotImplementedException;haxe_exceptions_NotImplementedException.__name__=true;haxe_exceptions_NotImplementedException.__super__=haxe_exceptions_PosException;Object.assign(haxe_exceptions_NotImplementedException.prototype,{__class__:haxe_exceptions_NotImplementedException});class haxe_io_Bytes{constructor(data){this.length=data.byteLength;this.b=new Uint8Array(data);this.b.bufferValue=data;data.hxBytes=this;data.bytes=this.b}getFloat(pos){if(this.data==null){this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)}return this.data.getFloat32(pos,true)}getString(pos,len,encoding){if(pos<0||len<0||pos+len>this.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}if(encoding==null){encoding=haxe_io_Encoding.UTF8}let s="";let b=this.b;let i=pos;let max=pos+len;switch(encoding._hx_index){case 0:let debug=pos>0;while(i<max){let c=b[i++];if(c<128){if(c==0){break}s+=String.fromCodePoint(c)}else if(c<224){let code=(c&63)<<6|b[i++]&127;s+=String.fromCodePoint(code)}else if(c<240){let c2=b[i++];let code=(c&31)<<12|(c2&127)<<6|b[i++]&127;s+=String.fromCodePoint(code)}else{let c2=b[i++];let c3=b[i++];let u=(c&15)<<18|(c2&127)<<12|(c3&127)<<6|b[i++]&127;s+=String.fromCodePoint(u)}}break;case 1:while(i<max){let c=b[i++]|b[i++]<<8;s+=String.fromCodePoint(c)}break}return s}toString(){return this.getString(0,this.length)}static ofData(b){let hb=b.hxBytes;if(hb!=null){return hb}return new haxe_io_Bytes(b)}}$hxClasses["haxe.io.Bytes"]=haxe_io_Bytes;haxe_io_Bytes.__name__=true;Object.assign(haxe_io_Bytes.prototype,{__class__:haxe_io_Bytes});class haxe_io_BytesBuffer{constructor(){this.pos=0;this.size=0}addByte(byte){if(this.pos==this.size){this.grow(1)}this.view.setUint8(this.pos++,byte)}addBytes(src,pos,len){if(pos<0||len<0||pos+len>src.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}if(this.pos+len>this.size){this.grow(len)}if(this.size==0){return}let sub=new Uint8Array(src.b.buffer,src.b.byteOffset+pos,len);this.u8.set(sub,this.pos);this.pos+=len}grow(delta){let req=this.pos+delta;let nsize=this.size==0?16:this.size;while(nsize<req)nsize=nsize*3>>1;let nbuf=new ArrayBuffer(nsize);let nu8=new Uint8Array(nbuf);if(this.size>0){nu8.set(this.u8)}this.size=nsize;this.buffer=nbuf;this.u8=nu8;this.view=new DataView(this.buffer)}getBytes(){if(this.size==0){return new haxe_io_Bytes(new ArrayBuffer(0))}let b=new haxe_io_Bytes(this.buffer);b.length=this.pos;return b}}$hxClasses["haxe.io.BytesBuffer"]=haxe_io_BytesBuffer;haxe_io_BytesBuffer.__name__=true;Object.assign(haxe_io_BytesBuffer.prototype,{__class__:haxe_io_BytesBuffer});class haxe_io_Input{readByte(){throw new haxe_exceptions_NotImplementedException(null,null,{fileName:"haxe/io/Input.hx",lineNumber:53,className:"haxe.io.Input",methodName:"readByte"})}readBytes(s,pos,len){let k=len;let b=s.b;if(pos<0||len<0||pos+len>s.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}try{while(k>0){b[pos]=this.readByte();++pos;--k}}catch(_g){if(!(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof)){throw _g}}return len-k}set_bigEndian(b){this.bigEndian=b;return b}readFullBytes(s,pos,len){while(len>0){let k=this.readBytes(s,pos,len);if(k==0){throw haxe_Exception.thrown(haxe_io_Error.Blocked)}pos+=k;len-=k}}read(nbytes){let s=new haxe_io_Bytes(new ArrayBuffer(nbytes));let p=0;while(nbytes>0){let k=this.readBytes(s,p,nbytes);if(k==0){throw haxe_Exception.thrown(haxe_io_Error.Blocked)}p+=k;nbytes-=k}return s}readFloat(){return haxe_io_FPHelper.i32ToFloat(this.readInt32())}readInt8(){let n=this.readByte();if(n>=128){return n-256}return n}readInt16(){let ch1=this.readByte();let ch2=this.readByte();let n=this.bigEndian?ch2|ch1<<8:ch1|ch2<<8;if((n&32768)!=0){return n-65536}return n}readUInt16(){let ch1=this.readByte();let ch2=this.readByte();if(this.bigEndian){return ch2|ch1<<8}else{return ch1|ch2<<8}}readInt32(){let ch1=this.readByte();let ch2=this.readByte();let ch3=this.readByte();let ch4=this.readByte();if(this.bigEndian){return ch4|ch3<<8|ch2<<16|ch1<<24}else{return ch1|ch2<<8|ch3<<16|ch4<<24}}readString(len,encoding){let b=new haxe_io_Bytes(new ArrayBuffer(len));this.readFullBytes(b,0,len);return b.getString(0,len,encoding)}}$hxClasses["haxe.io.Input"]=haxe_io_Input;haxe_io_Input.__name__=true;Object.assign(haxe_io_Input.prototype,{__class__:haxe_io_Input,__properties__:{set_bigEndian:"set_bigEndian"}});class haxe_io_BytesInput extends haxe_io_Input{constructor(b,pos,len){super();if(pos==null){pos=0}if(len==null){len=b.length-pos}if(pos<0||len<0||pos+len>b.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}this.b=b.b;this.pos=pos;this.len=len;this.totlen=len}set_position(p){if(p<0){p=0}else if(p>this.totlen){p=this.totlen}this.len=this.totlen-p;return this.pos=p}readByte(){if(this.len==0){throw haxe_Exception.thrown(new haxe_io_Eof)}this.len--;return this.b[this.pos++]}readBytes(buf,pos,len){if(pos<0||len<0||pos+len>buf.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}if(this.len==0&&len>0){throw haxe_Exception.thrown(new haxe_io_Eof)}if(this.len<len){len=this.len}let b1=this.b;let b2=buf.b;let _g=0;let _g1=len;while(_g<_g1){let i=_g++;b2[pos+i]=b1[this.pos+i]}this.pos+=len;this.len-=len;return len}}$hxClasses["haxe.io.BytesInput"]=haxe_io_BytesInput;haxe_io_BytesInput.__name__=true;haxe_io_BytesInput.__super__=haxe_io_Input;Object.assign(haxe_io_BytesInput.prototype,{__class__:haxe_io_BytesInput,__properties__:Object.assign({},haxe_io_Input.prototype.__properties__,{set_position:"set_position"})});class haxe_io_Output{writeByte(c){throw new haxe_exceptions_NotImplementedException(null,null,{fileName:"haxe/io/Output.hx",lineNumber:47,className:"haxe.io.Output",methodName:"writeByte"})}writeBytes(s,pos,len){if(pos<0||len<0||pos+len>s.length){throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds)}let b=s.b;let k=len;while(k>0){this.writeByte(b[pos]);++pos;--k}return len}write(s){let l=s.length;let p=0;while(l>0){let k=this.writeBytes(s,p,l);if(k==0){throw haxe_Exception.thrown(haxe_io_Error.Blocked)}p+=k;l-=k}}writeFloat(x){this.writeInt32(haxe_io_FPHelper.floatToI32(x))}writeInt32(x){if(this.bigEndian){this.writeByte(x>>>24);this.writeByte(x>>16&255);this.writeByte(x>>8&255);this.writeByte(x&255)}else{this.writeByte(x&255);this.writeByte(x>>8&255);this.writeByte(x>>16&255);this.writeByte(x>>>24)}}}$hxClasses["haxe.io.Output"]=haxe_io_Output;haxe_io_Output.__name__=true;Object.assign(haxe_io_Output.prototype,{__class__:haxe_io_Output});class haxe_io_BytesOutput extends haxe_io_Output{constructor(){super();this.b=new haxe_io_BytesBuffer}writeByte(c){this.b.addByte(c)}writeBytes(buf,pos,len){this.b.addBytes(buf,pos,len);return len}getBytes(){return this.b.getBytes()}}$hxClasses["haxe.io.BytesOutput"]=haxe_io_BytesOutput;haxe_io_BytesOutput.__name__=true;haxe_io_BytesOutput.__super__=haxe_io_Output;Object.assign(haxe_io_BytesOutput.prototype,{__class__:haxe_io_BytesOutput});var haxe_io_Encoding=$hxEnums["haxe.io.Encoding"]={__ename__:true,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}};haxe_io_Encoding.__constructs__=[haxe_io_Encoding.UTF8,haxe_io_Encoding.RawNative];class haxe_io_Eof{constructor(){}toString(){return"Eof"}}$hxClasses["haxe.io.Eof"]=haxe_io_Eof;haxe_io_Eof.__name__=true;Object.assign(haxe_io_Eof.prototype,{__class__:haxe_io_Eof});var haxe_io_Error=$hxEnums["haxe.io.Error"]={__ename__:true,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:$estr},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:$estr},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:$estr},Custom:($_=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}},$_._hx_name="Custom",$_.__params__=["e"],$_)};haxe_io_Error.__constructs__=[haxe_io_Error.Blocked,haxe_io_Error.Overflow,haxe_io_Error.OutsideBounds,haxe_io_Error.Custom];class haxe_io_FPHelper{static i32ToFloat(i){haxe_io_FPHelper.helper.setInt32(0,i,true);return haxe_io_FPHelper.helper.getFloat32(0,true)}static floatToI32(f){haxe_io_FPHelper.helper.setFloat32(0,f,true);return haxe_io_FPHelper.helper.getInt32(0,true)}}$hxClasses["haxe.io.FPHelper"]=haxe_io_FPHelper;haxe_io_FPHelper.__name__=true;class haxe_iterators_ArrayIterator{constructor(array){this.current=0;this.array=array}hasNext(){return this.current<this.array.length}next(){return this.array[this.current++]}}$hxClasses["haxe.iterators.ArrayIterator"]=haxe_iterators_ArrayIterator;haxe_iterators_ArrayIterator.__name__=true;Object.assign(haxe_iterators_ArrayIterator.prototype,{__class__:haxe_iterators_ArrayIterator});class iron_App{constructor(done){done();kha_System.notifyOnFrames(iron_App.render);kha_Scheduler.addTimeTask(iron_App.update,0,iron_system_Time.get_delta())}static w(){return kha_System.windowWidth()}static h(){return kha_System.windowHeight()}static x(){return 0}static y(){return 0}static init(done){new iron_App(done)}static update(){if(iron_Scene.active==null||!iron_Scene.active.ready){return}if(iron_App.pauseUpdates){return}iron_Scene.active.updateFrame();let i=0;let l=iron_App.traitUpdates.length;while(i<l){if(iron_App.traitInits.length>0){let _g=0;let _g1=iron_App.traitInits;while(_g<_g1.length){let f=_g1[_g];++_g;if(iron_App.traitInits.length>0){f()}else{break}}iron_App.traitInits.splice(0,iron_App.traitInits.length)}iron_App.traitUpdates[i]();if(l<=iron_App.traitUpdates.length){++i}else{l=iron_App.traitUpdates.length}}i=0;l=iron_App.traitLateUpdates.length;while(i<l){iron_App.traitLateUpdates[i]();if(l<=iron_App.traitLateUpdates.length){++i}else{l=iron_App.traitLateUpdates.length}}if(iron_App.onEndFrames!=null){let _g=0;let _g1=iron_App.onEndFrames;while(_g<_g1.length){let f=_g1[_g];++_g;f()}}if(iron_App.lastw==-1){iron_App.lastw=iron_App.w();iron_App.lasth=iron_App.h()}if(iron_App.lastw!=iron_App.w()||iron_App.lasth!=iron_App.h()){if(iron_App.onResize!=null){iron_App.onResize()}else if(iron_Scene.active!=null&&iron_Scene.active.camera!=null){iron_Scene.active.camera.buildProjection()}}iron_App.lastw=iron_App.w();iron_App.lasth=iron_App.h()}static render(frames){let frame=frames[0];iron_App.framebuffer=frame;iron_system_Time.update();if(iron_Scene.active==null||!iron_Scene.active.ready){iron_App.render2D(frame);return}if(iron_App.traitInits.length>0){let _g=0;let _g1=iron_App.traitInits;while(_g<_g1.length){let f=_g1[_g];++_g;if(iron_App.traitInits.length>0){f()}else{break}}iron_App.traitInits.splice(0,iron_App.traitInits.length)}iron_Scene.active.renderFrame(frame.get_g4());let _g=0;let _g1=iron_App.traitRenders;while(_g<_g1.length){let f=_g1[_g];++_g;if(iron_App.traitRenders.length>0){f(frame.get_g4())}else{break}}iron_App.render2D(frame)}static render2D(frame){if(iron_App.traitRenders2D.length>0){frame.get_g2().begin(false);let _g=0;let _g1=iron_App.traitRenders2D;while(_g<_g1.length){let f=_g1[_g];++_g;if(iron_App.traitRenders2D.length>0){f(frame.get_g2())}else{break}}frame.get_g2().end()}}static notifyOnInit(f){iron_App.traitInits.push(f)}static removeInit(f){HxOverrides.remove(iron_App.traitInits,f)}static notifyOnUpdate(f){iron_App.traitUpdates.push(f)}static removeUpdate(f){HxOverrides.remove(iron_App.traitUpdates,f)}static notifyOnLateUpdate(f){iron_App.traitLateUpdates.push(f)}static removeLateUpdate(f){HxOverrides.remove(iron_App.traitLateUpdates,f)}static removeRender(f){HxOverrides.remove(iron_App.traitRenders,f)}static notifyOnRender2D(f){iron_App.traitRenders2D.push(f)}static removeRender2D(f){HxOverrides.remove(iron_App.traitRenders2D,f)}static notifyOnReset(f){if(iron_App.onResets==null){iron_App.onResets=[]}iron_App.onResets.push(f)}static notifyOnEndFrame(f){if(iron_App.onEndFrames==null){iron_App.onEndFrames=[]}iron_App.onEndFrames.push(f)}}$hxClasses["iron.App"]=iron_App;iron_App.__name__=true;Object.assign(iron_App.prototype,{__class__:iron_App});class iron_RenderPath{constructor(){this.depthBuffers=[];this.cachedShaderContexts=new haxe_ds_StringMap;this.loading=0;this.lastFrameTime=0;this.viewportScaled=false;this.scissorSet=false;this.lastH=0;this.lastW=0;this.depthToRenderTarget=new haxe_ds_StringMap;this.renderTargets=new haxe_ds_StringMap;this.setupDepthTexture=null;this.commands=null;this.paused=false;this.drawOrder=0;this.currentG=null;this.isProbe=false;this.isProbeCube=false;this.isProbePlanar=false;this.point=null;this.sun=null;this.light=null;this.currentTarget=null;this.frame=0;this.frameTime=0;this.frameScissorH=0;this.frameScissorW=0;this.frameScissorY=0;this.frameScissorX=0;this.frameScissor=false}get_ready(){return this.loading==0}renderFrame(g){if(!this.get_ready()||this.paused||iron_App.w()==0||iron_App.h()==0){return}if(this.lastW>0&&(this.lastW!=iron_App.w()||this.lastH!=iron_App.h())){this.resize()}this.lastW=iron_App.w();this.lastH=iron_App.h();this.frameTime=kha_Scheduler.time()-this.lastFrameTime;this.lastFrameTime=kha_Scheduler.time();let cam=iron_Scene.active.camera;this.isProbePlanar=cam!=null&&cam.renderTarget!=null;this.isProbeCube=cam!=null&&cam.renderTargetCube!=null;this.isProbe=this.isProbePlanar||this.isProbeCube;if(this.isProbePlanar){this.frameG=cam.renderTarget.get_g4()}else if(this.isProbeCube){this.frameG=cam.renderTargetCube.get_g4()}else{this.frameG=g}this.currentW=iron_App.w();this.currentH=iron_App.h();this.currentD=1;this.currentFace=-1;this.meshesSorted=false;let _g=0;let _g1=iron_Scene.active.lights;while(_g<_g1.length){let l=_g1[_g];++_g;if(l.visible){l.buildMatrix(iron_Scene.active.camera)}if(l.data.raw.type=="sun"){this.sun=l}else{this.point=l}}this.light=iron_Scene.active.lights[0];this.commands();if(!this.isProbe){this.frame++}}setTarget(target,additional,viewportScale){if(viewportScale==null){viewportScale=1}if(target==""){this.currentD=1;this.currentTarget=null;this.currentFace=-1;if(this.isProbeCube){this.currentW=iron_Scene.active.camera.renderTargetCube.get_width();this.currentH=iron_Scene.active.camera.renderTargetCube.get_height();let g=this.frameG;let additionalRenderTargets=null;let face=iron_Scene.active.camera.currentFace;if(face==null){face=-1}if(this.currentG!=null){if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}this.currentG=g;this.additionalTargets=additionalRenderTargets;if(face>=0){g.beginFace(face)}else{g.begin(additionalRenderTargets)}}else{this.currentW=iron_App.w();this.currentH=iron_App.h();if(this.frameScissor){this.setFrameScissor()}let g=this.frameG;let additionalRenderTargets=null;if(this.currentG!=null){if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}this.currentG=g;this.additionalTargets=additionalRenderTargets;g.begin(additionalRenderTargets);if(!this.isProbe){this.setCurrentViewport(iron_App.w(),iron_App.h());this.setCurrentScissor(iron_App.w(),iron_App.h())}}}else{let rt=this.renderTargets.h[target];this.currentTarget=rt;let additionalImages=null;if(additional!=null){additionalImages=[];let _g=0;while(_g<additional.length){let s=additional[_g];++_g;let t=this.renderTargets.h[s];additionalImages.push(t.image)}}let targetG=rt.isCubeMap?rt.cubeMap.get_g4():rt.image.get_g4();this.currentW=rt.isCubeMap?rt.cubeMap.get_width():rt.image.get_width();this.currentH=rt.isCubeMap?rt.cubeMap.get_height():rt.image.get_height();if(rt.is3D){this.currentD=rt.image.get_depth()}let face=this.currentFace;if(face==null){face=-1}if(this.currentG!=null){if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}this.currentG=targetG;this.additionalTargets=additionalImages;if(face>=0){targetG.beginFace(face)}else{targetG.begin(additionalImages)}}if(viewportScale!=1){this.viewportScaled=true;let viewW=this.currentW*viewportScale|0;let viewH=this.currentH*viewportScale|0;this.currentG.viewport(0,viewH,viewW,viewH);this.currentG.scissor(0,viewH,viewW,viewH)}else if(this.viewportScaled){this.viewportScaled=false;this.setCurrentViewport(this.currentW,this.currentH);this.setCurrentScissor(this.currentW,this.currentH)}this.bindParams=null}setDepthFrom(target,from){let rt=this.renderTargets.h[target];rt.image.setDepthStencilFrom(this.renderTargets.h[from].image)}setCurrentViewport(viewW,viewH){this.currentG.viewport(iron_App.x(),this.currentH-(viewH-iron_App.y()),viewW,viewH)}setCurrentScissor(viewW,viewH){this.currentG.scissor(iron_App.x(),this.currentH-(viewH-iron_App.y()),viewW,viewH);this.scissorSet=true}setFrameScissor(){this.frameG.scissor(this.frameScissorX,this.currentH-(this.frameScissorH-this.frameScissorY),this.frameScissorW,this.frameScissorH)}clearTarget(colorFlag,depthFlag){if(colorFlag==-1){if(iron_Scene.active.world!=null){colorFlag=iron_Scene.active.world.raw.background_color}else if(iron_Scene.active.camera!=null){let cc=iron_Scene.active.camera.data.raw.clear_color;if(cc!=null){colorFlag=kha_Color.fromFloats(cc.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),cc.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),cc.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN))}}}this.currentG.clear(colorFlag,depthFlag,null)}drawMeshes(context){let isShadows=context=="shadowmap";if(isShadows){if(this.light==null||!this.light.data.raw.cast_shadow||!this.light.visible||this.light.data.raw.strength==0){return}}if(this.currentFace>=0&&this.light!=null){this.light.setCubeFace(this.currentFace,iron_Scene.active.camera)}let drawn=false;if(isShadows&&this.light.data.raw.type=="sun"){let step=this.currentH;let _g=0;let _g1=iron_object_LightObject.cascadeCount;while(_g<_g1){let i=_g++;this.light.setCascade(iron_Scene.active.camera,i);this.currentG.viewport(i*step,0,step,step);this.submitDraw(context)}drawn=true}if(!drawn){this.submitDraw(context)}if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}submitDraw(context){let camera=iron_Scene.active.camera;let meshes=iron_Scene.active.meshes;iron_object_MeshObject.lastPipeline=null;if(!this.meshesSorted&&camera!=null){let camX=camera.transform.world.self._30;let camY=camera.transform.world.self._31;let camZ=camera.transform.world.self._32;let _g=0;while(_g<meshes.length){let mesh=meshes[_g];++_g;let vx=camX-mesh.transform.world.self._30;let vy=camY-mesh.transform.world.self._31;let vz=camZ-mesh.transform.world.self._32;mesh.cameraDistance=Math.sqrt(vx*vx+vy*vy+vz*vz)}if(this.drawOrder==1){iron_RenderPath.sortMeshesShader(meshes)}else{iron_RenderPath.sortMeshesDistance(meshes)}this.meshesSorted=true}let g=this.currentG;let _bindParams=this.bindParams;let _g=0;while(_g<meshes.length){let m=meshes[_g];++_g;m.render(g,context,_bindParams)}}drawSkydome(handle){if(iron_data_ConstData.skydomeVB==null){iron_data_ConstData.createSkydomeData()}let cc=this.cachedShaderContexts.h[handle];if(cc.context==null){return}this.currentG.setPipeline(cc.context.pipeState);iron_object_Uniforms.setContextConstants(this.currentG,cc.context,this.bindParams);iron_object_Uniforms.setObjectConstants(this.currentG,cc.context,null);this.currentG.setVertexBuffer(iron_data_ConstData.skydomeVB);this.currentG.setIndexBuffer(iron_data_ConstData.skydomeIB);this.currentG.drawIndexedVertices();if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}bindTarget(target,uniform){if(this.bindParams!=null){this.bindParams.push(target);this.bindParams.push(uniform)}else{this.bindParams=[target,uniform]}}drawShader(handle){let cc=this.cachedShaderContexts.h[handle];if(iron_data_ConstData.screenAlignedVB==null){iron_data_ConstData.createScreenAlignedData()}this.currentG.setPipeline(cc.context.pipeState);iron_object_Uniforms.setContextConstants(this.currentG,cc.context,this.bindParams);iron_object_Uniforms.setObjectConstants(this.currentG,cc.context,null);this.currentG.setVertexBuffer(iron_data_ConstData.screenAlignedVB);this.currentG.setIndexBuffer(iron_data_ConstData.screenAlignedIB);this.currentG.drawIndexedVertices();if(this.scissorSet){this.currentG.disableScissor();this.scissorSet=false}this.currentG.end();this.currentG=null;this.bindParams=null}loadShader(handle){this.loading++;let cc=this.cachedShaderContexts.h[handle];if(cc!=null){this.loading--;return}cc=new iron_CachedShaderContext;this.cachedShaderContexts.h[handle]=cc;let shaderPath=handle.split("/");let _gthis=this;iron_data_Data.getShader(shaderPath[0],shaderPath[1],function(res){cc.context=res.getContext(shaderPath[2]);_gthis.loading--})}unloadShader(handle){let _this=this.cachedShaderContexts;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}let shaderPath=handle.split("/");let _this1=iron_data_Data.cachedShaders;let key=shaderPath[1];if(Object.prototype.hasOwnProperty.call(_this1.h,key)){delete _this1.h[key]}}resize(){if(kha_System.windowWidth()==0||kha_System.windowHeight()==0){return}let h=this.renderTargets.h;let rt_h=h;let rt_keys=Object.keys(h);let rt_length=rt_keys.length;let rt_current=0;while(rt_current<rt_length){let rt=rt_h[rt_keys[rt_current++]];if(rt==null||rt.raw.width>0||rt.depthStencilFrom==""||rt==this.depthToRenderTarget.h[rt.depthStencilFrom]){continue}let nodepth=null;let h=this.renderTargets.h;let rt2_h=h;let rt2_keys=Object.keys(h);let rt2_length=rt2_keys.length;let rt2_current=0;while(rt2_current<rt2_length){let rt2=rt2_h[rt2_keys[rt2_current++]];if(rt2==null||rt2.raw.width>0||rt2.depthStencilFrom!=""||this.depthToRenderTarget.h[rt2.raw.depth_buffer]!=null){continue}nodepth=rt2;break}if(nodepth!=null){rt.image.setDepthStencilFrom(nodepth.image)}}let h1=this.renderTargets.h;let rt_h1=h1;let rt_keys1=Object.keys(h1);let rt_length1=rt_keys1.length;let rt_current1=0;while(rt_current1<rt_length1){let rt=rt_h1[rt_keys1[rt_current1++]];if(rt!=null&&rt.raw.width==0){iron_App.notifyOnInit(($_=rt.image,$bind($_,$_.unload)));rt.image=this.createImage(rt.raw,rt.depthStencil)}}let h2=this.renderTargets.h;let rt_h2=h2;let rt_keys2=Object.keys(h2);let rt_length2=rt_keys2.length;let rt_current2=0;while(rt_current2<rt_length2){let rt=rt_h2[rt_keys2[rt_current2++]];if(rt!=null&&rt.depthStencilFrom!=""){rt.image.setDepthStencilFrom(this.depthToRenderTarget.h[rt.depthStencilFrom].image)}}}createRenderTarget(t){let rt=this.createTarget(t);this.renderTargets.h[t.name]=rt;return rt}createDepthBuffer(name,format){this.depthBuffers.push({name:name,format:format})}createTarget(t){let rt=new iron_RenderTarget(t);if(t.depth_buffer!=null){rt.hasDepth=true;let depthTarget=this.depthToRenderTarget.h[t.depth_buffer];if(depthTarget==null){let _g=0;let _g1=this.depthBuffers;while(_g<_g1.length){let db=_g1[_g];++_g;if(db.name==t.depth_buffer){this.depthToRenderTarget.h[db.name]=rt;let s=db.format;let tmp;if(s==null||s==""){tmp=1}else{switch(s){case"DEPTH16":tmp=5;break;case"DEPTH24":tmp=1;break;default:tmp=1}}rt.depthStencil=tmp;rt.image=this.createImage(t,rt.depthStencil);break}}}else{rt.depthStencil=0;rt.depthStencilFrom=t.depth_buffer;rt.image=this.createImage(t,rt.depthStencil);rt.image.setDepthStencilFrom(depthTarget.image)}}else{rt.hasDepth=false;if(t.depth!=null&&t.depth>1){rt.is3D=true}if(t.is_cubemap){rt.isCubeMap=true;rt.depthStencil=0;rt.cubeMap=this.createCubeMap(t,rt.depthStencil)}else{rt.depthStencil=0;rt.image=this.createImage(t,rt.depthStencil)}}return rt}createImage(t,depthStencil){let width=t.width==0?iron_App.w():t.width;let height=t.height==0?iron_App.h():t.height;let depth=t.depth!=null?t.depth:0;if(t.displayp!=null){if(width>height){width=width*(t.displayp/height)|0;height=t.displayp}else{height=height*(t.displayp/width)|0;width=t.displayp}}if(t.scale!=null){width=width*t.scale|0;height=height*t.scale|0;depth=depth*t.scale|0}if(width<1){width=1}if(height<1){height=1}if(t.depth!=null&&t.depth>1){let img;if(t.format!=null){switch(t.format){case"DEPTH16":img=3;break;case"R16":img=6;break;case"R32":img=5;break;case"R8":img=1;break;case"RGBA128":img=2;break;case"RGBA32":img=0;break;case"RGBA64":img=4;break;default:img=0}}else{img=0}let img1=kha_Image.create3D(width,height,depth,img);if(t.mipmaps){img1.generateMipmaps(1e3)}return img1}else if(t.is_image!=null&&t.is_image){let tmp;if(t.format!=null){switch(t.format){case"DEPTH16":tmp=3;break;case"R16":tmp=6;break;case"R32":tmp=5;break;case"R8":tmp=1;break;case"RGBA128":tmp=2;break;case"RGBA32":tmp=0;break;case"RGBA64":tmp=4;break;default:tmp=0}}else{tmp=0}return kha_Image.create(width,height,tmp)}else{let tmp;if(t.format!=null){switch(t.format){case"DEPTH16":tmp=3;break;case"R16":tmp=6;break;case"R32":tmp=5;break;case"R8":tmp=1;break;case"RGBA128":tmp=2;break;case"RGBA32":tmp=0;break;case"RGBA64":tmp=4;break;default:tmp=0}}else{tmp=0}return kha_Image.createRenderTarget(width,height,tmp,depthStencil)}}createCubeMap(t,depthStencil){let tmp;if(t.format!=null){switch(t.format){case"DEPTH16":tmp=3;break;case"R16":tmp=6;break;case"R32":tmp=5;break;case"R8":tmp=1;break;case"RGBA128":tmp=2;break;case"RGBA32":tmp=0;break;case"RGBA64":tmp=4;break;default:tmp=0}}else{tmp=0}return kha_graphics4_CubeMap.createRenderTarget(t.width,tmp,depthStencil)}static setActive(renderPath){iron_RenderPath.active=renderPath}static sortMeshesDistance(meshes){meshes.sort(function(a,b){if(a.cameraDistance>=b.cameraDistance){return 1}else{return-1}})}static sortMeshesShader(meshes){meshes.sort(function(a,b){if(a.materials[0].name>=b.materials[0].name){return 1}else{return-1}})}}$hxClasses["iron.RenderPath"]=iron_RenderPath;iron_RenderPath.__name__=true;Object.assign(iron_RenderPath.prototype,{__class__:iron_RenderPath,__properties__:{get_ready:"get_ready"}});class iron_RenderTargetRaw{constructor(){this.is_cubemap=null;this.is_image=null;this.depth=null;this.mipmaps=null;this.depth_buffer=null;this.displayp=null;this.scale=null;this.format=null}}$hxClasses["iron.RenderTargetRaw"]=iron_RenderTargetRaw;iron_RenderTargetRaw.__name__=true;Object.assign(iron_RenderTargetRaw.prototype,{__class__:iron_RenderTargetRaw});class iron_RenderTarget{constructor(raw){this.isCubeMap=false;this.is3D=false;this.hasDepth=false;this.cubeMap=null;this.image=null;this.depthStencilFrom="";this.raw=raw}}$hxClasses["iron.RenderTarget"]=iron_RenderTarget;iron_RenderTarget.__name__=true;Object.assign(iron_RenderTarget.prototype,{__class__:iron_RenderTarget});class iron_CachedShaderContext{constructor(){}}$hxClasses["iron.CachedShaderContext"]=iron_CachedShaderContext;iron_CachedShaderContext.__name__=true;Object.assign(iron_CachedShaderContext.prototype,{__class__:iron_CachedShaderContext});class iron_Scene{constructor(){this.traitRemoves=[];this.traitInits=[];this.groups=null;this.uid=iron_Scene.uidCounter++;this.meshes=[];this.lights=[];this.cameras=[];this.speakers=[];this.empties=[];this.animations=[];this.tilesheets=[];this.armatures=[];this.embedded=new haxe_ds_StringMap;this.root=new iron_object_Object;this.root.name="Root";this.traitInits=[];this.traitRemoves=[];this.initializing=true;if(iron_Scene.global==null){iron_Scene.global=new iron_object_Object}}remove(){let _g=0;let _g1=this.traitRemoves;while(_g<_g1.length){let f=_g1[_g];++_g;f()}let _g2=0;let _g3=this.meshes;while(_g2<_g3.length){let o=_g3[_g2];++_g2;o.remove()}let _g4=0;let _g5=this.lights;while(_g4<_g5.length){let o=_g5[_g4];++_g4;o.remove()}let _g6=0;let _g7=this.cameras;while(_g6<_g7.length){let o=_g7[_g6];++_g6;o.remove()}let _g8=0;let _g9=this.speakers;while(_g8<_g9.length){let o=_g9[_g8];++_g8;o.remove()}let _g10=0;let _g11=this.empties;while(_g10<_g11.length){let o=_g11[_g10];++_g10;o.remove()}this.groups=null;this.root.remove()}updateFrame(){if(!this.ready){return}let _g=0;let _g1=this.animations;while(_g<_g1.length){let anim=_g1[_g];++_g;anim.update(iron_system_Time.get_delta())}let _g2=0;let _g3=this.empties;while(_g2<_g3.length){let e=_g3[_g2];++_g2;if(e!=null&&e.parent!=null){e.transform.update()}}}renderFrame(g){if(!this.ready||iron_RenderPath.active==null){return}iron_Scene.framePassed=true;let _g=0;let _g1=this.tilesheets;while(_g<_g1.length){let tilesheet=_g1[_g];++_g;tilesheet.update()}if(this.camera!=null){this.camera.renderFrame(g)}else{iron_RenderPath.active.renderFrame(g)}}addObject(parent){let object=new iron_object_Object;if(parent!=null){object.setParent(parent)}else{object.setParent(this.root)}return object}getChild(name){return this.root.getChild(name)}getCamera(name){let _g=0;let _g1=this.cameras;while(_g<_g1.length){let c=_g1[_g];++_g;if(c.name==name){return c}}return null}addMeshObject(data,materials,parent){let object=new iron_object_MeshObject(data,materials);if(parent!=null){object.setParent(parent)}else{object.setParent(this.root)}return object}addLightObject(data,parent){let object=new iron_object_LightObject(data);if(parent!=null){object.setParent(parent)}else{object.setParent(this.root)}return object}addCameraObject(data,parent){let object=new iron_object_CameraObject(data);if(parent!=null){object.setParent(parent)}else{object.setParent(this.root)}return object}addSpeakerObject(data,parent){let object=new iron_object_SpeakerObject(data);if(parent!=null){object.setParent(parent)}else{object.setParent(this.root)}return object}addScene(sceneName,parent,done){if(parent==null){parent=this.addObject();parent.name=sceneName}let _gthis=this;iron_data_Data.getSceneRaw(sceneName,function(format){_gthis.loadEmbeddedData(format.embedded_datas,function(){let objectsTraversed=0;let objectsCount=_gthis.getObjectsCount(format.objects);let traverseObjects=null;traverseObjects=function(parent,objects,parentObject,done){if(objects==null){return}let _g=0;let _g1=objects.length;while(_g<_g1){let i=_g++;let o=objects[i];if(o.spawn!=null&&o.spawn==false){if((objectsTraversed+=1)==objectsCount){done()}continue}_gthis.createObject(o,format,parent,parentObject,function(object){traverseObjects(object,o.children,o,done);if((objectsTraversed+=1)==objectsCount){done()}})}};if(format.objects==null||format.objects.length==0){iron_Scene.createTraits(format.traits,parent);done(parent)}else{traverseObjects(parent,format.objects,null,function(){iron_Scene.createTraits(format.traits,parent);done(parent)})}})})}getObjectsCount(objects,discardNoSpawn){if(discardNoSpawn==null){discardNoSpawn=true}if(objects==null){return 0}let result=objects.length;let _g=0;while(_g<objects.length){let o=objects[_g];++_g;if(discardNoSpawn&&o.spawn!=null&&o.spawn==false){continue}if(o.children!=null){result+=this.getObjectsCount(o.children)}}return result}spawnObject(name,parent,done,spawnChildren,srcRaw){if(spawnChildren==null){spawnChildren=true}if(srcRaw==null){srcRaw=this.raw}let objectsTraversed=0;let obj=iron_Scene.getRawObjectByName(srcRaw,name);let objectsCount=spawnChildren?this.getObjectsCount([obj],false):1;let rootId=-1;let spawnObjectTree=null;let _gthis=this;spawnObjectTree=function(obj,parent,parentObject,done){_gthis.createObject(obj,srcRaw,parent,parentObject,function(object){if(rootId==-1){rootId=object.uid}if(spawnChildren&&obj.children!=null){let _g=0;let _g1=obj.children;while(_g<_g1.length){let child=_g1[_g];++_g;spawnObjectTree(child,object,obj,done)}}if((objectsTraversed+=1)==objectsCount&&done!=null){while(object.uid!=rootId)object=object.parent;done(object)}})};spawnObjectTree(obj,parent,null,done)}createObject(o,format,parent,parentObject,done){let sceneName=format.name;let _gthis=this;if(o.type=="camera_object"){iron_data_Data.getCamera(sceneName,o.data_ref,function(b){let object=_gthis.addCameraObject(b,parent);_gthis.returnObject(object,o,done)})}else if(o.type=="light_object"){iron_data_Data.getLight(sceneName,o.data_ref,function(b){let object=_gthis.addLightObject(b,parent);_gthis.returnObject(object,o,done)})}else if(o.type=="mesh_object"){if(o.material_refs==null||o.material_refs.length==0){this.createMeshObject(o,format,parent,parentObject,null,done)}else{let this1=new Array(o.material_refs.length);let materials=this1;let materialsLoaded=0;let _g=0;let _g1=o.material_refs.length;while(_g<_g1){let i=_g++;let ref=o.material_refs[i];iron_data_Data.getMaterial(sceneName,ref,function(mat){materials[i]=mat;materialsLoaded+=1;if(materialsLoaded==o.material_refs.length){_gthis.createMeshObject(o,format,parent,parentObject,materials,done)}})}}}else if(o.type=="speaker_object"){let object=this.addSpeakerObject(iron_data_Data.getSpeakerRawByName(format.speaker_datas,o.data_ref),parent);this.returnObject(object,o,done)}else if(o.type=="object"){let object=this.addObject(parent);this.returnObject(object,o,function(ro){if(o.group_ref!=null){_gthis.spawnGroup(format,o.group_ref,ro,function(){done(ro)})}else{done(ro)}})}else{done(null)}}spawnGroup(format,groupRef,groupOwner,done,failed){let spawned=0;let object_refs=this.getGroupObjectRefs(groupRef,format);let _gthis=this;if(object_refs==null){if(failed!=null){failed()}}else if(object_refs.length==0){done()}else{let _g=0;while(_g<object_refs.length){let object_ref=object_refs[_g];++_g;this.spawnObject(object_ref,groupOwner,function(spawnedObject){if(!_gthis.isObjectInGroup(groupRef,spawnedObject.parent,format)){let _g=0;let _g1=format.groups;while(_g<_g1.length){let group=_g1[_g];++_g;if(group.name==groupRef){spawnedObject.transform.applyParent();spawnedObject.transform.translate(-group.instance_offset.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),-group.instance_offset.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),-group.instance_offset.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN));break}}}if((spawned+=1)==object_refs.length){groupOwner.transform.reset();done()}},true,format)}}}getGroupObjectRefs(group_ref,format){let _g=0;let _g1=format.groups;while(_g<_g1.length){let g=_g1[_g];++_g;if(g.name==group_ref){return g.object_refs}}return null}getGroupObjectsRaw(groupRef,format){let objectRefs=this.getGroupObjectRefs(groupRef,format);let objects=[];if(objectRefs==null){return objects}let _g=0;while(_g<objectRefs.length){let objRef=objectRefs[_g];++_g;let rawObj=iron_Scene.getRawObjectByName(format,objRef);objects.push(rawObj);let childRefs=this.getChildObjectsRaw(rawObj);objects=objects.concat(childRefs)}return objects}getChildObjectsRaw(rawObj,recursive){if(recursive==null){recursive=true}let children=rawObj.children;if(children==null){return[]}children=children.slice();if(recursive){let _g=0;let _g1=rawObj.children;while(_g<_g1.length){let child=_g1[_g];++_g;let childRefs=this.getChildObjectsRaw(child);children=children.concat(childRefs)}}return children}isObjectInGroup(groupRef,object,format){let _g=0;let _g1=this.getGroupObjectsRaw(groupRef,format);while(_g<_g1.length){let obj=_g1[_g];++_g;if(obj.name==object.name){return true}}return false}createMeshObject(o,format,parent,parentObject,materials,done){let ref=o.data_ref.split("/");let object_file="";let data_ref="";let sceneName=format.name;if(ref.length==2){object_file=ref[0];data_ref=ref[1]}else{object_file=sceneName;data_ref=o.data_ref}let _gthis=this;if(parentObject!=null&&parentObject.bone_actions!=null){let bactions=[];let _g=0;let _g1=parentObject.bone_actions;while(_g<_g1.length){let ref=_g1[_g];++_g;iron_data_Data.getSceneRaw(ref,function(action){bactions.push(action);if(bactions.length==parentObject.bone_actions.length){let armature=null;let _g=0;let _g1=_gthis.armatures;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.uid==parent.uid){armature=a;break}}if(armature==null){let _g=0;let _g1=_gthis.armatures;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.name==parent.name){parent.name+="."+parent.uid;break}}armature=new iron_data_Armature(parent.uid,parent.name,bactions);_gthis.armatures.push(armature)}_gthis.returnMeshObject(object_file,data_ref,sceneName,armature,materials,parent,parentObject,o,done)}})}}else{this.returnMeshObject(object_file,data_ref,sceneName,null,materials,parent,parentObject,o,done)}}returnMeshObject(object_file,data_ref,sceneName,armature,materials,parent,parentObject,o,done){let _gthis=this;iron_data_Data.getMesh(object_file,data_ref,function(mesh){if(mesh.isSkinned){let g=mesh.geom;if(armature!=null){g.addArmature(armature)}else{g.addAction(mesh.format.objects,"none")}}let object=_gthis.addMeshObject(mesh,materials,parent);if(o.particle_refs!=null){let _g=0;let _g1=o.particle_refs;while(_g<_g1.length){let ref=_g1[_g];++_g;js_Boot.__cast(object,iron_object_MeshObject).setupParticleSystem(sceneName,ref)}}if(o.tilesheet_ref!=null){js_Boot.__cast(object,iron_object_MeshObject).setupTilesheet(sceneName,o.tilesheet_ref,o.tilesheet_action_ref)}_gthis.returnObject(object,o,done)})}returnObject(object,o,done){let _gthis=this;if(object!=null&&o.object_actions!=null){let oactions=[];while(oactions.length<o.object_actions.length)oactions.push(null);let actionsLoaded=0;let _g=0;let _g1=o.object_actions.length;while(_g<_g1){let i=_g++;let ref=o.object_actions[i];if(ref=="null"){actionsLoaded+=1;continue}iron_data_Data.getSceneRaw(ref,function(action){oactions[i]=action;actionsLoaded+=1;if(actionsLoaded==o.object_actions.length){_gthis.returnObjectLoaded(object,o,oactions,done)}})}}else{this.returnObjectLoaded(object,o,null,done)}}returnObjectLoaded(object,o,oactions,done){if(object!=null){object.raw=o;object.name=o.name;if(o.visible!=null){object.visible=o.visible}if(o.visible_mesh!=null){object.visibleMesh=o.visible_mesh}if(o.visible_shadow!=null){object.visibleShadow=o.visible_shadow}iron_Scene.createConstraints(o.constraints,object);iron_Scene.generateTransform(o,object.transform);object.setupAnimation(oactions);object.setupMorphTargets();if(o.properties!=null){object.properties=new haxe_ds_StringMap;let _g=0;let _g1=o.properties;while(_g<_g1.length){let p=_g1[_g];++_g;object.properties.h[p.name]=p.value}}if(!iron_Scene.active.initializing){iron_Scene.createTraits(o.traits,object)}}done(object)}loadEmbeddedData(datas,done){if(datas==null){done();return}let loaded=0;let _g=0;while(_g<datas.length){let file=datas[_g];++_g;this.embedData(file,function(){loaded+=1;if(loaded==datas.length){done()}})}}embedData(file,done){let _gthis=this;if(file.endsWith(".raw")){iron_data_Data.getBlob(file,function(blob){let b=blob.toBytes();let w=(Math.pow(b.length,.3333333333333333)|0)+1;let image=kha_Image.fromBytes3D(b,w,w,w,1);_gthis.embedded.h[file]=image;done()})}else{iron_data_Data.getImage(file,function(image){_gthis.embedded.h[file]=image;done()})}}notifyOnInit(f){if(this.ready){f()}else{this.traitInits.push(f)}}notifyOnRemove(f){this.traitRemoves.push(f)}static create(format,done){iron_Scene.active=new iron_Scene;iron_Scene.active.ready=false;iron_Scene.active.raw=format;iron_data_Data.getWorld(format.name,format.world_ref,function(world){iron_Scene.active.world=world;iron_Scene.active.addScene(format.name,null,function(sceneObject){let _g=0;let _g1=sceneObject.getChildren(true);while(_g<_g1.length){let object=_g1[_g];++_g;iron_Scene.createTraits(object.raw.traits,object)}if(iron_Scene.active.cameras.length==0){haxe_Log.trace('No camera found for scene "'+format.name+'"',{fileName:"Sources/iron/Scene.hx",lineNumber:138,className:"iron.Scene",methodName:"create"})}iron_Scene.active.camera=iron_Scene.active.getCamera(format.camera_ref);iron_Scene.active.sceneParent=sceneObject;iron_Scene.active.ready=true;let _g2=0;let _g3=iron_Scene.active.traitInits;while(_g2<_g3.length){let f=_g3[_g2];++_g2;f()}iron_Scene.active.traitInits=[];iron_Scene.active.initializing=false;done(sceneObject)})})}static setActive(sceneName,done){if(!iron_Scene.framePassed){return}iron_Scene.framePassed=false;let removeWorldShader=null;if(iron_Scene.active!=null){if(iron_Scene.active.raw.world_ref!=null){removeWorldShader="shader_datas/World_"+iron_Scene.active.raw.world_ref+"/World_"+iron_Scene.active.raw.world_ref}iron_Scene.active.remove()}iron_data_Data.getSceneRaw(sceneName,function(format){iron_Scene.create(format,function(o){if(done!=null){done(o)}if(removeWorldShader!=null){iron_RenderPath.active.unloadShader(removeWorldShader)}if(format.world_ref!=null){iron_RenderPath.active.loadShader("shader_datas/World_"+format.world_ref+"/World_"+format.world_ref)}})})}static getRawObjectByName(format,name){return iron_Scene.traverseObjs(format.objects,name)}static traverseObjs(children,name){let _g=0;while(_g<children.length){let o=children[_g];++_g;if(o.name==name){return o}if(o.children!=null){let res=iron_Scene.traverseObjs(o.children,name);if(res!=null){return res}}}return null}static generateTransform(object,transform){let tmp;if(object.transform!=null){let a=object.transform.values;tmp=new iron_math_Mat4(a.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(16,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(20,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(24,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(28,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(32,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(36,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(40,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(44,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(48,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(52,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(56,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(60,kha_arrays_ByteArray.LITTLE_ENDIAN))}else{tmp=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}transform.world=tmp;let _this=transform.world;let loc=transform.loc;let quat=transform.rot;let scale=transform.scale;loc.x=_this.self._30;loc.y=_this.self._31;loc.z=_this.self._32;let _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;let _this2=_this1;scale.x=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);let _this3=iron_math_Mat4.helpVec;_this3.x=_this.self._10;_this3.y=_this.self._11;_this3.z=_this.self._12;_this3.w=1;let _this4=_this3;scale.y=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);let _this5=iron_math_Mat4.helpVec;_this5.x=_this.self._20;_this5.y=_this.self._21;_this5.z=_this.self._22;_this5.w=1;let _this6=_this5;scale.z=Math.sqrt(_this6.x*_this6.x+_this6.y*_this6.y+_this6.z*_this6.z);let _this7=_this.self;let m3=_this7._12;let m4=_this7._22;let m5=_this7._32;let m6=_this7._13;let m7=_this7._23;let m8=_this7._33;let c00=_this7._11*(m4*m8-m5*m7)-_this7._21*(m3*m8-m5*m6)+_this7._31*(m3*m7-m4*m6);let m31=_this7._12;let m41=_this7._22;let m51=_this7._32;let m61=_this7._13;let m71=_this7._23;let m81=_this7._33;let c01=_this7._10*(m41*m81-m51*m71)-_this7._20*(m31*m81-m51*m61)+_this7._30*(m31*m71-m41*m61);let m32=_this7._11;let m42=_this7._21;let m52=_this7._31;let m62=_this7._13;let m72=_this7._23;let m82=_this7._33;let c02=_this7._10*(m42*m82-m52*m72)-_this7._20*(m32*m82-m52*m62)+_this7._30*(m32*m72-m42*m62);let m33=_this7._11;let m43=_this7._21;let m53=_this7._31;let m63=_this7._12;let m73=_this7._22;let m83=_this7._32;let c03=_this7._10*(m43*m83-m53*m73)-_this7._20*(m33*m83-m53*m63)+_this7._30*(m33*m73-m43*m63);if(_this7._00*c00-_this7._01*c01+_this7._02*c02-_this7._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this.self._00*invs;iron_math_Mat4.helpMat.self._01=_this.self._01*invs;iron_math_Mat4.helpMat.self._02=_this.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this.self._10*invs;iron_math_Mat4.helpMat.self._11=_this.self._11*invs;iron_math_Mat4.helpMat.self._12=_this.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this.self._20*invs;iron_math_Mat4.helpMat.self._21=_this.self._21*invs;iron_math_Mat4.helpMat.self._22=_this.self._22*invs;let m=iron_math_Mat4.helpMat;let m11=m.self._00;let m12=m.self._10;let m13=m.self._20;let m21=m.self._01;let m22=m.self._11;let m23=m.self._21;let m311=m.self._02;let m321=m.self._12;let m331=m.self._22;let tr=m11+m22+m331;let s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m321-m23)*s;quat.y=(m13-m311)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m331){s=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m311)/s}else if(m22>m331){s=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m321)/s}else{s=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m311)/s;quat.y=(m23+m321)/s;quat.z=.25*s}if(object.local_only!=null){transform.localOnly=object.local_only}if(transform.object.parent!=null){transform.update()}}static createTraits(traits,object){if(traits==null){return}let _g=0;while(_g<traits.length){let t=traits[_g];++_g;if(t.type=="Script"){let args=[];if(t.parameters!=null){let _g=0;let _g1=t.parameters;while(_g<_g1.length){let param=_g1[_g];++_g;args.push(iron_Scene.parseArg(param))}}let traitInst=iron_Scene.createTraitClassInstance(t.class_name,args);if(traitInst==null){haxe_Log.trace("Error: Trait '"+t.class_name+"' referenced in object '"+object.name+"' not found",{fileName:"Sources/iron/Scene.hx",lineNumber:874,className:"iron.Scene",methodName:"createTraits"});continue}if(t.props!=null){let _g=0;let _g1=t.props.length/3|0;while(_g<_g1){let i=_g++;let pname=t.props[i*3];let ptype=t.props[i*3+1];let pval=t.props[i*3+2];if(ptype.endsWith("Object")&&pval!=""){Reflect.setProperty(traitInst,pname,iron_Scene.active.getChild(pval))}else{switch(ptype){case"Vec2":let pVec=pval;Reflect.setProperty(traitInst,pname,new iron_math_Vec2(pVec.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)));break;case"Vec3":let pVec1=pval;Reflect.setProperty(traitInst,pname,new iron_math_Vec3(pVec1.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec1.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec1.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)));break;case"Vec4":let pVec2=pval;Reflect.setProperty(traitInst,pname,new iron_math_Vec4(pVec2.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec2.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec2.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),pVec2.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN)));break;default:Reflect.setProperty(traitInst,pname,pval)}}}}object.addTrait(traitInst)}}}static parseArg(str){if(str=="true"){return true}else if(str=="false"){return false}else if(str=="null"){return null}else if(str.charAt(0)=="'"){return StringTools.replace(str,"'","")}else if(str.charAt(0)=='"'){return StringTools.replace(str,'"',"")}else if(str.charAt(0)=="["){str=StringTools.replace(str,"[","");str=StringTools.replace(str,"]","");str=StringTools.replace(str," ","");let ar=[];let vals=str.split(",");let _g=0;while(_g<vals.length){let v=vals[_g];++_g;ar.push(iron_Scene.parseArg(v))}return ar}else if(str.charAt(0)=="{"){return JSON.parse(str)}else{let f=parseFloat(str);let i=Std.parseInt(str);if(f==i){return i}else{return f}}}static createConstraints(constraints,object){if(constraints==null){return}object.constraints=[];let _g=0;while(_g<constraints.length){let c=constraints[_g];++_g;let constr=new iron_object_Constraint(c);object.constraints.push(constr)}}static createTraitClassInstance(traitName,args){let cname=$hxClasses[traitName];if(cname==null){return null}return Type.createInstance(cname,args)}}$hxClasses["iron.Scene"]=iron_Scene;iron_Scene.__name__=true;Object.assign(iron_Scene.prototype,{__class__:iron_Scene});class iron_data_Armature{constructor(uid,name,actions){this.matsReady=false;this.actions=[];this.uid=uid;this.name=name;let _g=0;while(_g<actions.length){let a=actions[_g];++_g;let _g1=0;let _g2=a.objects;while(_g1<_g2.length){let o=_g2[_g1];++_g1;iron_data_Armature.setParents(o)}let bones=[];iron_data_Armature.traverseBones(a.objects,function(object){bones.push(object)});this.actions.push({name:a.name,bones:bones,mats:null})}}initMats(){if(this.matsReady){return}this.matsReady=true;let _g=0;let _g1=this.actions;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.mats!=null){continue}a.mats=[];let _g2=0;let _g3=a.bones;while(_g2<_g3.length){let b=_g3[_g2];++_g2;let a1=b.transform.values;a.mats.push(new iron_math_Mat4(a1.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(16,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(20,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(24,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(28,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(32,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(36,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(40,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(44,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(48,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(52,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(56,kha_arrays_ByteArray.LITTLE_ENDIAN),a1.getFloat32(60,kha_arrays_ByteArray.LITTLE_ENDIAN)))}}}getAction(name){let _g=0;let _g1=this.actions;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.name==name){return a}}return null}static setParents(object){if(object.children==null){return}let _g=0;let _g1=object.children;while(_g<_g1.length){let o=_g1[_g];++_g;o.parent=object;iron_data_Armature.setParents(o)}}static traverseBones(objects,callback){let _g=0;let _g1=objects.length;while(_g<_g1){let i=_g++;iron_data_Armature.traverseBonesStep(objects[i],callback)}}static traverseBonesStep(object,callback){if(object.type=="bone_object"){callback(object)}if(object.children==null){return}let _g=0;let _g1=object.children.length;while(_g<_g1){let i=_g++;iron_data_Armature.traverseBonesStep(object.children[i],callback)}}}$hxClasses["iron.data.Armature"]=iron_data_Armature;iron_data_Armature.__name__=true;Object.assign(iron_data_Armature.prototype,{__class__:iron_data_Armature});class iron_data_CameraData{constructor(raw,done){this.raw=raw;this.name=raw.name;done(this)}static parse(name,id,done){iron_data_Data.getSceneRaw(name,function(format){let raw=iron_data_Data.getCameraRawByName(format.camera_datas,id);if(raw==null){haxe_Log.trace('Camera data "'+id+'" not found!',{fileName:"Sources/iron/data/CameraData.hx",lineNumber:20,className:"iron.data.CameraData",methodName:"parse"});done(null)}new iron_data_CameraData(raw,done)})}}$hxClasses["iron.data.CameraData"]=iron_data_CameraData;iron_data_CameraData.__name__=true;Object.assign(iron_data_CameraData.prototype,{__class__:iron_data_CameraData});class iron_data_ConstData{static createScreenAlignedData(){let data=[-1,-1,3,-1,-1,3];let indices=[0,1,2];let structure=new kha_graphics4_VertexStructure;structure.add("pos",1);iron_data_ConstData.screenAlignedVB=new kha_graphics4_VertexBuffer(data.length/(structure.byteSize()/4|0)|0,structure,0);let vertices=iron_data_ConstData.screenAlignedVB.lock();let _g=0;let _g1=vertices.byteLength/4|0;while(_g<_g1){let i=_g++;vertices.setFloat32(i*4,data[i],true)}iron_data_ConstData.screenAlignedVB.unlock();iron_data_ConstData.screenAlignedIB=new kha_graphics4_IndexBuffer(indices.length,0);let id=iron_data_ConstData.screenAlignedIB.lock();let _g2=0;let _g3=id.byteLength>>2;while(_g2<_g3){let i=_g2++;id.setUint32(i*4,indices[i],kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=i*4}iron_data_ConstData.screenAlignedIB.unlock()}static createSkydomeData(){let pos=iron_data_ConstData.skydomePos;let nor=iron_data_ConstData.skydomeNor;let structure=new kha_graphics4_VertexStructure;structure.add("pos",2);structure.add("nor",2);let structLength=structure.byteSize()/4|0;iron_data_ConstData.skydomeVB=new kha_graphics4_VertexBuffer(pos.length/3|0,structure,0);let vertices=iron_data_ConstData.skydomeVB.lock();let _g=0;let _g1=vertices.byteLength/4/structLength|0;while(_g<_g1){let i=_g++;vertices.setFloat32(i*structLength*4,pos[i*3],true);vertices.setFloat32((i*structLength+1)*4,pos[i*3+1],true);vertices.setFloat32((i*structLength+2)*4,pos[i*3+2],true);vertices.setFloat32((i*structLength+3)*4,nor[i*3],true);vertices.setFloat32((i*structLength+4)*4,nor[i*3+1],true);vertices.setFloat32((i*structLength+5)*4,nor[i*3+2],true)}iron_data_ConstData.skydomeVB.unlock();let indices=iron_data_ConstData.skydomeIndices;iron_data_ConstData.skydomeIB=new kha_graphics4_IndexBuffer(indices.length,0);let id=iron_data_ConstData.skydomeIB.lock();let _g2=0;let _g3=id.byteLength>>2;while(_g2<_g3){let i=_g2++;id.setUint32(i*4,indices[i],kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=i*4}iron_data_ConstData.skydomeIB.unlock()}}$hxClasses["iron.data.ConstData"]=iron_data_ConstData;iron_data_ConstData.__name__=true;class iron_data_Data{static getMesh(file,name,done){let handle=file+name;let cached=iron_data_Data.cachedMeshes.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingMeshes.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingMeshes.h[handle]=[done];iron_data_MeshData.parse(file,name,function(b){iron_data_Data.cachedMeshes.h[handle]=b;b.handle=handle;let _g=0;let _g1=iron_data_Data.loadingMeshes.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingMeshes;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getLight(file,name,done){let handle=file+name;let cached=iron_data_Data.cachedLights.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingLights.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingLights.h[handle]=[done];iron_data_LightData.parse(file,name,function(b){iron_data_Data.cachedLights.h[handle]=b;let _g=0;let _g1=iron_data_Data.loadingLights.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingLights;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getCamera(file,name,done){let handle=file+name;let cached=iron_data_Data.cachedCameras.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingCameras.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingCameras.h[handle]=[done];iron_data_CameraData.parse(file,name,function(b){iron_data_Data.cachedCameras.h[handle]=b;let _g=0;let _g1=iron_data_Data.loadingCameras.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingCameras;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getMaterial(file,name,done){let handle=file+name;let cached=iron_data_Data.cachedMaterials.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingMaterials.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingMaterials.h[handle]=[done];iron_data_MaterialData.parse(file,name,function(b){iron_data_Data.cachedMaterials.h[handle]=b;let _g=0;let _g1=iron_data_Data.loadingMaterials.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingMaterials;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getParticle(file,name,done){let handle=file+name;let cached=iron_data_Data.cachedParticles.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingParticles.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingParticles.h[handle]=[done];iron_data_ParticleData.parse(file,name,function(b){iron_data_Data.cachedParticles.h[handle]=b;let _g=0;let _g1=iron_data_Data.loadingParticles.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingParticles;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getWorld(file,name,done){if(name==null){done(null);return}let handle=file+name;let cached=iron_data_Data.cachedWorlds.h[handle];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingWorlds.h[handle];if(loading!=null){loading.push(done);return}iron_data_Data.loadingWorlds.h[handle]=[done];iron_data_WorldData.parse(file,name,function(b){iron_data_Data.cachedWorlds.h[handle]=b;let _g=0;let _g1=iron_data_Data.loadingWorlds.h[handle];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingWorlds;if(Object.prototype.hasOwnProperty.call(_this.h,handle)){delete _this.h[handle]}})}static getShader(file,name,done,overrideContext){let cacheName=name;if(overrideContext!=null){cacheName+="2"}let cached=iron_data_Data.cachedShaders.h[cacheName];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingShaders.h[cacheName];if(loading!=null){loading.push(done);return}iron_data_Data.loadingShaders.h[cacheName]=[done];iron_data_ShaderData.parse(file,name,function(b){iron_data_Data.cachedShaders.h[cacheName]=b;let _g=0;let _g1=iron_data_Data.loadingShaders.h[cacheName];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingShaders;if(Object.prototype.hasOwnProperty.call(_this.h,cacheName)){delete _this.h[cacheName]}},overrideContext)}static getSceneRaw(file,done){let cached=iron_data_Data.cachedSceneRaws.h[file];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingSceneRaws.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingSceneRaws.h[file]=[done];let compressed=file.endsWith(".lz4");let isJson=file.endsWith(".json");let ext=compressed||isJson||file.endsWith(".arm")?"":".arm";iron_data_Data.getBlob(file+ext,function(b){let parsed=null;if(isJson){let s=b.toString();if(s.charAt(0)=="{"){parsed=JSON.parse(s)}else{let i=new haxe_io_BytesInput(b.toBytes());i.set_bigEndian(false);parsed=iron_system_ArmPack.read(i)}}else{let i=new haxe_io_BytesInput(b.toBytes());i.set_bigEndian(false);parsed=iron_system_ArmPack.read(i)}iron_data_Data.returnSceneRaw(file,parsed)})}static returnSceneRaw(file,parsed){iron_data_Data.cachedSceneRaws.h[file]=parsed;let _g=0;let _g1=iron_data_Data.loadingSceneRaws.h[file];while(_g<_g1.length){let f=_g1[_g];++_g;f(parsed)}let _this=iron_data_Data.loadingSceneRaws;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}}static getMeshRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getLightRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getCameraRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getMaterialRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getParticleRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getWorldRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getShaderRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getSpeakerRawByName(datas,name){if(name==""){return datas[0]}let _g=0;while(_g<datas.length){let dat=datas[_g];++_g;if(dat.name==name){return dat}}return null}static getBlob(file,done){let cached=iron_data_Data.cachedBlobs.h[file];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingBlobs.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingBlobs.h[file]=[done];kha_Assets.loadBlobFromPath(iron_data_Data.isAbsolute(file)||file.charAt(0)=="."&&file.charAt(1)=="."?file:iron_data_Data.dataPath+file,function(b){iron_data_Data.cachedBlobs.h[file]=b;let _g=0;let _g1=iron_data_Data.loadingBlobs.h[file];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingBlobs;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}iron_data_Data.assetsLoaded++},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:424,className:"iron.data.Data",methodName:"getBlob"})}static getImage(file,done,readable,format){if(format==null){format="RGBA32"}if(readable==null){readable=false}let cached=iron_data_Data.cachedImages.h[file];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingImages.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingImages.h[file]=[done];kha_Assets.loadImageFromPath(iron_data_Data.isAbsolute(file)||file.charAt(0)=="."&&file.charAt(1)=="."?file:iron_data_Data.dataPath+file,readable,function(b){iron_data_Data.cachedImages.h[file]=b;let _g=0;let _g1=iron_data_Data.loadingImages.h[file];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingImages;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}iron_data_Data.assetsLoaded++},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:473,className:"iron.data.Data",methodName:"getImage"})}static getSound(file,done){if(file.endsWith(".wav")){file=file.substring(0,file.length-4)+".ogg"}let cached=iron_data_Data.cachedSounds.h[file];if(cached!=null){done(cached);return}let loading=iron_data_Data.loadingSounds.h[file];if(loading!=null){loading.push(done);return}iron_data_Data.loadingSounds.h[file]=[done];kha_Assets.loadSoundFromPath(iron_data_Data.isAbsolute(file)||file.charAt(0)=="."&&file.charAt(1)=="."?file:iron_data_Data.dataPath+file,function(b){b.uncompress(function(){iron_data_Data.cachedSounds.h[file]=b;let _g=0;let _g1=iron_data_Data.loadingSounds.h[file];while(_g<_g1.length){let f=_g1[_g];++_g;f(b)}let _this=iron_data_Data.loadingSounds;if(Object.prototype.hasOwnProperty.call(_this.h,file)){delete _this.h[file]}iron_data_Data.assetsLoaded++})},null,{fileName:"Sources/iron/data/Data.hx",lineNumber:513,className:"iron.data.Data",methodName:"getSound"})}static isAbsolute(file){if(!(file.charAt(0)=="/"||file.charAt(1)==":")){if(file.charAt(0)=="\\"){return file.charAt(1)=="\\"}else{return false}}else{return true}}}$hxClasses["iron.data.Data"]=iron_data_Data;iron_data_Data.__name__=true;class iron_data_Geometry{constructor(data,indices,materialIndices,usage){this.mats=null;this.actions=null;this.skeletonBoneLens=null;this.skeletonBoneRefs=null;this.skeletonTransformsI=null;this.skinBoneWeights=null;this.skinBoneIndices=null;this.skinBoneCounts=null;this.instanceCount=0;this.instanced=false;this.instancedVB=null;this.numTris=0;this.ready=false;this.name="";this.count=-1;this.start=0;this.vertexBufferMap=new haxe_ds_StringMap;if(usage==null){usage=0}this.indices=indices;this.materialIndices=materialIndices;this.usage=usage;this.vertexArrays=data.raw.vertex_arrays;this.positions=this.getVArray("pos");this.normals=this.getVArray("nor");this.uvs=this.getVArray("tex");this.cols=this.getVArray("col");this.data=data;this.struct=iron_data_Geometry.getVertexStructure(this.vertexArrays);this.structLength=this.struct.byteSize()/2|0;this.structStr="";let _g=0;let _g1=this.struct.elements;while(_g<_g1.length){let e=_g1[_g];++_g;this.structStr+=e.name}}getVArray(name){let _g=0;let _g1=this.vertexArrays.length;while(_g<_g1){let i=_g++;if(this.vertexArrays[i].attrib==name){return this.vertexArrays[i]}}return null}setupInstanced(data,instancedType,usage){let structure=new kha_graphics4_VertexStructure;structure.instanced=true;this.instanced=true;structure.add("ipos",2);if(instancedType==2||instancedType==4){structure.add("irot",2)}if(instancedType==3||instancedType==4){structure.add("iscl",2)}this.instanceCount=(data.byteLength>>2)/(structure.byteSize()/4|0)|0;this.instancedVB=new kha_graphics4_VertexBuffer(this.instanceCount,structure,usage,1);let vertices=this.instancedVB.lock();let _g=0;let _g1=vertices.byteLength/4|0;while(_g<_g1){let i=_g++;vertices.setFloat32(i*4,data.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN),true)}this.instancedVB.unlock()}get(vs){let key="";let _g=0;while(_g<vs.length){let e=vs[_g];++_g;key+=e.name}let vb=this.vertexBufferMap.h[key];if(vb==null){let nVertexArrays=[];let atex=false;let texOffset=-1;let acol=false;let _g=0;let _g1=vs.length;while(_g<_g1){let e=_g++;if(vs[e].name=="tex"){atex=true;texOffset=e}if(vs[e].name=="col"){acol=true}let _g1=0;let _g2=this.vertexArrays.length;while(_g1<_g2){let va=_g1++;if(vs[e].name==this.vertexArrays[va].attrib){nVertexArrays.push(this.vertexArrays[va])}}}let struct=iron_data_Geometry.getVertexStructure(nVertexArrays);vb=new kha_graphics4_VertexBuffer((this.positions.values.byteLength>>1)/this.positions.size|0,struct,this.usage);this.vertices=vb.lock();iron_data_Geometry.buildVertices(this.vertices,nVertexArrays,0,atex&&this.uvs==null,texOffset);vb.unlock();this.vertexBufferMap.h[key]=vb;if(atex&&this.uvs==null){haxe_Log.trace("Armory Warning: Geometry "+this.name+" is missing UV map",{fileName:"Sources/iron/data/Geometry.hx",lineNumber:228,className:"iron.data.Geometry",methodName:"get"})}if(acol&&this.cols==null){haxe_Log.trace("Armory Warning: Geometry "+this.name+" is missing vertex colors",{fileName:"Sources/iron/data/Geometry.hx",lineNumber:229,className:"iron.data.Geometry",methodName:"get"})}}return vb}build(){if(this.ready){return}this.vertexBuffer=new kha_graphics4_VertexBuffer((this.positions.values.byteLength>>1)/this.positions.size|0,this.struct,this.usage);this.vertices=this.vertexBuffer.lock();iron_data_Geometry.buildVertices(this.vertices,this.vertexArrays);this.vertexBuffer.unlock();this.vertexBufferMap.h[this.structStr]=this.vertexBuffer;this.indexBuffers=[];let _g=0;let _g1=this.indices;while(_g<_g1.length){let id=_g1[_g];++_g;if(id.byteLength>>2==0){continue}let indexBuffer=new kha_graphics4_IndexBuffer(id.byteLength>>2,this.usage);this.numTris+=(id.byteLength>>2)/3|0;let indicesA=indexBuffer.lock();let _g2=0;let _g3=indicesA.byteLength>>2;while(_g2<_g3){let i=_g2++;indicesA.setUint32(i*4,id.getUint32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN),kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=i*4}indexBuffer.unlock();this.indexBuffers.push(indexBuffer)}if(this.data.raw.instanced_data!=null){this.setupInstanced(this.data.raw.instanced_data,this.data.raw.instanced_type,this.usage)}this.ready=true}addArmature(armature){let _g=0;let _g1=armature.actions;while(_g<_g1.length){let a=_g1[_g];++_g;this.addAction(a.bones,a.name)}}addAction(bones,name){if(bones==null){return}if(this.actions==null){this.actions=new haxe_ds_StringMap;this.mats=new haxe_ds_StringMap}if(this.actions.h[name]!=null){return}let actionBones=[];let _g=0;let _g1=this.skeletonBoneRefs;while(_g<_g1.length){let s=_g1[_g];++_g;let _g2=0;while(_g2<bones.length){let b=bones[_g2];++_g2;if(b.name==s){actionBones.push(b)}}}this.actions.h[name]=actionBones;let actionMats=[];let _g2=0;while(_g2<actionBones.length){let b=actionBones[_g2];++_g2;let a=b.transform.values;actionMats.push(new iron_math_Mat4(a.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(16,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(20,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(24,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(28,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(32,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(36,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(40,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(44,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(48,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(52,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(56,kha_arrays_ByteArray.LITTLE_ENDIAN),a.getFloat32(60,kha_arrays_ByteArray.LITTLE_ENDIAN)))}this.mats.h[name]=actionMats}initSkeletonTransforms(transformsI){this.skeletonTransformsI=[];let _g=0;while(_g<transformsI.length){let t=transformsI[_g];++_g;let mi=new iron_math_Mat4(t.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(16,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(20,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(24,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(28,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(32,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(36,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(40,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(44,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(48,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(52,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(56,kha_arrays_ByteArray.LITTLE_ENDIAN),t.getFloat32(60,kha_arrays_ByteArray.LITTLE_ENDIAN));this.skeletonTransformsI.push(mi)}}static getVertexStructure(vertexArrays){let structure=new kha_graphics4_VertexStructure;let _g=0;let _g1=vertexArrays.length;while(_g<_g1){let i=_g++;structure.add(vertexArrays[i].attrib,iron_data_Geometry.getVertexData(vertexArrays[i].data))}return structure}static getVertexData(data){switch(data){case"short2norm":return 23;case"short4norm":return 27;default:return 27}}static buildVertices(vertices,vertexArrays,offset,fakeUVs,uvsIndex){if(uvsIndex==null){uvsIndex=-1}if(fakeUVs==null){fakeUVs=false}if(offset==null){offset=0}let arr=vertexArrays[0];let numVertices=(arr.values.byteLength>>1)/arr.size|0;let di=-1+offset;let _g=0;let _g1=numVertices;while(_g<_g1){let i=_g++;let _g1=0;let _g2=vertexArrays.length;while(_g1<_g2){let va=_g1++;let l=vertexArrays[va].size;if(fakeUVs&&va==uvsIndex){let _g=0;let _g1=l;while(_g<_g1){let j=_g++;vertices.setInt16(++di*2,0,kha_arrays_ByteArray.LITTLE_ENDIAN)}continue}let _g=0;let _g2=l;while(_g<_g2){let o=_g++;vertices.setInt16(++di*2,vertexArrays[va].values.getInt16((i*l+o)*2,kha_arrays_ByteArray.LITTLE_ENDIAN),kha_arrays_ByteArray.LITTLE_ENDIAN)}if(vertexArrays[va].padding!=null){if(vertexArrays[va].padding==1){vertices.setInt16(++di*2,0,kha_arrays_ByteArray.LITTLE_ENDIAN)}}}}}}$hxClasses["iron.data.Geometry"]=iron_data_Geometry;iron_data_Geometry.__name__=true;Object.assign(iron_data_Geometry.prototype,{__class__:iron_data_Geometry});class iron_data_LightData{constructor(raw,done){this.raw=raw;this.name=raw.name;done(this)}static parse(name,id,done){iron_data_Data.getSceneRaw(name,function(format){let raw=iron_data_Data.getLightRawByName(format.light_datas,id);if(raw==null){haxe_Log.trace('Light data "'+id+'" not found!',{fileName:"Sources/iron/data/LightData.hx",lineNumber:30,className:"iron.data.LightData",methodName:"parse"});done(null)}new iron_data_LightData(raw,done)})}}$hxClasses["iron.data.LightData"]=iron_data_LightData;iron_data_LightData.__name__=true;Object.assign(iron_data_LightData.prototype,{__class__:iron_data_LightData});class iron_data_MaterialData{constructor(raw,done,file){if(file==null){file=""}this.contexts=null;this.uid=++iron_data_MaterialData.uidCounter;this.raw=raw;this.name=raw.name;let ref=raw.shader.split("/");let object_file="";let data_ref="";if(ref.length==2){object_file=ref[0];data_ref=ref[1]}else{object_file=file;data_ref=raw.shader}let _gthis=this;iron_data_Data.getShader(object_file,data_ref,function(b){_gthis.shader=b;_gthis.contexts=[];while(_gthis.contexts.length<raw.contexts.length)_gthis.contexts.push(null);let contextsLoaded=0;let _g=0;let _g1=raw.contexts.length;while(_g<_g1){let i=_g++;let c=raw.contexts[i];new iron_data_MaterialContext(c,function(self){_gthis.contexts[i]=self;contextsLoaded+=1;if(contextsLoaded==raw.contexts.length){done(_gthis)}})}},raw.override_context)}getContext(name){let _g=0;let _g1=this.contexts;while(_g<_g1.length){let c=_g1[_g];++_g;if(HxOverrides.substr(c.raw.name,0,name.length)==name){return c}}return null}static parse(file,name,done){iron_data_Data.getSceneRaw(file,function(format){let raw=iron_data_Data.getMaterialRawByName(format.material_datas,name);if(raw==null){haxe_Log.trace('Material data "'+name+'" not found!',{fileName:"Sources/iron/data/MaterialData.hx",lineNumber:58,className:"iron.data.MaterialData",methodName:"parse"});done(null)}new iron_data_MaterialData(raw,done,file)})}}$hxClasses["iron.data.MaterialData"]=iron_data_MaterialData;iron_data_MaterialData.__name__=true;Object.assign(iron_data_MaterialData.prototype,{__class__:iron_data_MaterialData});class iron_data_MaterialContext{constructor(raw,done){this.id=0;this.textures=null;this.raw=raw;this.id=iron_data_MaterialContext.num++;let _gthis=this;if(raw.bind_textures!=null&&raw.bind_textures.length>0){let this1=new Array(raw.bind_textures.length);this.textures=this1;let texturesLoaded=0;let _g=0;let _g1=raw.bind_textures.length;while(_g<_g1){let i=_g++;let tex=raw.bind_textures[i];if(tex.file==""||tex.source=="movie"){texturesLoaded+=1;if(texturesLoaded==raw.bind_textures.length){done(this)}continue}iron_data_Data.getImage(tex.file,function(image){_gthis.textures[i]=image;texturesLoaded+=1;if(tex.mipmaps!=null){let mipmaps=[];while(mipmaps.length<tex.mipmaps.length)mipmaps.push(null);let mipmapsLoaded=0;let _g=0;let _g1=tex.mipmaps.length;while(_g<_g1){let j=_g++;let name=tex.mipmaps[j];iron_data_Data.getImage(name,function(mipimg){mipmaps[j]=mipimg;mipmapsLoaded+=1;if(mipmapsLoaded==tex.mipmaps.length){image.setMipmaps(mipmaps);tex.mipmaps=null;tex.generate_mipmaps=false;if(texturesLoaded==raw.bind_textures.length){done(_gthis)}}})}}else if(tex.generate_mipmaps==true&&image!=null){image.generateMipmaps(1e3);tex.mipmaps=null;tex.generate_mipmaps=false;if(texturesLoaded==raw.bind_textures.length){done(_gthis)}}else if(texturesLoaded==raw.bind_textures.length){done(_gthis)}},false,tex.format!=null?tex.format:"RGBA32")}}else{done(this)}}setTextureParameters(g,textureIndex,context,unitIndex){context.setTextureParameters(g,unitIndex,this.raw.bind_textures[textureIndex])}}$hxClasses["iron.data.MaterialContext"]=iron_data_MaterialContext;iron_data_MaterialContext.__name__=true;Object.assign(iron_data_MaterialContext.prototype,{__class__:iron_data_MaterialContext});class iron_data_MeshData{constructor(raw,done){this.scaleTex=1;this.scalePos=1;this.refcount=0;this.raw=raw;this.name=raw.name;if(raw.scale_pos!=null){this.scalePos=raw.scale_pos}if(raw.scale_tex!=null){this.scaleTex=raw.scale_tex}let indices=[];let materialIndices=[];let _g=0;let _g1=raw.index_arrays;while(_g<_g1.length){let ind=_g1[_g];++_g;indices.push(ind.values);materialIndices.push(ind.material)}this.isSkinned=raw.skin!=null;let vertexArrays=raw.vertex_arrays;if(this.isSkinned){vertexArrays.push({attrib:"bone",values:null,data:"short4norm"});vertexArrays.push({attrib:"weight",values:null,data:"short4norm"})}let _g2=0;let _g3=vertexArrays.length;while(_g2<_g3){let i=_g2++;let padding=vertexArrays[i].padding;vertexArrays[i].size=this.getVertexSize(vertexArrays[i].data,padding!=null?padding:0)}let parsedUsage=0;if(raw.dynamic_usage!=null&&raw.dynamic_usage==true){parsedUsage=1}let usage=parsedUsage;if(this.isSkinned){let bonea=null;let weighta=null;let vertex_length=(vertexArrays[0].values.byteLength>>1)/vertexArrays[0].size|0;let l=vertex_length*4;bonea=kha_arrays_Int16Array._new(l);weighta=kha_arrays_Int16Array._new(l);let index=0;let ai=0;let _g=0;let _g1=vertex_length;while(_g<_g1){let i=_g++;let boneCount=raw.skin.bone_count_array.getInt16(i*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let _g1=index;let _g2=index+boneCount;while(_g1<_g2){let j=_g1++;bonea.setInt16(ai*2,raw.skin.bone_index_array.getInt16(j*2,kha_arrays_ByteArray.LITTLE_ENDIAN),kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=ai*2;weighta.setInt16(ai*2,raw.skin.bone_weight_array.getInt16(j*2,kha_arrays_ByteArray.LITTLE_ENDIAN),kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=ai*2;++ai}let _g3=boneCount;let _g4=4;while(_g3<_g4){let j=_g3++;bonea.setInt16(ai*2,0,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=ai*2;weighta.setInt16(ai*2,0,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=ai*2;++ai}index+=boneCount}vertexArrays[vertexArrays.length-2].values=bonea;vertexArrays[vertexArrays.length-1].values=weighta}this.geom=new iron_data_Geometry(this,indices,materialIndices,usage);this.geom.name=this.name;done(this)}getVertexSize(vertex_data,padding){if(padding==null){padding=0}switch(vertex_data){case"short2norm":return 2-padding;case"short4norm":return 4-padding;default:return 0}}static parse(name,id,done){iron_data_Data.getSceneRaw(name,function(format){let raw=iron_data_Data.getMeshRawByName(format.mesh_datas,id);if(raw==null){haxe_Log.trace('Mesh data "'+id+'" not found!',{fileName:"Sources/iron/data/MeshData.hx",lineNumber:100,className:"iron.data.MeshData",methodName:"parse"});done(null)}new iron_data_MeshData(raw,function(dat){dat.format=format;if(raw.skin!=null){dat.geom.skinBoneCounts=raw.skin.bone_count_array;dat.geom.skinBoneIndices=raw.skin.bone_index_array;dat.geom.skinBoneWeights=raw.skin.bone_weight_array;dat.geom.skeletonBoneRefs=raw.skin.bone_ref_array;dat.geom.skeletonBoneLens=raw.skin.bone_len_array;dat.geom.initSkeletonTransforms(raw.skin.transformsI)}done(dat)})})}}$hxClasses["iron.data.MeshData"]=iron_data_MeshData;iron_data_MeshData.__name__=true;Object.assign(iron_data_MeshData.prototype,{__class__:iron_data_MeshData});class iron_data_ParticleData{constructor(raw,done){this.raw=raw;this.name=raw.name;done(this)}static parse(name,id,done){iron_data_Data.getSceneRaw(name,function(format){let raw=iron_data_Data.getParticleRawByName(format.particle_datas,id);if(raw==null){haxe_Log.trace('Particle data "'+id+'" not found!',{fileName:"Sources/iron/data/ParticleData.hx",lineNumber:21,className:"iron.data.ParticleData",methodName:"parse"});done(null)}new iron_data_ParticleData(raw,done)})}}$hxClasses["iron.data.ParticleData"]=iron_data_ParticleData;iron_data_ParticleData.__name__=true;Object.assign(iron_data_ParticleData.prototype,{__class__:iron_data_ParticleData});class iron_data_ShaderData{constructor(raw,done,overrideContext){this.contexts=[];this.raw=raw;this.name=raw.name;let _g=0;let _g1=raw.contexts;while(_g<_g1.length){let c=_g1[_g];++_g;this.contexts.push(null)}let contextsLoaded=0;let _gthis=this;let _g2=0;let _g3=raw.contexts.length;while(_g2<_g3){let i=_g2++;let c=raw.contexts[i];new iron_data_ShaderContext(c,function(con){_gthis.contexts[i]=con;contextsLoaded+=1;if(contextsLoaded==raw.contexts.length){done(_gthis)}},overrideContext)}}getContext(name){let _g=0;let _g1=this.contexts;while(_g<_g1.length){let c=_g1[_g];++_g;if(c.raw.name==name){return c}}return null}static parse(file,name,done,overrideContext){iron_data_Data.getSceneRaw(file,function(format){let raw=iron_data_Data.getShaderRawByName(format.shader_datas,name);if(raw==null){haxe_Log.trace('Shader data "'+name+'" not found!',{fileName:"Sources/iron/data/ShaderData.hx",lineNumber:54,className:"iron.data.ShaderData",methodName:"parse"});done(null)}new iron_data_ShaderData(raw,done,overrideContext)})}}$hxClasses["iron.data.ShaderData"]=iron_data_ShaderData;iron_data_ShaderData.__name__=true;Object.assign(iron_data_ShaderData.prototype,{__class__:iron_data_ShaderData});class iron_data_ShaderContext{constructor(raw,done,overrideContext){this.instancingType=0;this.raw=raw;if(raw.name=="voxel"){done(this);return}this.overrideContext=overrideContext;this.parseVertexStructure();this.compile(done)}compile(done){if(this.pipeState!=null){this.pipeState.delete()}this.pipeState=new kha_graphics4_PipelineState;this.constants=[];this.textureUnits=[];if(this.instancingType>0){let instStruct=new kha_graphics4_VertexStructure;instStruct.add("ipos",2);if(this.instancingType==2||this.instancingType==4){instStruct.add("irot",2)}if(this.instancingType==3||this.instancingType==4){instStruct.add("iscl",2)}instStruct.instanced=true;this.pipeState.inputLayout=[this.structure,instStruct]}else{this.pipeState.inputLayout=[this.structure]}this.pipeState.depthWrite=this.raw.depth_write;this.pipeState.depthMode=this.getCompareMode(this.raw.compare_mode);this.pipeState.cullMode=this.getCullMode(this.raw.cull_mode);if(this.raw.blend_source!=null){this.pipeState.blendSource=this.getBlendingFactor(this.raw.blend_source)}if(this.raw.blend_destination!=null){this.pipeState.blendDestination=this.getBlendingFactor(this.raw.blend_destination)}if(this.raw.blend_operation!=null){this.pipeState.blendOperation=this.getBlendingOperation(this.raw.blend_operation)}if(this.raw.alpha_blend_source!=null){this.pipeState.alphaBlendSource=this.getBlendingFactor(this.raw.alpha_blend_source)}if(this.raw.alpha_blend_destination!=null){this.pipeState.alphaBlendDestination=this.getBlendingFactor(this.raw.alpha_blend_destination)}if(this.raw.alpha_blend_operation!=null){this.pipeState.alphaBlendOperation=this.getBlendingOperation(this.raw.alpha_blend_operation)}if(this.raw.color_writes_red!=null){let _g=0;let _g1=this.raw.color_writes_red.length;while(_g<_g1){let i=_g++;this.pipeState.colorWriteMasksRed[i]=this.raw.color_writes_red[i]}}if(this.raw.color_writes_green!=null){let _g=0;let _g1=this.raw.color_writes_green.length;while(_g<_g1){let i=_g++;this.pipeState.colorWriteMasksGreen[i]=this.raw.color_writes_green[i]}}if(this.raw.color_writes_blue!=null){let _g=0;let _g1=this.raw.color_writes_blue.length;while(_g<_g1){let i=_g++;this.pipeState.colorWriteMasksBlue[i]=this.raw.color_writes_blue[i]}}if(this.raw.color_writes_alpha!=null){let _g=0;let _g1=this.raw.color_writes_alpha.length;while(_g<_g1){let i=_g++;this.pipeState.colorWriteMasksAlpha[i]=this.raw.color_writes_alpha[i]}}if(this.raw.color_attachments!=null){this.pipeState.colorAttachmentCount=this.raw.color_attachments.length;let _g=0;let _g1=this.raw.color_attachments.length;while(_g<_g1){let i=_g++;this.pipeState.colorAttachments[i]=this.getTextureFormat(this.raw.color_attachments[i])}}let tmp=this.raw.depth_attachment!=null;if(this.raw.conservative_raster!=null){this.pipeState.conservativeRasterization=this.raw.conservative_raster}if(this.raw.shader_from_source){this.pipeState.vertexShader=kha_graphics4_VertexShader.fromSource(this.raw.vertex_shader);this.pipeState.fragmentShader=kha_graphics4_FragmentShader.fromSource(this.raw.fragment_shader);if(this.pipeState.vertexShader.shader==null||this.pipeState.fragmentShader.shader==null){done(null);return}this.finishCompile(done)}else{let tmp=StringTools.replace(this.raw.fragment_shader,".","_");this.pipeState.fragmentShader=Reflect.field(kha_Shaders,tmp);let tmp1=StringTools.replace(this.raw.vertex_shader,".","_");this.pipeState.vertexShader=Reflect.field(kha_Shaders,tmp1);if(this.raw.geometry_shader!=null){let tmp=StringTools.replace(this.raw.geometry_shader,".","_");this.pipeState.geometryShader=Reflect.field(kha_Shaders,tmp)}if(this.raw.tesscontrol_shader!=null){let tmp=StringTools.replace(this.raw.tesscontrol_shader,".","_");this.pipeState.tessellationControlShader=Reflect.field(kha_Shaders,tmp)}if(this.raw.tesseval_shader!=null){let tmp=StringTools.replace(this.raw.tesseval_shader,".","_");this.pipeState.tessellationEvaluationShader=Reflect.field(kha_Shaders,tmp)}this.finishCompile(done)}}finishCompile(done){if(this.overrideContext!=null){if(this.overrideContext.cull_mode!=null){this.pipeState.cullMode=this.getCullMode(this.overrideContext.cull_mode)}}this.pipeState.compile();if(this.raw.constants!=null){let _g=0;let _g1=this.raw.constants;while(_g<_g1.length){let c=_g1[_g];++_g;this.addConstant(c)}}if(this.raw.texture_units!=null){let _g=0;let _g1=this.raw.texture_units;while(_g<_g1.length){let tu=_g1[_g];++_g;this.addTexture(tu)}}done(this)}parseVertexStructure(){this.structure=new kha_graphics4_VertexStructure;let ipos=false;let irot=false;let iscl=false;let _g=0;let _g1=this.raw.vertex_elements;while(_g<_g1.length){let elem=_g1[_g];++_g;if(elem.name=="ipos"){ipos=true;continue}if(elem.name=="irot"){irot=true;continue}if(elem.name=="iscl"){iscl=true;continue}this.structure.add(elem.name,iron_data_ShaderContext.parseData(elem.data))}if(ipos&&!irot&&!iscl){this.instancingType=1}else if(ipos&&irot&&!iscl){this.instancingType=2}else if(ipos&&!irot&&iscl){this.instancingType=3}else if(ipos&&irot&&iscl){this.instancingType=4}}getCompareMode(s){switch(s){case"always":return 0;case"equal":return 2;case"greater":return 6;case"greater_equal":return 7;case"less":return 4;case"less_equal":return 5;case"never":return 1;case"not_equal":return 3;default:return 4}}getCullMode(s){switch(s){case"clockwise":return 0;case"none":return 2;default:return 1}}getBlendingOperation(s){switch(s){case"add":return 0;case"max":return 4;case"min":return 3;case"reverse_subtract":return 2;case"subtract":return 1;default:return 0}}getBlendingFactor(s){switch(s){case"blend_one":return 1;case"blend_zero":return 2;case"destination_alpha":return 4;case"destination_color":return 8;case"inverse_destination_alpha":return 6;case"inverse_destination_color":return 10;case"inverse_source_alpha":return 5;case"inverse_source_color":return 9;case"source_alpha":return 3;case"source_color":return 7;default:return 0}}getTextureAddresing(s){switch(s){case"mirror":return 1;case"repeat":return 0;default:return 2}}getTextureFilter(s){switch(s){case"linear":return 1;case"point":return 0;default:return 2}}getMipmapFilter(s){switch(s){case"no":return 0;case"point":return 1;default:return 2}}getTextureFormat(s){switch(s){case"DEPTH16":return 3;case"R16":return 6;case"R32":return 5;case"R8":return 1;case"RGBA128":return 2;case"RGBA32":return 0;case"RGBA64":return 4;default:return 0}}addConstant(c){this.constants.push(this.pipeState.getConstantLocation(c.name))}addTexture(tu){let unit=this.pipeState.getTextureUnit(tu.name);this.textureUnits.push(unit)}setTextureParameters(g,unitIndex,tex){let unit=this.textureUnits[unitIndex];g.setTextureParameters(unit,tex.u_addressing==null?0:this.getTextureAddresing(tex.u_addressing),tex.v_addressing==null?0:this.getTextureAddresing(tex.v_addressing),tex.min_filter==null?1:this.getTextureFilter(tex.min_filter),tex.mag_filter==null?1:this.getTextureFilter(tex.mag_filter),tex.mipmap_filter==null?0:this.getMipmapFilter(tex.mipmap_filter))}static parseData(data){if(data=="float1"){return 0}else if(data=="float2"){return 1}else if(data=="float3"){return 2}else if(data=="float4"){return 3}else if(data=="short2norm"){return 23}else if(data=="short4norm"){return 27}return 0}}$hxClasses["iron.data.ShaderContext"]=iron_data_ShaderContext;iron_data_ShaderContext.__name__=true;Object.assign(iron_data_ShaderContext.prototype,{__class__:iron_data_ShaderContext});class iron_data_WorldData{constructor(raw,done){this.raw=raw;this.name=raw.name;let _gthis=this;if(raw.probe!=null){new iron_data_Probe(raw.probe,function(self){_gthis.probe=self;_gthis.loadEnvmap(done)})}else{this.loadEnvmap(done)}}loadEnvmap(done){let _gthis=this;if(this.raw.envmap!=null){iron_data_Data.getImage(this.raw.envmap,function(image){_gthis.envmap=image;done(_gthis)})}else{done(this)}}static parse(name,id,done){iron_data_Data.getSceneRaw(name,function(format){let raw=iron_data_Data.getWorldRawByName(format.world_datas,id);if(raw==null){haxe_Log.trace('World data "'+id+'" not found!',{fileName:"Sources/iron/data/WorldData.hx",lineNumber:57,className:"iron.data.WorldData",methodName:"parse"});done(null)}new iron_data_WorldData(raw,done)})}static getEmptyIrradiance(){if(iron_data_WorldData.emptyIrr==null){iron_data_WorldData.emptyIrr=kha_arrays_Float32Array._new(28);let _g=0;let _g1=iron_data_WorldData.emptyIrr.byteLength>>2;while(_g<_g1){let i=_g++;iron_data_WorldData.emptyIrr.setFloat32(i*4,0,true)}}return iron_data_WorldData.emptyIrr}}$hxClasses["iron.data.WorldData"]=iron_data_WorldData;iron_data_WorldData.__name__=true;Object.assign(iron_data_WorldData.prototype,{__class__:iron_data_WorldData});class iron_data_Probe{constructor(raw,done){this.radianceMipmaps=[];this.raw=raw;let _gthis=this;this.setIrradiance(function(irr){_gthis.irradiance=irr;if(raw.radiance!=null){iron_data_Data.getImage(raw.radiance,function(rad){_gthis.radiance=rad;while(_gthis.radianceMipmaps.length<raw.radiance_mipmaps)_gthis.radianceMipmaps.push(null);let dot=raw.radiance.lastIndexOf(".");let ext=raw.radiance.substring(dot);let base=raw.radiance.substring(0,dot);let mipsLoaded=0;let _g=0;let _g1=raw.radiance_mipmaps;while(_g<_g1){let i=_g++;iron_data_Data.getImage(base+"_"+i+ext,function(mipimg){_gthis.radianceMipmaps[i]=mipimg;mipsLoaded+=1;if(mipsLoaded==raw.radiance_mipmaps){_gthis.radiance.setMipmaps(_gthis.radianceMipmaps);done(_gthis)}},true)}})}else{done(_gthis)}})}setIrradiance(done){if(this.raw.irradiance==null){done(iron_data_WorldData.getEmptyIrradiance())}else{let ext=this.raw.irradiance.endsWith(".json")?"":".arm";iron_data_Data.getBlob(this.raw.irradiance+ext,function(b){let irradianceParsed;if(ext==""){irradianceParsed=JSON.parse(b.toString())}else{let i=new haxe_io_BytesInput(b.toBytes());i.set_bigEndian(false);irradianceParsed=iron_system_ArmPack.read(i)}let irr=kha_arrays_Float32Array._new(28);let v=irradianceParsed.irradiance.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(0,v,true);let v1=irradianceParsed.irradiance.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(4,v1,true);let v2=irradianceParsed.irradiance.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(8,v2,true);let v3=irradianceParsed.irradiance.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(12,v3,true);let v4=irradianceParsed.irradiance.getFloat32(16,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(16,v4,true);let v5=irradianceParsed.irradiance.getFloat32(20,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(20,v5,true);let v6=irradianceParsed.irradiance.getFloat32(24,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(24,v6,true);let v7=irradianceParsed.irradiance.getFloat32(28,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(28,v7,true);let v8=irradianceParsed.irradiance.getFloat32(32,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(32,v8,true);let v9=irradianceParsed.irradiance.getFloat32(36,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(36,v9,true);let v10=irradianceParsed.irradiance.getFloat32(40,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(40,v10,true);let v11=irradianceParsed.irradiance.getFloat32(44,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(44,v11,true);let v12=irradianceParsed.irradiance.getFloat32(48,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(48,v12,true);let v13=irradianceParsed.irradiance.getFloat32(52,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(52,v13,true);let v14=irradianceParsed.irradiance.getFloat32(56,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(56,v14,true);let v15=irradianceParsed.irradiance.getFloat32(60,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(60,v15,true);let v16=irradianceParsed.irradiance.getFloat32(64,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(64,v16,true);let v17=irradianceParsed.irradiance.getFloat32(68,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(68,v17,true);let v18=irradianceParsed.irradiance.getFloat32(72,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(72,v18,true);let v19=irradianceParsed.irradiance.getFloat32(76,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(76,v19,true);let v20=irradianceParsed.irradiance.getFloat32(80,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(80,v20,true);let v21=irradianceParsed.irradiance.getFloat32(84,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(84,v21,true);let v22=irradianceParsed.irradiance.getFloat32(88,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(88,v22,true);let v23=irradianceParsed.irradiance.getFloat32(92,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(92,v23,true);let v24=irradianceParsed.irradiance.getFloat32(96,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(96,v24,true);let v25=irradianceParsed.irradiance.getFloat32(100,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(100,v25,true);let v26=irradianceParsed.irradiance.getFloat32(104,kha_arrays_ByteArray.LITTLE_ENDIAN);irr.setFloat32(104,v26,true);done(irr)})}}}$hxClasses["iron.data.Probe"]=iron_data_Probe;iron_data_Probe.__name__=true;Object.assign(iron_data_Probe.prototype,{__class__:iron_data_Probe});class iron_math_Mat3{constructor(_00,_10,_20,_01,_11,_21,_02,_12,_22){this.self=new kha_math_FastMatrix3(_00,_10,_20,_01,_11,_21,_02,_12,_22)}}$hxClasses["iron.math.Mat3"]=iron_math_Mat3;iron_math_Mat3.__name__=true;Object.assign(iron_math_Mat3.prototype,{__class__:iron_math_Mat3});class kha_math_FastMatrix4{constructor(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33){this._00=_00;this._10=_10;this._20=_20;this._30=_30;this._01=_01;this._11=_11;this._21=_21;this._31=_31;this._02=_02;this._12=_12;this._22=_22;this._32=_32;this._03=_03;this._13=_13;this._23=_23;this._33=_33}}$hxClasses["kha.math.FastMatrix4"]=kha_math_FastMatrix4;kha_math_FastMatrix4.__name__=true;Object.assign(kha_math_FastMatrix4.prototype,{__class__:kha_math_FastMatrix4});class iron_math_Vec4{constructor(x,y,z,w){if(w==null){w=1}if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.z=z;this.w=w}}$hxClasses["iron.math.Vec4"]=iron_math_Vec4;iron_math_Vec4.__name__=true;Object.assign(iron_math_Vec4.prototype,{__class__:iron_math_Vec4});class iron_math_Mat4{constructor(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33){this.self=new kha_math_FastMatrix4(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33)}}$hxClasses["iron.math.Mat4"]=iron_math_Mat4;iron_math_Mat4.__name__=true;Object.assign(iron_math_Mat4.prototype,{__class__:iron_math_Mat4});class iron_math_Quat{constructor(x,y,z,w){if(w==null){w=1}if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.z=z;this.w=w}}$hxClasses["iron.math.Quat"]=iron_math_Quat;iron_math_Quat.__name__=true;Object.assign(iron_math_Quat.prototype,{__class__:iron_math_Quat});class iron_math_Vec2{constructor(x,y){if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y}}$hxClasses["iron.math.Vec2"]=iron_math_Vec2;iron_math_Vec2.__name__=true;Object.assign(iron_math_Vec2.prototype,{__class__:iron_math_Vec2});class iron_object_Animation{constructor(){if(iron_object_Animation._hx_skip_constructor){return}this._hx_constructor()}_hx_constructor(){this.markerEvents=null;this.lastFrameIndex=-1;this.blendFactor=0;this.blendAction="";this.blendCurrent=0;this.blendTime=0;this.frameTime=.016666666666666666;this.paused=false;this.onComplete=null;this.frameIndex=0;this.loop=true;this.speed=1;this.time=0;this.action="";iron_Scene.active.animations.push(this);if(iron_Scene.active.raw.frame_time!=null){this.frameTime=iron_Scene.active.raw.frame_time}this.play()}play(action,onComplete,blendTime,speed,loop){if(loop==null){loop=true}if(speed==null){speed=1}if(blendTime==null){blendTime=0}if(action==null){action=""}if(blendTime>0){this.blendTime=blendTime;this.blendCurrent=0;this.blendAction=this.action;this.frameIndex=0;this.time=0}else{this.frameIndex=-1}this.action=action;this.onComplete=onComplete;this.speed=speed;this.loop=loop;this.paused=false}remove(){HxOverrides.remove(iron_Scene.active.animations,this)}update(delta){if(this.paused||this.speed==0){return}this.time+=delta*this.speed;if(this.blendTime>0&&this.blendFactor==0){this.blendCurrent+=delta;if(this.blendCurrent>=this.blendTime){this.blendTime=0}}}isTrackEnd(track){if(this.speed>0){return this.frameIndex>=(track.frames.byteLength>>2)-1}else{return this.frameIndex<=0}}rewind(track){this.frameIndex=this.speed>0?0:(track.frames.byteLength>>2)-1;this.time=track.frames.getUint32(this.frameIndex*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime}updateTrack(anim){if(anim==null){return}let track=anim.tracks[0];if(this.frameIndex==-1){this.rewind(track)}let sign=this.speed>0?1:-1;while(true){let frameValues=track.frames;if(!(this.speed>0?this.frameIndex+1<frameValues.byteLength>>2&&this.time>frameValues.getUint32((this.frameIndex+1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime:this.frameIndex-1>-1&&this.time<frameValues.getUint32((this.frameIndex-1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime)){break}this.frameIndex+=sign}if(this.markerEvents!=null&&anim.marker_names!=null&&this.frameIndex!=this.lastFrameIndex){let _g=0;let _g1=anim.marker_frames.byteLength>>2;while(_g<_g1){let i=_g++;if(this.frameIndex==anim.marker_frames.getUint32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN)){let ar=this.markerEvents.h[anim.marker_names[i]];if(ar!=null){let _g=0;while(_g<ar.length){let f=ar[_g];++_g;f()}}}}this.lastFrameIndex=this.frameIndex}if(this.isTrackEnd(track)){if(this.loop||this.blendTime>0){this.rewind(track)}else{this.frameIndex-=sign;this.paused=true}if(this.onComplete!=null&&this.blendTime==0){this.onComplete()}}}updateAnimSampled(anim,m){if(anim==null){return}let track=anim.tracks[0];let sign=this.speed>0?1:-1;let t=this.time;let ti=this.frameIndex;let t1=track.frames.getUint32(ti*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime;let t2=track.frames.getUint32((ti+sign)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime;let s=(t-t1)/(t2-t1);let _this=iron_object_Animation.m1;let a=track.values;let offset=ti*16;if(offset==null){offset=0}_this.self._00=a.getFloat32(offset*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._10=a.getFloat32((1+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._20=a.getFloat32((2+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._30=a.getFloat32((3+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._01=a.getFloat32((4+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._11=a.getFloat32((5+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._21=a.getFloat32((6+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._31=a.getFloat32((7+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._02=a.getFloat32((8+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._12=a.getFloat32((9+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._22=a.getFloat32((10+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._32=a.getFloat32((11+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._03=a.getFloat32((12+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._13=a.getFloat32((13+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._23=a.getFloat32((14+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.self._33=a.getFloat32((15+offset)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let _this1=iron_object_Animation.m2;let a1=track.values;let offset1=(ti+sign)*16;if(offset1==null){offset1=0}_this1.self._00=a1.getFloat32(offset1*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._10=a1.getFloat32((1+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._20=a1.getFloat32((2+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._30=a1.getFloat32((3+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._01=a1.getFloat32((4+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._11=a1.getFloat32((5+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._21=a1.getFloat32((6+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._31=a1.getFloat32((7+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._02=a1.getFloat32((8+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._12=a1.getFloat32((9+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._22=a1.getFloat32((10+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._32=a1.getFloat32((11+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._03=a1.getFloat32((12+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._13=a1.getFloat32((13+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._23=a1.getFloat32((14+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._33=a1.getFloat32((15+offset1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let _this2=iron_object_Animation.m1;let loc=iron_object_Animation.vpos;let quat=iron_object_Animation.q1;let scale=iron_object_Animation.vscl;loc.x=_this2.self._30;loc.y=_this2.self._31;loc.z=_this2.self._32;let _this3=iron_math_Mat4.helpVec;_this3.x=_this2.self._00;_this3.y=_this2.self._01;_this3.z=_this2.self._02;_this3.w=1;let _this4=_this3;scale.x=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);let _this5=iron_math_Mat4.helpVec;_this5.x=_this2.self._10;_this5.y=_this2.self._11;_this5.z=_this2.self._12;_this5.w=1;let _this6=_this5;scale.y=Math.sqrt(_this6.x*_this6.x+_this6.y*_this6.y+_this6.z*_this6.z);let _this7=iron_math_Mat4.helpVec;_this7.x=_this2.self._20;_this7.y=_this2.self._21;_this7.z=_this2.self._22;_this7.w=1;let _this8=_this7;scale.z=Math.sqrt(_this8.x*_this8.x+_this8.y*_this8.y+_this8.z*_this8.z);let _this9=_this2.self;let m3=_this9._12;let m4=_this9._22;let m5=_this9._32;let m6=_this9._13;let m7=_this9._23;let m8=_this9._33;let c00=_this9._11*(m4*m8-m5*m7)-_this9._21*(m3*m8-m5*m6)+_this9._31*(m3*m7-m4*m6);let m31=_this9._12;let m41=_this9._22;let m51=_this9._32;let m61=_this9._13;let m71=_this9._23;let m81=_this9._33;let c01=_this9._10*(m41*m81-m51*m71)-_this9._20*(m31*m81-m51*m61)+_this9._30*(m31*m71-m41*m61);let m32=_this9._11;let m42=_this9._21;let m52=_this9._31;let m62=_this9._13;let m72=_this9._23;let m82=_this9._33;let c02=_this9._10*(m42*m82-m52*m72)-_this9._20*(m32*m82-m52*m62)+_this9._30*(m32*m72-m42*m62);let m33=_this9._11;let m43=_this9._21;let m53=_this9._31;let m63=_this9._12;let m73=_this9._22;let m83=_this9._32;let c03=_this9._10*(m43*m83-m53*m73)-_this9._20*(m33*m83-m53*m63)+_this9._30*(m33*m73-m43*m63);if(_this9._00*c00-_this9._01*c01+_this9._02*c02-_this9._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this2.self._00*invs;iron_math_Mat4.helpMat.self._01=_this2.self._01*invs;iron_math_Mat4.helpMat.self._02=_this2.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this2.self._10*invs;iron_math_Mat4.helpMat.self._11=_this2.self._11*invs;iron_math_Mat4.helpMat.self._12=_this2.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this2.self._20*invs;iron_math_Mat4.helpMat.self._21=_this2.self._21*invs;iron_math_Mat4.helpMat.self._22=_this2.self._22*invs;let m1=iron_math_Mat4.helpMat;let m11=m1.self._00;let m12=m1.self._10;let m13=m1.self._20;let m21=m1.self._01;let m22=m1.self._11;let m23=m1.self._21;let m311=m1.self._02;let m321=m1.self._12;let m331=m1.self._22;let tr=m11+m22+m331;let s1=0;if(tr>0){s1=.5/Math.sqrt(tr+1);quat.w=.25/s1;quat.x=(m321-m23)*s1;quat.y=(m13-m311)*s1;quat.z=(m21-m12)*s1}else if(m11>m22&&m11>m331){s1=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s1;quat.x=.25*s1;quat.y=(m12+m21)/s1;quat.z=(m13+m311)/s1}else if(m22>m331){s1=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s1;quat.x=(m12+m21)/s1;quat.y=.25*s1;quat.z=(m23+m321)/s1}else{s1=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s1;quat.x=(m13+m311)/s1;quat.y=(m23+m321)/s1;quat.z=.25*s1}let _this10=iron_object_Animation.m2;let loc1=iron_object_Animation.vpos2;let quat1=iron_object_Animation.q2;let scale1=iron_object_Animation.vscl2;loc1.x=_this10.self._30;loc1.y=_this10.self._31;loc1.z=_this10.self._32;let _this11=iron_math_Mat4.helpVec;_this11.x=_this10.self._00;_this11.y=_this10.self._01;_this11.z=_this10.self._02;_this11.w=1;let _this12=_this11;scale1.x=Math.sqrt(_this12.x*_this12.x+_this12.y*_this12.y+_this12.z*_this12.z);let _this13=iron_math_Mat4.helpVec;_this13.x=_this10.self._10;_this13.y=_this10.self._11;_this13.z=_this10.self._12;_this13.w=1;let _this14=_this13;scale1.y=Math.sqrt(_this14.x*_this14.x+_this14.y*_this14.y+_this14.z*_this14.z);let _this15=iron_math_Mat4.helpVec;_this15.x=_this10.self._20;_this15.y=_this10.self._21;_this15.z=_this10.self._22;_this15.w=1;let _this16=_this15;scale1.z=Math.sqrt(_this16.x*_this16.x+_this16.y*_this16.y+_this16.z*_this16.z);let _this17=_this10.self;let m34=_this17._12;let m44=_this17._22;let m54=_this17._32;let m64=_this17._13;let m74=_this17._23;let m84=_this17._33;let c001=_this17._11*(m44*m84-m54*m74)-_this17._21*(m34*m84-m54*m64)+_this17._31*(m34*m74-m44*m64);let m35=_this17._12;let m45=_this17._22;let m55=_this17._32;let m65=_this17._13;let m75=_this17._23;let m85=_this17._33;let c011=_this17._10*(m45*m85-m55*m75)-_this17._20*(m35*m85-m55*m65)+_this17._30*(m35*m75-m45*m65);let m36=_this17._11;let m46=_this17._21;let m56=_this17._31;let m66=_this17._13;let m76=_this17._23;let m86=_this17._33;let c021=_this17._10*(m46*m86-m56*m76)-_this17._20*(m36*m86-m56*m66)+_this17._30*(m36*m76-m46*m66);let m37=_this17._11;let m47=_this17._21;let m57=_this17._31;let m67=_this17._12;let m77=_this17._22;let m87=_this17._32;let c031=_this17._10*(m47*m87-m57*m77)-_this17._20*(m37*m87-m57*m67)+_this17._30*(m37*m77-m47*m67);if(_this17._00*c001-_this17._01*c011+_this17._02*c021-_this17._03*c031<0){scale1.x=-scale1.x}let invs1=1/scale1.x;iron_math_Mat4.helpMat.self._00=_this10.self._00*invs1;iron_math_Mat4.helpMat.self._01=_this10.self._01*invs1;iron_math_Mat4.helpMat.self._02=_this10.self._02*invs1;invs1=1/scale1.y;iron_math_Mat4.helpMat.self._10=_this10.self._10*invs1;iron_math_Mat4.helpMat.self._11=_this10.self._11*invs1;iron_math_Mat4.helpMat.self._12=_this10.self._12*invs1;invs1=1/scale1.z;iron_math_Mat4.helpMat.self._20=_this10.self._20*invs1;iron_math_Mat4.helpMat.self._21=_this10.self._21*invs1;iron_math_Mat4.helpMat.self._22=_this10.self._22*invs1;let m2=iron_math_Mat4.helpMat;let m111=m2.self._00;let m121=m2.self._10;let m131=m2.self._20;let m211=m2.self._01;let m221=m2.self._11;let m231=m2.self._21;let m312=m2.self._02;let m322=m2.self._12;let m332=m2.self._22;let tr1=m111+m221+m332;let s2=0;if(tr1>0){s2=.5/Math.sqrt(tr1+1);quat1.w=.25/s2;quat1.x=(m322-m231)*s2;quat1.y=(m131-m312)*s2;quat1.z=(m211-m121)*s2}else if(m111>m221&&m111>m332){s2=2*Math.sqrt(1+m111-m221-m332);quat1.w=(m322-m231)/s2;quat1.x=.25*s2;quat1.y=(m121+m211)/s2;quat1.z=(m131+m312)/s2}else if(m221>m332){s2=2*Math.sqrt(1+m221-m111-m332);quat1.w=(m131-m312)/s2;quat1.x=(m121+m211)/s2;quat1.y=.25*s2;quat1.z=(m231+m322)/s2}else{s2=2*Math.sqrt(1+m332-m111-m221);quat1.w=(m211-m121)/s2;quat1.x=(m131+m312)/s2;quat1.y=(m231+m322)/s2;quat1.z=.25*s2}let _this18=iron_object_Animation.vp;let from=iron_object_Animation.vpos;let to=iron_object_Animation.vpos2;_this18.x=from.x+(to.x-from.x)*s;_this18.y=from.y+(to.y-from.y)*s;_this18.z=from.z+(to.z-from.z)*s;let _this19=iron_object_Animation.vs;let from1=iron_object_Animation.vscl;let to1=iron_object_Animation.vscl2;_this19.x=from1.x+(to1.x-from1.x)*s;_this19.y=from1.y+(to1.y-from1.y)*s;_this19.z=from1.z+(to1.z-from1.z)*s;let _this20=iron_object_Animation.q3;let from2=iron_object_Animation.q1;let to2=iron_object_Animation.q2;let fromx=from2.x;let fromy=from2.y;let fromz=from2.z;let fromw=from2.w;let dot=from2.x*to2.x+from2.y*to2.y+from2.z*to2.z+from2.w*to2.w;if(dot<0){fromx=-fromx;fromy=-fromy;fromz=-fromz;fromw=-fromw}_this20.x=fromx+(to2.x-fromx)*s;_this20.y=fromy+(to2.y-fromy)*s;_this20.z=fromz+(to2.z-fromz)*s;_this20.w=fromw+(to2.w-fromw)*s;let l=Math.sqrt(_this20.x*_this20.x+_this20.y*_this20.y+_this20.z*_this20.z+_this20.w*_this20.w);if(l==0){_this20.x=0;_this20.y=0;_this20.z=0;_this20.w=0}else{l=1/l;_this20.x*=l;_this20.y*=l;_this20.z*=l;_this20.w*=l}let q=iron_object_Animation.q3;let x=q.x;let y=q.y;let z=q.z;let w=q.w;let x2=x+x;let y2=y+y;let z2=z+z;let xx=x*x2;let xy=x*y2;let xz=x*z2;let yy=y*y2;let yz=y*z2;let zz=z*z2;let wx=w*x2;let wy=w*y2;let wz=w*z2;m.self._00=1-(yy+zz);m.self._10=xy-wz;m.self._20=xz+wy;m.self._01=xy+wz;m.self._11=1-(xx+zz);m.self._21=yz-wx;m.self._02=xz-wy;m.self._12=yz+wx;m.self._22=1-(xx+yy);m.self._03=0;m.self._13=0;m.self._23=0;m.self._30=0;m.self._31=0;m.self._32=0;m.self._33=1;let v=iron_object_Animation.vs;let x1=v.x;let y1=v.y;let z1=v.z;m.self._00*=x1;m.self._01*=x1;m.self._02*=x1;m.self._03*=x1;m.self._10*=y1;m.self._11*=y1;m.self._12*=y1;m.self._13*=y1;m.self._20*=z1;m.self._21*=z1;m.self._22*=z1;m.self._23*=z1;m.self._30=iron_object_Animation.vp.x;m.self._31=iron_object_Animation.vp.y;m.self._32=iron_object_Animation.vp.z}}$hxClasses["iron.object.Animation"]=iron_object_Animation;iron_object_Animation.__name__=true;Object.assign(iron_object_Animation.prototype,{__class__:iron_object_Animation});class iron_object_BoneAnimation extends iron_object_Animation{constructor(armatureName){iron_object_Animation._hx_skip_constructor=true;super();iron_object_Animation._hx_skip_constructor=false;this._hx_constructor(armatureName)}_hx_constructor(armatureName){if(armatureName==null){armatureName=""}this.onUpdates=null;this.relativeBoneConstraints=false;this.constraintMats=null;this.constraintTargetsI=null;this.constraintTargets=null;this.boneChildren=null;this.matsFastBlendSort=[];this.matsFastBlend=[];this.matsFastSort=[];this.matsFast=[];this.applyParent=null;this.absMats=null;this.skeletonMatsBlend=null;this.skeletonBonesBlend=null;this.skeletonMats=null;this.skeletonBones=null;super._hx_constructor();this.isSampled=false;let _g=0;let _g1=iron_Scene.active.armatures;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.name==armatureName){this.armature=a;break}}}setSkin(mo){this.object=mo;this.data=mo!=null?mo.data:null;this.isSkinned=this.data!=null&&this.data.isSkinned;let _gthis=this;if(this.isSkinned){let boneSize=8;this.skinBuffer=kha_arrays_Float32Array._new(iron_object_BoneAnimation.skinMaxBones*boneSize);let _g=0;let _g1=this.skinBuffer.byteLength>>2;while(_g<_g1){let i=_g++;this.skinBuffer.setFloat32(i*4,0,true)}let _this=this.object.transform.rot;_this.x=0;_this.y=0;_this.z=0;_this.w=1;this.object.transform.buildMatrix();let refs=mo.parent.raw.bone_actions;if(refs!=null&&refs.length>0){iron_data_Data.getSceneRaw(refs[0],function(action){_gthis.play(action.name)})}}if(this.object.parent.raw.relative_bone_constraints){this.relativeBoneConstraints=true}}addBoneChild(bone,o){if(this.boneChildren==null){this.boneChildren=new haxe_ds_StringMap}let ar=this.boneChildren.h[bone];if(ar==null){ar=[];this.boneChildren.h[bone]=ar}ar.push(o)}updateBoneChildren(bone,bm){let ar=this.boneChildren.h[bone.name];if(ar==null){return}let _g=0;while(_g<ar.length){let o=ar[_g];++_g;let t=o.transform;if(t.boneParent==null){t.boneParent=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}if(o.raw.parent_bone_tail!=null){if(o.raw.parent_bone_connected||this.isSkinned){let v=o.raw.parent_bone_tail;let _this=t.boneParent;let x=v.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);let y=v.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let z=v.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=x;_this.self._31=y;_this.self._32=z;_this.self._33=1;let _this1=t.boneParent;let a00=_this1.self._00;let a01=_this1.self._01;let a02=_this1.self._02;let a03=_this1.self._03;let a10=_this1.self._10;let a11=_this1.self._11;let a12=_this1.self._12;let a13=_this1.self._13;let a20=_this1.self._20;let a21=_this1.self._21;let a22=_this1.self._22;let a23=_this1.self._23;let a30=_this1.self._30;let a31=_this1.self._31;let a32=_this1.self._32;let a33=_this1.self._33;let b0=bm.self._00;let b1=bm.self._10;let b2=bm.self._20;let b3=bm.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=bm.self._01;b1=bm.self._11;b2=bm.self._21;b3=bm.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=bm.self._02;b1=bm.self._12;b2=bm.self._22;b3=bm.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=bm.self._03;b1=bm.self._13;b2=bm.self._23;b3=bm.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3}else{let v=o.raw.parent_bone_tail_pose;let _this=t.boneParent;_this.self._00=bm.self._00;_this.self._01=bm.self._01;_this.self._02=bm.self._02;_this.self._03=bm.self._03;_this.self._10=bm.self._10;_this.self._11=bm.self._11;_this.self._12=bm.self._12;_this.self._13=bm.self._13;_this.self._20=bm.self._20;_this.self._21=bm.self._21;_this.self._22=bm.self._22;_this.self._23=bm.self._23;_this.self._30=bm.self._30;_this.self._31=bm.self._31;_this.self._32=bm.self._32;_this.self._33=bm.self._33;let _this1=t.boneParent;let x=v.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);let y=v.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let z=v.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);_this1.self._00+=x*_this1.self._03;_this1.self._01+=y*_this1.self._03;_this1.self._02+=z*_this1.self._03;_this1.self._10+=x*_this1.self._13;_this1.self._11+=y*_this1.self._13;_this1.self._12+=z*_this1.self._13;_this1.self._20+=x*_this1.self._23;_this1.self._21+=y*_this1.self._23;_this1.self._22+=z*_this1.self._23;_this1.self._30+=x*_this1.self._33;_this1.self._31+=y*_this1.self._33;_this1.self._32+=z*_this1.self._33}}else{let _this=t.boneParent;_this.self._00=bm.self._00;_this.self._01=bm.self._01;_this.self._02=bm.self._02;_this.self._03=bm.self._03;_this.self._10=bm.self._10;_this.self._11=bm.self._11;_this.self._12=bm.self._12;_this.self._13=bm.self._13;_this.self._20=bm.self._20;_this.self._21=bm.self._21;_this.self._22=bm.self._22;_this.self._23=bm.self._23;_this.self._30=bm.self._30;_this.self._31=bm.self._31;_this.self._32=bm.self._32;_this.self._33=bm.self._33}t.buildMatrix()}}numParents(b){let i=0;let p=b.parent;while(p!=null){++i;p=p.parent}return i}setMats(){while(this.matsFast.length<this.skeletonBones.length){this.matsFast.push(new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));this.matsFastSort.push(this.matsFastSort.length)}let _gthis=this;this.matsFastSort.sort(function(a,b){let i=_gthis.numParents(_gthis.skeletonBones[a]);let j=_gthis.numParents(_gthis.skeletonBones[b]);if(i<j){return-1}else if(i>j){return 1}else{return 0}});if(this.skeletonBonesBlend!=null){while(this.matsFastBlend.length<this.skeletonBonesBlend.length){this.matsFastBlend.push(new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));this.matsFastBlendSort.push(this.matsFastBlendSort.length)}this.matsFastBlendSort.sort(function(a,b){let i=_gthis.numParents(_gthis.skeletonBonesBlend[a]);let j=_gthis.numParents(_gthis.skeletonBonesBlend[b]);if(i<j){return-1}else if(i>j){return 1}else{return 0}})}}setAction(action){if(this.isSkinned){this.skeletonBones=this.data.geom.actions.h[action];this.skeletonMats=this.data.geom.mats.h[action];this.skeletonBonesBlend=null;this.skeletonMatsBlend=null}else{this.armature.initMats();let a=this.armature.getAction(action);this.skeletonBones=a.bones;this.skeletonMats=a.mats}this.setMats()}setActionBlend(action){if(this.isSkinned){this.skeletonBonesBlend=this.skeletonBones;this.skeletonMatsBlend=this.skeletonMats;this.skeletonBones=this.data.geom.actions.h[action];this.skeletonMats=this.data.geom.mats.h[action]}else{this.armature.initMats();let a=this.armature.getAction(action);this.skeletonBones=a.bones;this.skeletonMats=a.mats}this.setMats()}play(action,onComplete,blendTime,speed,loop){if(loop==null){loop=true}if(speed==null){speed=1}if(blendTime==null){blendTime=.2}if(action==null){action=""}super.play(action,onComplete,blendTime,speed,loop);if(action!=""){if(blendTime>0){this.setActionBlend(action)}else{this.setAction(action)}}this.blendFactor=0}update(delta){if(!this.isSkinned&&this.skeletonBones==null){this.setAction(this.armature.actions[0].name)}if(this.object!=null&&(!this.object.visible||this.object.culled)){return}if(this.skeletonBones==null||this.skeletonBones.length==0){return}super.update(delta);if(this.paused||this.speed==0){return}let lastBones=this.skeletonBones;let _g=0;let _g1=this.skeletonBones;while(_g<_g1.length){let b=_g1[_g];++_g;if(b.anim!=null){this.updateTrack(b.anim);break}}if(lastBones!=this.skeletonBones){return}let _g2=0;let _g3=this.skeletonBones.length;while(_g2<_g3){let i=_g2++;if(!this.skeletonBones[i].is_ik_fk_only){this.updateAnimSampled(this.skeletonBones[i].anim,this.skeletonMats[i])}}if(this.blendTime>0&&this.skeletonBonesBlend!=null){let _g=0;let _g1=this.skeletonBonesBlend;while(_g<_g1.length){let b=_g1[_g];++_g;if(b.anim!=null){this.updateTrack(b.anim);break}}let _g2=0;let _g3=this.skeletonBonesBlend.length;while(_g2<_g3){let i=_g2++;this.updateAnimSampled(this.skeletonBonesBlend[i].anim,this.skeletonMatsBlend[i])}}this.updateConstraints();if(this.onUpdates!=null){let i=0;let l=this.onUpdates.length;while(i<l){this.onUpdates[i]();if(l<=this.onUpdates.length){++i}else{l=this.onUpdates.length}}}let _g4=0;let _g5=this.skeletonBones.length;while(_g4<_g5){let i=_g4++;this.multParent(this.matsFastSort[i],this.matsFast,this.skeletonBones,this.skeletonMats)}if(this.skeletonBonesBlend!=null){let _g=0;let _g1=this.skeletonBonesBlend.length;while(_g<_g1){let i=_g++;this.multParent(this.matsFastBlendSort[i],this.matsFastBlend,this.skeletonBonesBlend,this.skeletonMatsBlend)}}if(this.isSkinned){this.updateSkinGpu()}else{this.updateBonesOnly()}}multParent(i,fasts,bones,mats){let f=fasts[i];if(this.applyParent!=null&&!this.applyParent[i]){let m=mats[i];f.self._00=m.self._00;f.self._01=m.self._01;f.self._02=m.self._02;f.self._03=m.self._03;f.self._10=m.self._10;f.self._11=m.self._11;f.self._12=m.self._12;f.self._13=m.self._13;f.self._20=m.self._20;f.self._21=m.self._21;f.self._22=m.self._22;f.self._23=m.self._23;f.self._30=m.self._30;f.self._31=m.self._31;f.self._32=m.self._32;f.self._33=m.self._33;return}let p=bones[i].parent;let bi=this.getBoneIndex(p,bones);if(p==null||bi==-1){let m=mats[i];f.self._00=m.self._00;f.self._01=m.self._01;f.self._02=m.self._02;f.self._03=m.self._03;f.self._10=m.self._10;f.self._11=m.self._11;f.self._12=m.self._12;f.self._13=m.self._13;f.self._20=m.self._20;f.self._21=m.self._21;f.self._22=m.self._22;f.self._23=m.self._23;f.self._30=m.self._30;f.self._31=m.self._31;f.self._32=m.self._32;f.self._33=m.self._33}else{let b=fasts[bi];let a=mats[i];let a00=a.self._00;let a01=a.self._01;let a02=a.self._02;let a03=a.self._03;let a10=a.self._10;let a11=a.self._11;let a12=a.self._12;let a13=a.self._13;let a20=a.self._20;let a21=a.self._21;let a22=a.self._22;let a23=a.self._23;let a30=a.self._30;let a31=a.self._31;let a32=a.self._32;let a33=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;f.self._00=a00*b0+a01*b1+a02*b2+a03*b3;f.self._10=a10*b0+a11*b1+a12*b2+a13*b3;f.self._20=a20*b0+a21*b1+a22*b2+a23*b3;f.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;f.self._01=a00*b0+a01*b1+a02*b2+a03*b3;f.self._11=a10*b0+a11*b1+a12*b2+a13*b3;f.self._21=a20*b0+a21*b1+a22*b2+a23*b3;f.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;f.self._02=a00*b0+a01*b1+a02*b2+a03*b3;f.self._12=a10*b0+a11*b1+a12*b2+a13*b3;f.self._22=a20*b0+a21*b1+a22*b2+a23*b3;f.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;f.self._03=a00*b0+a01*b1+a02*b2+a03*b3;f.self._13=a10*b0+a11*b1+a12*b2+a13*b3;f.self._23=a20*b0+a21*b1+a22*b2+a23*b3;f.self._33=a30*b0+a31*b1+a32*b2+a33*b3}}getConstraintsFromScene(cs){if(this.constraintTargets==null){this.constraintTargets=[];this.constraintTargetsI=[];let _g=0;while(_g<cs.length){let c=cs[_g];++_g;let o=iron_Scene.active.getChild(c.target);this.constraintTargets.push(o);let m=null;if(o!=null){let _this=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);let m1=o.transform.world;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;m=_this;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){m.self._00=1;m.self._01=0;m.self._02=0;m.self._03=0;m.self._10=0;m.self._11=1;m.self._12=0;m.self._13=0;m.self._20=0;m.self._21=0;m.self._22=1;m.self._23=0;m.self._30=0;m.self._31=0;m.self._32=0;m.self._33=1}else{det=1/det;m.self._00=(a11*b11-a12*b10+a13*b09)*det;m.self._01=(a02*b10-a01*b11-a03*b09)*det;m.self._02=(a31*b05-a32*b04+a33*b03)*det;m.self._03=(a22*b04-a21*b05-a23*b03)*det;m.self._10=(a12*b08-a10*b11-a13*b07)*det;m.self._11=(a00*b11-a02*b08+a03*b07)*det;m.self._12=(a32*b02-a30*b05-a33*b01)*det;m.self._13=(a20*b05-a22*b02+a23*b01)*det;m.self._20=(a10*b10-a11*b08+a13*b06)*det;m.self._21=(a01*b08-a00*b10-a03*b06)*det;m.self._22=(a30*b04-a31*b02+a33*b00)*det;m.self._23=(a21*b02-a20*b04-a23*b00)*det;m.self._30=(a11*b07-a10*b09-a12*b06)*det;m.self._31=(a00*b09-a01*b07+a02*b06)*det;m.self._32=(a31*b01-a30*b03-a32*b00)*det;m.self._33=(a20*b03-a21*b01+a22*b00)*det}}this.constraintTargetsI.push(m)}this.constraintMats=new haxe_ds_ObjectMap}}getConstraintsFromParentRelative(cs){if(this.constraintTargets==null){this.constraintTargets=[];this.constraintTargetsI=[];let conParent=this.object.parent.parent;if(conParent==null){return}let _g=0;while(_g<cs.length){let c=cs[_g];++_g;let o=conParent.getChild(c.target);this.constraintTargets.push(o);let m=null;if(o!=null){let _this=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);let m1=o.transform.world;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;m=_this;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){m.self._00=1;m.self._01=0;m.self._02=0;m.self._03=0;m.self._10=0;m.self._11=1;m.self._12=0;m.self._13=0;m.self._20=0;m.self._21=0;m.self._22=1;m.self._23=0;m.self._30=0;m.self._31=0;m.self._32=0;m.self._33=1}else{det=1/det;m.self._00=(a11*b11-a12*b10+a13*b09)*det;m.self._01=(a02*b10-a01*b11-a03*b09)*det;m.self._02=(a31*b05-a32*b04+a33*b03)*det;m.self._03=(a22*b04-a21*b05-a23*b03)*det;m.self._10=(a12*b08-a10*b11-a13*b07)*det;m.self._11=(a00*b11-a02*b08+a03*b07)*det;m.self._12=(a32*b02-a30*b05-a33*b01)*det;m.self._13=(a20*b05-a22*b02+a23*b01)*det;m.self._20=(a10*b10-a11*b08+a13*b06)*det;m.self._21=(a01*b08-a00*b10-a03*b06)*det;m.self._22=(a30*b04-a31*b02+a33*b00)*det;m.self._23=(a21*b02-a20*b04-a23*b00)*det;m.self._30=(a11*b07-a10*b09-a12*b06)*det;m.self._31=(a00*b09-a01*b07+a02*b06)*det;m.self._32=(a31*b01-a30*b03-a32*b00)*det;m.self._33=(a20*b03-a21*b01+a22*b00)*det}}this.constraintTargetsI.push(m)}this.constraintMats=new haxe_ds_ObjectMap}}updateConstraints(){if(this.data==null){return}let cs=this.data.raw.skin.constraints;if(cs==null){return}if(this.relativeBoneConstraints){this.getConstraintsFromParentRelative(cs)}else{this.getConstraintsFromScene(cs)}let _g=0;let _g1=cs.length;while(_g<_g1){let i=_g++;let c=cs[i];let bone=this.getBone(c.bone);if(bone==null){continue}let o=this.constraintTargets[i];if(o==null){continue}if(c.type=="CHILD_OF"){let m=this.constraintMats.h[bone.__id__];if(m==null){m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.constraintMats.set(bone,m)}let m1=this.object.parent.transform.world;m.self._00=m1.self._00;m.self._01=m1.self._01;m.self._02=m1.self._02;m.self._03=m1.self._03;m.self._10=m1.self._10;m.self._11=m1.self._11;m.self._12=m1.self._12;m.self._13=m1.self._13;m.self._20=m1.self._20;m.self._21=m1.self._21;m.self._22=m1.self._22;m.self._23=m1.self._23;m.self._30=m1.self._30;m.self._31=m1.self._31;m.self._32=m1.self._32;m.self._33=m1.self._33;let m2=this.constraintTargetsI[i];let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b0=m2.self._00;let b1=m2.self._10;let b2=m2.self._20;let b3=m2.self._30;m.self._00=a00*b0+a01*b1+a02*b2+a03*b3;m.self._10=a10*b0+a11*b1+a12*b2+a13*b3;m.self._20=a20*b0+a21*b1+a22*b2+a23*b3;m.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._01;b1=m2.self._11;b2=m2.self._21;b3=m2.self._31;m.self._01=a00*b0+a01*b1+a02*b2+a03*b3;m.self._11=a10*b0+a11*b1+a12*b2+a13*b3;m.self._21=a20*b0+a21*b1+a22*b2+a23*b3;m.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._02;b1=m2.self._12;b2=m2.self._22;b3=m2.self._32;m.self._02=a00*b0+a01*b1+a02*b2+a03*b3;m.self._12=a10*b0+a11*b1+a12*b2+a13*b3;m.self._22=a20*b0+a21*b1+a22*b2+a23*b3;m.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._03;b1=m2.self._13;b2=m2.self._23;b3=m2.self._33;m.self._03=a00*b0+a01*b1+a02*b2+a03*b3;m.self._13=a10*b0+a11*b1+a12*b2+a13*b3;m.self._23=a20*b0+a21*b1+a22*b2+a23*b3;m.self._33=a30*b0+a31*b1+a32*b2+a33*b3;let m3=o.transform.world;let a001=m.self._00;let a011=m.self._01;let a021=m.self._02;let a031=m.self._03;let a101=m.self._10;let a111=m.self._11;let a121=m.self._12;let a131=m.self._13;let a201=m.self._20;let a211=m.self._21;let a221=m.self._22;let a231=m.self._23;let a301=m.self._30;let a311=m.self._31;let a321=m.self._32;let a331=m.self._33;let b01=m3.self._00;let b11=m3.self._10;let b21=m3.self._20;let b31=m3.self._30;m.self._00=a001*b01+a011*b11+a021*b21+a031*b31;m.self._10=a101*b01+a111*b11+a121*b21+a131*b31;m.self._20=a201*b01+a211*b11+a221*b21+a231*b31;m.self._30=a301*b01+a311*b11+a321*b21+a331*b31;b01=m3.self._01;b11=m3.self._11;b21=m3.self._21;b31=m3.self._31;m.self._01=a001*b01+a011*b11+a021*b21+a031*b31;m.self._11=a101*b01+a111*b11+a121*b21+a131*b31;m.self._21=a201*b01+a211*b11+a221*b21+a231*b31;m.self._31=a301*b01+a311*b11+a321*b21+a331*b31;b01=m3.self._02;b11=m3.self._12;b21=m3.self._22;b31=m3.self._32;m.self._02=a001*b01+a011*b11+a021*b21+a031*b31;m.self._12=a101*b01+a111*b11+a121*b21+a131*b31;m.self._22=a201*b01+a211*b11+a221*b21+a231*b31;m.self._32=a301*b01+a311*b11+a321*b21+a331*b31;b01=m3.self._03;b11=m3.self._13;b21=m3.self._23;b31=m3.self._33;m.self._03=a001*b01+a011*b11+a021*b21+a031*b31;m.self._13=a101*b01+a111*b11+a121*b21+a131*b31;m.self._23=a201*b01+a211*b11+a221*b21+a231*b31;m.self._33=a301*b01+a311*b11+a321*b21+a331*b31;let _this=iron_object_BoneAnimation.m1;let m4=this.object.parent.transform.world;let a002=m4.self._00;let a012=m4.self._01;let a022=m4.self._02;let a032=m4.self._03;let a102=m4.self._10;let a112=m4.self._11;let a122=m4.self._12;let a132=m4.self._13;let a202=m4.self._20;let a212=m4.self._21;let a222=m4.self._22;let a232=m4.self._23;let a302=m4.self._30;let a312=m4.self._31;let a322=m4.self._32;let a332=m4.self._33;let b00=a002*a112-a012*a102;let b011=a002*a122-a022*a102;let b02=a002*a132-a032*a102;let b03=a012*a122-a022*a112;let b04=a012*a132-a032*a112;let b05=a022*a132-a032*a122;let b06=a202*a312-a212*a302;let b07=a202*a322-a222*a302;let b08=a202*a332-a232*a302;let b09=a212*a322-a222*a312;let b10=a212*a332-a232*a312;let b111=a222*a332-a232*a322;let det=b00*b111-b011*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a112*b111-a122*b10+a132*b09)*det;_this.self._01=(a022*b10-a012*b111-a032*b09)*det;_this.self._02=(a312*b05-a322*b04+a332*b03)*det;_this.self._03=(a222*b04-a212*b05-a232*b03)*det;_this.self._10=(a122*b08-a102*b111-a132*b07)*det;_this.self._11=(a002*b111-a022*b08+a032*b07)*det;_this.self._12=(a322*b02-a302*b05-a332*b011)*det;_this.self._13=(a202*b05-a222*b02+a232*b011)*det;_this.self._20=(a102*b10-a112*b08+a132*b06)*det;_this.self._21=(a012*b08-a002*b10-a032*b06)*det;_this.self._22=(a302*b04-a312*b02+a332*b00)*det;_this.self._23=(a212*b02-a202*b04-a232*b00)*det;_this.self._30=(a112*b07-a102*b09-a122*b06)*det;_this.self._31=(a002*b09-a012*b07+a022*b06)*det;_this.self._32=(a312*b011-a302*b03-a322*b00)*det;_this.self._33=(a202*b03-a212*b011+a222*b00)*det}let m5=iron_object_BoneAnimation.m1;let a003=m.self._00;let a013=m.self._01;let a023=m.self._02;let a033=m.self._03;let a103=m.self._10;let a113=m.self._11;let a123=m.self._12;let a133=m.self._13;let a203=m.self._20;let a213=m.self._21;let a223=m.self._22;let a233=m.self._23;let a303=m.self._30;let a313=m.self._31;let a323=m.self._32;let a333=m.self._33;let b010=m5.self._00;let b12=m5.self._10;let b22=m5.self._20;let b32=m5.self._30;m.self._00=a003*b010+a013*b12+a023*b22+a033*b32;m.self._10=a103*b010+a113*b12+a123*b22+a133*b32;m.self._20=a203*b010+a213*b12+a223*b22+a233*b32;m.self._30=a303*b010+a313*b12+a323*b22+a333*b32;b010=m5.self._01;b12=m5.self._11;b22=m5.self._21;b32=m5.self._31;m.self._01=a003*b010+a013*b12+a023*b22+a033*b32;m.self._11=a103*b010+a113*b12+a123*b22+a133*b32;m.self._21=a203*b010+a213*b12+a223*b22+a233*b32;m.self._31=a303*b010+a313*b12+a323*b22+a333*b32;b010=m5.self._02;b12=m5.self._12;b22=m5.self._22;b32=m5.self._32;m.self._02=a003*b010+a013*b12+a023*b22+a033*b32;m.self._12=a103*b010+a113*b12+a123*b22+a133*b32;m.self._22=a203*b010+a213*b12+a223*b22+a233*b32;m.self._32=a303*b010+a313*b12+a323*b22+a333*b32;b010=m5.self._03;b12=m5.self._13;b22=m5.self._23;b32=m5.self._33;m.self._03=a003*b010+a013*b12+a023*b22+a033*b32;m.self._13=a103*b010+a113*b12+a123*b22+a133*b32;m.self._23=a203*b010+a213*b12+a223*b22+a233*b32;m.self._33=a303*b010+a313*b12+a323*b22+a333*b32}}}updateBonesOnly(){if(this.boneChildren!=null){let _g=0;let _g1=this.skeletonBones.length;while(_g<_g1){let i=_g++;let b=this.skeletonBones[i];let _this=iron_object_BoneAnimation.m;let m=this.matsFast[i];_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;this.updateBoneChildren(b,iron_object_BoneAnimation.m)}}}updateSkinGpu(){let bones=this.skeletonBones;let s=this.blendCurrent/this.blendTime;s=s*s*(3-2*s);if(this.blendFactor!=0){s=1-this.blendFactor}let _g=0;let _g1=bones.length;while(_g<_g1){let i=_g++;if(this.constraintMats!=null){let m=this.constraintMats.h[bones[i].__id__];if(m!=null){this.updateSkinBuffer(m,i);continue}}let _this=iron_object_BoneAnimation.m;let m=this.matsFast[i];_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;if(this.blendTime>0&&this.skeletonBonesBlend!=null){let _this=iron_object_BoneAnimation.m1;let m=this.matsFastBlend[i];_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;let _this1=iron_object_BoneAnimation.m1;let loc=iron_object_BoneAnimation.vpos;let quat=iron_object_BoneAnimation.q1;let scale=iron_object_BoneAnimation.vscl;loc.x=_this1.self._30;loc.y=_this1.self._31;loc.z=_this1.self._32;let _this2=iron_math_Mat4.helpVec;_this2.x=_this1.self._00;_this2.y=_this1.self._01;_this2.z=_this1.self._02;_this2.w=1;let _this3=_this2;scale.x=Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);let _this4=iron_math_Mat4.helpVec;_this4.x=_this1.self._10;_this4.y=_this1.self._11;_this4.z=_this1.self._12;_this4.w=1;let _this5=_this4;scale.y=Math.sqrt(_this5.x*_this5.x+_this5.y*_this5.y+_this5.z*_this5.z);let _this6=iron_math_Mat4.helpVec;_this6.x=_this1.self._20;_this6.y=_this1.self._21;_this6.z=_this1.self._22;_this6.w=1;let _this7=_this6;scale.z=Math.sqrt(_this7.x*_this7.x+_this7.y*_this7.y+_this7.z*_this7.z);let _this8=_this1.self;let m3=_this8._12;let m4=_this8._22;let m5=_this8._32;let m6=_this8._13;let m7=_this8._23;let m8=_this8._33;let c00=_this8._11*(m4*m8-m5*m7)-_this8._21*(m3*m8-m5*m6)+_this8._31*(m3*m7-m4*m6);let m31=_this8._12;let m41=_this8._22;let m51=_this8._32;let m61=_this8._13;let m71=_this8._23;let m81=_this8._33;let c01=_this8._10*(m41*m81-m51*m71)-_this8._20*(m31*m81-m51*m61)+_this8._30*(m31*m71-m41*m61);let m32=_this8._11;let m42=_this8._21;let m52=_this8._31;let m62=_this8._13;let m72=_this8._23;let m82=_this8._33;let c02=_this8._10*(m42*m82-m52*m72)-_this8._20*(m32*m82-m52*m62)+_this8._30*(m32*m72-m42*m62);let m33=_this8._11;let m43=_this8._21;let m53=_this8._31;let m63=_this8._12;let m73=_this8._22;let m83=_this8._32;let c03=_this8._10*(m43*m83-m53*m73)-_this8._20*(m33*m83-m53*m63)+_this8._30*(m33*m73-m43*m63);if(_this8._00*c00-_this8._01*c01+_this8._02*c02-_this8._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this1.self._00*invs;iron_math_Mat4.helpMat.self._01=_this1.self._01*invs;iron_math_Mat4.helpMat.self._02=_this1.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this1.self._10*invs;iron_math_Mat4.helpMat.self._11=_this1.self._11*invs;iron_math_Mat4.helpMat.self._12=_this1.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this1.self._20*invs;iron_math_Mat4.helpMat.self._21=_this1.self._21*invs;iron_math_Mat4.helpMat.self._22=_this1.self._22*invs;let m1=iron_math_Mat4.helpMat;let m11=m1.self._00;let m12=m1.self._10;let m13=m1.self._20;let m21=m1.self._01;let m22=m1.self._11;let m23=m1.self._21;let m311=m1.self._02;let m321=m1.self._12;let m331=m1.self._22;let tr=m11+m22+m331;let s1=0;if(tr>0){s1=.5/Math.sqrt(tr+1);quat.w=.25/s1;quat.x=(m321-m23)*s1;quat.y=(m13-m311)*s1;quat.z=(m21-m12)*s1}else if(m11>m22&&m11>m331){s1=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s1;quat.x=.25*s1;quat.y=(m12+m21)/s1;quat.z=(m13+m311)/s1}else if(m22>m331){s1=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s1;quat.x=(m12+m21)/s1;quat.y=.25*s1;quat.z=(m23+m321)/s1}else{s1=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s1;quat.x=(m13+m311)/s1;quat.y=(m23+m321)/s1;quat.z=.25*s1}let _this9=iron_object_BoneAnimation.m;let loc1=iron_object_BoneAnimation.vpos2;let quat1=iron_object_BoneAnimation.q2;let scale1=iron_object_BoneAnimation.vscl2;loc1.x=_this9.self._30;loc1.y=_this9.self._31;loc1.z=_this9.self._32;let _this10=iron_math_Mat4.helpVec;_this10.x=_this9.self._00;_this10.y=_this9.self._01;_this10.z=_this9.self._02;_this10.w=1;let _this11=_this10;scale1.x=Math.sqrt(_this11.x*_this11.x+_this11.y*_this11.y+_this11.z*_this11.z);let _this12=iron_math_Mat4.helpVec;_this12.x=_this9.self._10;_this12.y=_this9.self._11;_this12.z=_this9.self._12;_this12.w=1;let _this13=_this12;scale1.y=Math.sqrt(_this13.x*_this13.x+_this13.y*_this13.y+_this13.z*_this13.z);let _this14=iron_math_Mat4.helpVec;_this14.x=_this9.self._20;_this14.y=_this9.self._21;_this14.z=_this9.self._22;_this14.w=1;let _this15=_this14;scale1.z=Math.sqrt(_this15.x*_this15.x+_this15.y*_this15.y+_this15.z*_this15.z);let _this16=_this9.self;let m34=_this16._12;let m44=_this16._22;let m54=_this16._32;let m64=_this16._13;let m74=_this16._23;let m84=_this16._33;let c001=_this16._11*(m44*m84-m54*m74)-_this16._21*(m34*m84-m54*m64)+_this16._31*(m34*m74-m44*m64);let m35=_this16._12;let m45=_this16._22;let m55=_this16._32;let m65=_this16._13;let m75=_this16._23;let m85=_this16._33;let c011=_this16._10*(m45*m85-m55*m75)-_this16._20*(m35*m85-m55*m65)+_this16._30*(m35*m75-m45*m65);let m36=_this16._11;let m46=_this16._21;let m56=_this16._31;let m66=_this16._13;let m76=_this16._23;let m86=_this16._33;let c021=_this16._10*(m46*m86-m56*m76)-_this16._20*(m36*m86-m56*m66)+_this16._30*(m36*m76-m46*m66);let m37=_this16._11;let m47=_this16._21;let m57=_this16._31;let m67=_this16._12;let m77=_this16._22;let m87=_this16._32;let c031=_this16._10*(m47*m87-m57*m77)-_this16._20*(m37*m87-m57*m67)+_this16._30*(m37*m77-m47*m67);if(_this16._00*c001-_this16._01*c011+_this16._02*c021-_this16._03*c031<0){scale1.x=-scale1.x}let invs1=1/scale1.x;iron_math_Mat4.helpMat.self._00=_this9.self._00*invs1;iron_math_Mat4.helpMat.self._01=_this9.self._01*invs1;iron_math_Mat4.helpMat.self._02=_this9.self._02*invs1;invs1=1/scale1.y;iron_math_Mat4.helpMat.self._10=_this9.self._10*invs1;iron_math_Mat4.helpMat.self._11=_this9.self._11*invs1;iron_math_Mat4.helpMat.self._12=_this9.self._12*invs1;invs1=1/scale1.z;iron_math_Mat4.helpMat.self._20=_this9.self._20*invs1;iron_math_Mat4.helpMat.self._21=_this9.self._21*invs1;iron_math_Mat4.helpMat.self._22=_this9.self._22*invs1;let m2=iron_math_Mat4.helpMat;let m111=m2.self._00;let m121=m2.self._10;let m131=m2.self._20;let m211=m2.self._01;let m221=m2.self._11;let m231=m2.self._21;let m312=m2.self._02;let m322=m2.self._12;let m332=m2.self._22;let tr1=m111+m221+m332;let s2=0;if(tr1>0){s2=.5/Math.sqrt(tr1+1);quat1.w=.25/s2;quat1.x=(m322-m231)*s2;quat1.y=(m131-m312)*s2;quat1.z=(m211-m121)*s2}else if(m111>m221&&m111>m332){s2=2*Math.sqrt(1+m111-m221-m332);quat1.w=(m322-m231)/s2;quat1.x=.25*s2;quat1.y=(m121+m211)/s2;quat1.z=(m131+m312)/s2}else if(m221>m332){s2=2*Math.sqrt(1+m221-m111-m332);quat1.w=(m131-m312)/s2;quat1.x=(m121+m211)/s2;quat1.y=.25*s2;quat1.z=(m231+m322)/s2}else{s2=2*Math.sqrt(1+m332-m111-m221);quat1.w=(m211-m121)/s2;quat1.x=(m131+m312)/s2;quat1.y=(m231+m322)/s2;quat1.z=.25*s2}let _this17=iron_object_BoneAnimation.v1;let from=iron_object_BoneAnimation.vpos;let to=iron_object_BoneAnimation.vpos2;_this17.x=from.x+(to.x-from.x)*s;_this17.y=from.y+(to.y-from.y)*s;_this17.z=from.z+(to.z-from.z)*s;let _this18=iron_object_BoneAnimation.v2;let from1=iron_object_BoneAnimation.vscl;let to1=iron_object_BoneAnimation.vscl2;_this18.x=from1.x+(to1.x-from1.x)*s;_this18.y=from1.y+(to1.y-from1.y)*s;_this18.z=from1.z+(to1.z-from1.z)*s;let _this19=iron_object_BoneAnimation.q3;let from2=iron_object_BoneAnimation.q1;let to2=iron_object_BoneAnimation.q2;let fromx=from2.x;let fromy=from2.y;let fromz=from2.z;let fromw=from2.w;let dot=from2.x*to2.x+from2.y*to2.y+from2.z*to2.z+from2.w*to2.w;if(dot<0){fromx=-fromx;fromy=-fromy;fromz=-fromz;fromw=-fromw}_this19.x=fromx+(to2.x-fromx)*s;_this19.y=fromy+(to2.y-fromy)*s;_this19.z=fromz+(to2.z-fromz)*s;_this19.w=fromw+(to2.w-fromw)*s;let l=Math.sqrt(_this19.x*_this19.x+_this19.y*_this19.y+_this19.z*_this19.z+_this19.w*_this19.w);if(l==0){_this19.x=0;_this19.y=0;_this19.z=0;_this19.w=0}else{l=1/l;_this19.x*=l;_this19.y*=l;_this19.z*=l;_this19.w*=l}let _this20=iron_object_BoneAnimation.m;let q=iron_object_BoneAnimation.q3;let x=q.x;let y=q.y;let z=q.z;let w=q.w;let x2=x+x;let y2=y+y;let z2=z+z;let xx=x*x2;let xy=x*y2;let xz=x*z2;let yy=y*y2;let yz=y*z2;let zz=z*z2;let wx=w*x2;let wy=w*y2;let wz=w*z2;_this20.self._00=1-(yy+zz);_this20.self._10=xy-wz;_this20.self._20=xz+wy;_this20.self._01=xy+wz;_this20.self._11=1-(xx+zz);_this20.self._21=yz-wx;_this20.self._02=xz-wy;_this20.self._12=yz+wx;_this20.self._22=1-(xx+yy);_this20.self._03=0;_this20.self._13=0;_this20.self._23=0;_this20.self._30=0;_this20.self._31=0;_this20.self._32=0;_this20.self._33=1;let _this21=iron_object_BoneAnimation.m;let v=iron_object_BoneAnimation.v2;let x1=v.x;let y1=v.y;let z1=v.z;_this21.self._00*=x1;_this21.self._01*=x1;_this21.self._02*=x1;_this21.self._03*=x1;_this21.self._10*=y1;_this21.self._11*=y1;_this21.self._12*=y1;_this21.self._13*=y1;_this21.self._20*=z1;_this21.self._21*=z1;_this21.self._22*=z1;_this21.self._23*=z1;iron_object_BoneAnimation.m.self._30=iron_object_BoneAnimation.v1.x;iron_object_BoneAnimation.m.self._31=iron_object_BoneAnimation.v1.y;iron_object_BoneAnimation.m.self._32=iron_object_BoneAnimation.v1.z}if(this.absMats!=null&&i<this.absMats.length){let _this=this.absMats[i];let m=iron_object_BoneAnimation.m;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}if(this.boneChildren!=null){this.updateBoneChildren(bones[i],iron_object_BoneAnimation.m)}let _this1=iron_object_BoneAnimation.m;let b=iron_object_BoneAnimation.m;let a=this.data.geom.skeletonTransformsI[i];let a00=a.self._00;let a01=a.self._01;let a02=a.self._02;let a03=a.self._03;let a10=a.self._10;let a11=a.self._11;let a12=a.self._12;let a13=a.self._13;let a20=a.self._20;let a21=a.self._21;let a22=a.self._22;let a23=a.self._23;let a30=a.self._30;let a31=a.self._31;let a32=a.self._32;let a33=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3;this.updateSkinBuffer(iron_object_BoneAnimation.m,i)}}updateSkinBuffer(m,i){let loc=iron_object_BoneAnimation.vpos;let quat=iron_object_BoneAnimation.q1;let scale=iron_object_BoneAnimation.vscl;loc.x=m.self._30;loc.y=m.self._31;loc.z=m.self._32;let _this=iron_math_Mat4.helpVec;_this.x=m.self._00;_this.y=m.self._01;_this.z=m.self._02;_this.w=1;let _this1=_this;scale.x=Math.sqrt(_this1.x*_this1.x+_this1.y*_this1.y+_this1.z*_this1.z);let _this2=iron_math_Mat4.helpVec;_this2.x=m.self._10;_this2.y=m.self._11;_this2.z=m.self._12;_this2.w=1;let _this3=_this2;scale.y=Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);let _this4=iron_math_Mat4.helpVec;_this4.x=m.self._20;_this4.y=m.self._21;_this4.z=m.self._22;_this4.w=1;let _this5=_this4;scale.z=Math.sqrt(_this5.x*_this5.x+_this5.y*_this5.y+_this5.z*_this5.z);let _this6=m.self;let m3=_this6._12;let m4=_this6._22;let m5=_this6._32;let m6=_this6._13;let m7=_this6._23;let m8=_this6._33;let c00=_this6._11*(m4*m8-m5*m7)-_this6._21*(m3*m8-m5*m6)+_this6._31*(m3*m7-m4*m6);let m31=_this6._12;let m41=_this6._22;let m51=_this6._32;let m61=_this6._13;let m71=_this6._23;let m81=_this6._33;let c01=_this6._10*(m41*m81-m51*m71)-_this6._20*(m31*m81-m51*m61)+_this6._30*(m31*m71-m41*m61);let m32=_this6._11;let m42=_this6._21;let m52=_this6._31;let m62=_this6._13;let m72=_this6._23;let m82=_this6._33;let c02=_this6._10*(m42*m82-m52*m72)-_this6._20*(m32*m82-m52*m62)+_this6._30*(m32*m72-m42*m62);let m33=_this6._11;let m43=_this6._21;let m53=_this6._31;let m63=_this6._12;let m73=_this6._22;let m83=_this6._32;let c03=_this6._10*(m43*m83-m53*m73)-_this6._20*(m33*m83-m53*m63)+_this6._30*(m33*m73-m43*m63);if(_this6._00*c00-_this6._01*c01+_this6._02*c02-_this6._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=m.self._00*invs;iron_math_Mat4.helpMat.self._01=m.self._01*invs;iron_math_Mat4.helpMat.self._02=m.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=m.self._10*invs;iron_math_Mat4.helpMat.self._11=m.self._11*invs;iron_math_Mat4.helpMat.self._12=m.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=m.self._20*invs;iron_math_Mat4.helpMat.self._21=m.self._21*invs;iron_math_Mat4.helpMat.self._22=m.self._22*invs;let m1=iron_math_Mat4.helpMat;let m11=m1.self._00;let m12=m1.self._10;let m13=m1.self._20;let m21=m1.self._01;let m22=m1.self._11;let m23=m1.self._21;let m311=m1.self._02;let m321=m1.self._12;let m331=m1.self._22;let tr=m11+m22+m331;let s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m321-m23)*s;quat.y=(m13-m311)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m331){s=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m311)/s}else if(m22>m331){s=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m321)/s}else{s=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m311)/s;quat.y=(m23+m321)/s;quat.z=.25*s}let _this7=iron_object_BoneAnimation.q1;let l=Math.sqrt(_this7.x*_this7.x+_this7.y*_this7.y+_this7.z*_this7.z+_this7.w*_this7.w);if(l==0){_this7.x=0;_this7.y=0;_this7.z=0;_this7.w=0}else{l=1/l;_this7.x*=l;_this7.y*=l;_this7.z*=l;_this7.w*=l}let _this8=iron_object_BoneAnimation.q2;_this8.x=iron_object_BoneAnimation.vpos.x;_this8.y=iron_object_BoneAnimation.vpos.y;_this8.z=iron_object_BoneAnimation.vpos.z;_this8.w=0;let _this9=iron_object_BoneAnimation.q2;let q1=iron_object_BoneAnimation.q2;let q2=iron_object_BoneAnimation.q1;let q1x=q1.x;let q1y=q1.y;let q1z=q1.z;let q1w=q1.w;let q2x=q2.x;let q2y=q2.y;let q2z=q2.z;let q2w=q2.w;_this9.x=q1x*q2w+q1w*q2x+q1y*q2z-q1z*q2y;_this9.y=q1w*q2y-q1x*q2z+q1y*q2w+q1z*q2x;_this9.z=q1w*q2z+q1x*q2y-q1y*q2x+q1z*q2w;_this9.w=q1w*q2w-q1x*q2x-q1y*q2y-q1z*q2z;let v=iron_object_BoneAnimation.q1.x;this.skinBuffer.setFloat32(i*8*4,v,true);let v1=iron_object_BoneAnimation.q1.y;this.skinBuffer.setFloat32((i*8+1)*4,v1,true);let v2=iron_object_BoneAnimation.q1.z;this.skinBuffer.setFloat32((i*8+2)*4,v2,true);let v3=iron_object_BoneAnimation.q1.w;this.skinBuffer.setFloat32((i*8+3)*4,v3,true);let v4=iron_object_BoneAnimation.q2.x*.5;this.skinBuffer.setFloat32((i*8+4)*4,v4,true);let v5=iron_object_BoneAnimation.q2.y*.5;this.skinBuffer.setFloat32((i*8+5)*4,v5,true);let v6=iron_object_BoneAnimation.q2.z*.5;this.skinBuffer.setFloat32((i*8+6)*4,v6,true);let v7=iron_object_BoneAnimation.q2.w*.5;this.skinBuffer.setFloat32((i*8+7)*4,v7,true)}getBone(name){if(this.skeletonBones==null){return null}let _g=0;let _g1=this.skeletonBones;while(_g<_g1.length){let b=_g1[_g];++_g;if(b.name==name){return b}}return null}getBoneIndex(bone,bones){if(bones==null){bones=this.skeletonBones}if(bones!=null){let _g=0;let _g1=bones.length;while(_g<_g1){let i=_g++;if(bones[i]==bone){return i}}}return-1}}$hxClasses["iron.object.BoneAnimation"]=iron_object_BoneAnimation;iron_object_BoneAnimation.__name__=true;iron_object_BoneAnimation.__super__=iron_object_Animation;Object.assign(iron_object_BoneAnimation.prototype,{__class__:iron_object_BoneAnimation});class iron_object_Object{constructor(){if(iron_object_Object._hx_skip_constructor){return}this._hx_constructor()}_hx_constructor(){this.isEmpty=false;this.properties=null;this.culledShadow=false;this.culledMesh=false;this.culled=false;this.visibleShadow=true;this.visibleMesh=true;this.visible=true;this.animation=null;this.lods=null;this.children=[];this.parent=null;this.traits=[];this.constraints=null;this.name="";this.raw=null;this.uid=iron_object_Object.uidCounter++;this.urandom=iron_object_Object.seededRandom();this.transform=new iron_object_Transform(this);this.isEmpty=js_Boot.getClass(this)==iron_object_Object;if(this.isEmpty&&iron_Scene.active!=null){iron_Scene.active.empties.push(this)}}setParent(parentObject,parentInverse,keepTransform){if(keepTransform==null){keepTransform=false}if(parentInverse==null){parentInverse=false}if(parentObject==this||parentObject==this.parent){return}if(this.parent!=null){HxOverrides.remove(this.parent.children,this);if(keepTransform){this.transform.applyParent()}this.parent=null;this.transform.buildMatrix()}if(parentObject==null){parentObject=iron_Scene.active.sceneParent}this.parent=parentObject;this.parent.children.push(this);if(parentInverse){this.transform.applyParentInverse()}}remove(){if(this.isEmpty&&iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.empties,this)}if(this.animation!=null){this.animation.remove()}while(this.children.length>0)this.children[0].remove();while(this.traits.length>0)this.traits[0].remove();if(this.parent!=null){HxOverrides.remove(this.parent.children,this);this.parent=null}}getChild(name){if(this.name==name){return this}else{let _g=0;let _g1=this.children;while(_g<_g1.length){let c=_g1[_g];++_g;let r=c.getChild(name);if(r!=null){return r}}}return null}getChildren(recursive){if(recursive==null){recursive=false}if(!recursive){return this.children}let retChildren=this.children.slice();let _g=0;let _g1=this.children;while(_g<_g1.length){let child=_g1[_g];++_g;retChildren=retChildren.concat(child.getChildren(recursive))}return retChildren}addTrait(t){this.traits.push(t);t.object=this;if(t._add!=null){let _g=0;let _g1=t._add;while(_g<_g1.length){let f=_g1[_g];++_g;f()}t._add=null}}removeTrait(t){if(t._init!=null){let _g=0;let _g1=t._init;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeInit(f)}t._init=null}if(t._update!=null){let _g=0;let _g1=t._update;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeUpdate(f)}t._update=null}if(t._lateUpdate!=null){let _g=0;let _g1=t._lateUpdate;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeLateUpdate(f)}t._lateUpdate=null}if(t._render!=null){let _g=0;let _g1=t._render;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeRender(f)}t._render=null}if(t._render2D!=null){let _g=0;let _g1=t._render2D;while(_g<_g1.length){let f=_g1[_g];++_g;iron_App.removeRender2D(f)}t._render2D=null}if(t._remove!=null){let _g=0;let _g1=t._remove;while(_g<_g1.length){let f=_g1[_g];++_g;f()}t._remove=null}HxOverrides.remove(this.traits,t)}getParentArmature(name){let _g=0;let _g1=iron_Scene.active.animations;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.armature!=null&&a.armature.name==name){return a}}return null}setupAnimation(oactions){let _gthis=this;if(this.raw.parent_bone!=null){iron_Scene.active.notifyOnInit(function(){let banim=_gthis.getParentArmature(_gthis.parent.name);if(banim!=null){banim.addBoneChild(_gthis.raw.parent_bone,_gthis)}})}if(oactions==null){return}this.animation=new iron_object_ObjectAnimation(this,oactions)}setupMorphTargets(){}static seededRandom(){iron_object_Object.seed=(iron_object_Object.seed*9301+49297)%233280;return iron_object_Object.seed/233280}}$hxClasses["iron.object.Object"]=iron_object_Object;iron_object_Object.__name__=true;Object.assign(iron_object_Object.prototype,{__class__:iron_object_Object});class iron_object_CameraObject extends iron_object_Object{constructor(data){iron_object_Object._hx_skip_constructor=true;super();iron_object_Object._hx_skip_constructor=false;this._hx_constructor(data)}_hx_constructor(data){this.currentFace=0;this.renderTargetCube=null;this.renderTarget=null;this.frustumPlanes=null;this.prevV=null;super._hx_constructor();this.data=data;this.buildProjection();this.V=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.VP=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);if(data.raw.frustum_culling){this.frustumPlanes=[];this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane)}iron_Scene.active.cameras.push(this)}buildProjection(screenAspect){if(this.data.raw.ortho!=null){let left=this.data.raw.ortho.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);let right=this.data.raw.ortho.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let bottom=this.data.raw.ortho.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);let top=this.data.raw.ortho.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN);let near=this.data.raw.near_plane;let far=this.data.raw.far_plane;let rl=right-left;let tb=top-bottom;let fn=far-near;let tx=-(right+left)/rl;let ty=-(top+bottom)/tb;let tz=-(far+near)/fn;this.P=new iron_math_Mat4(2/rl,0,0,tx,0,2/tb,0,ty,0,0,-2/fn,tz,0,0,0,1)}else{if(screenAspect==null){screenAspect=iron_App.w()/iron_App.h()}let aspect=this.data.raw.aspect!=null?this.data.raw.aspect:screenAspect;let zn=this.data.raw.near_plane;let zf=this.data.raw.far_plane;let uh=1/Math.tan(this.data.raw.fov/2);let uw=uh/aspect;this.P=new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(zf+zn)/(zn-zf),2*zf*zn/(zn-zf),0,0,-1,0)}}remove(){HxOverrides.remove(iron_Scene.active.cameras,this);super.remove()}renderFrame(g){this.buildMatrix();iron_RenderPath.active.renderFrame(g);let _this=this.prevV;let m=this.V;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}buildMatrix(){this.transform.buildMatrix();let _this=this.transform.world;let x=Math.sqrt(_this.self._00*_this.self._00+_this.self._10*_this.self._10+_this.self._20*_this.self._20);let y=Math.sqrt(_this.self._01*_this.self._01+_this.self._11*_this.self._11+_this.self._21*_this.self._21);let z=Math.sqrt(_this.self._02*_this.self._02+_this.self._12*_this.self._12+_this.self._22*_this.self._22);if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let sc_x=x;let sc_y=y;let sc_z=z;let sc_w=1;if(sc_x!=1||sc_y!=1||sc_z!=1){let _this=iron_object_CameraObject.temp;_this.x=1/sc_x;_this.y=1/sc_y;_this.z=1/sc_z;_this.w=1;let _this1=this.transform.world;let v=iron_object_CameraObject.temp;let x=v.x;let y=v.y;let z=v.z;_this1.self._00*=x;_this1.self._01*=x;_this1.self._02*=x;_this1.self._03*=x;_this1.self._10*=y;_this1.self._11*=y;_this1.self._12*=y;_this1.self._13*=y;_this1.self._20*=z;_this1.self._21*=z;_this1.self._22*=z;_this1.self._23*=z}let _this1=this.V;let m=this.transform.world;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this1.self._00=1;_this1.self._01=0;_this1.self._02=0;_this1.self._03=0;_this1.self._10=0;_this1.self._11=1;_this1.self._12=0;_this1.self._13=0;_this1.self._20=0;_this1.self._21=0;_this1.self._22=1;_this1.self._23=0;_this1.self._30=0;_this1.self._31=0;_this1.self._32=0;_this1.self._33=1}else{det=1/det;_this1.self._00=(a11*b11-a12*b10+a13*b09)*det;_this1.self._01=(a02*b10-a01*b11-a03*b09)*det;_this1.self._02=(a31*b05-a32*b04+a33*b03)*det;_this1.self._03=(a22*b04-a21*b05-a23*b03)*det;_this1.self._10=(a12*b08-a10*b11-a13*b07)*det;_this1.self._11=(a00*b11-a02*b08+a03*b07)*det;_this1.self._12=(a32*b02-a30*b05-a33*b01)*det;_this1.self._13=(a20*b05-a22*b02+a23*b01)*det;_this1.self._20=(a10*b10-a11*b08+a13*b06)*det;_this1.self._21=(a01*b08-a00*b10-a03*b06)*det;_this1.self._22=(a30*b04-a31*b02+a33*b00)*det;_this1.self._23=(a21*b02-a20*b04-a23*b00)*det;_this1.self._30=(a11*b07-a10*b09-a12*b06)*det;_this1.self._31=(a00*b09-a01*b07+a02*b06)*det;_this1.self._32=(a31*b01-a30*b03-a32*b00)*det;_this1.self._33=(a20*b03-a21*b01+a22*b00)*det}let _this2=this.VP;let b=this.P;let a=this.V;let a001=a.self._00;let a011=a.self._01;let a021=a.self._02;let a031=a.self._03;let a101=a.self._10;let a111=a.self._11;let a121=a.self._12;let a131=a.self._13;let a201=a.self._20;let a211=a.self._21;let a221=a.self._22;let a231=a.self._23;let a301=a.self._30;let a311=a.self._31;let a321=a.self._32;let a331=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;_this2.self._00=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._10=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._20=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._30=a301*b0+a311*b1+a321*b2+a331*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this2.self._01=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._11=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._21=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._31=a301*b0+a311*b1+a321*b2+a331*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this2.self._02=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._12=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._22=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._32=a301*b0+a311*b1+a321*b2+a331*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this2.self._03=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._13=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._23=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._33=a301*b0+a311*b1+a321*b2+a331*b3;if(this.data.raw.frustum_culling){iron_object_CameraObject.buildViewFrustum(this.VP,this.frustumPlanes)}if(this.prevV==null){this.prevV=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);let _this=this.prevV;let m=this.V;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}}static buildViewFrustum(VP,frustumPlanes){let _this=frustumPlanes[0];let _this1=_this.normal;_this1.x=VP.self._03+VP.self._00;_this1.y=VP.self._13+VP.self._10;_this1.z=VP.self._23+VP.self._20;_this1.w=1;_this.constant=VP.self._33+VP.self._30;let _this2=frustumPlanes[1];let _this3=_this2.normal;_this3.x=VP.self._03-VP.self._00;_this3.y=VP.self._13-VP.self._10;_this3.z=VP.self._23-VP.self._20;_this3.w=1;_this2.constant=VP.self._33-VP.self._30;let _this4=frustumPlanes[2];let _this5=_this4.normal;_this5.x=VP.self._03-VP.self._01;_this5.y=VP.self._13-VP.self._11;_this5.z=VP.self._23-VP.self._21;_this5.w=1;_this4.constant=VP.self._33-VP.self._31;let _this6=frustumPlanes[3];let _this7=_this6.normal;_this7.x=VP.self._03+VP.self._01;_this7.y=VP.self._13+VP.self._11;_this7.z=VP.self._23+VP.self._21;_this7.w=1;_this6.constant=VP.self._33+VP.self._31;let _this8=frustumPlanes[4];let _this9=_this8.normal;_this9.x=VP.self._02;_this9.y=VP.self._12;_this9.z=VP.self._22;_this9.w=1;_this8.constant=VP.self._32;let _this10=frustumPlanes[5];let _this11=_this10.normal;_this11.x=VP.self._03-VP.self._02;_this11.y=VP.self._13-VP.self._12;_this11.z=VP.self._23-VP.self._22;_this11.w=1;_this10.constant=VP.self._33-VP.self._32;let _g=0;while(_g<frustumPlanes.length){let plane=frustumPlanes[_g];++_g;plane.normalize()}}static sphereInFrustum(frustumPlanes,t,radiusScale,offsetX,offsetY,offsetZ){if(offsetZ==null){offsetZ=0}if(offsetY==null){offsetY=0}if(offsetX==null){offsetX=0}if(radiusScale==null){radiusScale=1}let radius=t.radius*radiusScale;let _g=0;while(_g<frustumPlanes.length){let plane=frustumPlanes[_g];++_g;let _this=iron_object_CameraObject.sphereCenter;_this.x=t.world.self._30+offsetX;_this.y=t.world.self._31+offsetY;_this.z=t.world.self._32+offsetZ;_this.w=1;if(plane.distanceToSphere(iron_object_CameraObject.sphereCenter,radius)+radius*2<0){return false}}return true}static setCubeFace(m,eye,face,flip){if(flip==null){flip=false}let _this=iron_object_CameraObject.vcenter;_this.x=eye.x;_this.y=eye.y;_this.z=eye.z;_this.w=eye.w;let f=flip?-1:1;switch(face){case 0:let _this1=iron_object_CameraObject.vcenter;_this1.x+=f;_this1.y+=0;_this1.z+=0;let _this2=iron_object_CameraObject.vup;_this2.x=0;_this2.y=-1*f;_this2.z=0;_this2.w=1;break;case 1:let _this3=iron_object_CameraObject.vcenter;_this3.x+=-1*f;_this3.y+=0;_this3.z+=0;let _this4=iron_object_CameraObject.vup;_this4.x=0;_this4.y=-1*f;_this4.z=0;_this4.w=1;break;case 2:let _this5=iron_object_CameraObject.vcenter;_this5.x+=0;_this5.y+=f;_this5.z+=0;let _this6=iron_object_CameraObject.vup;_this6.x=0;_this6.y=0;_this6.z=f;_this6.w=1;break;case 3:let _this7=iron_object_CameraObject.vcenter;_this7.x+=0;_this7.y+=-1*f;_this7.z+=0;let _this8=iron_object_CameraObject.vup;_this8.x=0;_this8.y=0;_this8.z=-1*f;_this8.w=1;break;case 4:let _this9=iron_object_CameraObject.vcenter;_this9.x+=0;_this9.y+=0;_this9.z+=f;let _this10=iron_object_CameraObject.vup;_this10.x=0;_this10.y=-1*f;_this10.z=0;_this10.w=1;break;case 5:let _this11=iron_object_CameraObject.vcenter;_this11.x+=0;_this11.y+=0;_this11.z+=-1*f;let _this12=iron_object_CameraObject.vup;_this12.x=0;_this12.y=-1*f;_this12.z=0;_this12.w=1;break}let center=iron_object_CameraObject.vcenter;let up=iron_object_CameraObject.vup;let f0=center.x-eye.x;let f1=center.y-eye.y;let f2=center.z-eye.z;let n=1/Math.sqrt(f0*f0+f1*f1+f2*f2);f0*=n;f1*=n;f2*=n;let s0=f1*up.z-f2*up.y;let s1=f2*up.x-f0*up.z;let s2=f0*up.y-f1*up.x;n=1/Math.sqrt(s0*s0+s1*s1+s2*s2);s0*=n;s1*=n;s2*=n;let u0=s1*f2-s2*f1;let u1=s2*f0-s0*f2;let u2=s0*f1-s1*f0;let d0=-eye.x*s0-eye.y*s1-eye.z*s2;let d1=-eye.x*u0-eye.y*u1-eye.z*u2;let d2=eye.x*f0+eye.y*f1+eye.z*f2;m.self._00=s0;m.self._10=s1;m.self._20=s2;m.self._30=d0;m.self._01=u0;m.self._11=u1;m.self._21=u2;m.self._31=d1;m.self._02=-f0;m.self._12=-f1;m.self._22=-f2;m.self._32=d2;m.self._03=0;m.self._13=0;m.self._23=0;m.self._33=1}}$hxClasses["iron.object.CameraObject"]=iron_object_CameraObject;iron_object_CameraObject.__name__=true;iron_object_CameraObject.__super__=iron_object_Object;Object.assign(iron_object_CameraObject.prototype,{__class__:iron_object_CameraObject});class iron_object_FrustumPlane{constructor(){this.constant=0;this.normal=new iron_math_Vec4(1,0,0)}normalize(){let _this=this.normal;let inverseNormalLength=1/Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);let _this1=this.normal;_this1.x*=inverseNormalLength;_this1.y*=inverseNormalLength;_this1.z*=inverseNormalLength;this.constant*=inverseNormalLength}distanceToSphere(sphereCenter,sphereRadius){let _this=this.normal;return _this.x*sphereCenter.x+_this.y*sphereCenter.y+_this.z*sphereCenter.z+this.constant-sphereRadius}}$hxClasses["iron.object.FrustumPlane"]=iron_object_FrustumPlane;iron_object_FrustumPlane.__name__=true;Object.assign(iron_object_FrustumPlane.prototype,{__class__:iron_object_FrustumPlane});class iron_object_Constraint{constructor(constr){this.target=null;this.raw=constr}apply(transform){if(this.target==null&&this.raw.target!=null){this.target=iron_Scene.active.getChild(this.raw.target).transform}if(this.raw.type=="COPY_LOCATION"){if(this.raw.use_x){transform.world.self._30=this.target.loc.x;if(this.raw.use_offset){transform.world.self._30+=transform.loc.x}}if(this.raw.use_y){transform.world.self._31=this.target.loc.y;if(this.raw.use_offset){transform.world.self._31+=transform.loc.y}}if(this.raw.use_z){transform.world.self._32=this.target.loc.z;if(this.raw.use_offset){transform.world.self._32+=transform.loc.z}}}}}$hxClasses["iron.object.Constraint"]=iron_object_Constraint;iron_object_Constraint.__name__=true;Object.assign(iron_object_Constraint.prototype,{__class__:iron_object_Constraint});class iron_object_LightObject extends iron_object_Object{constructor(data){iron_object_Object._hx_skip_constructor=true;super();iron_object_Object._hx_skip_constructor=false;this._hx_constructor(data)}_hx_constructor(data){this.frustumPlanes=null;this.VP=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.P=null;this.V=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.bias=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.camSlicedP=null;this.cascadeData=null;super._hx_constructor();this.data=data;let type=data.raw.type;let fov=data.raw.fov;if(type=="sun"){if(iron_object_LightObject.corners==null){iron_object_LightObject.corners=[];iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4);iron_object_LightObject.corners.push(new iron_math_Vec4)}this.P=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}else if(type=="point"||type=="area"){let zn=data.raw.near_plane;let zf=data.raw.far_plane;let uh=1/Math.tan(fov/2);let uw=uh/1;this.P=new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(zf+zn)/(zn-zf),2*zf*zn/(zn-zf),0,0,-1,0)}else if(type=="spot"){let zn=data.raw.near_plane;let zf=data.raw.far_plane;let uh=1/Math.tan(fov/2);let uw=uh/1;this.P=new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(zf+zn)/(zn-zf),2*zf*zn/(zn-zf),0,0,-1,0)}iron_Scene.active.lights.push(this)}remove(){if(iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.lights,this)}let rp=iron_RenderPath.active;if(rp.light==this){rp.light=null}if(rp.point==this){rp.point=null}else if(rp.sun==this){rp.sun=null}super.remove()}buildMatrix(camera){this.transform.buildMatrix();if(this.data.raw.type=="sun"){let _this=this.V;let m=this.transform.world;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}this.updateViewFrustum(camera)}else{let _this=this.V;let m=this.transform.world;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}this.updateViewFrustum(camera)}}setCascade(camera,cascade){let _this=iron_object_LightObject.m;let m=camera.V;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;if(this.camSlicedP==null){this.camSlicedP=[];this.cascadeSplit=[];let ortho=camera.data.raw.ortho;if(ortho==null){let aspect=camera.data.raw.aspect!=null?camera.data.raw.aspect:iron_App.w()/iron_App.h();let fov=camera.data.raw.fov;let near=camera.data.raw.near_plane;let far=camera.data.raw.far_plane;let factor=iron_object_LightObject.cascadeCount>2?iron_object_LightObject.cascadeSplitFactor:iron_object_LightObject.cascadeSplitFactor*.25;let _g=0;let _g1=iron_object_LightObject.cascadeCount;while(_g<_g1){let i=_g++;let f=i+1;let cfar=(near+f/iron_object_LightObject.cascadeCount*(far-near))*(1-factor)+near*Math.pow(far/near,f/iron_object_LightObject.cascadeCount)*factor;this.cascadeSplit.push(cfar);let uh=1/Math.tan(fov/2);let uw=uh/aspect;this.camSlicedP.push(new iron_math_Mat4(uw,0,0,0,0,uh,0,0,0,0,(cfar+near)/(near-cfar),2*cfar*near/(near-cfar),0,0,-1,0))}}else{let _g=0;let _g1=iron_object_LightObject.cascadeCount;while(_g<_g1){let i=_g++;this.cascadeSplit.push(this.data.raw.far_plane);let left=ortho.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);let right=ortho.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let bottom=ortho.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);let top=ortho.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN);let near=this.data.raw.near_plane;let far=this.data.raw.far_plane;let rl=right-left;let tb=top-bottom;let fn=far-near;let tx=-(right+left)/rl;let ty=-(top+bottom)/tb;let tz=-(far+near)/fn;this.camSlicedP.push(new iron_math_Mat4(2/rl,0,0,tx,0,2/tb,0,ty,0,0,-2/fn,tz,0,0,0,1))}}}let _this1=iron_object_LightObject.m;let m1=this.camSlicedP[cascade];let a00=_this1.self._00;let a01=_this1.self._01;let a02=_this1.self._02;let a03=_this1.self._03;let a10=_this1.self._10;let a11=_this1.self._11;let a12=_this1.self._12;let a13=_this1.self._13;let a20=_this1.self._20;let a21=_this1.self._21;let a22=_this1.self._22;let a23=_this1.self._23;let a30=_this1.self._30;let a31=_this1.self._31;let a32=_this1.self._32;let a33=_this1.self._33;let b0=m1.self._00;let b1=m1.self._10;let b2=m1.self._20;let b3=m1.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3;let _this2=iron_object_LightObject.m;let m2=iron_object_LightObject.m;let a001=m2.self._00;let a011=m2.self._01;let a021=m2.self._02;let a031=m2.self._03;let a101=m2.self._10;let a111=m2.self._11;let a121=m2.self._12;let a131=m2.self._13;let a201=m2.self._20;let a211=m2.self._21;let a221=m2.self._22;let a231=m2.self._23;let a301=m2.self._30;let a311=m2.self._31;let a321=m2.self._32;let a331=m2.self._33;let b00=a001*a111-a011*a101;let b01=a001*a121-a021*a101;let b02=a001*a131-a031*a101;let b03=a011*a121-a021*a111;let b04=a011*a131-a031*a111;let b05=a021*a131-a031*a121;let b06=a201*a311-a211*a301;let b07=a201*a321-a221*a301;let b08=a201*a331-a231*a301;let b09=a211*a321-a221*a311;let b10=a211*a331-a231*a311;let b11=a221*a331-a231*a321;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this2.self._00=1;_this2.self._01=0;_this2.self._02=0;_this2.self._03=0;_this2.self._10=0;_this2.self._11=1;_this2.self._12=0;_this2.self._13=0;_this2.self._20=0;_this2.self._21=0;_this2.self._22=1;_this2.self._23=0;_this2.self._30=0;_this2.self._31=0;_this2.self._32=0;_this2.self._33=1}else{det=1/det;_this2.self._00=(a111*b11-a121*b10+a131*b09)*det;_this2.self._01=(a021*b10-a011*b11-a031*b09)*det;_this2.self._02=(a311*b05-a321*b04+a331*b03)*det;_this2.self._03=(a221*b04-a211*b05-a231*b03)*det;_this2.self._10=(a121*b08-a101*b11-a131*b07)*det;_this2.self._11=(a001*b11-a021*b08+a031*b07)*det;_this2.self._12=(a321*b02-a301*b05-a331*b01)*det;_this2.self._13=(a201*b05-a221*b02+a231*b01)*det;_this2.self._20=(a101*b10-a111*b08+a131*b06)*det;_this2.self._21=(a011*b08-a001*b10-a031*b06)*det;_this2.self._22=(a301*b04-a311*b02+a331*b00)*det;_this2.self._23=(a211*b02-a201*b04-a231*b00)*det;_this2.self._30=(a111*b07-a101*b09-a121*b06)*det;_this2.self._31=(a001*b09-a011*b07+a021*b06)*det;_this2.self._32=(a311*b01-a301*b03-a321*b00)*det;_this2.self._33=(a201*b03-a211*b01+a221*b00)*det}let _this3=this.V;let m3=this.transform.world;let a002=m3.self._00;let a012=m3.self._01;let a022=m3.self._02;let a032=m3.self._03;let a102=m3.self._10;let a112=m3.self._11;let a122=m3.self._12;let a132=m3.self._13;let a202=m3.self._20;let a212=m3.self._21;let a222=m3.self._22;let a232=m3.self._23;let a302=m3.self._30;let a312=m3.self._31;let a322=m3.self._32;let a332=m3.self._33;let b001=a002*a112-a012*a102;let b011=a002*a122-a022*a102;let b021=a002*a132-a032*a102;let b031=a012*a122-a022*a112;let b041=a012*a132-a032*a112;let b051=a022*a132-a032*a122;let b061=a202*a312-a212*a302;let b071=a202*a322-a222*a302;let b081=a202*a332-a232*a302;let b091=a212*a322-a222*a312;let b101=a212*a332-a232*a312;let b111=a222*a332-a232*a322;let det1=b001*b111-b011*b101+b021*b091+b031*b081-b041*b071+b051*b061;if(det1==0){_this3.self._00=1;_this3.self._01=0;_this3.self._02=0;_this3.self._03=0;_this3.self._10=0;_this3.self._11=1;_this3.self._12=0;_this3.self._13=0;_this3.self._20=0;_this3.self._21=0;_this3.self._22=1;_this3.self._23=0;_this3.self._30=0;_this3.self._31=0;_this3.self._32=0;_this3.self._33=1}else{det1=1/det1;_this3.self._00=(a112*b111-a122*b101+a132*b091)*det1;_this3.self._01=(a022*b101-a012*b111-a032*b091)*det1;_this3.self._02=(a312*b051-a322*b041+a332*b031)*det1;_this3.self._03=(a222*b041-a212*b051-a232*b031)*det1;_this3.self._10=(a122*b081-a102*b111-a132*b071)*det1;_this3.self._11=(a002*b111-a022*b081+a032*b071)*det1;_this3.self._12=(a322*b021-a302*b051-a332*b011)*det1;_this3.self._13=(a202*b051-a222*b021+a232*b011)*det1;_this3.self._20=(a102*b101-a112*b081+a132*b061)*det1;_this3.self._21=(a012*b081-a002*b101-a032*b061)*det1;_this3.self._22=(a302*b041-a312*b021+a332*b001)*det1;_this3.self._23=(a212*b021-a202*b041-a232*b001)*det1;_this3.self._30=(a112*b071-a102*b091-a122*b061)*det1;_this3.self._31=(a002*b091-a012*b071+a022*b061)*det1;_this3.self._32=(a312*b011-a302*b031-a322*b001)*det1;_this3.self._33=(a202*b031-a212*b011+a222*b001)*det1}let _this4=this.V;let _this5=iron_math_Mat4.helpVec;_this5.x=_this4.self._00;_this5.y=_this4.self._01;_this5.z=_this4.self._02;_this5.w=1;let _this6=_this5;let scale=1/Math.sqrt(_this6.x*_this6.x+_this6.y*_this6.y+_this6.z*_this6.z);_this4.self._00*=scale;_this4.self._01*=scale;_this4.self._02*=scale;let _this7=iron_math_Mat4.helpVec;_this7.x=_this4.self._10;_this7.y=_this4.self._11;_this7.z=_this4.self._12;_this7.w=1;let _this8=_this7;scale=1/Math.sqrt(_this8.x*_this8.x+_this8.y*_this8.y+_this8.z*_this8.z);_this4.self._10*=scale;_this4.self._11*=scale;_this4.self._12*=scale;let _this9=iron_math_Mat4.helpVec;_this9.x=_this4.self._20;_this9.y=_this4.self._21;_this9.z=_this4.self._22;_this9.w=1;let _this10=_this9;scale=1/Math.sqrt(_this10.x*_this10.x+_this10.y*_this10.y+_this10.z*_this10.z);_this4.self._20*=scale;_this4.self._21*=scale;_this4.self._22*=scale;_this4.self._03=0;_this4.self._13=0;_this4.self._23=0;_this4.self._30=0;_this4.self._31=0;_this4.self._32=0;_this4.self._33=1;let _this11=iron_object_LightObject.m;let m4=this.V;let a003=_this11.self._00;let a013=_this11.self._01;let a023=_this11.self._02;let a033=_this11.self._03;let a103=_this11.self._10;let a113=_this11.self._11;let a123=_this11.self._12;let a133=_this11.self._13;let a203=_this11.self._20;let a213=_this11.self._21;let a223=_this11.self._22;let a233=_this11.self._23;let a303=_this11.self._30;let a313=_this11.self._31;let a323=_this11.self._32;let a333=_this11.self._33;let b010=m4.self._00;let b12=m4.self._10;let b21=m4.self._20;let b31=m4.self._30;_this11.self._00=a003*b010+a013*b12+a023*b21+a033*b31;_this11.self._10=a103*b010+a113*b12+a123*b21+a133*b31;_this11.self._20=a203*b010+a213*b12+a223*b21+a233*b31;_this11.self._30=a303*b010+a313*b12+a323*b21+a333*b31;b010=m4.self._01;b12=m4.self._11;b21=m4.self._21;b31=m4.self._31;_this11.self._01=a003*b010+a013*b12+a023*b21+a033*b31;_this11.self._11=a103*b010+a113*b12+a123*b21+a133*b31;_this11.self._21=a203*b010+a213*b12+a223*b21+a233*b31;_this11.self._31=a303*b010+a313*b12+a323*b21+a333*b31;b010=m4.self._02;b12=m4.self._12;b21=m4.self._22;b31=m4.self._32;_this11.self._02=a003*b010+a013*b12+a023*b21+a033*b31;_this11.self._12=a103*b010+a113*b12+a123*b21+a133*b31;_this11.self._22=a203*b010+a213*b12+a223*b21+a233*b31;_this11.self._32=a303*b010+a313*b12+a323*b21+a333*b31;b010=m4.self._03;b12=m4.self._13;b21=m4.self._23;b31=m4.self._33;_this11.self._03=a003*b010+a013*b12+a023*b21+a033*b31;_this11.self._13=a103*b010+a113*b12+a123*b21+a133*b31;_this11.self._23=a203*b010+a213*b12+a223*b21+a233*b31;_this11.self._33=a303*b010+a313*b12+a323*b21+a333*b31;let _this12=iron_object_LightObject.corners[0];_this12.x=-1;_this12.y=-1;_this12.z=1;_this12.w=1;let _this13=iron_object_LightObject.corners[1];_this13.x=-1;_this13.y=-1;_this13.z=-1;_this13.w=1;let _this14=iron_object_LightObject.corners[2];_this14.x=-1;_this14.y=1;_this14.z=1;_this14.w=1;let _this15=iron_object_LightObject.corners[3];_this15.x=-1;_this15.y=1;_this15.z=-1;_this15.w=1;let _this16=iron_object_LightObject.corners[4];_this16.x=1;_this16.y=-1;_this16.z=1;_this16.w=1;let _this17=iron_object_LightObject.corners[5];_this17.x=1;_this17.y=-1;_this17.z=-1;_this17.w=1;let _this18=iron_object_LightObject.corners[6];_this18.x=1;_this18.y=1;_this18.z=1;_this18.w=1;let _this19=iron_object_LightObject.corners[7];_this19.x=1;_this19.y=1;_this19.z=-1;_this19.w=1;let _g=0;let _g1=iron_object_LightObject.corners;while(_g<_g1.length){let v=_g1[_g];++_g;let m=iron_object_LightObject.m;let x=v.x;let y=v.y;let z=v.z;let w=v.w;v.x=m.self._00*x+m.self._10*y+m.self._20*z+m.self._30*w;v.y=m.self._01*x+m.self._11*y+m.self._21*z+m.self._31*w;v.z=m.self._02*x+m.self._12*y+m.self._22*z+m.self._32*w;v.w=m.self._03*x+m.self._13*y+m.self._23*z+m.self._33*w;v.x/=v.w;v.y/=v.w;v.z/=v.w;v.w=1}let minx=iron_object_LightObject.corners[0].x;let miny=iron_object_LightObject.corners[0].y;let minz=iron_object_LightObject.corners[0].z;let maxx=iron_object_LightObject.corners[0].x;let maxy=iron_object_LightObject.corners[0].y;let maxz=iron_object_LightObject.corners[0].z;let _g2=0;let _g3=iron_object_LightObject.corners;while(_g2<_g3.length){let v=_g3[_g2];++_g2;if(v.x<minx){minx=v.x}if(v.x>maxx){maxx=v.x}if(v.y<miny){miny=v.y}if(v.y>maxy){maxy=v.y}if(v.z<minz){minz=v.z}if(v.z>maxz){maxz=v.z}}let v1=iron_object_LightObject.corners[0];let v2=iron_object_LightObject.corners[7];let vx=v1.x-v2.x;let vy=v1.y-v2.y;let vz=v1.z-v2.z;let diag0=Math.sqrt(vx*vx+vy*vy+vz*vz);let offx=(diag0-(maxx-minx))*.5;let offy=(diag0-(maxy-miny))*.5;minx-=offx;maxx+=offx;miny-=offy;maxy+=offy;let smsize=this.data.raw.shadowmap_size;smsize=smsize/4|0;let worldPerTexelX=(maxx-minx)/smsize;let worldPerTexelY=(maxy-miny)/smsize;let worldPerTexelZ=(maxz-minz)/smsize;minx=Math.floor(minx/worldPerTexelX)*worldPerTexelX;miny=Math.floor(miny/worldPerTexelY)*worldPerTexelY;minz=Math.floor(minz/worldPerTexelZ)*worldPerTexelZ;maxx=Math.floor(maxx/worldPerTexelX)*worldPerTexelX;maxy=Math.floor(maxy/worldPerTexelY)*worldPerTexelY;maxz=Math.floor(maxz/worldPerTexelZ)*worldPerTexelZ;let hx=(maxx-minx)/2;let hy=(maxy-miny)/2;let hz=(maxz-minz)/2;this.V.self._30=-(minx+hx);this.V.self._31=-(miny+hy);this.V.self._32=-(minz+hz);let left=-hx;let bottom=-hy;let near=-hz*4*iron_object_LightObject.cascadeBounds;let rl=hx-left;let tb=hy-bottom;let fn=hz-near;let tx=-(hx+left)/rl;let ty=-(hy+bottom)/tb;let tz=-(hz+near)/fn;iron_object_LightObject.m=new iron_math_Mat4(2/rl,0,0,tx,0,2/tb,0,ty,0,0,-2/fn,tz,0,0,0,1);let _this20=this.P;let m5=iron_object_LightObject.m;_this20.self._00=m5.self._00;_this20.self._01=m5.self._01;_this20.self._02=m5.self._02;_this20.self._03=m5.self._03;_this20.self._10=m5.self._10;_this20.self._11=m5.self._11;_this20.self._12=m5.self._12;_this20.self._13=m5.self._13;_this20.self._20=m5.self._20;_this20.self._21=m5.self._21;_this20.self._22=m5.self._22;_this20.self._23=m5.self._23;_this20.self._30=m5.self._30;_this20.self._31=m5.self._31;_this20.self._32=m5.self._32;_this20.self._33=m5.self._33;this.updateViewFrustum(camera);if(this.cascadeVP==null){this.cascadeVP=[];let _g=0;let _g1=iron_object_LightObject.cascadeCount;while(_g<_g1){let i=_g++;this.cascadeVP.push(new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1))}}let _this21=this.cascadeVP[cascade];let m6=this.VP;_this21.self._00=m6.self._00;_this21.self._01=m6.self._01;_this21.self._02=m6.self._02;_this21.self._03=m6.self._03;_this21.self._10=m6.self._10;_this21.self._11=m6.self._11;_this21.self._12=m6.self._12;_this21.self._13=m6.self._13;_this21.self._20=m6.self._20;_this21.self._21=m6.self._21;_this21.self._22=m6.self._22;_this21.self._23=m6.self._23;_this21.self._30=m6.self._30;_this21.self._31=m6.self._31;_this21.self._32=m6.self._32;_this21.self._33=m6.self._33}updateViewFrustum(camera){let _this=this.VP;let b=this.P;let a=this.V;let a00=a.self._00;let a01=a.self._01;let a02=a.self._02;let a03=a.self._03;let a10=a.self._10;let a11=a.self._11;let a12=a.self._12;let a13=a.self._13;let a20=a.self._20;let a21=a.self._21;let a22=a.self._22;let a23=a.self._23;let a30=a.self._30;let a31=a.self._31;let a32=a.self._32;let a33=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;if(camera.data.raw.frustum_culling){if(this.frustumPlanes==null){this.frustumPlanes=[];this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane);this.frustumPlanes.push(new iron_object_FrustumPlane)}iron_object_CameraObject.buildViewFrustum(this.VP,this.frustumPlanes)}}setCubeFace(face,camera){let _this=iron_object_LightObject.eye;_this.x=this.transform.world.self._30;_this.y=this.transform.world.self._31;_this.z=this.transform.world.self._32;_this.w=1;let flip=face==2||face==3;iron_object_CameraObject.setCubeFace(this.V,iron_object_LightObject.eye,face,flip);this.updateViewFrustum(camera)}getCascadeData(){if(this.cascadeData==null){this.cascadeData=kha_arrays_Float32Array._new(iron_object_LightObject.cascadeCount*16+4)}if(this.cascadeVP==null){return this.cascadeData}let _g=0;let _g1=iron_object_LightObject.cascadeCount;while(_g<_g1){let i=_g++;let _this=iron_object_LightObject.m;let m=this.cascadeVP[i];_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;let _this1=this.bias;let m1=iron_object_Uniforms.biasMat;_this1.self._00=m1.self._00;_this1.self._01=m1.self._01;_this1.self._02=m1.self._02;_this1.self._03=m1.self._03;_this1.self._10=m1.self._10;_this1.self._11=m1.self._11;_this1.self._12=m1.self._12;_this1.self._13=m1.self._13;_this1.self._20=m1.self._20;_this1.self._21=m1.self._21;_this1.self._22=m1.self._22;_this1.self._23=m1.self._23;_this1.self._30=m1.self._30;_this1.self._31=m1.self._31;_this1.self._32=m1.self._32;_this1.self._33=m1.self._33;this.bias.self._00/=iron_object_LightObject.cascadeCount;this.bias.self._30/=iron_object_LightObject.cascadeCount;this.bias.self._30+=i*(1/iron_object_LightObject.cascadeCount);let _this2=iron_object_LightObject.m;let m2=this.bias;let a00=_this2.self._00;let a01=_this2.self._01;let a02=_this2.self._02;let a03=_this2.self._03;let a10=_this2.self._10;let a11=_this2.self._11;let a12=_this2.self._12;let a13=_this2.self._13;let a20=_this2.self._20;let a21=_this2.self._21;let a22=_this2.self._22;let a23=_this2.self._23;let a30=_this2.self._30;let a31=_this2.self._31;let a32=_this2.self._32;let a33=_this2.self._33;let b0=m2.self._00;let b1=m2.self._10;let b2=m2.self._20;let b3=m2.self._30;_this2.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this2.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this2.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this2.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._01;b1=m2.self._11;b2=m2.self._21;b3=m2.self._31;_this2.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this2.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this2.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this2.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._02;b1=m2.self._12;b2=m2.self._22;b3=m2.self._32;_this2.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this2.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this2.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this2.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._03;b1=m2.self._13;b2=m2.self._23;b3=m2.self._33;_this2.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this2.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this2.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this2.self._33=a30*b0+a31*b1+a32*b2+a33*b3;let v=iron_object_LightObject.m.self._00;this.cascadeData.setFloat32(i*16*4,v,true);let v1=iron_object_LightObject.m.self._01;this.cascadeData.setFloat32((i*16+1)*4,v1,true);let v2=iron_object_LightObject.m.self._02;this.cascadeData.setFloat32((i*16+2)*4,v2,true);let v3=iron_object_LightObject.m.self._03;this.cascadeData.setFloat32((i*16+3)*4,v3,true);let v4=iron_object_LightObject.m.self._10;this.cascadeData.setFloat32((i*16+4)*4,v4,true);let v5=iron_object_LightObject.m.self._11;this.cascadeData.setFloat32((i*16+5)*4,v5,true);let v6=iron_object_LightObject.m.self._12;this.cascadeData.setFloat32((i*16+6)*4,v6,true);let v7=iron_object_LightObject.m.self._13;this.cascadeData.setFloat32((i*16+7)*4,v7,true);let v8=iron_object_LightObject.m.self._20;this.cascadeData.setFloat32((i*16+8)*4,v8,true);let v9=iron_object_LightObject.m.self._21;this.cascadeData.setFloat32((i*16+9)*4,v9,true);let v10=iron_object_LightObject.m.self._22;this.cascadeData.setFloat32((i*16+10)*4,v10,true);let v11=iron_object_LightObject.m.self._23;this.cascadeData.setFloat32((i*16+11)*4,v11,true);let v12=iron_object_LightObject.m.self._30;this.cascadeData.setFloat32((i*16+12)*4,v12,true);let v13=iron_object_LightObject.m.self._31;this.cascadeData.setFloat32((i*16+13)*4,v13,true);let v14=iron_object_LightObject.m.self._32;this.cascadeData.setFloat32((i*16+14)*4,v14,true);let v15=iron_object_LightObject.m.self._33;this.cascadeData.setFloat32((i*16+15)*4,v15,true)}let v=this.cascadeSplit[0];this.cascadeData.setFloat32(iron_object_LightObject.cascadeCount*16*4,v,true);let v1=this.cascadeSplit[1];this.cascadeData.setFloat32((iron_object_LightObject.cascadeCount*16+1)*4,v1,true);let v2=this.cascadeSplit[2];this.cascadeData.setFloat32((iron_object_LightObject.cascadeCount*16+2)*4,v2,true);let v3=this.cascadeSplit[3];this.cascadeData.setFloat32((iron_object_LightObject.cascadeCount*16+3)*4,v3,true);return this.cascadeData}}$hxClasses["iron.object.LightObject"]=iron_object_LightObject;iron_object_LightObject.__name__=true;iron_object_LightObject.__super__=iron_object_Object;Object.assign(iron_object_LightObject.prototype,{__class__:iron_object_LightObject});class iron_object_MeshObject extends iron_object_Object{constructor(data,materials){iron_object_Object._hx_skip_constructor=true;super();iron_object_Object._hx_skip_constructor=false;this._hx_constructor(data,materials)}_hx_constructor(data,materials){this.morphTarget=null;this.force_context=null;this.skip_context=null;this.tilesheet=null;this.frustumCulling=true;this.screenSize=0;this.particleIndex=-1;this.particleOwner=null;this.particleChildren=null;this.particleSystems=null;this.materialIndex=0;this.data=null;super._hx_constructor();this.materials=materials;this.setData(data);iron_Scene.active.meshes.push(this)}setData(data){this.data=data;data.refcount++;data.geom.build();this.transform.scaleWorld=data.scalePos}remove(){if(this.particleChildren!=null){let _g=0;let _g1=this.particleChildren;while(_g<_g1.length){let c=_g1[_g];++_g;c.remove()}this.particleChildren=null}if(this.particleSystems!=null){let _g=0;let _g1=this.particleSystems;while(_g<_g1.length){let psys=_g1[_g];++_g;psys.remove()}this.particleSystems=null}if(this.tilesheet!=null){this.tilesheet.remove()}if(iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.meshes,this)}this.data.refcount--;super.remove()}setupAnimation(oactions){let hasAction=this.parent!=null&&this.parent.raw!=null&&this.parent.raw.bone_actions!=null;if(hasAction){let armatureName=this.parent.name;this.animation=this.getParentArmature(armatureName);if(this.animation==null){this.animation=new iron_object_BoneAnimation(armatureName)}if(this.data.isSkinned){js_Boot.__cast(this.animation,iron_object_BoneAnimation).setSkin(this)}}super.setupAnimation(oactions)}setupMorphTargets(){if(this.data.raw.morph_target!=null){this.morphTarget=new iron_object_MorphTarget(this.data.raw.morph_target)}}setupParticleSystem(sceneName,pref){if(this.particleSystems==null){this.particleSystems=[]}let psys=new iron_object_ParticleSystem(sceneName,pref);this.particleSystems.push(psys)}setupTilesheet(sceneName,tilesheet_ref,tilesheet_action_ref){this.tilesheet=new iron_object_Tilesheet(sceneName,tilesheet_ref,tilesheet_action_ref)}setCulled(isShadow,b){if(isShadow){this.culledShadow=b}else{this.culledMesh=b}this.culled=this.culledMesh&&this.culledShadow;return b}cullMaterial(context){let mats=this.materials;if(!(this.raw!=null&&this.raw.lod_material!=null&&this.raw.lod_material==true)&&!this.validContext(mats,context)){return true}let isShadow=context=="shadowmap";if(!this.visibleMesh&&!isShadow){return this.setCulled(isShadow,true)}if(!this.visibleShadow&&isShadow){return this.setCulled(isShadow,true)}if(this.skip_context==context){return this.setCulled(isShadow,true)}if(this.force_context!=null&&this.force_context!=context){return this.setCulled(isShadow,true)}if(context=="voxel"&&this.raw!=null&&this.raw.mobile==true){return this.setCulled(isShadow,true)}return this.setCulled(isShadow,false)}cullMesh(context,camera,light){if(camera==null){return false}if(camera.data.raw.frustum_culling&&this.frustumCulling){let radiusScale=this.data.isSkinned?2:1;if(this.particleSystems!=null||this.particleOwner!=null){radiusScale*=1e3}if(context=="voxel"){radiusScale*=100}if(this.data.geom.instanced){radiusScale*=100}let isShadow=context=="shadowmap";let frustumPlanes=isShadow?light.frustumPlanes:camera.frustumPlanes;if(isShadow&&light.data.raw.type!="sun"){light.transform.radius=light.data.raw.far_plane;if(!iron_object_CameraObject.sphereInFrustum(camera.frustumPlanes,light.transform)){return this.setCulled(isShadow,true)}}if(!iron_object_CameraObject.sphereInFrustum(frustumPlanes,this.transform,radiusScale)){return this.setCulled(isShadow,true)}}this.culled=false;return this.culled}skipContext(context,mat){if(mat.raw.skip_context!=null&&mat.raw.skip_context==context){return true}return false}getContexts(context,materials,materialContexts,shaderContexts){let _g=0;while(_g<materials.length){let mat=materials[_g];++_g;let found=false;let _g1=0;let _g2=mat.raw.contexts.length;while(_g1<_g2){let i=_g1++;if(HxOverrides.substr(mat.raw.contexts[i].name,0,context.length)==context){materialContexts.push(mat.contexts[i]);shaderContexts.push(mat.shader.getContext(context));found=true;break}}if(!found){materialContexts.push(null);shaderContexts.push(null)}}}render(g,context,bindParams){if(this.data==null||!this.data.geom.ready){return}if(!this.visible){return}if(this.cullMesh(context,iron_Scene.active.camera,iron_RenderPath.active.light)){return}let meshContext=this.raw!=null&&context=="mesh";if(this.raw!=null&&this.raw.is_particle&&this.particleOwner==null){return}let _gthis=this;if(this.particleSystems!=null&&meshContext){if(this.particleChildren==null){this.particleChildren=[];let _g=0;let _g1=this.particleSystems;while(_g<_g1.length){let psys=_g1[_g];++_g;iron_Scene.active.spawnObject(psys.data.raw.instance_object,null,function(o){if(o!=null){let c=o;_gthis.particleChildren.push(c);c.particleOwner=_gthis;c.particleIndex=_gthis.particleChildren.length-1}})}}let _g=0;let _g1=this.particleSystems.length;while(_g<_g1){let i=_g++;this.particleSystems[i].update(this.particleChildren[i],this)}}if(this.particleSystems!=null&&this.particleSystems.length>0&&!this.raw.render_emitter){return}if(this.cullMaterial(context)){return}let mats=this.materials;let lod=this;if(this.raw!=null&&this.raw.lods!=null&&this.raw.lods.length>0){let camera=iron_Scene.active.camera;let tr=this.transform;let volume=tr.dim.x*tr.dim.y*tr.dim.z;this.screenSize=volume*(1/this.cameraDistance);this.screenSize=this.screenSize>1?1:this.screenSize;if(this.lods==null){this.lods=[];let _g=0;let _g1=this.raw.lods;while(_g<_g1.length){let l=_g1[_g];++_g;if(l.object_ref==""){this.lods.push(null)}else{this.lods.push(iron_Scene.active.getChild(l.object_ref))}}}if(context=="voxel"){lod=this.lods[this.lods.length-1]}else{let _g=0;let _g1=this.raw.lods.length;while(_g<_g1){let i=_g++;if(this.screenSize>this.raw.lods[i].screen_size){break}lod=this.lods[i];if(this.raw!=null&&this.raw.lod_material!=null&&this.raw.lod_material==true){mats=lod.materials}}}if(lod==null){return}}if(this.raw!=null&&this.raw.lod_material!=null&&this.raw.lod_material==true&&!this.validContext(mats,context)){return}let materialContexts=[];let shaderContexts=[];this.getContexts(context,mats,materialContexts,shaderContexts);iron_object_Uniforms.posUnpack=this.data.scalePos;iron_object_Uniforms.texUnpack=this.data.scaleTex;this.transform.update();let ldata=lod.data;let _g=0;let _g1=ldata.geom.indexBuffers.length;while(_g<_g1){let i=_g++;let mi=ldata.geom.materialIndices[i];if(shaderContexts.length<=mi||shaderContexts[mi]==null){continue}this.materialIndex=mi;if(this.materials.length>mi&&this.skipContext(context,this.materials[mi])){continue}let scontext=shaderContexts[mi];if(scontext==null){continue}let elems=scontext.raw.vertex_elements;if(scontext.pipeState!=iron_object_MeshObject.lastPipeline){g.setPipeline(scontext.pipeState);iron_object_MeshObject.lastPipeline=scontext.pipeState}iron_object_Uniforms.setContextConstants(g,scontext,bindParams);iron_object_Uniforms.setObjectConstants(g,scontext,this);if(materialContexts.length>mi){iron_object_Uniforms.setMaterialConstants(g,scontext,materialContexts[mi])}if(ldata.geom.instancedVB!=null){g.setVertexBuffers([ldata.geom.get(elems),ldata.geom.instancedVB])}else{g.setVertexBuffer(ldata.geom.get(elems))}g.setIndexBuffer(ldata.geom.indexBuffers[i]);if(ldata.geom.instanced){g.drawIndexedVerticesInstanced(ldata.geom.instanceCount,ldata.geom.start,ldata.geom.count)}else{g.drawIndexedVertices(ldata.geom.start,ldata.geom.count)}}}validContext(mats,context){let _g=0;while(_g<mats.length){let mat=mats[_g];++_g;if(mat.getContext(context)!=null){return true}}return false}}$hxClasses["iron.object.MeshObject"]=iron_object_MeshObject;iron_object_MeshObject.__name__=true;iron_object_MeshObject.__super__=iron_object_Object;Object.assign(iron_object_MeshObject.prototype,{__class__:iron_object_MeshObject});class iron_object_MorphTarget{constructor(data){this.morphMap=null;this.morphBlockSize=0;this.morphImageSize=0;this.numMorphTargets=0;let defaults=data.morph_target_defaults;this.morphWeights=kha_arrays_Float32Array._new(defaults.byteLength>>2);let _g=0;let _g1=this.morphWeights.byteLength>>2;while(_g<_g1){let i=_g++;let v=defaults.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);this.morphWeights.setFloat32(i*4,v,true)}this.scaling=data.morph_scale;this.offset=data.morph_offset;this.numMorphTargets=data.num_morph_targets;this.morphImageSize=data.morph_img_size;this.morphBlockSize=data.morph_block_size;let _gthis=this;iron_data_Data.getImage(data.morph_target_data_file+"_morph_pos.png",function(img){if(img!=null){_gthis.morphDataPos=img}});iron_data_Data.getImage(data.morph_target_data_file+"_morph_nor.png",function(img){if(img!=null){_gthis.morphDataNor=img}});this.morphMap=new haxe_ds_StringMap;let i=0;let _g2=0;let _g3=data.morph_target_ref;while(_g2<_g3.length){let name=_g3[_g2];++_g2;this.morphMap.h[name]=i;++i}}}$hxClasses["iron.object.MorphTarget"]=iron_object_MorphTarget;iron_object_MorphTarget.__name__=true;Object.assign(iron_object_MorphTarget.prototype,{__class__:iron_object_MorphTarget});class iron_object_ObjectAnimation extends iron_object_Animation{constructor(object,oactions){iron_object_Animation._hx_skip_constructor=true;super();iron_object_Animation._hx_skip_constructor=false;this._hx_constructor(object,oactions)}_hx_constructor(object,oactions){this.object=object;this.oactions=oactions;this.isSkinned=false;super._hx_constructor()}getAction(action){let _g=0;let _g1=this.oactions;while(_g<_g1.length){let a=_g1[_g];++_g;if(a!=null&&a.objects[0].name==action){return a.objects[0]}}return null}play(action,onComplete,blendTime,speed,loop){if(loop==null){loop=true}if(speed==null){speed=1}if(blendTime==null){blendTime=0}if(action==null){action=""}super.play(action,onComplete,blendTime,speed,loop);if(this.action==""&&this.oactions[0]!=null){this.action=this.oactions[0].objects[0].name}this.oaction=this.getAction(this.action);if(this.oaction!=null){this.isSampled=this.oaction.sampled!=null&&this.oaction.sampled}}update(delta){if(!this.object.visible||this.object.culled||this.oaction==null){return}super.update(delta);if(this.paused){return}if(!this.isSkinned){this.updateObjectAnim()}}updateObjectAnim(){this.updateTransformAnim(this.oaction.anim,this.object.transform);this.object.transform.buildMatrix()}isTrackEnd(track){if(this.speed>0){return this.frameIndex>=(track.frames.byteLength>>2)-2}else{return this.frameIndex<=0}}updateTransformAnim(anim,transform){if(anim==null){return}let total=anim.end*this.frameTime-anim.begin*this.frameTime;if(anim.has_delta){let t=transform;if(t.dloc==null){t.dloc=new iron_math_Vec4;t.drot=new iron_math_Quat;t.dscale=new iron_math_Vec4}let _this=t.dloc;_this.x=0;_this.y=0;_this.z=0;_this.w=1;let _this1=t.dscale;_this1.x=0;_this1.y=0;_this1.z=0;_this1.w=1;t._deulerX=t._deulerY=t._deulerZ=0}let _g=0;let _g1=anim.tracks;while(_g<_g1.length){let track=_g1[_g];++_g;if(this.frameIndex==-1){this.rewind(track)}let sign=this.speed>0?1:-1;let t=this.time+anim.begin*this.frameTime;while(true){let frameValues=track.frames;if(!(this.speed>0?this.frameIndex<(frameValues.byteLength>>2)-2&&t>frameValues.getUint32((this.frameIndex+1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime:this.frameIndex>1&&t>frameValues.getUint32((this.frameIndex-1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime)){break}this.frameIndex+=sign}if(this.frameIndex>=track.frames.byteLength>>2){continue}if(this.time>total){if(this.onComplete!=null){this.onComplete()}if(this.loop){this.rewind(track)}else{this.frameIndex-=sign;this.paused=true}return}let ti=this.frameIndex;let t1=track.frames.getUint32(ti*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime;let t2=track.frames.getUint32((ti+sign)*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.frameTime;let v1=track.values.getFloat32(ti*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let v2=track.values.getFloat32((ti+sign)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let s=(t-t1)/(t2-t1);let value=(1-s)*v1+s*v2;switch(track.target){case"dqwrot":transform.drot.w=value;break;case"dqxrot":transform.drot.x=value;break;case"dqyrot":transform.drot.y=value;break;case"dqzrot":transform.drot.z=value;break;case"dxloc":transform.dloc.x=value;break;case"dxrot":transform._deulerX=value;break;case"dxscl":transform.dscale.x=value;break;case"dyloc":transform.dloc.y=value;break;case"dyrot":transform._deulerY=value;break;case"dyscl":transform.dscale.y=value;break;case"dzloc":transform.dloc.z=value;break;case"dzrot":transform._deulerZ=value;break;case"dzscl":transform.dscale.z=value;break;case"qwrot":transform.rot.w=value;break;case"qxrot":transform.rot.x=value;break;case"qyrot":transform.rot.y=value;break;case"qzrot":transform.rot.z=value;break;case"xloc":transform.loc.x=value;break;case"xrot":transform.setRotation(value,transform._eulerY,transform._eulerZ);break;case"xscl":transform.scale.x=value;break;case"yloc":transform.loc.y=value;break;case"yrot":transform.setRotation(transform._eulerX,value,transform._eulerZ);break;case"yscl":transform.scale.y=value;break;case"zloc":transform.loc.z=value;break;case"zrot":transform.setRotation(transform._eulerX,transform._eulerY,value);break;case"zscl":transform.scale.z=value;break}}}}$hxClasses["iron.object.ObjectAnimation"]=iron_object_ObjectAnimation;iron_object_ObjectAnimation.__name__=true;iron_object_ObjectAnimation.__super__=iron_object_Animation;Object.assign(iron_object_ObjectAnimation.prototype,{__class__:iron_object_ObjectAnimation});class iron_object_ParticleSystem{constructor(sceneName,pref){this.ownerScl=new iron_math_Vec4;this.ownerRot=new iron_math_Quat;this.ownerLoc=new iron_math_Vec4;this.m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.lapTime=0;this.lap=0;this.count=0;this.seed=0;this.spawnRate=0;this.time=0;this.animtime=0;this.lifetime=0;this.frameRate=24;this.speed=1;this.seed=pref.seed;this.particles=[];this.ready=false;let _gthis=this;iron_data_Data.getParticle(sceneName,pref.particle,function(b){_gthis.data=b;_gthis.r=_gthis.data.raw;if(iron_Scene.active.raw.gravity!=null){_gthis.gx=iron_Scene.active.raw.gravity.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN)*_gthis.r.weight_gravity;_gthis.gy=iron_Scene.active.raw.gravity.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)*_gthis.r.weight_gravity;_gthis.gz=iron_Scene.active.raw.gravity.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)*_gthis.r.weight_gravity}else{_gthis.gx=0;_gthis.gy=0;_gthis.gz=-9.81*_gthis.r.weight_gravity}_gthis.alignx=_gthis.r.object_align_factor.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN)/2;_gthis.aligny=_gthis.r.object_align_factor.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)/2;_gthis.alignz=_gthis.r.object_align_factor.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)/2;_gthis.lifetime=_gthis.r.lifetime/_gthis.frameRate;_gthis.animtime=(_gthis.r.frame_end-_gthis.r.frame_start)/_gthis.frameRate;_gthis.spawnRate=(_gthis.r.frame_end-_gthis.r.frame_start)/_gthis.r.count/_gthis.frameRate;let _g=0;let _g1=_gthis.r.count;while(_g<_g1){let i=_g++;_gthis.particles.push(new iron_object_Particle(i))}_gthis.ready=true})}update(object,owner){if(!this.ready||object==null||this.speed==0){return}let _this=owner.transform.world;let loc=this.ownerLoc;let quat=this.ownerRot;let scale=this.ownerScl;loc.x=_this.self._30;loc.y=_this.self._31;loc.z=_this.self._32;let _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;let _this2=_this1;scale.x=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);let _this3=iron_math_Mat4.helpVec;_this3.x=_this.self._10;_this3.y=_this.self._11;_this3.z=_this.self._12;_this3.w=1;let _this4=_this3;scale.y=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);let _this5=iron_math_Mat4.helpVec;_this5.x=_this.self._20;_this5.y=_this.self._21;_this5.z=_this.self._22;_this5.w=1;let _this6=_this5;scale.z=Math.sqrt(_this6.x*_this6.x+_this6.y*_this6.y+_this6.z*_this6.z);let _this7=_this.self;let m3=_this7._12;let m4=_this7._22;let m5=_this7._32;let m6=_this7._13;let m7=_this7._23;let m8=_this7._33;let c00=_this7._11*(m4*m8-m5*m7)-_this7._21*(m3*m8-m5*m6)+_this7._31*(m3*m7-m4*m6);let m31=_this7._12;let m41=_this7._22;let m51=_this7._32;let m61=_this7._13;let m71=_this7._23;let m81=_this7._33;let c01=_this7._10*(m41*m81-m51*m71)-_this7._20*(m31*m81-m51*m61)+_this7._30*(m31*m71-m41*m61);let m32=_this7._11;let m42=_this7._21;let m52=_this7._31;let m62=_this7._13;let m72=_this7._23;let m82=_this7._33;let c02=_this7._10*(m42*m82-m52*m72)-_this7._20*(m32*m82-m52*m62)+_this7._30*(m32*m72-m42*m62);let m33=_this7._11;let m43=_this7._21;let m53=_this7._31;let m63=_this7._12;let m73=_this7._22;let m83=_this7._32;let c03=_this7._10*(m43*m83-m53*m73)-_this7._20*(m33*m83-m53*m63)+_this7._30*(m33*m73-m43*m63);if(_this7._00*c00-_this7._01*c01+_this7._02*c02-_this7._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this.self._00*invs;iron_math_Mat4.helpMat.self._01=_this.self._01*invs;iron_math_Mat4.helpMat.self._02=_this.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this.self._10*invs;iron_math_Mat4.helpMat.self._11=_this.self._11*invs;iron_math_Mat4.helpMat.self._12=_this.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this.self._20*invs;iron_math_Mat4.helpMat.self._21=_this.self._21*invs;iron_math_Mat4.helpMat.self._22=_this.self._22*invs;let m=iron_math_Mat4.helpMat;let m11=m.self._00;let m12=m.self._10;let m13=m.self._20;let m21=m.self._01;let m22=m.self._11;let m23=m.self._21;let m311=m.self._02;let m321=m.self._12;let m331=m.self._22;let tr=m11+m22+m331;let s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m321-m23)*s;quat.y=(m13-m311)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m331){s=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m311)/s}else if(m22>m331){s=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m321)/s}else{s=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m311)/s;quat.y=(m23+m321)/s;quat.z=.25*s}object.transform.loc=this.ownerLoc;object.transform.rot=this.ownerRot;object.transform.scale=new iron_math_Vec4(this.r.particle_size,this.r.particle_size,this.r.particle_size,1);object.transform.buildMatrix();owner.transform.buildMatrix();let _this8=object.transform.dim;let v=owner.transform.dim;_this8.x=v.x;_this8.y=v.y;_this8.z=v.z;_this8.w=v.w;this.dimx=object.transform.dim.x;this.dimy=object.transform.dim.y;if(object.tilesheet!=null){this.tilesx=object.tilesheet.raw.tilesx;this.tilesy=object.tilesheet.raw.tilesy;this.tilesFramerate=object.tilesheet.raw.framerate}this.time+=iron_system_Time.realDelta*this.speed;this.lap=this.time/this.animtime|0;this.lapTime=this.time-this.lap*this.animtime;this.count=this.lapTime/this.spawnRate|0;this.updateGpu(object,owner)}getData(){let hair=this.r.type==1;this.m.self._00=this.r.loop?this.animtime:-this.animtime;this.m.self._01=hair?1/this.particles.length:this.spawnRate;this.m.self._02=hair?1:this.lifetime;this.m.self._03=this.particles.length;this.m.self._10=hair?0:this.alignx;this.m.self._11=hair?0:this.aligny;this.m.self._12=hair?0:this.alignz;this.m.self._13=hair?0:this.r.factor_random;this.m.self._20=hair?0:this.gx*this.r.mass;this.m.self._21=hair?0:this.gy*this.r.mass;this.m.self._22=hair?0:this.gz*this.r.mass;this.m.self._23=hair?0:this.r.lifetime_random;this.m.self._30=this.tilesx;this.m.self._31=this.tilesy;this.m.self._32=1/this.tilesFramerate;this.m.self._33=hair?1:this.lapTime;return this.m}updateGpu(object,owner){if(!object.data.geom.instanced){this.setupGeomGpu(object,owner)}}setupGeomGpu(object,owner){let instancedData=kha_arrays_Float32Array._new(this.particles.length*3);let i=0;let normFactor=3051850947599719e-20;let scalePosOwner=owner.data.scalePos;let scalePosParticle=object.data.scalePos;let particleSize=this.r.particle_size;let scaleFactor_x=0;let scaleFactor_y=0;let scaleFactor_z=0;let scaleFactor_w=1;let v=owner.transform.scale;scaleFactor_x=v.x;scaleFactor_y=v.y;scaleFactor_z=v.z;scaleFactor_w=v.w;let f=scalePosOwner/(particleSize*scalePosParticle);scaleFactor_x*=f;scaleFactor_y*=f;scaleFactor_z*=f;switch(this.r.emit_from){case 0:let pa=owner.data.geom.positions;let _g=0;let _g1=this.particles;while(_g<_g1.length){let p=_g1[_g];++_g;let j=this.fhash(i)*((pa.values.byteLength>>1)/pa.size)|0;let v=pa.values.getInt16(j*pa.size*2,kha_arrays_ByteArray.LITTLE_ENDIAN)*normFactor*scaleFactor_x;instancedData.setFloat32(i*4,v,true);++i;let v1=pa.values.getInt16((j*pa.size+1)*2,kha_arrays_ByteArray.LITTLE_ENDIAN)*normFactor*scaleFactor_y;instancedData.setFloat32(i*4,v1,true);++i;let v2=pa.values.getInt16((j*pa.size+2)*2,kha_arrays_ByteArray.LITTLE_ENDIAN)*normFactor*scaleFactor_z;instancedData.setFloat32(i*4,v2,true);++i}break;case 1:let positions=owner.data.geom.positions.values;let _g2=0;let _g3=this.particles;while(_g2<_g3.length){let p=_g3[_g2];++_g2;let ia=owner.data.geom.indices[Std.random(owner.data.geom.indices.length)];let faceIndex=Std.random((ia.byteLength>>2)/3|0);let i0=ia.getUint32(faceIndex*3*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let i1=ia.getUint32((faceIndex*3+1)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let i2=ia.getUint32((faceIndex*3+2)*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let x=positions.getInt16(i0*4*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let y=positions.getInt16((i0*4+1)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let z=positions.getInt16((i0*4+2)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let pos_x=x;let pos_y=y;let pos_z=z;let x1=positions.getInt16(i1*4*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let y1=positions.getInt16((i1*4+1)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let z1=positions.getInt16((i1*4+2)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);if(z1==null){z1=0}if(y1==null){y1=0}if(x1==null){x1=0}let v_x=x1;let v_y=y1;let v_z=z1;let x2=positions.getInt16(i2*4*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let y2=positions.getInt16((i2*4+1)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);let z2=positions.getInt16((i2*4+2)*2,kha_arrays_ByteArray.LITTLE_ENDIAN);if(z2==null){z2=0}if(y2==null){y2=0}if(x2==null){x2=0}let v_x1=x2;let v_y1=y2;let v_z1=z2;let x3=Math.random();let y3=Math.random();if(x3+y3>1){x3=1-x3;y3=1-y3}v_x-=pos_x;v_y-=pos_y;v_z-=pos_z;v_x1-=pos_x;v_y1-=pos_y;v_z1-=pos_z;v_x*=x3;v_y*=x3;v_z*=x3;v_x1*=y3;v_y1*=y3;v_z1*=y3;v_x+=v_x1;v_y+=v_y1;v_z+=v_z1;pos_x+=v_x;pos_y+=v_y;pos_z+=v_z;let v=pos_x*normFactor*scaleFactor_x;instancedData.setFloat32(i*4,v,true);++i;let v1=pos_y*normFactor*scaleFactor_y;instancedData.setFloat32(i*4,v1,true);++i;let v2=pos_z*normFactor*scaleFactor_z;instancedData.setFloat32(i*4,v2,true);++i}break;case 2:let scaleFactorVolume_x=0;let scaleFactorVolume_y=0;let scaleFactorVolume_z=0;let scaleFactorVolume_w=1;let v1=object.transform.dim;scaleFactorVolume_x=v1.x;scaleFactorVolume_y=v1.y;scaleFactorVolume_z=v1.z;scaleFactorVolume_w=v1.w;let f1=.5/(particleSize*scalePosParticle);scaleFactorVolume_x*=f1;scaleFactorVolume_y*=f1;scaleFactorVolume_z*=f1;let _g4=0;let _g5=this.particles;while(_g4<_g5.length){let p=_g5[_g4];++_g4;let v=(Math.random()*2-1)*scaleFactorVolume_x;instancedData.setFloat32(i*4,v,true);++i;let v1=(Math.random()*2-1)*scaleFactorVolume_y;instancedData.setFloat32(i*4,v1,true);++i;let v2=(Math.random()*2-1)*scaleFactorVolume_z;instancedData.setFloat32(i*4,v2,true);++i}break}object.data.geom.setupInstanced(instancedData,1,0)}fhash(n){let s=n+1;s*=9301%s;s=(s*9301+49297)%233280;return s/233280}remove(){}}$hxClasses["iron.object.ParticleSystem"]=iron_object_ParticleSystem;iron_object_ParticleSystem.__name__=true;Object.assign(iron_object_ParticleSystem.prototype,{__class__:iron_object_ParticleSystem});class iron_object_Particle{constructor(i){this.i=i}}$hxClasses["iron.object.Particle"]=iron_object_Particle;iron_object_Particle.__name__=true;Object.assign(iron_object_Particle.prototype,{__class__:iron_object_Particle});class iron_object_SpeakerObject extends iron_object_Object{constructor(data){iron_object_Object._hx_skip_constructor=true;super();iron_object_Object._hx_skip_constructor=false;this._hx_constructor(data)}_hx_constructor(data){this.channels=[];this.sound=null;this.paused=false;super._hx_constructor();this.data=data;iron_Scene.active.speakers.push(this);if(data.sound==""){return}let _gthis=this;iron_data_Data.getSound(data.sound,function(sound){_gthis.sound=sound;iron_App.notifyOnInit($bind(_gthis,_gthis.init))})}init(){if(this.visible&&this.data.play_on_start){this.play()}}play(){if(this.sound==null||this.data.muted){return}if(this.paused){let _g=0;let _g1=this.channels;while(_g<_g1.length){let c=_g1[_g];++_g;c.play()}this.paused=false;return}let channel=iron_system_Audio.play(this.sound,this.data.loop,this.data.stream);if(channel!=null){this.channels.push(channel);if(this.data.attenuation>0&&this.channels.length==1){iron_App.notifyOnUpdate($bind(this,this.update))}}}stop(){let _g=0;let _g1=this.channels;while(_g<_g1.length){let c=_g1[_g];++_g;c.stop()}this.channels.splice(0,this.channels.length)}update(){if(this.paused){return}let _g=0;let _g1=this.channels;while(_g<_g1.length){let c=_g1[_g];++_g;if(c.get_finished()){HxOverrides.remove(this.channels,c)}}if(this.channels.length==0){iron_App.removeUpdate($bind(this,this.update));return}if(this.data.attenuation>0){let _this=iron_Scene.active.camera.transform.world;let x=_this.self._30;let y=_this.self._31;let z=_this.self._32;let w=_this.self._33;if(w==null){w=1}if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let v1_x=x;let v1_y=y;let v1_z=z;let v1_w=w;let _this1=this.transform.world;let x1=_this1.self._30;let y1=_this1.self._31;let z1=_this1.self._32;let w1=_this1.self._33;if(w1==null){w1=1}if(z1==null){z1=0}if(y1==null){y1=0}if(x1==null){x1=0}let v2_x=x1;let v2_y=y1;let v2_z=z1;let v2_w=w1;let vx=v1_x-v2_x;let vy=v1_y-v2_y;let vz=v1_z-v2_z;let distance=Math.sqrt(vx*vx+vy*vy+vz*vz);distance=Math.max(Math.min(this.data.distance_max,distance),this.data.distance_reference);this.volume=this.data.distance_reference/(this.data.distance_reference+this.data.attenuation*(distance-this.data.distance_reference));this.volume*=this.data.volume}else{this.volume=this.data.volume}if(this.volume>this.data.volume_max){this.volume=this.data.volume_max}else if(this.volume<this.data.volume_min){this.volume=this.data.volume_min}let _g2=0;let _g3=this.channels;while(_g2<_g3.length){let c=_g3[_g2];++_g2;c.set_volume(this.volume)}}remove(){this.stop();if(iron_Scene.active!=null){HxOverrides.remove(iron_Scene.active.speakers,this)}super.remove()}}$hxClasses["iron.object.SpeakerObject"]=iron_object_SpeakerObject;iron_object_SpeakerObject.__name__=true;iron_object_SpeakerObject.__super__=iron_object_Object;Object.assign(iron_object_SpeakerObject.prototype,{__class__:iron_object_SpeakerObject});class iron_object_Tilesheet{constructor(sceneName,tilesheet_ref,tilesheet_action_ref){this.onActionComplete=null;this.time=0;this.frame=0;this.paused=false;this.action=null;this.tileY=0;this.tileX=0;this.ready=false;let _gthis=this;iron_data_Data.getSceneRaw(sceneName,function(format){let _g=0;let _g1=format.tilesheet_datas;while(_g<_g1.length){let ts=_g1[_g];++_g;if(ts.name==tilesheet_ref){_gthis.raw=ts;iron_Scene.active.tilesheets.push(_gthis);_gthis.play(tilesheet_action_ref);_gthis.ready=true;break}}})}play(action_ref,onActionComplete){this.onActionComplete=onActionComplete;let _g=0;let _g1=this.raw.actions;while(_g<_g1.length){let a=_g1[_g];++_g;if(a.name==action_ref){this.action=a;break}}this.setFrame(this.action.start);this.paused=false}remove(){HxOverrides.remove(iron_Scene.active.tilesheets,this)}update(){if(!this.ready||this.paused||this.action.start>=this.action.end){return}this.time+=iron_system_Time.realDelta;let frameTime=1/this.raw.framerate;let framesToAdvance=0;while(this.time>=frameTime){this.time-=frameTime;++framesToAdvance}if(framesToAdvance!=0){this.setFrame(this.frame+framesToAdvance)}}setFrame(f){this.frame=f;let tx=this.frame%this.raw.tilesx;let ty=this.frame/this.raw.tilesx|0;this.tileX=tx*(1/this.raw.tilesx);this.tileY=ty*(1/this.raw.tilesy);if(this.frame>=this.action.end&&this.action.start<this.action.end){if(this.onActionComplete!=null){this.onActionComplete()}if(this.action.loop){this.setFrame(this.action.start)}else{this.paused=true}}}}$hxClasses["iron.object.Tilesheet"]=iron_object_Tilesheet;iron_object_Tilesheet.__name__=true;Object.assign(iron_object_Tilesheet.prototype,{__class__:iron_object_Tilesheet});class iron_object_Transform{constructor(object){this.dscale=null;this.drot=null;this.dloc=null;this.boneParent=null;this.scaleWorld=1;this.localOnly=false;this.object=object;this.reset()}reset(){this.world=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.worldUnpack=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.local=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.loc=new iron_math_Vec4;this.rot=new iron_math_Quat;this.scale=new iron_math_Vec4(1,1,1);this.dim=new iron_math_Vec4(2,2,2);this.radius=1;this.dirty=true}update(){if(this.dirty){this.buildMatrix()}}composeDelta(){let _this=this.dloc;let a=this.loc;let b=this.dloc;_this.x=a.x+b.x;_this.y=a.y+b.y;_this.z=a.z+b.z;let _this1=this.dscale;let a1=this.dscale;let b1=this.scale;_this1.x=a1.x+b1.x;_this1.y=a1.y+b1.y;_this1.z=a1.z+b1.z;let _this2=this.drot;let f=this._deulerX/2;let c1=Math.cos(f);let s1=Math.sin(f);f=this._deulerY/2;let c2=Math.cos(f);let s2=Math.sin(f);f=this._deulerZ/2;let c3=Math.cos(f);let s3=Math.sin(f);_this2.x=s1*c2*c3+c1*s2*s3;_this2.y=c1*s2*c3+s1*c2*s3;_this2.z=c1*c2*s3-s1*s2*c3;_this2.w=c1*c2*c3-s1*s2*s3;let _this3=this.drot;let q1=this.rot;let q2=this.drot;let q1x=q1.x;let q1y=q1.y;let q1z=q1.z;let q1w=q1.w;let q2x=q2.x;let q2y=q2.y;let q2z=q2.z;let q2w=q2.w;_this3.x=q1x*q2w+q1w*q2x+q1y*q2z-q1z*q2y;_this3.y=q1w*q2y-q1x*q2z+q1y*q2w+q1z*q2x;_this3.z=q1w*q2z+q1x*q2y-q1y*q2x+q1z*q2w;_this3.w=q1w*q2w-q1x*q2x-q1y*q2y-q1z*q2z;let _this4=this.local;let loc=this.dloc;let quat=this.drot;let sc=this.dscale;let x=quat.x;let y=quat.y;let z=quat.z;let w=quat.w;let x2=x+x;let y2=y+y;let z2=z+z;let xx=x*x2;let xy=x*y2;let xz=x*z2;let yy=y*y2;let yz=y*z2;let zz=z*z2;let wx=w*x2;let wy=w*y2;let wz=w*z2;_this4.self._00=1-(yy+zz);_this4.self._10=xy-wz;_this4.self._20=xz+wy;_this4.self._01=xy+wz;_this4.self._11=1-(xx+zz);_this4.self._21=yz-wx;_this4.self._02=xz-wy;_this4.self._12=yz+wx;_this4.self._22=1-(xx+yy);_this4.self._03=0;_this4.self._13=0;_this4.self._23=0;_this4.self._30=0;_this4.self._31=0;_this4.self._32=0;_this4.self._33=1;let x1=sc.x;let y1=sc.y;let z1=sc.z;_this4.self._00*=x1;_this4.self._01*=x1;_this4.self._02*=x1;_this4.self._03*=x1;_this4.self._10*=y1;_this4.self._11*=y1;_this4.self._12*=y1;_this4.self._13*=y1;_this4.self._20*=z1;_this4.self._21*=z1;_this4.self._22*=z1;_this4.self._23*=z1;_this4.self._30=loc.x;_this4.self._31=loc.y;_this4.self._32=loc.z}buildMatrix(){if(this.dloc==null){let _this=this.local;let loc=this.loc;let quat=this.rot;let sc=this.scale;let x=quat.x;let y=quat.y;let z=quat.z;let w=quat.w;let x2=x+x;let y2=y+y;let z2=z+z;let xx=x*x2;let xy=x*y2;let xz=x*z2;let yy=y*y2;let yz=y*z2;let zz=z*z2;let wx=w*x2;let wy=w*y2;let wz=w*z2;_this.self._00=1-(yy+zz);_this.self._10=xy-wz;_this.self._20=xz+wy;_this.self._01=xy+wz;_this.self._11=1-(xx+zz);_this.self._21=yz-wx;_this.self._02=xz-wy;_this.self._12=yz+wx;_this.self._22=1-(xx+yy);_this.self._03=0;_this.self._13=0;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1;let x1=sc.x;let y1=sc.y;let z1=sc.z;_this.self._00*=x1;_this.self._01*=x1;_this.self._02*=x1;_this.self._03*=x1;_this.self._10*=y1;_this.self._11*=y1;_this.self._12*=y1;_this.self._13*=y1;_this.self._20*=z1;_this.self._21*=z1;_this.self._22*=z1;_this.self._23*=z1;_this.self._30=loc.x;_this.self._31=loc.y;_this.self._32=loc.z}else{this.composeDelta()}if(this.boneParent!=null){let _this=this.local;let b=this.boneParent;let a=this.local;let a00=a.self._00;let a01=a.self._01;let a02=a.self._02;let a03=a.self._03;let a10=a.self._10;let a11=a.self._11;let a12=a.self._12;let a13=a.self._13;let a20=a.self._20;let a21=a.self._21;let a22=a.self._22;let a23=a.self._23;let a30=a.self._30;let a31=a.self._31;let a32=a.self._32;let a33=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._03;b1=b.self._13;b2=b.self._23;b3=b.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3}if(this.object.parent!=null&&!this.localOnly){let _this=this.world;let a=this.local;let b=this.object.parent.transform.world;let a00=a.self._00;let a01=a.self._01;let a02=a.self._02;let a03=a.self._03;let a10=a.self._10;let a11=a.self._11;let a12=a.self._12;let a13=a.self._13;let a20=a.self._20;let a21=a.self._21;let a22=a.self._22;let a23=a.self._23;let a30=a.self._30;let a31=a.self._31;let a32=a.self._32;let a33=a.self._33;let b0=b.self._00;let b1=b.self._10;let b2=b.self._20;let b3=b.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._01;b1=b.self._11;b2=b.self._21;b3=b.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=b.self._02;b1=b.self._12;b2=b.self._22;b3=b.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;_this.self._03=0;_this.self._13=0;_this.self._23=0;_this.self._33=1}else{let _this=this.world;let m=this.local;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}let _this=this.worldUnpack;let m=this.world;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33;if(this.scaleWorld!=1){this.worldUnpack.self._00*=this.scaleWorld;this.worldUnpack.self._01*=this.scaleWorld;this.worldUnpack.self._02*=this.scaleWorld;this.worldUnpack.self._03*=this.scaleWorld;this.worldUnpack.self._10*=this.scaleWorld;this.worldUnpack.self._11*=this.scaleWorld;this.worldUnpack.self._12*=this.scaleWorld;this.worldUnpack.self._13*=this.scaleWorld;this.worldUnpack.self._20*=this.scaleWorld;this.worldUnpack.self._21*=this.scaleWorld;this.worldUnpack.self._22*=this.scaleWorld;this.worldUnpack.self._23*=this.scaleWorld}if(this.object.constraints!=null){let _g=0;let _g1=this.object.constraints;while(_g<_g1.length){let c=_g1[_g];++_g;c.apply(this)}}this.computeDim();let _g=0;let _g1=this.object.children;while(_g<_g1.length){let n=_g1[_g];++_g;n.transform.buildMatrix()}this.dirty=false}translate(x,y,z){this.loc.x+=x;this.loc.y+=y;this.loc.z+=z;this.buildMatrix()}decompose(){let _this=this.local;let loc=this.loc;let quat=this.rot;let scale=this.scale;loc.x=_this.self._30;loc.y=_this.self._31;loc.z=_this.self._32;let _this1=iron_math_Mat4.helpVec;_this1.x=_this.self._00;_this1.y=_this.self._01;_this1.z=_this.self._02;_this1.w=1;let _this2=_this1;scale.x=Math.sqrt(_this2.x*_this2.x+_this2.y*_this2.y+_this2.z*_this2.z);let _this3=iron_math_Mat4.helpVec;_this3.x=_this.self._10;_this3.y=_this.self._11;_this3.z=_this.self._12;_this3.w=1;let _this4=_this3;scale.y=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);let _this5=iron_math_Mat4.helpVec;_this5.x=_this.self._20;_this5.y=_this.self._21;_this5.z=_this.self._22;_this5.w=1;let _this6=_this5;scale.z=Math.sqrt(_this6.x*_this6.x+_this6.y*_this6.y+_this6.z*_this6.z);let _this7=_this.self;let m3=_this7._12;let m4=_this7._22;let m5=_this7._32;let m6=_this7._13;let m7=_this7._23;let m8=_this7._33;let c00=_this7._11*(m4*m8-m5*m7)-_this7._21*(m3*m8-m5*m6)+_this7._31*(m3*m7-m4*m6);let m31=_this7._12;let m41=_this7._22;let m51=_this7._32;let m61=_this7._13;let m71=_this7._23;let m81=_this7._33;let c01=_this7._10*(m41*m81-m51*m71)-_this7._20*(m31*m81-m51*m61)+_this7._30*(m31*m71-m41*m61);let m32=_this7._11;let m42=_this7._21;let m52=_this7._31;let m62=_this7._13;let m72=_this7._23;let m82=_this7._33;let c02=_this7._10*(m42*m82-m52*m72)-_this7._20*(m32*m82-m52*m62)+_this7._30*(m32*m72-m42*m62);let m33=_this7._11;let m43=_this7._21;let m53=_this7._31;let m63=_this7._12;let m73=_this7._22;let m83=_this7._32;let c03=_this7._10*(m43*m83-m53*m73)-_this7._20*(m33*m83-m53*m63)+_this7._30*(m33*m73-m43*m63);if(_this7._00*c00-_this7._01*c01+_this7._02*c02-_this7._03*c03<0){scale.x=-scale.x}let invs=1/scale.x;iron_math_Mat4.helpMat.self._00=_this.self._00*invs;iron_math_Mat4.helpMat.self._01=_this.self._01*invs;iron_math_Mat4.helpMat.self._02=_this.self._02*invs;invs=1/scale.y;iron_math_Mat4.helpMat.self._10=_this.self._10*invs;iron_math_Mat4.helpMat.self._11=_this.self._11*invs;iron_math_Mat4.helpMat.self._12=_this.self._12*invs;invs=1/scale.z;iron_math_Mat4.helpMat.self._20=_this.self._20*invs;iron_math_Mat4.helpMat.self._21=_this.self._21*invs;iron_math_Mat4.helpMat.self._22=_this.self._22*invs;let m=iron_math_Mat4.helpMat;let m11=m.self._00;let m12=m.self._10;let m13=m.self._20;let m21=m.self._01;let m22=m.self._11;let m23=m.self._21;let m311=m.self._02;let m321=m.self._12;let m331=m.self._22;let tr=m11+m22+m331;let s=0;if(tr>0){s=.5/Math.sqrt(tr+1);quat.w=.25/s;quat.x=(m321-m23)*s;quat.y=(m13-m311)*s;quat.z=(m21-m12)*s}else if(m11>m22&&m11>m331){s=2*Math.sqrt(1+m11-m22-m331);quat.w=(m321-m23)/s;quat.x=.25*s;quat.y=(m12+m21)/s;quat.z=(m13+m311)/s}else if(m22>m331){s=2*Math.sqrt(1+m22-m11-m331);quat.w=(m13-m311)/s;quat.x=(m12+m21)/s;quat.y=.25*s;quat.z=(m23+m321)/s}else{s=2*Math.sqrt(1+m331-m11-m22);quat.w=(m21-m12)/s;quat.x=(m13+m311)/s;quat.y=(m23+m321)/s;quat.z=.25*s}}rotate(axis,f){let _this=iron_object_Transform.q;let s=Math.sin(f*.5);_this.x=axis.x*s;_this.y=axis.y*s;_this.z=axis.z*s;_this.w=Math.cos(f*.5);let l=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z+_this.w*_this.w);if(l==0){_this.x=0;_this.y=0;_this.z=0;_this.w=0}else{l=1/l;_this.x*=l;_this.y*=l;_this.z*=l;_this.w*=l}let _this1=this.rot;let q1=iron_object_Transform.q;let q2=this.rot;let q1x=q1.x;let q1y=q1.y;let q1z=q1.z;let q1w=q1.w;let q2x=q2.x;let q2y=q2.y;let q2z=q2.z;let q2w=q2.w;_this1.x=q1x*q2w+q1w*q2x+q1y*q2z-q1z*q2y;_this1.y=q1w*q2y-q1x*q2z+q1y*q2w+q1z*q2x;_this1.z=q1w*q2z+q1x*q2y-q1y*q2x+q1z*q2w;_this1.w=q1w*q2w-q1x*q2x-q1y*q2y-q1z*q2z;this.buildMatrix()}setRotation(x,y,z){let _this=this.rot;let f=x/2;let c1=Math.cos(f);let s1=Math.sin(f);f=y/2;let c2=Math.cos(f);let s2=Math.sin(f);f=z/2;let c3=Math.cos(f);let s3=Math.sin(f);_this.x=s1*c2*c3+c1*s2*s3;_this.y=c1*s2*c3+s1*c2*s3;_this.z=c1*c2*s3-s1*s2*c3;_this.w=c1*c2*c3-s1*s2*s3;this._eulerX=x;this._eulerY=y;this._eulerZ=z;this.dirty=true}computeRadius(){this.radius=Math.sqrt(this.dim.x*this.dim.x+this.dim.y*this.dim.y+this.dim.z*this.dim.z)}computeDim(){if(this.object.raw==null){this.computeRadius();return}let d=this.object.raw.dimensions;if(d==null){let _this=this.dim;_this.x=2*this.scale.x;_this.y=2*this.scale.y;_this.z=2*this.scale.z;_this.w=1}else{let _this=this.dim;let y=d.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.scale.y;let z=d.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.scale.z;_this.x=d.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN)*this.scale.x;_this.y=y;_this.z=z;_this.w=1}this.computeRadius()}applyParentInverse(){let pt=this.object.parent.transform;pt.buildMatrix();let _this=iron_object_Transform.temp;let m=pt.world;let a00=m.self._00;let a01=m.self._01;let a02=m.self._02;let a03=m.self._03;let a10=m.self._10;let a11=m.self._11;let a12=m.self._12;let a13=m.self._13;let a20=m.self._20;let a21=m.self._21;let a22=m.self._22;let a23=m.self._23;let a30=m.self._30;let a31=m.self._31;let a32=m.self._32;let a33=m.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}let _this1=this.local;let m1=iron_object_Transform.temp;let a001=_this1.self._00;let a011=_this1.self._01;let a021=_this1.self._02;let a031=_this1.self._03;let a101=_this1.self._10;let a111=_this1.self._11;let a121=_this1.self._12;let a131=_this1.self._13;let a201=_this1.self._20;let a211=_this1.self._21;let a221=_this1.self._22;let a231=_this1.self._23;let a301=_this1.self._30;let a311=_this1.self._31;let a321=_this1.self._32;let a331=_this1.self._33;let b0=m1.self._00;let b1=m1.self._10;let b2=m1.self._20;let b3=m1.self._30;_this1.self._00=a001*b0+a011*b1+a021*b2+a031*b3;_this1.self._10=a101*b0+a111*b1+a121*b2+a131*b3;_this1.self._20=a201*b0+a211*b1+a221*b2+a231*b3;_this1.self._30=a301*b0+a311*b1+a321*b2+a331*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this1.self._01=a001*b0+a011*b1+a021*b2+a031*b3;_this1.self._11=a101*b0+a111*b1+a121*b2+a131*b3;_this1.self._21=a201*b0+a211*b1+a221*b2+a231*b3;_this1.self._31=a301*b0+a311*b1+a321*b2+a331*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this1.self._02=a001*b0+a011*b1+a021*b2+a031*b3;_this1.self._12=a101*b0+a111*b1+a121*b2+a131*b3;_this1.self._22=a201*b0+a211*b1+a221*b2+a231*b3;_this1.self._32=a301*b0+a311*b1+a321*b2+a331*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this1.self._03=a001*b0+a011*b1+a021*b2+a031*b3;_this1.self._13=a101*b0+a111*b1+a121*b2+a131*b3;_this1.self._23=a201*b0+a211*b1+a221*b2+a231*b3;_this1.self._33=a301*b0+a311*b1+a321*b2+a331*b3;this.decompose();this.buildMatrix()}applyParent(){let pt=this.object.parent.transform;pt.buildMatrix();let _this=this.local;let m=pt.world;let a00=_this.self._00;let a01=_this.self._01;let a02=_this.self._02;let a03=_this.self._03;let a10=_this.self._10;let a11=_this.self._11;let a12=_this.self._12;let a13=_this.self._13;let a20=_this.self._20;let a21=_this.self._21;let a22=_this.self._22;let a23=_this.self._23;let a30=_this.self._30;let a31=_this.self._31;let a32=_this.self._32;let a33=_this.self._33;let b0=m.self._00;let b1=m.self._10;let b2=m.self._20;let b3=m.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._01;b1=m.self._11;b2=m.self._21;b3=m.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._02;b1=m.self._12;b2=m.self._22;b3=m.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m.self._03;b1=m.self._13;b2=m.self._23;b3=m.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;this.decompose();this.buildMatrix()}}$hxClasses["iron.object.Transform"]=iron_object_Transform;iron_object_Transform.__name__=true;Object.assign(iron_object_Transform.prototype,{__class__:iron_object_Transform});class kha_math_FastMatrix3{constructor(_00,_10,_20,_01,_11,_21,_02,_12,_22){this._00=_00;this._10=_10;this._20=_20;this._01=_01;this._11=_11;this._21=_21;this._02=_02;this._12=_12;this._22=_22}}$hxClasses["kha.math.FastMatrix3"]=kha_math_FastMatrix3;kha_math_FastMatrix3.__name__=true;Object.assign(kha_math_FastMatrix3.prototype,{__class__:kha_math_FastMatrix3});class iron_object_Uniforms{static setContextConstants(g,context,bindParams){if(context.raw.constants!=null){let _g=0;let _g1=context.raw.constants.length;while(_g<_g1){let i=_g++;let c=context.raw.constants[i];iron_object_Uniforms.setContextConstant(g,context.constants[i],c)}}if(bindParams!=null){let _g=0;let _g1=bindParams.length/2|0;while(_g<_g1){let i=_g++;let pos=i*2;let rtID=bindParams[pos];let samplerID=bindParams[pos+1];let attachDepth=false;let char=rtID.charAt(0);if(char=="_"){attachDepth=true;rtID=HxOverrides.substr(rtID,1,null)}let rt=attachDepth?iron_RenderPath.active.depthToRenderTarget.h[rtID]:iron_RenderPath.active.renderTargets.h[rtID];iron_object_Uniforms.bindRenderTarget(g,rt,context,samplerID,attachDepth)}}if(context.raw.texture_units!=null){let _g=0;let _g1=context.raw.texture_units.length;while(_g<_g1){let j=_g++;let tulink=context.raw.texture_units[j].link;if(tulink==null){continue}if(tulink.charAt(0)=="$"){g.setTexture(context.textureUnits[j],iron_Scene.active.embedded.h[HxOverrides.substr(tulink,1,null)]);if(tulink.endsWith(".raw")){g.setTexture3DParameters(context.textureUnits[j],0,0,0,1,1,0)}else{g.setTextureParameters(context.textureUnits[j],0,0,1,1,0)}}else{switch(tulink){case"_envmap":let w=iron_Scene.active.world;if(w!=null){g.setTexture(context.textureUnits[j],w.envmap);g.setTextureParameters(context.textureUnits[j],0,0,1,1,0)}break;case"_envmapRadiance":let w1=iron_Scene.active.world;if(w1!=null){g.setTexture(context.textureUnits[j],w1.probe.radiance);g.setTextureParameters(context.textureUnits[j],0,0,1,1,2)}break}}}}}static setObjectConstants(g,context,object){if(context.raw.constants!=null){let _g=0;let _g1=context.raw.constants.length;while(_g<_g1){let i=_g++;let c=context.raw.constants[i];iron_object_Uniforms.setObjectConstant(g,object,context.constants[i],c)}}if(iron_object_Uniforms.externalTextureLinks!=null){if(context.raw.texture_units!=null){let _g=0;let _g1=context.raw.texture_units.length;while(_g<_g1){let j=_g++;let tu=context.raw.texture_units[j];if(tu.link==null){continue}let tuAddrU;switch(tu.addressing_u){case"clamp":tuAddrU=2;break;case"mirror":tuAddrU=1;break;default:tuAddrU=0}let tuAddrV;switch(tu.addressing_v){case"clamp":tuAddrV=2;break;case"mirror":tuAddrV=1;break;default:tuAddrV=0}let tuFilterMin;switch(tu.filter_min){case"anisotropic":tuFilterMin=2;break;case"point":tuFilterMin=0;break;default:tuFilterMin=1}let tuFilterMag;switch(tu.filter_mag){case"anisotropic":tuFilterMag=2;break;case"point":tuFilterMag=0;break;default:tuFilterMag=1}let tuMipMapFilter;switch(tu.mipmap_filter){case"linear":tuMipMapFilter=2;break;case"point":tuMipMapFilter=1;break;default:tuMipMapFilter=0}let _g1=0;let _g2=iron_object_Uniforms.externalTextureLinks;while(_g1<_g2.length){let f=_g2[_g1];++_g1;let image=f(object,iron_object_Uniforms.currentMat(object),tu.link);if(image!=null){if(tu.link.endsWith("_depth")){g.setTextureDepth(context.textureUnits[j],image)}else{g.setTexture(context.textureUnits[j],image)}g.setTextureParameters(context.textureUnits[j],tuAddrU,tuAddrV,tuFilterMin,tuFilterMag,tuMipMapFilter);break}}}}}}static bindRenderTarget(g,rt,context,samplerID,attachDepth){if(rt!=null){let tus=context.raw.texture_units;let _g=0;let _g1=tus.length;while(_g<_g1){let j=_g++;if(samplerID==tus[j].name){let isImage=tus[j].is_image!=null&&tus[j].is_image;let paramsSet=false;if(rt.raw.depth>1){g.setTexture3DParameters(context.textureUnits[j],2,2,2,1,2,2);paramsSet=true}if(isImage){g.setImageTexture(context.textureUnits[j],rt.image);g.setTexture3DParameters(context.textureUnits[j],2,2,2,1,0,2);paramsSet=true}else if(rt.isCubeMap){if(attachDepth){g.setCubeMapDepth(context.textureUnits[j],rt.cubeMap)}else{g.setCubeMap(context.textureUnits[j],rt.cubeMap)}}else if(attachDepth){g.setTextureDepth(context.textureUnits[j],rt.image)}else{g.setTexture(context.textureUnits[j],rt.image)}if(!paramsSet&&rt.raw.mipmaps!=null&&rt.raw.mipmaps==true&&!isImage){g.setTextureParameters(context.textureUnits[j],2,2,1,1,2);paramsSet=true}if(!paramsSet){if(rt.raw.name.startsWith("bloom")){g.setTextureParameters(context.textureUnits[j],2,2,1,1,2)}if(samplerID.startsWith("shadowMap")){if(rt.isCubeMap){g.setCubeMapCompareMode(context.textureUnits[j],true)}else{g.setTextureParameters(context.textureUnits[j],2,2,1,1,0);g.setTextureCompareMode(context.textureUnits[j],true)}paramsSet=true}else if(attachDepth){g.setTextureParameters(context.textureUnits[j],2,2,0,0,0);paramsSet=true}}if(!paramsSet){let oc=context.overrideContext;let allowParams=oc==null||oc.shared_sampler==null||oc.shared_sampler==samplerID;if(allowParams){let addressing=oc!=null&&oc.addressing=="repeat"?0:2;let filter=oc!=null&&oc.filter=="point"?0:iron_object_Uniforms.defaultFilter;g.setTextureParameters(context.textureUnits[j],addressing,addressing,filter,filter,0)}paramsSet=true}}}}}static setContextConstant(g,location,c){if(c.link==null){return true}let camera=iron_Scene.active.camera;let light=iron_RenderPath.active.light;if(c.type=="mat4"){let m=null;let _g=c.link;if(_g==null){return false}else{switch(_g){case"_biasLightViewProjectionMatrix":if(light!=null){let _this=iron_object_Uniforms.helpMat;let m1=light.VP;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;let _this1=iron_object_Uniforms.helpMat;let m2=iron_object_Uniforms.biasMat;let a00=_this1.self._00;let a01=_this1.self._01;let a02=_this1.self._02;let a03=_this1.self._03;let a10=_this1.self._10;let a11=_this1.self._11;let a12=_this1.self._12;let a13=_this1.self._13;let a20=_this1.self._20;let a21=_this1.self._21;let a22=_this1.self._22;let a23=_this1.self._23;let a30=_this1.self._30;let a31=_this1.self._31;let a32=_this1.self._32;let a33=_this1.self._33;let b0=m2.self._00;let b1=m2.self._10;let b2=m2.self._20;let b3=m2.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._01;b1=m2.self._11;b2=m2.self._21;b3=m2.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._02;b1=m2.self._12;b2=m2.self._22;b3=m2.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._03;b1=m2.self._13;b2=m2.self._23;b3=m2.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}break;case"_inverseProjectionMatrix":let _this=iron_object_Uniforms.helpMat;let m1=camera.P;let a00=m1.self._00;let a01=m1.self._01;let a02=m1.self._02;let a03=m1.self._03;let a10=m1.self._10;let a11=m1.self._11;let a12=m1.self._12;let a13=m1.self._13;let a20=m1.self._20;let a21=m1.self._21;let a22=m1.self._22;let a23=m1.self._23;let a30=m1.self._30;let a31=m1.self._31;let a32=m1.self._32;let a33=m1.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}m=iron_object_Uniforms.helpMat;break;case"_inverseViewProjectionMatrix":let _this1=iron_object_Uniforms.helpMat;let m2=camera.V;_this1.self._00=m2.self._00;_this1.self._01=m2.self._01;_this1.self._02=m2.self._02;_this1.self._03=m2.self._03;_this1.self._10=m2.self._10;_this1.self._11=m2.self._11;_this1.self._12=m2.self._12;_this1.self._13=m2.self._13;_this1.self._20=m2.self._20;_this1.self._21=m2.self._21;_this1.self._22=m2.self._22;_this1.self._23=m2.self._23;_this1.self._30=m2.self._30;_this1.self._31=m2.self._31;_this1.self._32=m2.self._32;_this1.self._33=m2.self._33;let _this2=iron_object_Uniforms.helpMat;let m3=camera.P;let a001=_this2.self._00;let a011=_this2.self._01;let a021=_this2.self._02;let a031=_this2.self._03;let a101=_this2.self._10;let a111=_this2.self._11;let a121=_this2.self._12;let a131=_this2.self._13;let a201=_this2.self._20;let a211=_this2.self._21;let a221=_this2.self._22;let a231=_this2.self._23;let a301=_this2.self._30;let a311=_this2.self._31;let a321=_this2.self._32;let a331=_this2.self._33;let b0=m3.self._00;let b1=m3.self._10;let b2=m3.self._20;let b3=m3.self._30;_this2.self._00=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._10=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._20=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._30=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._01;b1=m3.self._11;b2=m3.self._21;b3=m3.self._31;_this2.self._01=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._11=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._21=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._31=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._02;b1=m3.self._12;b2=m3.self._22;b3=m3.self._32;_this2.self._02=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._12=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._22=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._32=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._03;b1=m3.self._13;b2=m3.self._23;b3=m3.self._33;_this2.self._03=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._13=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._23=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._33=a301*b0+a311*b1+a321*b2+a331*b3;let _this3=iron_object_Uniforms.helpMat;let m4=iron_object_Uniforms.helpMat;let a002=m4.self._00;let a012=m4.self._01;let a022=m4.self._02;let a032=m4.self._03;let a102=m4.self._10;let a112=m4.self._11;let a122=m4.self._12;let a132=m4.self._13;let a202=m4.self._20;let a212=m4.self._21;let a222=m4.self._22;let a232=m4.self._23;let a302=m4.self._30;let a312=m4.self._31;let a322=m4.self._32;let a332=m4.self._33;let b001=a002*a112-a012*a102;let b011=a002*a122-a022*a102;let b021=a002*a132-a032*a102;let b031=a012*a122-a022*a112;let b041=a012*a132-a032*a112;let b051=a022*a132-a032*a122;let b061=a202*a312-a212*a302;let b071=a202*a322-a222*a302;let b081=a202*a332-a232*a302;let b091=a212*a322-a222*a312;let b101=a212*a332-a232*a312;let b111=a222*a332-a232*a322;let det1=b001*b111-b011*b101+b021*b091+b031*b081-b041*b071+b051*b061;if(det1==0){_this3.self._00=1;_this3.self._01=0;_this3.self._02=0;_this3.self._03=0;_this3.self._10=0;_this3.self._11=1;_this3.self._12=0;_this3.self._13=0;_this3.self._20=0;_this3.self._21=0;_this3.self._22=1;_this3.self._23=0;_this3.self._30=0;_this3.self._31=0;_this3.self._32=0;_this3.self._33=1}else{det1=1/det1;_this3.self._00=(a112*b111-a122*b101+a132*b091)*det1;_this3.self._01=(a022*b101-a012*b111-a032*b091)*det1;_this3.self._02=(a312*b051-a322*b041+a332*b031)*det1;_this3.self._03=(a222*b041-a212*b051-a232*b031)*det1;_this3.self._10=(a122*b081-a102*b111-a132*b071)*det1;_this3.self._11=(a002*b111-a022*b081+a032*b071)*det1;_this3.self._12=(a322*b021-a302*b051-a332*b011)*det1;_this3.self._13=(a202*b051-a222*b021+a232*b011)*det1;_this3.self._20=(a102*b101-a112*b081+a132*b061)*det1;_this3.self._21=(a012*b081-a002*b101-a032*b061)*det1;_this3.self._22=(a302*b041-a312*b021+a332*b001)*det1;_this3.self._23=(a212*b021-a202*b041-a232*b001)*det1;_this3.self._30=(a112*b071-a102*b091-a122*b061)*det1;_this3.self._31=(a002*b091-a012*b071+a022*b061)*det1;_this3.self._32=(a312*b011-a302*b031-a322*b001)*det1;_this3.self._33=(a202*b031-a212*b011+a222*b001)*det1}m=iron_object_Uniforms.helpMat;break;case"_lightViewProjectionMatrix":if(light!=null){m=light.VP}break;case"_prevViewProjectionMatrix":let _this4=iron_object_Uniforms.helpMat;let m5=camera.prevV;_this4.self._00=m5.self._00;_this4.self._01=m5.self._01;_this4.self._02=m5.self._02;_this4.self._03=m5.self._03;_this4.self._10=m5.self._10;_this4.self._11=m5.self._11;_this4.self._12=m5.self._12;_this4.self._13=m5.self._13;_this4.self._20=m5.self._20;_this4.self._21=m5.self._21;_this4.self._22=m5.self._22;_this4.self._23=m5.self._23;_this4.self._30=m5.self._30;_this4.self._31=m5.self._31;_this4.self._32=m5.self._32;_this4.self._33=m5.self._33;let _this5=iron_object_Uniforms.helpMat;let m6=camera.P;let a003=_this5.self._00;let a013=_this5.self._01;let a023=_this5.self._02;let a033=_this5.self._03;let a103=_this5.self._10;let a113=_this5.self._11;let a123=_this5.self._12;let a133=_this5.self._13;let a203=_this5.self._20;let a213=_this5.self._21;let a223=_this5.self._22;let a233=_this5.self._23;let a303=_this5.self._30;let a313=_this5.self._31;let a323=_this5.self._32;let a333=_this5.self._33;let b010=m6.self._00;let b12=m6.self._10;let b21=m6.self._20;let b31=m6.self._30;_this5.self._00=a003*b010+a013*b12+a023*b21+a033*b31;_this5.self._10=a103*b010+a113*b12+a123*b21+a133*b31;_this5.self._20=a203*b010+a213*b12+a223*b21+a233*b31;_this5.self._30=a303*b010+a313*b12+a323*b21+a333*b31;b010=m6.self._01;b12=m6.self._11;b21=m6.self._21;b31=m6.self._31;_this5.self._01=a003*b010+a013*b12+a023*b21+a033*b31;_this5.self._11=a103*b010+a113*b12+a123*b21+a133*b31;_this5.self._21=a203*b010+a213*b12+a223*b21+a233*b31;_this5.self._31=a303*b010+a313*b12+a323*b21+a333*b31;b010=m6.self._02;b12=m6.self._12;b21=m6.self._22;b31=m6.self._32;_this5.self._02=a003*b010+a013*b12+a023*b21+a033*b31;_this5.self._12=a103*b010+a113*b12+a123*b21+a133*b31;_this5.self._22=a203*b010+a213*b12+a223*b21+a233*b31;_this5.self._32=a303*b010+a313*b12+a323*b21+a333*b31;b010=m6.self._03;b12=m6.self._13;b21=m6.self._23;b31=m6.self._33;_this5.self._03=a003*b010+a013*b12+a023*b21+a033*b31;_this5.self._13=a103*b010+a113*b12+a123*b21+a133*b31;_this5.self._23=a203*b010+a213*b12+a223*b21+a233*b31;_this5.self._33=a303*b010+a313*b12+a323*b21+a333*b31;m=iron_object_Uniforms.helpMat;break;case"_projectionMatrix":m=camera.P;break;case"_skydomeMatrix":let tr=camera.transform;let _this6=iron_object_Uniforms.helpVec;_this6.x=tr.world.self._30;_this6.y=tr.world.self._31;_this6.z=tr.world.self._32-3.5;_this6.w=1;let bounds=camera.data.raw.far_plane*.95;let _this7=iron_object_Uniforms.helpVec2;_this7.x=bounds;_this7.y=bounds;_this7.z=bounds;_this7.w=1;let _this8=iron_object_Uniforms.helpMat;let loc=iron_object_Uniforms.helpVec;let quat=iron_object_Uniforms.helpQuat;let sc=iron_object_Uniforms.helpVec2;let x=quat.x;let y=quat.y;let z=quat.z;let w=quat.w;let x2=x+x;let y2=y+y;let z2=z+z;let xx=x*x2;let xy=x*y2;let xz=x*z2;let yy=y*y2;let yz=y*z2;let zz=z*z2;let wx=w*x2;let wy=w*y2;let wz=w*z2;_this8.self._00=1-(yy+zz);_this8.self._10=xy-wz;_this8.self._20=xz+wy;_this8.self._01=xy+wz;_this8.self._11=1-(xx+zz);_this8.self._21=yz-wx;_this8.self._02=xz-wy;_this8.self._12=yz+wx;_this8.self._22=1-(xx+yy);_this8.self._03=0;_this8.self._13=0;_this8.self._23=0;_this8.self._30=0;_this8.self._31=0;_this8.self._32=0;_this8.self._33=1;let x1=sc.x;let y1=sc.y;let z1=sc.z;_this8.self._00*=x1;_this8.self._01*=x1;_this8.self._02*=x1;_this8.self._03*=x1;_this8.self._10*=y1;_this8.self._11*=y1;_this8.self._12*=y1;_this8.self._13*=y1;_this8.self._20*=z1;_this8.self._21*=z1;_this8.self._22*=z1;_this8.self._23*=z1;_this8.self._30=loc.x;_this8.self._31=loc.y;_this8.self._32=loc.z;let _this9=iron_object_Uniforms.helpMat;let m7=camera.V;let a004=_this9.self._00;let a014=_this9.self._01;let a024=_this9.self._02;let a034=_this9.self._03;let a104=_this9.self._10;let a114=_this9.self._11;let a124=_this9.self._12;let a134=_this9.self._13;let a204=_this9.self._20;let a214=_this9.self._21;let a224=_this9.self._22;let a234=_this9.self._23;let a304=_this9.self._30;let a314=_this9.self._31;let a324=_this9.self._32;let a334=_this9.self._33;let b012=m7.self._00;let b13=m7.self._10;let b22=m7.self._20;let b32=m7.self._30;_this9.self._00=a004*b012+a014*b13+a024*b22+a034*b32;_this9.self._10=a104*b012+a114*b13+a124*b22+a134*b32;_this9.self._20=a204*b012+a214*b13+a224*b22+a234*b32;_this9.self._30=a304*b012+a314*b13+a324*b22+a334*b32;b012=m7.self._01;b13=m7.self._11;b22=m7.self._21;b32=m7.self._31;_this9.self._01=a004*b012+a014*b13+a024*b22+a034*b32;_this9.self._11=a104*b012+a114*b13+a124*b22+a134*b32;_this9.self._21=a204*b012+a214*b13+a224*b22+a234*b32;_this9.self._31=a304*b012+a314*b13+a324*b22+a334*b32;b012=m7.self._02;b13=m7.self._12;b22=m7.self._22;b32=m7.self._32;_this9.self._02=a004*b012+a014*b13+a024*b22+a034*b32;_this9.self._12=a104*b012+a114*b13+a124*b22+a134*b32;_this9.self._22=a204*b012+a214*b13+a224*b22+a234*b32;_this9.self._32=a304*b012+a314*b13+a324*b22+a334*b32;b012=m7.self._03;b13=m7.self._13;b22=m7.self._23;b32=m7.self._33;_this9.self._03=a004*b012+a014*b13+a024*b22+a034*b32;_this9.self._13=a104*b012+a114*b13+a124*b22+a134*b32;_this9.self._23=a204*b012+a214*b13+a224*b22+a234*b32;_this9.self._33=a304*b012+a314*b13+a324*b22+a334*b32;let _this10=iron_object_Uniforms.helpMat;let m8=camera.P;let a005=_this10.self._00;let a015=_this10.self._01;let a025=_this10.self._02;let a035=_this10.self._03;let a105=_this10.self._10;let a115=_this10.self._11;let a125=_this10.self._12;let a135=_this10.self._13;let a205=_this10.self._20;let a215=_this10.self._21;let a225=_this10.self._22;let a235=_this10.self._23;let a305=_this10.self._30;let a315=_this10.self._31;let a325=_this10.self._32;let a335=_this10.self._33;let b013=m8.self._00;let b14=m8.self._10;let b23=m8.self._20;let b33=m8.self._30;_this10.self._00=a005*b013+a015*b14+a025*b23+a035*b33;_this10.self._10=a105*b013+a115*b14+a125*b23+a135*b33;_this10.self._20=a205*b013+a215*b14+a225*b23+a235*b33;_this10.self._30=a305*b013+a315*b14+a325*b23+a335*b33;b013=m8.self._01;b14=m8.self._11;b23=m8.self._21;b33=m8.self._31;_this10.self._01=a005*b013+a015*b14+a025*b23+a035*b33;_this10.self._11=a105*b013+a115*b14+a125*b23+a135*b33;_this10.self._21=a205*b013+a215*b14+a225*b23+a235*b33;_this10.self._31=a305*b013+a315*b14+a325*b23+a335*b33;b013=m8.self._02;b14=m8.self._12;b23=m8.self._22;b33=m8.self._32;_this10.self._02=a005*b013+a015*b14+a025*b23+a035*b33;_this10.self._12=a105*b013+a115*b14+a125*b23+a135*b33;_this10.self._22=a205*b013+a215*b14+a225*b23+a235*b33;_this10.self._32=a305*b013+a315*b14+a325*b23+a335*b33;b013=m8.self._03;b14=m8.self._13;b23=m8.self._23;b33=m8.self._33;_this10.self._03=a005*b013+a015*b14+a025*b23+a035*b33;_this10.self._13=a105*b013+a115*b14+a125*b23+a135*b33;_this10.self._23=a205*b013+a215*b14+a225*b23+a235*b33;_this10.self._33=a305*b013+a315*b14+a325*b23+a335*b33;m=iron_object_Uniforms.helpMat;break;case"_transposeViewMatrix":let _this11=iron_object_Uniforms.helpMat;let m9=camera.V;_this11.self._00=m9.self._00;_this11.self._01=m9.self._01;_this11.self._02=m9.self._02;_this11.self._03=m9.self._03;_this11.self._10=m9.self._10;_this11.self._11=m9.self._11;_this11.self._12=m9.self._12;_this11.self._13=m9.self._13;_this11.self._20=m9.self._20;_this11.self._21=m9.self._21;_this11.self._22=m9.self._22;_this11.self._23=m9.self._23;_this11.self._30=m9.self._30;_this11.self._31=m9.self._31;_this11.self._32=m9.self._32;_this11.self._33=m9.self._33;let _this12=iron_object_Uniforms.helpMat;let f=_this12.self._01;_this12.self._01=_this12.self._10;_this12.self._10=f;f=_this12.self._02;_this12.self._02=_this12.self._20;_this12.self._20=f;f=_this12.self._12;_this12.self._12=_this12.self._21;_this12.self._21=f;m=iron_object_Uniforms.helpMat;break;case"_viewMatrix":m=camera.V;break;case"_viewProjectionMatrix":m=camera.VP;break;default:return false}}g.setMatrix(location,m!=null?m.self:new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));return true}else if(c.type=="vec4"){let v=null;let _this=iron_object_Uniforms.helpVec;let w=0;if(w==null){w=1}_this.x=0;_this.y=0;_this.z=0;_this.w=w;let _g=c.link;return false}else if(c.type=="vec3"){let v=null;let _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;let _g=c.link;if(_g==null){return false}else{switch(_g){case"_backgroundCol":if(camera.data.raw.clear_color!=null){let _this=iron_object_Uniforms.helpVec;let y=camera.data.raw.clear_color.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let z=camera.data.raw.clear_color.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.x=camera.data.raw.clear_color.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.y=y;_this.z=z;_this.w=1}v=iron_object_Uniforms.helpVec;break;case"_cameraLook":let _this1=new iron_math_Vec4(-camera.transform.world.self._20,-camera.transform.world.self._21,-camera.transform.world.self._22);let n=Math.sqrt(_this1.x*_this1.x+_this1.y*_this1.y+_this1.z*_this1.z);if(n>0){let invN=1/n;_this1.x*=invN;_this1.y*=invN;_this1.z*=invN}iron_object_Uniforms.helpVec=_this1;v=iron_object_Uniforms.helpVec;break;case"_cameraPosition":let _this2=iron_object_Uniforms.helpVec;_this2.x=camera.transform.world.self._30;_this2.y=camera.transform.world.self._31;_this2.z=camera.transform.world.self._32;_this2.w=1;v=iron_object_Uniforms.helpVec;break;case"_cameraRight":let _this3=new iron_math_Vec4(camera.transform.world.self._00,camera.transform.world.self._01,camera.transform.world.self._02);let n1=Math.sqrt(_this3.x*_this3.x+_this3.y*_this3.y+_this3.z*_this3.z);if(n1>0){let invN=1/n1;_this3.x*=invN;_this3.y*=invN;_this3.z*=invN}iron_object_Uniforms.helpVec=_this3;v=iron_object_Uniforms.helpVec;break;case"_cameraUp":let _this4=new iron_math_Vec4(camera.transform.world.self._10,camera.transform.world.self._11,camera.transform.world.self._12);let n2=Math.sqrt(_this4.x*_this4.x+_this4.y*_this4.y+_this4.z*_this4.z);if(n2>0){let invN=1/n2;_this4.x*=invN;_this4.y*=invN;_this4.z*=invN}iron_object_Uniforms.helpVec=_this4;v=iron_object_Uniforms.helpVec;break;case"_hosekSunDirection":let w=iron_Scene.active.world;if(w!=null){let _this=iron_object_Uniforms.helpVec;let y=w.raw.sun_direction.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN);let z=w.raw.sun_direction.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)>0?w.raw.sun_direction.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN):0;_this.x=w.raw.sun_direction.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN);_this.y=y;_this.z=z;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_lightDirection":if(light!=null){let _this=new iron_math_Vec4(light.V.self._02,light.V.self._12,light.V.self._22);let n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){let invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}iron_object_Uniforms.helpVec=_this;v=iron_object_Uniforms.helpVec}break;case"_lightPosition":if(light!=null){let _this=iron_object_Uniforms.helpVec;_this.x=light.transform.world.self._30;_this.y=light.transform.world.self._31;_this.z=light.transform.world.self._32;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_pointColor":let point=iron_RenderPath.active.point;if(point!=null){let str=point.visible?point.data.raw.strength:0;let _this=iron_object_Uniforms.helpVec;let y=point.data.raw.color.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;let z=point.data.raw.color.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;_this.x=point.data.raw.color.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;_this.y=y;_this.z=z;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_pointPosition":let point1=iron_RenderPath.active.point;if(point1!=null){let _this=iron_object_Uniforms.helpVec;_this.x=point1.transform.world.self._30;_this.y=point1.transform.world.self._31;_this.z=point1.transform.world.self._32;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_sunColor":let sun=iron_RenderPath.active.sun;if(sun!=null){let str=sun.visible?sun.data.raw.strength:0;let _this=iron_object_Uniforms.helpVec;let y=sun.data.raw.color.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;let z=sun.data.raw.color.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;_this.x=sun.data.raw.color.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN)*str;_this.y=y;_this.z=z;_this.w=1;v=iron_object_Uniforms.helpVec}break;case"_sunDirection":let sun1=iron_RenderPath.active.sun;if(sun1!=null){let _this=new iron_math_Vec4(sun1.V.self._02,sun1.V.self._12,sun1.V.self._22);let n=Math.sqrt(_this.x*_this.x+_this.y*_this.y+_this.z*_this.z);if(n>0){let invN=1/n;_this.x*=invN;_this.y*=invN;_this.z*=invN}iron_object_Uniforms.helpVec=_this;v=iron_object_Uniforms.helpVec}break;default:return false}}if(v!=null){g.setFloat3(location,v.x,v.y,v.z)}else{g.setFloat3(location,0,0,0)}return true}else if(c.type=="vec2"){let v=null;let _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;let _g=c.link;if(_g==null){return false}else{switch(_g){case"_aspectRatio":v=iron_object_Uniforms.helpVec;v.x=iron_RenderPath.active.currentH/iron_RenderPath.active.currentW;v.y=iron_RenderPath.active.currentW/iron_RenderPath.active.currentH;v.x=v.x>1?1:v.x;v.y=v.y>1?1:v.y;break;case"_cameraPlane":v=iron_object_Uniforms.helpVec;v.x=camera.data.raw.near_plane;v.y=camera.data.raw.far_plane;break;case"_cameraPlaneProj":let near=camera.data.raw.near_plane;let far=camera.data.raw.far_plane;v=iron_object_Uniforms.helpVec;v.x=far/(far-near);v.y=-far*near/(far-near);break;case"_lightPlane":if(light!=null){v=iron_object_Uniforms.helpVec;v.x=light.data.raw.near_plane;v.y=light.data.raw.far_plane}break;case"_lightPlaneProj":if(light!=null){let near=light.data.raw.near_plane;let far=light.data.raw.far_plane;let a=far+near;let b=far-near;let f2=2;let c=f2*far*near;v=iron_object_Uniforms.helpVec;v.x=a/b;v.y=c/b}break;case"_screenSize":v=iron_object_Uniforms.helpVec;v.x=iron_RenderPath.active.currentW;v.y=iron_RenderPath.active.currentH;break;case"_screenSizeInv":v=iron_object_Uniforms.helpVec;v.x=1/iron_RenderPath.active.currentW;v.y=1/iron_RenderPath.active.currentH;break;case"_shadowMapSize":if(light!=null&&light.data.raw.cast_shadow){v=iron_object_Uniforms.helpVec;v.x=v.y=light.data.raw.shadowmap_size}break;case"_vec2x":v=iron_object_Uniforms.helpVec;v.x=1;v.y=0;break;case"_vec2x2":v=iron_object_Uniforms.helpVec;v.x=2;v.y=0;break;case"_vec2x2Inv":v=iron_object_Uniforms.helpVec;v.x=2/iron_RenderPath.active.currentW;v.y=0;break;case"_vec2xInv":v=iron_object_Uniforms.helpVec;v.x=1/iron_RenderPath.active.currentW;v.y=0;break;case"_vec2y":v=iron_object_Uniforms.helpVec;v.x=0;v.y=1;break;case"_vec2y2":v=iron_object_Uniforms.helpVec;v.x=0;v.y=2;break;case"_vec2y2Inv":v=iron_object_Uniforms.helpVec;v.x=0;v.y=2/iron_RenderPath.active.currentH;break;case"_vec2y3":v=iron_object_Uniforms.helpVec;v.x=0;v.y=3;break;case"_vec2y3Inv":v=iron_object_Uniforms.helpVec;v.x=0;v.y=3/iron_RenderPath.active.currentH;break;case"_vec2yInv":v=iron_object_Uniforms.helpVec;v.x=0;v.y=1/iron_RenderPath.active.currentH;break;case"_windowSize":v=iron_object_Uniforms.helpVec;v.x=iron_App.w();v.y=iron_App.h();break;default:return false}}if(v!=null){g.setFloat2(location,v.x,v.y)}else{g.setFloat2(location,0,0)}return true}else if(c.type=="float"){let f=null;let _g=c.link;if(_g==null){return false}else{switch(_g){case"_aspectRatioF":f=iron_RenderPath.active.currentW/iron_RenderPath.active.currentH;break;case"_aspectRatioWindowF":f=iron_App.w()/iron_App.h();break;case"_envmapStrength":f=iron_Scene.active.world==null?0:iron_Scene.active.world.probe.raw.strength;break;case"_fieldOfView":f=camera.data.raw.fov;break;case"_frameScale":f=iron_RenderPath.active.frameTime/iron_system_Time.get_delta();break;case"_pointShadowsBias":let point=iron_RenderPath.active.point;f=point==null?0:point.data.raw.shadows_bias;break;case"_sunShadowsBias":let sun=iron_RenderPath.active.sun;f=sun==null?0:sun.data.raw.shadows_bias;break;case"_time":f=kha_Scheduler.time();break;default:return false}}g.setFloat(location,f!=null?f:0);return true}else if(c.type=="floats"){let fa=null;switch(c.link){case"_cascadeData":let _g=0;let _g1=iron_Scene.active.lights;while(_g<_g1.length){let l=_g1[_g];++_g;if(l.data.raw.type=="sun"){fa=l.getCascadeData();break}}break;case"_envmapIrradiance":fa=iron_Scene.active.world==null?iron_data_WorldData.getEmptyIrradiance():iron_Scene.active.world.probe.irradiance;break}if(fa!=null){g.setFloats(location,fa);return true}}else if(c.type=="int"){let i=null;let _g=c.link;if(_g==null){return false}else if(_g=="_envmapNumMipmaps"){let w=iron_Scene.active.world;i=w!=null?w.probe.raw.radiance_mipmaps+1-2:1}else{return false}g.setInt(location,i!=null?i:0);return true}return false}static setObjectConstant(g,object,location,c){if(c.link==null){return}let camera=iron_Scene.active.camera;let light=iron_RenderPath.active.light;if(c.type=="mat4"){let m=null;switch(c.link){case"_biasLightWorldViewProjectionMatrix":if(light!=null){if(object==null){let _this=iron_object_Uniforms.helpMat;_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{let _this=iron_object_Uniforms.helpMat;let m=object.transform.worldUnpack;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}let _this=iron_object_Uniforms.helpMat;let m1=light.VP;let a00=_this.self._00;let a01=_this.self._01;let a02=_this.self._02;let a03=_this.self._03;let a10=_this.self._10;let a11=_this.self._11;let a12=_this.self._12;let a13=_this.self._13;let a20=_this.self._20;let a21=_this.self._21;let a22=_this.self._22;let a23=_this.self._23;let a30=_this.self._30;let a31=_this.self._31;let a32=_this.self._32;let a33=_this.self._33;let b0=m1.self._00;let b1=m1.self._10;let b2=m1.self._20;let b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;let _this1=iron_object_Uniforms.helpMat;let m2=iron_object_Uniforms.biasMat;let a001=_this1.self._00;let a011=_this1.self._01;let a021=_this1.self._02;let a031=_this1.self._03;let a101=_this1.self._10;let a111=_this1.self._11;let a121=_this1.self._12;let a131=_this1.self._13;let a201=_this1.self._20;let a211=_this1.self._21;let a221=_this1.self._22;let a231=_this1.self._23;let a301=_this1.self._30;let a311=_this1.self._31;let a321=_this1.self._32;let a331=_this1.self._33;let b01=m2.self._00;let b11=m2.self._10;let b21=m2.self._20;let b31=m2.self._30;_this1.self._00=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._10=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._20=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._30=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._01;b11=m2.self._11;b21=m2.self._21;b31=m2.self._31;_this1.self._01=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._11=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._21=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._31=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._02;b11=m2.self._12;b21=m2.self._22;b31=m2.self._32;_this1.self._02=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._12=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._22=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._32=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._03;b11=m2.self._13;b21=m2.self._23;b31=m2.self._33;_this1.self._03=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._13=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._23=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._33=a301*b01+a311*b11+a321*b21+a331*b31;m=iron_object_Uniforms.helpMat}break;case"_biasLightWorldViewProjectionMatrixSun":let _g=0;let _g1=iron_Scene.active.lights;while(_g<_g1.length){let l=_g1[_g];++_g;if(l.data.raw.type=="sun"){if(object==null){let _this=iron_object_Uniforms.helpMat;_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{let _this=iron_object_Uniforms.helpMat;let m=object.transform.worldUnpack;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}let _this=iron_object_Uniforms.helpMat;let m1=l.VP;let a00=_this.self._00;let a01=_this.self._01;let a02=_this.self._02;let a03=_this.self._03;let a10=_this.self._10;let a11=_this.self._11;let a12=_this.self._12;let a13=_this.self._13;let a20=_this.self._20;let a21=_this.self._21;let a22=_this.self._22;let a23=_this.self._23;let a30=_this.self._30;let a31=_this.self._31;let a32=_this.self._32;let a33=_this.self._33;let b0=m1.self._00;let b1=m1.self._10;let b2=m1.self._20;let b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;let _this1=iron_object_Uniforms.helpMat;let m2=iron_object_Uniforms.biasMat;let a001=_this1.self._00;let a011=_this1.self._01;let a021=_this1.self._02;let a031=_this1.self._03;let a101=_this1.self._10;let a111=_this1.self._11;let a121=_this1.self._12;let a131=_this1.self._13;let a201=_this1.self._20;let a211=_this1.self._21;let a221=_this1.self._22;let a231=_this1.self._23;let a301=_this1.self._30;let a311=_this1.self._31;let a321=_this1.self._32;let a331=_this1.self._33;let b01=m2.self._00;let b11=m2.self._10;let b21=m2.self._20;let b31=m2.self._30;_this1.self._00=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._10=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._20=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._30=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._01;b11=m2.self._11;b21=m2.self._21;b31=m2.self._31;_this1.self._01=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._11=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._21=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._31=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._02;b11=m2.self._12;b21=m2.self._22;b31=m2.self._32;_this1.self._02=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._12=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._22=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._32=a301*b01+a311*b11+a321*b21+a331*b31;b01=m2.self._03;b11=m2.self._13;b21=m2.self._23;b31=m2.self._33;_this1.self._03=a001*b01+a011*b11+a021*b21+a031*b31;_this1.self._13=a101*b01+a111*b11+a121*b21+a131*b31;_this1.self._23=a201*b01+a211*b11+a221*b21+a231*b31;_this1.self._33=a301*b01+a311*b11+a321*b21+a331*b31;m=iron_object_Uniforms.helpMat;break}}break;case"_inverseWorldMatrix":let _this=iron_object_Uniforms.helpMat;let m1=object.transform.worldUnpack;let a00=m1.self._00;let a01=m1.self._01;let a02=m1.self._02;let a03=m1.self._03;let a10=m1.self._10;let a11=m1.self._11;let a12=m1.self._12;let a13=m1.self._13;let a20=m1.self._20;let a21=m1.self._21;let a22=m1.self._22;let a23=m1.self._23;let a30=m1.self._30;let a31=m1.self._31;let a32=m1.self._32;let a33=m1.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}m=iron_object_Uniforms.helpMat;break;case"_lightWorldViewProjectionMatrix":if(light!=null){if(object==null){let _this=iron_object_Uniforms.helpMat;_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{let _this=iron_object_Uniforms.helpMat;let m=object.transform.worldUnpack;_this.self._00=m.self._00;_this.self._01=m.self._01;_this.self._02=m.self._02;_this.self._03=m.self._03;_this.self._10=m.self._10;_this.self._11=m.self._11;_this.self._12=m.self._12;_this.self._13=m.self._13;_this.self._20=m.self._20;_this.self._21=m.self._21;_this.self._22=m.self._22;_this.self._23=m.self._23;_this.self._30=m.self._30;_this.self._31=m.self._31;_this.self._32=m.self._32;_this.self._33=m.self._33}let _this=iron_object_Uniforms.helpMat;let m1=light.VP;let a00=_this.self._00;let a01=_this.self._01;let a02=_this.self._02;let a03=_this.self._03;let a10=_this.self._10;let a11=_this.self._11;let a12=_this.self._12;let a13=_this.self._13;let a20=_this.self._20;let a21=_this.self._21;let a22=_this.self._22;let a23=_this.self._23;let a30=_this.self._30;let a31=_this.self._31;let a32=_this.self._32;let a33=_this.self._33;let b0=m1.self._00;let b1=m1.self._10;let b2=m1.self._20;let b3=m1.self._30;_this.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._01;b1=m1.self._11;b2=m1.self._21;b3=m1.self._31;_this.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._02;b1=m1.self._12;b2=m1.self._22;b3=m1.self._32;_this.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m1.self._03;b1=m1.self._13;b2=m1.self._23;b3=m1.self._33;_this.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this.self._33=a30*b0+a31*b1+a32*b2+a33*b3;m=iron_object_Uniforms.helpMat}break;case"_lightWorldViewProjectionMatrixCylinder":if(light!=null){let _this=iron_object_Uniforms.helpMat;let m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;let _this1=iron_object_Uniforms.helpMat;let m2=camera.V;let a00=_this1.self._00;let a01=_this1.self._01;let a02=_this1.self._02;let a03=_this1.self._03;let a10=_this1.self._10;let a11=_this1.self._11;let a12=_this1.self._12;let a13=_this1.self._13;let a20=_this1.self._20;let a21=_this1.self._21;let a22=_this1.self._22;let a23=_this1.self._23;let a30=_this1.self._30;let a31=_this1.self._31;let a32=_this1.self._32;let a33=_this1.self._33;let b0=m2.self._00;let b1=m2.self._10;let b2=m2.self._20;let b3=m2.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._01;b1=m2.self._11;b2=m2.self._21;b3=m2.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._02;b1=m2.self._12;b2=m2.self._22;b3=m2.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._03;b1=m2.self._13;b2=m2.self._23;b3=m2.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3;iron_object_Uniforms.helpMat.self._00=1;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._22=1;let _this2=iron_object_Uniforms.helpMat2;let m3=camera.V;let a001=m3.self._00;let a011=m3.self._01;let a021=m3.self._02;let a031=m3.self._03;let a101=m3.self._10;let a111=m3.self._11;let a121=m3.self._12;let a131=m3.self._13;let a201=m3.self._20;let a211=m3.self._21;let a221=m3.self._22;let a231=m3.self._23;let a301=m3.self._30;let a311=m3.self._31;let a321=m3.self._32;let a331=m3.self._33;let b00=a001*a111-a011*a101;let b01=a001*a121-a021*a101;let b02=a001*a131-a031*a101;let b03=a011*a121-a021*a111;let b04=a011*a131-a031*a111;let b05=a021*a131-a031*a121;let b06=a201*a311-a211*a301;let b07=a201*a321-a221*a301;let b08=a201*a331-a231*a301;let b09=a211*a321-a221*a311;let b10=a211*a331-a231*a311;let b11=a221*a331-a231*a321;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this2.self._00=1;_this2.self._01=0;_this2.self._02=0;_this2.self._03=0;_this2.self._10=0;_this2.self._11=1;_this2.self._12=0;_this2.self._13=0;_this2.self._20=0;_this2.self._21=0;_this2.self._22=1;_this2.self._23=0;_this2.self._30=0;_this2.self._31=0;_this2.self._32=0;_this2.self._33=1}else{det=1/det;_this2.self._00=(a111*b11-a121*b10+a131*b09)*det;_this2.self._01=(a021*b10-a011*b11-a031*b09)*det;_this2.self._02=(a311*b05-a321*b04+a331*b03)*det;_this2.self._03=(a221*b04-a211*b05-a231*b03)*det;_this2.self._10=(a121*b08-a101*b11-a131*b07)*det;_this2.self._11=(a001*b11-a021*b08+a031*b07)*det;_this2.self._12=(a321*b02-a301*b05-a331*b01)*det;_this2.self._13=(a201*b05-a221*b02+a231*b01)*det;_this2.self._20=(a101*b10-a111*b08+a131*b06)*det;_this2.self._21=(a011*b08-a001*b10-a031*b06)*det;_this2.self._22=(a301*b04-a311*b02+a331*b00)*det;_this2.self._23=(a211*b02-a201*b04-a231*b00)*det;_this2.self._30=(a111*b07-a101*b09-a121*b06)*det;_this2.self._31=(a001*b09-a011*b07+a021*b06)*det;_this2.self._32=(a311*b01-a301*b03-a321*b00)*det;_this2.self._33=(a201*b03-a211*b01+a221*b00)*det}let _this3=iron_object_Uniforms.helpMat;let m4=iron_object_Uniforms.helpMat2;let a002=_this3.self._00;let a012=_this3.self._01;let a022=_this3.self._02;let a032=_this3.self._03;let a102=_this3.self._10;let a112=_this3.self._11;let a122=_this3.self._12;let a132=_this3.self._13;let a202=_this3.self._20;let a212=_this3.self._21;let a222=_this3.self._22;let a232=_this3.self._23;let a302=_this3.self._30;let a312=_this3.self._31;let a322=_this3.self._32;let a332=_this3.self._33;let b010=m4.self._00;let b12=m4.self._10;let b21=m4.self._20;let b31=m4.self._30;_this3.self._00=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._10=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._20=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._30=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._01;b12=m4.self._11;b21=m4.self._21;b31=m4.self._31;_this3.self._01=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._11=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._21=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._31=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._02;b12=m4.self._12;b21=m4.self._22;b31=m4.self._32;_this3.self._02=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._12=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._22=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._32=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._03;b12=m4.self._13;b21=m4.self._23;b31=m4.self._33;_this3.self._03=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._13=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._23=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._33=a302*b010+a312*b12+a322*b21+a332*b31;let _this4=iron_object_Uniforms.helpMat;let m5=light.VP;let a003=_this4.self._00;let a013=_this4.self._01;let a023=_this4.self._02;let a033=_this4.self._03;let a103=_this4.self._10;let a113=_this4.self._11;let a123=_this4.self._12;let a133=_this4.self._13;let a203=_this4.self._20;let a213=_this4.self._21;let a223=_this4.self._22;let a233=_this4.self._23;let a303=_this4.self._30;let a313=_this4.self._31;let a323=_this4.self._32;let a333=_this4.self._33;let b011=m5.self._00;let b13=m5.self._10;let b22=m5.self._20;let b32=m5.self._30;_this4.self._00=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._10=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._20=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._30=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._01;b13=m5.self._11;b22=m5.self._21;b32=m5.self._31;_this4.self._01=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._11=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._21=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._31=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._02;b13=m5.self._12;b22=m5.self._22;b32=m5.self._32;_this4.self._02=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._12=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._22=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._32=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._03;b13=m5.self._13;b22=m5.self._23;b32=m5.self._33;_this4.self._03=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._13=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._23=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._33=a303*b011+a313*b13+a323*b22+a333*b32;m=iron_object_Uniforms.helpMat}break;case"_lightWorldViewProjectionMatrixSphere":if(light!=null){let _this=iron_object_Uniforms.helpMat;let m1=object.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;let _this1=iron_object_Uniforms.helpMat;let m2=camera.V;let a00=_this1.self._00;let a01=_this1.self._01;let a02=_this1.self._02;let a03=_this1.self._03;let a10=_this1.self._10;let a11=_this1.self._11;let a12=_this1.self._12;let a13=_this1.self._13;let a20=_this1.self._20;let a21=_this1.self._21;let a22=_this1.self._22;let a23=_this1.self._23;let a30=_this1.self._30;let a31=_this1.self._31;let a32=_this1.self._32;let a33=_this1.self._33;let b0=m2.self._00;let b1=m2.self._10;let b2=m2.self._20;let b3=m2.self._30;_this1.self._00=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._10=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._20=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._30=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._01;b1=m2.self._11;b2=m2.self._21;b3=m2.self._31;_this1.self._01=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._11=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._21=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._31=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._02;b1=m2.self._12;b2=m2.self._22;b3=m2.self._32;_this1.self._02=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._12=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._22=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._32=a30*b0+a31*b1+a32*b2+a33*b3;b0=m2.self._03;b1=m2.self._13;b2=m2.self._23;b3=m2.self._33;_this1.self._03=a00*b0+a01*b1+a02*b2+a03*b3;_this1.self._13=a10*b0+a11*b1+a12*b2+a13*b3;_this1.self._23=a20*b0+a21*b1+a22*b2+a23*b3;_this1.self._33=a30*b0+a31*b1+a32*b2+a33*b3;iron_object_Uniforms.helpMat.self._00=1;iron_object_Uniforms.helpMat.self._10=0;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._11=1;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._12=0;iron_object_Uniforms.helpMat.self._22=1;let _this2=iron_object_Uniforms.helpMat2;let m3=camera.V;let a001=m3.self._00;let a011=m3.self._01;let a021=m3.self._02;let a031=m3.self._03;let a101=m3.self._10;let a111=m3.self._11;let a121=m3.self._12;let a131=m3.self._13;let a201=m3.self._20;let a211=m3.self._21;let a221=m3.self._22;let a231=m3.self._23;let a301=m3.self._30;let a311=m3.self._31;let a321=m3.self._32;let a331=m3.self._33;let b00=a001*a111-a011*a101;let b01=a001*a121-a021*a101;let b02=a001*a131-a031*a101;let b03=a011*a121-a021*a111;let b04=a011*a131-a031*a111;let b05=a021*a131-a031*a121;let b06=a201*a311-a211*a301;let b07=a201*a321-a221*a301;let b08=a201*a331-a231*a301;let b09=a211*a321-a221*a311;let b10=a211*a331-a231*a311;let b11=a221*a331-a231*a321;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this2.self._00=1;_this2.self._01=0;_this2.self._02=0;_this2.self._03=0;_this2.self._10=0;_this2.self._11=1;_this2.self._12=0;_this2.self._13=0;_this2.self._20=0;_this2.self._21=0;_this2.self._22=1;_this2.self._23=0;_this2.self._30=0;_this2.self._31=0;_this2.self._32=0;_this2.self._33=1}else{det=1/det;_this2.self._00=(a111*b11-a121*b10+a131*b09)*det;_this2.self._01=(a021*b10-a011*b11-a031*b09)*det;_this2.self._02=(a311*b05-a321*b04+a331*b03)*det;_this2.self._03=(a221*b04-a211*b05-a231*b03)*det;_this2.self._10=(a121*b08-a101*b11-a131*b07)*det;_this2.self._11=(a001*b11-a021*b08+a031*b07)*det;_this2.self._12=(a321*b02-a301*b05-a331*b01)*det;_this2.self._13=(a201*b05-a221*b02+a231*b01)*det;_this2.self._20=(a101*b10-a111*b08+a131*b06)*det;_this2.self._21=(a011*b08-a001*b10-a031*b06)*det;_this2.self._22=(a301*b04-a311*b02+a331*b00)*det;_this2.self._23=(a211*b02-a201*b04-a231*b00)*det;_this2.self._30=(a111*b07-a101*b09-a121*b06)*det;_this2.self._31=(a001*b09-a011*b07+a021*b06)*det;_this2.self._32=(a311*b01-a301*b03-a321*b00)*det;_this2.self._33=(a201*b03-a211*b01+a221*b00)*det}let _this3=iron_object_Uniforms.helpMat;let m4=iron_object_Uniforms.helpMat2;let a002=_this3.self._00;let a012=_this3.self._01;let a022=_this3.self._02;let a032=_this3.self._03;let a102=_this3.self._10;let a112=_this3.self._11;let a122=_this3.self._12;let a132=_this3.self._13;let a202=_this3.self._20;let a212=_this3.self._21;let a222=_this3.self._22;let a232=_this3.self._23;let a302=_this3.self._30;let a312=_this3.self._31;let a322=_this3.self._32;let a332=_this3.self._33;let b010=m4.self._00;let b12=m4.self._10;let b21=m4.self._20;let b31=m4.self._30;_this3.self._00=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._10=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._20=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._30=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._01;b12=m4.self._11;b21=m4.self._21;b31=m4.self._31;_this3.self._01=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._11=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._21=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._31=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._02;b12=m4.self._12;b21=m4.self._22;b31=m4.self._32;_this3.self._02=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._12=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._22=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._32=a302*b010+a312*b12+a322*b21+a332*b31;b010=m4.self._03;b12=m4.self._13;b21=m4.self._23;b31=m4.self._33;_this3.self._03=a002*b010+a012*b12+a022*b21+a032*b31;_this3.self._13=a102*b010+a112*b12+a122*b21+a132*b31;_this3.self._23=a202*b010+a212*b12+a222*b21+a232*b31;_this3.self._33=a302*b010+a312*b12+a322*b21+a332*b31;let _this4=iron_object_Uniforms.helpMat;let m5=light.VP;let a003=_this4.self._00;let a013=_this4.self._01;let a023=_this4.self._02;let a033=_this4.self._03;let a103=_this4.self._10;let a113=_this4.self._11;let a123=_this4.self._12;let a133=_this4.self._13;let a203=_this4.self._20;let a213=_this4.self._21;let a223=_this4.self._22;let a233=_this4.self._23;let a303=_this4.self._30;let a313=_this4.self._31;let a323=_this4.self._32;let a333=_this4.self._33;let b011=m5.self._00;let b13=m5.self._10;let b22=m5.self._20;let b32=m5.self._30;_this4.self._00=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._10=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._20=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._30=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._01;b13=m5.self._11;b22=m5.self._21;b32=m5.self._31;_this4.self._01=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._11=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._21=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._31=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._02;b13=m5.self._12;b22=m5.self._22;b32=m5.self._32;_this4.self._02=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._12=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._22=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._32=a303*b011+a313*b13+a323*b22+a333*b32;b011=m5.self._03;b13=m5.self._13;b22=m5.self._23;b32=m5.self._33;_this4.self._03=a003*b011+a013*b13+a023*b22+a033*b32;_this4.self._13=a103*b011+a113*b13+a123*b22+a133*b32;_this4.self._23=a203*b011+a213*b13+a223*b22+a233*b32;_this4.self._33=a303*b011+a313*b13+a323*b22+a333*b32;m=iron_object_Uniforms.helpMat}break;case"_particleData":let mo=js_Boot.__cast(object,iron_object_MeshObject);if(mo.particleOwner!=null&&mo.particleOwner.particleSystems!=null){m=mo.particleOwner.particleSystems[mo.particleIndex].getData()}break;case"_sunWorldMatrix":let sun=iron_RenderPath.active.sun;if(sun!=null){let _this=iron_object_Uniforms.helpMat;let m1=sun.transform.worldUnpack;_this.self._00=m1.self._00;_this.self._01=m1.self._01;_this.self._02=m1.self._02;_this.self._03=m1.self._03;_this.self._10=m1.self._10;_this.self._11=m1.self._11;_this.self._12=m1.self._12;_this.self._13=m1.self._13;_this.self._20=m1.self._20;_this.self._21=m1.self._21;_this.self._22=m1.self._22;_this.self._23=m1.self._23;_this.self._30=m1.self._30;_this.self._31=m1.self._31;_this.self._32=m1.self._32;_this.self._33=m1.self._33;m=iron_object_Uniforms.helpMat}break;case"_worldMatrix":m=object.transform.worldUnpack;break;case"_worldViewMatrix":let _this1=iron_object_Uniforms.helpMat;let m2=object.transform.worldUnpack;_this1.self._00=m2.self._00;_this1.self._01=m2.self._01;_this1.self._02=m2.self._02;_this1.self._03=m2.self._03;_this1.self._10=m2.self._10;_this1.self._11=m2.self._11;_this1.self._12=m2.self._12;_this1.self._13=m2.self._13;_this1.self._20=m2.self._20;_this1.self._21=m2.self._21;_this1.self._22=m2.self._22;_this1.self._23=m2.self._23;_this1.self._30=m2.self._30;_this1.self._31=m2.self._31;_this1.self._32=m2.self._32;_this1.self._33=m2.self._33;let _this2=iron_object_Uniforms.helpMat;let m3=camera.V;let a001=_this2.self._00;let a011=_this2.self._01;let a021=_this2.self._02;let a031=_this2.self._03;let a101=_this2.self._10;let a111=_this2.self._11;let a121=_this2.self._12;let a131=_this2.self._13;let a201=_this2.self._20;let a211=_this2.self._21;let a221=_this2.self._22;let a231=_this2.self._23;let a301=_this2.self._30;let a311=_this2.self._31;let a321=_this2.self._32;let a331=_this2.self._33;let b0=m3.self._00;let b1=m3.self._10;let b2=m3.self._20;let b3=m3.self._30;_this2.self._00=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._10=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._20=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._30=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._01;b1=m3.self._11;b2=m3.self._21;b3=m3.self._31;_this2.self._01=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._11=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._21=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._31=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._02;b1=m3.self._12;b2=m3.self._22;b3=m3.self._32;_this2.self._02=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._12=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._22=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._32=a301*b0+a311*b1+a321*b2+a331*b3;b0=m3.self._03;b1=m3.self._13;b2=m3.self._23;b3=m3.self._33;_this2.self._03=a001*b0+a011*b1+a021*b2+a031*b3;_this2.self._13=a101*b0+a111*b1+a121*b2+a131*b3;_this2.self._23=a201*b0+a211*b1+a221*b2+a231*b3;_this2.self._33=a301*b0+a311*b1+a321*b2+a331*b3;m=iron_object_Uniforms.helpMat;break;case"_worldViewProjectionMatrix":let _this3=iron_object_Uniforms.helpMat;let m4=object.transform.worldUnpack;_this3.self._00=m4.self._00;_this3.self._01=m4.self._01;_this3.self._02=m4.self._02;_this3.self._03=m4.self._03;_this3.self._10=m4.self._10;_this3.self._11=m4.self._11;_this3.self._12=m4.self._12;_this3.self._13=m4.self._13;_this3.self._20=m4.self._20;_this3.self._21=m4.self._21;_this3.self._22=m4.self._22;_this3.self._23=m4.self._23;_this3.self._30=m4.self._30;_this3.self._31=m4.self._31;_this3.self._32=m4.self._32;_this3.self._33=m4.self._33;let _this4=iron_object_Uniforms.helpMat;let m5=camera.V;let a002=_this4.self._00;let a012=_this4.self._01;let a022=_this4.self._02;let a032=_this4.self._03;let a102=_this4.self._10;let a112=_this4.self._11;let a122=_this4.self._12;let a132=_this4.self._13;let a202=_this4.self._20;let a212=_this4.self._21;let a222=_this4.self._22;let a232=_this4.self._23;let a302=_this4.self._30;let a312=_this4.self._31;let a322=_this4.self._32;let a332=_this4.self._33;let b010=m5.self._00;let b12=m5.self._10;let b21=m5.self._20;let b31=m5.self._30;_this4.self._00=a002*b010+a012*b12+a022*b21+a032*b31;_this4.self._10=a102*b010+a112*b12+a122*b21+a132*b31;_this4.self._20=a202*b010+a212*b12+a222*b21+a232*b31;_this4.self._30=a302*b010+a312*b12+a322*b21+a332*b31;b010=m5.self._01;b12=m5.self._11;b21=m5.self._21;b31=m5.self._31;_this4.self._01=a002*b010+a012*b12+a022*b21+a032*b31;_this4.self._11=a102*b010+a112*b12+a122*b21+a132*b31;_this4.self._21=a202*b010+a212*b12+a222*b21+a232*b31;_this4.self._31=a302*b010+a312*b12+a322*b21+a332*b31;b010=m5.self._02;b12=m5.self._12;b21=m5.self._22;b31=m5.self._32;_this4.self._02=a002*b010+a012*b12+a022*b21+a032*b31;_this4.self._12=a102*b010+a112*b12+a122*b21+a132*b31;_this4.self._22=a202*b010+a212*b12+a222*b21+a232*b31;_this4.self._32=a302*b010+a312*b12+a322*b21+a332*b31;b010=m5.self._03;b12=m5.self._13;b21=m5.self._23;b31=m5.self._33;_this4.self._03=a002*b010+a012*b12+a022*b21+a032*b31;_this4.self._13=a102*b010+a112*b12+a122*b21+a132*b31;_this4.self._23=a202*b010+a212*b12+a222*b21+a232*b31;_this4.self._33=a302*b010+a312*b12+a322*b21+a332*b31;let _this5=iron_object_Uniforms.helpMat;let m6=camera.P;let a003=_this5.self._00;let a013=_this5.self._01;let a023=_this5.self._02;let a033=_this5.self._03;let a103=_this5.self._10;let a113=_this5.self._11;let a123=_this5.self._12;let a133=_this5.self._13;let a203=_this5.self._20;let a213=_this5.self._21;let a223=_this5.self._22;let a233=_this5.self._23;let a303=_this5.self._30;let a313=_this5.self._31;let a323=_this5.self._32;let a333=_this5.self._33;let b011=m6.self._00;let b13=m6.self._10;let b22=m6.self._20;let b32=m6.self._30;_this5.self._00=a003*b011+a013*b13+a023*b22+a033*b32;_this5.self._10=a103*b011+a113*b13+a123*b22+a133*b32;_this5.self._20=a203*b011+a213*b13+a223*b22+a233*b32;_this5.self._30=a303*b011+a313*b13+a323*b22+a333*b32;b011=m6.self._01;b13=m6.self._11;b22=m6.self._21;b32=m6.self._31;_this5.self._01=a003*b011+a013*b13+a023*b22+a033*b32;_this5.self._11=a103*b011+a113*b13+a123*b22+a133*b32;_this5.self._21=a203*b011+a213*b13+a223*b22+a233*b32;_this5.self._31=a303*b011+a313*b13+a323*b22+a333*b32;b011=m6.self._02;b13=m6.self._12;b22=m6.self._22;b32=m6.self._32;_this5.self._02=a003*b011+a013*b13+a023*b22+a033*b32;_this5.self._12=a103*b011+a113*b13+a123*b22+a133*b32;_this5.self._22=a203*b011+a213*b13+a223*b22+a233*b32;_this5.self._32=a303*b011+a313*b13+a323*b22+a333*b32;b011=m6.self._03;b13=m6.self._13;b22=m6.self._23;b32=m6.self._33;_this5.self._03=a003*b011+a013*b13+a023*b22+a033*b32;_this5.self._13=a103*b011+a113*b13+a123*b22+a133*b32;_this5.self._23=a203*b011+a213*b13+a223*b22+a233*b32;_this5.self._33=a303*b011+a313*b13+a323*b22+a333*b32;m=iron_object_Uniforms.helpMat;break;case"_worldViewProjectionMatrixCylinder":let t=object.transform;let _this6=iron_object_Uniforms.helpMat;let m7=t.worldUnpack;_this6.self._00=m7.self._00;_this6.self._01=m7.self._01;_this6.self._02=m7.self._02;_this6.self._03=m7.self._03;_this6.self._10=m7.self._10;_this6.self._11=m7.self._11;_this6.self._12=m7.self._12;_this6.self._13=m7.self._13;_this6.self._20=m7.self._20;_this6.self._21=m7.self._21;_this6.self._22=m7.self._22;_this6.self._23=m7.self._23;_this6.self._30=m7.self._30;_this6.self._31=m7.self._31;_this6.self._32=m7.self._32;_this6.self._33=m7.self._33;let _this7=iron_object_Uniforms.helpMat;let m8=camera.V;let a004=_this7.self._00;let a014=_this7.self._01;let a024=_this7.self._02;let a034=_this7.self._03;let a104=_this7.self._10;let a114=_this7.self._11;let a124=_this7.self._12;let a134=_this7.self._13;let a204=_this7.self._20;let a214=_this7.self._21;let a224=_this7.self._22;let a234=_this7.self._23;let a304=_this7.self._30;let a314=_this7.self._31;let a324=_this7.self._32;let a334=_this7.self._33;let b012=m8.self._00;let b14=m8.self._10;let b23=m8.self._20;let b33=m8.self._30;_this7.self._00=a004*b012+a014*b14+a024*b23+a034*b33;_this7.self._10=a104*b012+a114*b14+a124*b23+a134*b33;_this7.self._20=a204*b012+a214*b14+a224*b23+a234*b33;_this7.self._30=a304*b012+a314*b14+a324*b23+a334*b33;b012=m8.self._01;b14=m8.self._11;b23=m8.self._21;b33=m8.self._31;_this7.self._01=a004*b012+a014*b14+a024*b23+a034*b33;_this7.self._11=a104*b012+a114*b14+a124*b23+a134*b33;_this7.self._21=a204*b012+a214*b14+a224*b23+a234*b33;_this7.self._31=a304*b012+a314*b14+a324*b23+a334*b33;b012=m8.self._02;b14=m8.self._12;b23=m8.self._22;b33=m8.self._32;_this7.self._02=a004*b012+a014*b14+a024*b23+a034*b33;_this7.self._12=a104*b012+a114*b14+a124*b23+a134*b33;_this7.self._22=a204*b012+a214*b14+a224*b23+a234*b33;_this7.self._32=a304*b012+a314*b14+a324*b23+a334*b33;b012=m8.self._03;b14=m8.self._13;b23=m8.self._23;b33=m8.self._33;_this7.self._03=a004*b012+a014*b14+a024*b23+a034*b33;_this7.self._13=a104*b012+a114*b14+a124*b23+a134*b33;_this7.self._23=a204*b012+a214*b14+a224*b23+a234*b33;_this7.self._33=a304*b012+a314*b14+a324*b23+a334*b33;let x=t.scale.x;let y=t.scale.y;let z=t.scale.z;if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}let scl_x=x;let scl_y=y;let scl_z=z;let scl_w=1;let f=t.scaleWorld;scl_x*=f;scl_y*=f;scl_z*=f;iron_object_Uniforms.helpMat.self._00=scl_x;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._22=scl_y;let _this8=iron_object_Uniforms.helpMat;let m9=camera.P;let a005=_this8.self._00;let a015=_this8.self._01;let a025=_this8.self._02;let a035=_this8.self._03;let a105=_this8.self._10;let a115=_this8.self._11;let a125=_this8.self._12;let a135=_this8.self._13;let a205=_this8.self._20;let a215=_this8.self._21;let a225=_this8.self._22;let a235=_this8.self._23;let a305=_this8.self._30;let a315=_this8.self._31;let a325=_this8.self._32;let a335=_this8.self._33;let b013=m9.self._00;let b15=m9.self._10;let b24=m9.self._20;let b34=m9.self._30;_this8.self._00=a005*b013+a015*b15+a025*b24+a035*b34;_this8.self._10=a105*b013+a115*b15+a125*b24+a135*b34;_this8.self._20=a205*b013+a215*b15+a225*b24+a235*b34;_this8.self._30=a305*b013+a315*b15+a325*b24+a335*b34;b013=m9.self._01;b15=m9.self._11;b24=m9.self._21;b34=m9.self._31;_this8.self._01=a005*b013+a015*b15+a025*b24+a035*b34;_this8.self._11=a105*b013+a115*b15+a125*b24+a135*b34;_this8.self._21=a205*b013+a215*b15+a225*b24+a235*b34;_this8.self._31=a305*b013+a315*b15+a325*b24+a335*b34;b013=m9.self._02;b15=m9.self._12;b24=m9.self._22;b34=m9.self._32;_this8.self._02=a005*b013+a015*b15+a025*b24+a035*b34;_this8.self._12=a105*b013+a115*b15+a125*b24+a135*b34;_this8.self._22=a205*b013+a215*b15+a225*b24+a235*b34;_this8.self._32=a305*b013+a315*b15+a325*b24+a335*b34;b013=m9.self._03;b15=m9.self._13;b24=m9.self._23;b34=m9.self._33;_this8.self._03=a005*b013+a015*b15+a025*b24+a035*b34;_this8.self._13=a105*b013+a115*b15+a125*b24+a135*b34;_this8.self._23=a205*b013+a215*b15+a225*b24+a235*b34;_this8.self._33=a305*b013+a315*b15+a325*b24+a335*b34;m=iron_object_Uniforms.helpMat;break;case"_worldViewProjectionMatrixSphere":let t1=object.transform;let _this9=iron_object_Uniforms.helpMat;let m10=t1.worldUnpack;_this9.self._00=m10.self._00;_this9.self._01=m10.self._01;_this9.self._02=m10.self._02;_this9.self._03=m10.self._03;_this9.self._10=m10.self._10;_this9.self._11=m10.self._11;_this9.self._12=m10.self._12;_this9.self._13=m10.self._13;_this9.self._20=m10.self._20;_this9.self._21=m10.self._21;_this9.self._22=m10.self._22;_this9.self._23=m10.self._23;_this9.self._30=m10.self._30;_this9.self._31=m10.self._31;_this9.self._32=m10.self._32;_this9.self._33=m10.self._33;let _this10=iron_object_Uniforms.helpMat;let m11=camera.V;let a006=_this10.self._00;let a016=_this10.self._01;let a026=_this10.self._02;let a036=_this10.self._03;let a106=_this10.self._10;let a116=_this10.self._11;let a126=_this10.self._12;let a136=_this10.self._13;let a206=_this10.self._20;let a216=_this10.self._21;let a226=_this10.self._22;let a236=_this10.self._23;let a306=_this10.self._30;let a316=_this10.self._31;let a326=_this10.self._32;let a336=_this10.self._33;let b014=m11.self._00;let b16=m11.self._10;let b25=m11.self._20;let b35=m11.self._30;_this10.self._00=a006*b014+a016*b16+a026*b25+a036*b35;_this10.self._10=a106*b014+a116*b16+a126*b25+a136*b35;_this10.self._20=a206*b014+a216*b16+a226*b25+a236*b35;_this10.self._30=a306*b014+a316*b16+a326*b25+a336*b35;b014=m11.self._01;b16=m11.self._11;b25=m11.self._21;b35=m11.self._31;_this10.self._01=a006*b014+a016*b16+a026*b25+a036*b35;_this10.self._11=a106*b014+a116*b16+a126*b25+a136*b35;_this10.self._21=a206*b014+a216*b16+a226*b25+a236*b35;_this10.self._31=a306*b014+a316*b16+a326*b25+a336*b35;b014=m11.self._02;b16=m11.self._12;b25=m11.self._22;b35=m11.self._32;_this10.self._02=a006*b014+a016*b16+a026*b25+a036*b35;_this10.self._12=a106*b014+a116*b16+a126*b25+a136*b35;_this10.self._22=a206*b014+a216*b16+a226*b25+a236*b35;_this10.self._32=a306*b014+a316*b16+a326*b25+a336*b35;b014=m11.self._03;b16=m11.self._13;b25=m11.self._23;b35=m11.self._33;_this10.self._03=a006*b014+a016*b16+a026*b25+a036*b35;_this10.self._13=a106*b014+a116*b16+a126*b25+a136*b35;_this10.self._23=a206*b014+a216*b16+a226*b25+a236*b35;_this10.self._33=a306*b014+a316*b16+a326*b25+a336*b35;let x1=t1.scale.x;let y1=t1.scale.y;let z1=t1.scale.z;if(z1==null){z1=0}if(y1==null){y1=0}if(x1==null){x1=0}let scl_x1=x1;let scl_y1=y1;let scl_z1=z1;let scl_w1=1;let f1=t1.scaleWorld;scl_x1*=f1;scl_y1*=f1;scl_z1*=f1;iron_object_Uniforms.helpMat.self._00=scl_x1;iron_object_Uniforms.helpMat.self._10=0;iron_object_Uniforms.helpMat.self._20=0;iron_object_Uniforms.helpMat.self._01=0;iron_object_Uniforms.helpMat.self._11=scl_y1;iron_object_Uniforms.helpMat.self._21=0;iron_object_Uniforms.helpMat.self._02=0;iron_object_Uniforms.helpMat.self._12=0;iron_object_Uniforms.helpMat.self._22=scl_z1;let _this11=iron_object_Uniforms.helpMat;let m12=camera.P;let a007=_this11.self._00;let a017=_this11.self._01;let a027=_this11.self._02;let a037=_this11.self._03;let a107=_this11.self._10;let a117=_this11.self._11;let a127=_this11.self._12;let a137=_this11.self._13;let a207=_this11.self._20;let a217=_this11.self._21;let a227=_this11.self._22;let a237=_this11.self._23;let a307=_this11.self._30;let a317=_this11.self._31;let a327=_this11.self._32;let a337=_this11.self._33;let b015=m12.self._00;let b17=m12.self._10;let b26=m12.self._20;let b36=m12.self._30;_this11.self._00=a007*b015+a017*b17+a027*b26+a037*b36;_this11.self._10=a107*b015+a117*b17+a127*b26+a137*b36;_this11.self._20=a207*b015+a217*b17+a227*b26+a237*b36;_this11.self._30=a307*b015+a317*b17+a327*b26+a337*b36;b015=m12.self._01;b17=m12.self._11;b26=m12.self._21;b36=m12.self._31;_this11.self._01=a007*b015+a017*b17+a027*b26+a037*b36;_this11.self._11=a107*b015+a117*b17+a127*b26+a137*b36;_this11.self._21=a207*b015+a217*b17+a227*b26+a237*b36;_this11.self._31=a307*b015+a317*b17+a327*b26+a337*b36;b015=m12.self._02;b17=m12.self._12;b26=m12.self._22;b36=m12.self._32;_this11.self._02=a007*b015+a017*b17+a027*b26+a037*b36;_this11.self._12=a107*b015+a117*b17+a127*b26+a137*b36;_this11.self._22=a207*b015+a217*b17+a227*b26+a237*b36;_this11.self._32=a307*b015+a317*b17+a327*b26+a337*b36;b015=m12.self._03;b17=m12.self._13;b26=m12.self._23;b36=m12.self._33;_this11.self._03=a007*b015+a017*b17+a027*b26+a037*b36;_this11.self._13=a107*b015+a117*b17+a127*b26+a137*b36;_this11.self._23=a207*b015+a217*b17+a227*b26+a237*b36;_this11.self._33=a307*b015+a317*b17+a327*b26+a337*b36;m=iron_object_Uniforms.helpMat;break}let tmp=m==null;if(m==null&&iron_object_Uniforms.externalMat4Links!=null){let _g=0;let _g1=iron_object_Uniforms.externalMat4Links;while(_g<_g1.length){let fn=_g1[_g];++_g;m=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(m!=null){break}}}if(m==null){return}g.setMatrix(location,m.self)}else if(c.type=="mat3"){let m=null;switch(c.link){case"_normalMatrix":let _this=iron_object_Uniforms.helpMat;let m1=object.transform.world;let a00=m1.self._00;let a01=m1.self._01;let a02=m1.self._02;let a03=m1.self._03;let a10=m1.self._10;let a11=m1.self._11;let a12=m1.self._12;let a13=m1.self._13;let a20=m1.self._20;let a21=m1.self._21;let a22=m1.self._22;let a23=m1.self._23;let a30=m1.self._30;let a31=m1.self._31;let a32=m1.self._32;let a33=m1.self._33;let b00=a00*a11-a01*a10;let b01=a00*a12-a02*a10;let b02=a00*a13-a03*a10;let b03=a01*a12-a02*a11;let b04=a01*a13-a03*a11;let b05=a02*a13-a03*a12;let b06=a20*a31-a21*a30;let b07=a20*a32-a22*a30;let b08=a20*a33-a23*a30;let b09=a21*a32-a22*a31;let b10=a21*a33-a23*a31;let b11=a22*a33-a23*a32;let det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(det==0){_this.self._00=1;_this.self._01=0;_this.self._02=0;_this.self._03=0;_this.self._10=0;_this.self._11=1;_this.self._12=0;_this.self._13=0;_this.self._20=0;_this.self._21=0;_this.self._22=1;_this.self._23=0;_this.self._30=0;_this.self._31=0;_this.self._32=0;_this.self._33=1}else{det=1/det;_this.self._00=(a11*b11-a12*b10+a13*b09)*det;_this.self._01=(a02*b10-a01*b11-a03*b09)*det;_this.self._02=(a31*b05-a32*b04+a33*b03)*det;_this.self._03=(a22*b04-a21*b05-a23*b03)*det;_this.self._10=(a12*b08-a10*b11-a13*b07)*det;_this.self._11=(a00*b11-a02*b08+a03*b07)*det;_this.self._12=(a32*b02-a30*b05-a33*b01)*det;_this.self._13=(a20*b05-a22*b02+a23*b01)*det;_this.self._20=(a10*b10-a11*b08+a13*b06)*det;_this.self._21=(a01*b08-a00*b10-a03*b06)*det;_this.self._22=(a30*b04-a31*b02+a33*b00)*det;_this.self._23=(a21*b02-a20*b04-a23*b00)*det;_this.self._30=(a11*b07-a10*b09-a12*b06)*det;_this.self._31=(a00*b09-a01*b07+a02*b06)*det;_this.self._32=(a31*b01-a30*b03-a32*b00)*det;_this.self._33=(a20*b03-a21*b01+a22*b00)*det}let _this1=iron_object_Uniforms.helpMat;let f=_this1.self._01;_this1.self._01=_this1.self._10;_this1.self._10=f;f=_this1.self._02;_this1.self._02=_this1.self._20;_this1.self._20=f;f=_this1.self._12;_this1.self._12=_this1.self._21;_this1.self._21=f;let _this2=iron_object_Uniforms.helpMat3;let m2=iron_object_Uniforms.helpMat;_this2.self._00=m2.self._00;_this2.self._01=m2.self._01;_this2.self._02=m2.self._02;_this2.self._10=m2.self._10;_this2.self._11=m2.self._11;_this2.self._12=m2.self._12;_this2.self._20=m2.self._20;_this2.self._21=m2.self._21;_this2.self._22=m2.self._22;m=iron_object_Uniforms.helpMat3;break;case"_viewMatrix3":let _this3=iron_object_Uniforms.helpMat3;let m3=camera.V;_this3.self._00=m3.self._00;_this3.self._01=m3.self._01;_this3.self._02=m3.self._02;_this3.self._10=m3.self._10;_this3.self._11=m3.self._11;_this3.self._12=m3.self._12;_this3.self._20=m3.self._20;_this3.self._21=m3.self._21;_this3.self._22=m3.self._22;m=iron_object_Uniforms.helpMat3;break}if(m==null){return}g.setMatrix3(location,m.self)}else if(c.type=="vec4"){let v=null;let _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;if(v==null&&iron_object_Uniforms.externalVec4Links!=null){let _g=0;let _g1=iron_object_Uniforms.externalVec4Links;while(_g<_g1.length){let fn=_g1[_g];++_g;v=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(v!=null){break}}}if(v==null){return}g.setFloat4(location,v.x,v.y,v.z,v.w)}else if(c.type=="vec3"){let v=null;let _this=iron_object_Uniforms.helpVec;_this.x=0;_this.y=0;_this.z=0;_this.w=1;switch(c.link){case"_dim":let d=object.transform.dim;let s=object.transform.scale;let _this1=iron_object_Uniforms.helpVec;_this1.x=d.x/s.x;_this1.y=d.y/s.y;_this1.z=d.z/s.z;_this1.w=1;v=iron_object_Uniforms.helpVec;break;case"_halfDim":let d1=object.transform.dim;let s1=object.transform.scale;let _this2=iron_object_Uniforms.helpVec;_this2.x=d1.x/s1.x/2;_this2.y=d1.y/s1.y/2;_this2.z=d1.z/s1.z/2;_this2.w=1;v=iron_object_Uniforms.helpVec;break}if(v==null&&iron_object_Uniforms.externalVec3Links!=null){let _g=0;let _g1=iron_object_Uniforms.externalVec3Links;while(_g<_g1.length){let f=_g1[_g];++_g;v=f(object,iron_object_Uniforms.currentMat(object),c.link);if(v!=null){break}}}if(v==null){return}g.setFloat3(location,v.x,v.y,v.z)}else if(c.type=="vec2"){let vx=null;let vy=null;switch(c.link){case"_morphDataDim":let mt=js_Boot.__cast(object,iron_object_MeshObject).morphTarget;vx=mt.numMorphTargets;vy=mt.morphBlockSize/mt.morphImageSize;break;case"_morphScaleOffset":let mt1=js_Boot.__cast(object,iron_object_MeshObject).morphTarget;vx=mt1.scaling;vy=mt1.offset;break;case"_tilesheetOffset":let ts=js_Boot.__cast(object,iron_object_MeshObject).tilesheet;vx=ts.tileX;vy=ts.tileY;break}if(vx==null&&iron_object_Uniforms.externalVec2Links!=null){let _g=0;let _g1=iron_object_Uniforms.externalVec2Links;while(_g<_g1.length){let fn=_g1[_g];++_g;let v=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(v!=null){vx=v.x;vy=v.y;break}}}if(vx==null){return}g.setFloat2(location,vx,vy)}else if(c.type=="float"){let f=null;switch(c.link){case"_objectInfoIndex":f=object.uid;break;case"_objectInfoMaterialIndex":f=iron_object_Uniforms.currentMat(object).uid;break;case"_objectInfoRandom":f=object.urandom;break;case"_posUnpack":f=iron_object_Uniforms.posUnpack!=null?iron_object_Uniforms.posUnpack:1;break;case"_texUnpack":f=iron_object_Uniforms.texUnpack!=null?iron_object_Uniforms.texUnpack:1;break}if(f==null&&iron_object_Uniforms.externalFloatLinks!=null){let _g=0;let _g1=iron_object_Uniforms.externalFloatLinks;while(_g<_g1.length){let fn=_g1[_g];++_g;let res=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(res!=null){f=res;break}}}if(f==null){return}g.setFloat(location,f)}else if(c.type=="floats"){let fa=null;switch(c.link){case"_morphWeights":fa=js_Boot.__cast(object,iron_object_MeshObject).morphTarget.morphWeights;break;case"_skinBones":if(object.animation!=null){fa=js_Boot.__cast(object.animation,iron_object_BoneAnimation).skinBuffer}break}if(fa==null&&iron_object_Uniforms.externalFloatsLinks!=null){let _g=0;let _g1=iron_object_Uniforms.externalFloatsLinks;while(_g<_g1.length){let fn=_g1[_g];++_g;fa=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(fa!=null){break}}}if(fa==null){return}g.setFloats(location,fa)}else if(c.type=="int"){let i=null;if(c.link=="_uid"){i=object.uid}if(i==null&&iron_object_Uniforms.externalIntLinks!=null){let _g=0;let _g1=iron_object_Uniforms.externalIntLinks;while(_g<_g1.length){let fn=_g1[_g];++_g;let res=fn(object,iron_object_Uniforms.currentMat(object),c.link);if(res!=null){i=res;break}}}if(i==null){return}g.setInt(location,i)}}static setMaterialConstants(g,context,materialContext){if(materialContext.raw.bind_constants!=null){let _g=0;let _g1=materialContext.raw.bind_constants.length;while(_g<_g1){let i=_g++;let matc=materialContext.raw.bind_constants[i];let pos=-1;let _g1=0;let _g2=context.raw.constants.length;while(_g1<_g2){let i=_g1++;if(context.raw.constants[i].name==matc.name){pos=i;break}}if(pos==-1){continue}let c=context.raw.constants[pos];iron_object_Uniforms.setMaterialConstant(g,context.constants[pos],c,matc)}}if(materialContext.textures!=null){let _g=0;let _g1=materialContext.textures.length;while(_g<_g1){let i=_g++;let mname=materialContext.raw.bind_textures[i].name;let _g1=0;let _g2=context.textureUnits.length;while(_g1<_g2){let j=_g1++;let sname=context.raw.texture_units[j].name;if(mname==sname){g.setTexture(context.textureUnits[j],materialContext.textures[i]);materialContext.setTextureParameters(g,i,context,j);break}}}}}static currentMat(object){if(object!=null&&object instanceof iron_object_MeshObject){let mo=js_Boot.__cast(object,iron_object_MeshObject);return mo.materials[mo.materialIndex]}return null}static setMaterialConstant(g,location,c,matc){switch(c.type){case"bool":g.setBool(location,matc.bool);break;case"float":g.setFloat(location,matc.float);break;case"int":g.setInt(location,matc.int);break;case"vec2":g.setFloat2(location,matc.vec2.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec2.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN));break;case"vec3":g.setFloat3(location,matc.vec3.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec3.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec3.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN));break;case"vec4":g.setFloat4(location,matc.vec4.getFloat32(0,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec4.getFloat32(4,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec4.getFloat32(8,kha_arrays_ByteArray.LITTLE_ENDIAN),matc.vec4.getFloat32(12,kha_arrays_ByteArray.LITTLE_ENDIAN));break}}}$hxClasses["iron.object.Uniforms"]=iron_object_Uniforms;iron_object_Uniforms.__name__=true;class iron_system_ArmPack{static read(i,key,parentKey){if(parentKey==null){parentKey=""}if(key==null){key=""}try{let b=i.readByte();switch(b){case 192:return null;case 194:return false;case 195:return true;case 196:return i.read(i.readByte());case 197:return i.read(i.readUInt16());case 198:return i.read(i.readInt32());case 202:return i.readFloat();case 204:return i.readByte();case 205:return i.readUInt16();case 206:return i.readInt32();case 208:return i.readInt8();case 209:return i.readInt16();case 210:return i.readInt32();case 217:return i.readString(i.readByte());case 218:return i.readString(i.readUInt16());case 219:return i.readString(i.readInt32());case 220:return iron_system_ArmPack.readArray(i,i.readUInt16(),key,parentKey);case 221:return iron_system_ArmPack.readArray(i,i.readInt32(),key,parentKey);case 222:return iron_system_ArmPack.readMap(i,i.readUInt16(),key,parentKey);case 223:return iron_system_ArmPack.readMap(i,i.readInt32(),key,parentKey);default:if(b<128){return b}else if(b<144){return iron_system_ArmPack.readMap(i,15&b,key,parentKey)}else if(b<160){return iron_system_ArmPack.readArray(i,15&b,key,parentKey)}else if(b<192){return i.readString(31&b)}else if(b>223){return-256|b}}}catch(_g){if(!(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof)){throw _g}}return null}static readArray(i,length,key,parentKey){if(parentKey==null){parentKey=""}if(key==null){key=""}let b=i.readByte();i.set_position(i.pos-1);if(b==202){i.set_position(i.pos+1);let a=kha_arrays_Float32Array._new(length);let _g=0;let _g1=length;while(_g<_g1){let x=_g++;let v=i.readFloat();a.setFloat32(x*4,v,true)}return a}else if(b==210){i.set_position(i.pos+1);let a=kha_arrays_Uint32Array._new(length);let _g=0;let _g1=length;while(_g<_g1){let x=_g++;a.setUint32(x*4,i.readInt32(),kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=x*4}return a}else if(b==209){i.set_position(i.pos+1);let a=kha_arrays_Int16Array._new(length);let _g=0;let _g1=length;while(_g<_g1){let x=_g++;a.setInt16(x*2,i.readInt16(),kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=x*2}return a}else{let a=[];let _g=0;let _g1=length;while(_g<_g1){let x=_g++;a.push(iron_system_ArmPack.read(i,key,parentKey))}return a}}static readMap(i,length,key,parentKey){if(parentKey==null){parentKey=""}if(key==null){key=""}let out={};let _g=0;let _g1=length;while(_g<_g1){let n=_g++;let k=Std.string(iron_system_ArmPack.read(i));let v=iron_system_ArmPack.read(i,k,key);out[k]=v}return out}}$hxClasses["iron.system.ArmPack"]=iron_system_ArmPack;iron_system_ArmPack.__name__=true;class iron_system_Audio{static play(sound,loop,stream){if(stream==null){stream=false}if(loop==null){loop=false}if(stream&&sound.compressedData!=null){return kha_audio2_Audio1.stream(sound,loop)}else if(sound.uncompressedData!=null){return kha_audio2_Audio1.play(sound,loop)}else{return null}}}$hxClasses["iron.system.Audio"]=iron_system_Audio;iron_system_Audio.__name__=true;class iron_system_Input{static reset(){iron_system_Input.occupied=false;if(iron_system_Input.mouse!=null){iron_system_Input.mouse.reset()}if(iron_system_Input.pen!=null){iron_system_Input.pen.reset()}if(iron_system_Input.keyboard!=null){iron_system_Input.keyboard.reset()}let _g=0;let _g1=iron_system_Input.gamepads;while(_g<_g1.length){let gamepad=_g1[_g];++_g;gamepad.reset()}}static endFrame(){if(iron_system_Input.mouse!=null){iron_system_Input.mouse.endFrame()}if(iron_system_Input.pen!=null){iron_system_Input.pen.endFrame()}if(iron_system_Input.keyboard!=null){iron_system_Input.keyboard.endFrame()}let _g=0;let _g1=iron_system_Input.gamepads;while(_g<_g1.length){let gamepad=_g1[_g];++_g;gamepad.endFrame()}if(iron_system_Input.virtualButtons!=null){let h=iron_system_Input.virtualButtons.h;let vb_h=h;let vb_keys=Object.keys(h);let vb_length=vb_keys.length;let vb_current=0;while(vb_current<vb_length){let vb=vb_h[vb_keys[vb_current++]];vb.started=vb.released=false}}}static getMouse(){if(!iron_system_Input.registered){iron_system_Input.registered=true;iron_App.notifyOnEndFrame(iron_system_Input.endFrame);iron_App.notifyOnReset(iron_system_Input.reset);kha_System.notifyOnApplicationState(function(){iron_system_Input.getMouse().reset()},null,null,null,null)}if(iron_system_Input.mouse==null){iron_system_Input.mouse=new iron_system_Mouse}return iron_system_Input.mouse}static getPen(){if(!iron_system_Input.registered){iron_system_Input.registered=true;iron_App.notifyOnEndFrame(iron_system_Input.endFrame);iron_App.notifyOnReset(iron_system_Input.reset);kha_System.notifyOnApplicationState(function(){iron_system_Input.getMouse().reset()},null,null,null,null)}if(iron_system_Input.pen==null){iron_system_Input.pen=new iron_system_Pen}return iron_system_Input.pen}static getKeyboard(){if(!iron_system_Input.registered){iron_system_Input.registered=true;iron_App.notifyOnEndFrame(iron_system_Input.endFrame);iron_App.notifyOnReset(iron_system_Input.reset);kha_System.notifyOnApplicationState(function(){iron_system_Input.getMouse().reset()},null,null,null,null)}if(iron_system_Input.keyboard==null){iron_system_Input.keyboard=new iron_system_Keyboard}return iron_system_Input.keyboard}}$hxClasses["iron.system.Input"]=iron_system_Input;iron_system_Input.__name__=true;class iron_system_VirtualButton{constructor(){this.down=false;this.released=false;this.started=false}}$hxClasses["iron.system.VirtualButton"]=iron_system_VirtualButton;iron_system_VirtualButton.__name__=true;Object.assign(iron_system_VirtualButton.prototype,{__class__:iron_system_VirtualButton});class iron_system_VirtualInput{constructor(){if(iron_system_VirtualInput._hx_skip_constructor){return}this._hx_constructor()}_hx_constructor(){this.virtualButtons=null}downVirtual(button){if(this.virtualButtons!=null){let vb=this.virtualButtons.h[button];if(vb!=null){vb.down=true;vb.started=true}}}upVirtual(button){if(this.virtualButtons!=null){let vb=this.virtualButtons.h[button];if(vb!=null){vb.down=false;vb.released=true}}}}$hxClasses["iron.system.VirtualInput"]=iron_system_VirtualInput;iron_system_VirtualInput.__name__=true;Object.assign(iron_system_VirtualInput.prototype,{__class__:iron_system_VirtualInput});class iron_system_Mouse extends iron_system_VirtualInput{constructor(){iron_system_VirtualInput._hx_skip_constructor=true;super();iron_system_VirtualInput._hx_skip_constructor=false;this._hx_constructor()}_hx_constructor(){this.lastY=-1;this.lastX=-1;this.locked=false;this.wheelDelta=0;this.movementY=0;this.movementX=0;this.moved=false;this.y=0;this.x=0;this.buttonsReleased=[false,false,false,false,false];this.buttonsStarted=[false,false,false,false,false];this.buttonsDown=[false,false,false,false,false];super._hx_constructor();kha_input_Mouse.get().notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.moveListener),$bind(this,this.wheelListener))}endFrame(){let tmp=this.buttonsStarted[1]=this.buttonsStarted[2]=this.buttonsStarted[3]=this.buttonsStarted[4]=false;this.buttonsStarted[0]=tmp;let tmp1=this.buttonsReleased[1]=this.buttonsReleased[2]=this.buttonsReleased[3]=this.buttonsReleased[4]=false;this.buttonsReleased[0]=tmp1;this.moved=false;this.movementX=0;this.movementY=0;this.wheelDelta=0}reset(){let tmp=this.buttonsDown[1]=this.buttonsDown[2]=this.buttonsDown[3]=this.buttonsDown[4]=false;this.buttonsDown[0]=tmp;this.endFrame()}downListener(index,x,y){if(iron_system_Input.getPen().inUse){return}this.buttonsDown[index]=true;this.buttonsStarted[index]=true;this.x=x;this.y=y;this.downVirtual(iron_system_Mouse.buttons[index])}upListener(index,x,y){if(iron_system_Input.getPen().inUse){return}this.buttonsDown[index]=false;this.buttonsReleased[index]=true;this.x=x;this.y=y;this.upVirtual(iron_system_Mouse.buttons[index])}moveListener(x,y,movementX,movementY){if(this.lastX==-1&&this.lastY==-1){this.lastX=x;this.lastY=y}if(this.locked){this.movementX+=movementX;this.movementY+=movementY}else{this.movementX+=x-this.lastX;this.movementY+=y-this.lastY}this.lastX=x;this.lastY=y;this.x=x;this.y=y;this.moved=true}wheelListener(delta){this.wheelDelta=delta}}$hxClasses["iron.system.Mouse"]=iron_system_Mouse;iron_system_Mouse.__name__=true;iron_system_Mouse.__super__=iron_system_VirtualInput;Object.assign(iron_system_Mouse.prototype,{__class__:iron_system_Mouse});class iron_system_Pen extends iron_system_VirtualInput{constructor(){iron_system_VirtualInput._hx_skip_constructor=true;super();iron_system_VirtualInput._hx_skip_constructor=false;this._hx_constructor()}_hx_constructor(){this.lastY=-1;this.lastX=-1;this.inUse=false;this.connected=false;this.pressure=0;this.movementY=0;this.movementX=0;this.moved=false;this.y=0;this.x=0;this.buttonsReleased=[false];this.buttonsStarted=[false];this.buttonsDown=[false];super._hx_constructor();let pen=kha_input_Pen.get();if(pen!=null){pen.notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.moveListener))}}endFrame(){this.buttonsStarted[0]=false;this.buttonsReleased[0]=false;this.moved=false;this.movementX=0;this.movementY=0;this.inUse=false}reset(){this.buttonsDown[0]=false;this.endFrame()}downListener(x,y,pressure){this.buttonsDown[0]=true;this.buttonsStarted[0]=true;this.x=x;this.y=y;this.pressure=pressure;iron_system_Input.getMouse().downListener(0,x,y)}upListener(x,y,pressure){if(this.buttonsStarted[0]){this.buttonsStarted[0]=false;this.inUse=true;return}this.buttonsDown[0]=false;this.buttonsReleased[0]=true;this.x=x;this.y=y;this.pressure=pressure;iron_system_Input.getMouse().upListener(0,x,y);this.inUse=true}moveListener(x,y,pressure){if(this.lastX==-1&&this.lastY==-1){this.lastX=x;this.lastY=y}this.movementX=x-this.lastX;this.movementY=y-this.lastY;this.lastX=x;this.lastY=y;this.x=x;this.y=y;this.moved=true;this.pressure=pressure;this.connected=true}}$hxClasses["iron.system.Pen"]=iron_system_Pen;iron_system_Pen.__name__=true;iron_system_Pen.__super__=iron_system_VirtualInput;Object.assign(iron_system_Pen.prototype,{__class__:iron_system_Pen});class iron_system_Keyboard extends iron_system_VirtualInput{constructor(){iron_system_VirtualInput._hx_skip_constructor=true;super();iron_system_VirtualInput._hx_skip_constructor=false;this._hx_constructor()}_hx_constructor(){this.repeatTime=0;this.repeatKey=false;this.keysFrame=[];this.keysReleased=new haxe_ds_StringMap;this.keysStarted=new haxe_ds_StringMap;this.keysDown=new haxe_ds_StringMap;super._hx_constructor();this.reset();kha_input_Keyboard.get().notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.pressListener))}endFrame(){if(this.keysFrame.length>0){let _g=0;let _g1=this.keysFrame;while(_g<_g1.length){let s=_g1[_g];++_g;this.keysStarted.h[s]=false;this.keysReleased.h[s]=false}this.keysFrame.splice(0,this.keysFrame.length)}if(kha_Scheduler.time()-this.repeatTime>.05){this.repeatTime=kha_Scheduler.time();this.repeatKey=true}else{this.repeatKey=false}}reset(){let _g=0;let _g1=iron_system_Keyboard.keys;while(_g<_g1.length){let s=_g1[_g];++_g;this.keysDown.h[s]=false;this.keysStarted.h[s]=false;this.keysReleased.h[s]=false}this.endFrame()}down(key){return this.keysDown.h[key]}downListener(code){let s=iron_system_Keyboard.keyCode(code);this.keysFrame.push(s);this.keysStarted.h[s]=true;this.keysDown.h[s]=true;this.repeatTime=kha_Scheduler.time()+.4;this.downVirtual(s)}upListener(code){let s=iron_system_Keyboard.keyCode(code);this.keysFrame.push(s);this.keysReleased.h[s]=true;this.keysDown.h[s]=false;this.upVirtual(s)}pressListener(char){}static keyCode(key){switch(key){case 1:return"back";case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 20:return"capslock";case 27:return"escape";case 32:return"space";case 37:return"left";case 38:return"up";case 39:return"right";case 40:return"down";case 46:return"delete";case 48:return"0";case 49:return"1";case 50:return"2";case 51:return"3";case 52:return"4";case 53:return"5";case 54:return"6";case 55:return"7";case 56:return"8";case 57:return"9";case 58:return":";case 59:return";";case 60:return"<";case 61:return"=";case 62:return">";case 63:return"?";case 64:return"@";case 91:return"win";case 96:return"0";case 97:return"1";case 98:return"2";case 99:return"3";case 100:return"4";case 101:return"5";case 102:return"6";case 103:return"7";case 104:return"8";case 105:return"9";case 106:return"*";case 107:return"+";case 109:return"-";case 110:return".";case 111:return"/";case 112:return"f1";case 113:return"f2";case 114:return"f3";case 115:return"f4";case 116:return"f5";case 117:return"f6";case 118:return"f7";case 119:return"f8";case 120:return"f9";case 121:return"f10";case 122:return"f11";case 123:return"f12";case 161:return"!";case 162:return'"';case 163:return"#";case 164:return"$";case 165:return"%";case 166:return"&";case 167:return"_";case 168:return"(";case 169:return")";case 170:return"*";case 171:return"+";case 172:return"|";case 173:return"-";case 174:return"{";case 175:return"}";case 176:return"~";case 188:return",";case 190:return".";case 191:return"/";case 192:return"`";case 219:return"[";case 220:return"\\";case 221:return"]";default:return String.fromCodePoint(key).toLowerCase()}}}$hxClasses["iron.system.Keyboard"]=iron_system_Keyboard;iron_system_Keyboard.__name__=true;iron_system_Keyboard.__super__=iron_system_VirtualInput;Object.assign(iron_system_Keyboard.prototype,{__class__:iron_system_Keyboard});class iron_system_GamepadStick{constructor(){this.movementY=0;this.movementX=0;this.moved=false;this.lastY=0;this.lastX=0;this.y=0;this.x=0}}$hxClasses["iron.system.GamepadStick"]=iron_system_GamepadStick;iron_system_GamepadStick.__name__=true;Object.assign(iron_system_GamepadStick.prototype,{__class__:iron_system_GamepadStick});class iron_system_Gamepad extends iron_system_VirtualInput{constructor(i,virtual){iron_system_VirtualInput._hx_skip_constructor=true;super();iron_system_VirtualInput._hx_skip_constructor=false;this._hx_constructor(i,virtual)}_hx_constructor(i,virtual){if(virtual==null){virtual=false}this.num=0;this.connected=false;this.rightStick=new iron_system_GamepadStick;this.leftStick=new iron_system_GamepadStick;this.buttonsFrame=[];this.buttonsReleased=[];this.buttonsStarted=[];this.buttonsDown=[];super._hx_constructor();let _g=0;let _g1=iron_system_Gamepad.buttons;while(_g<_g1.length){let s=_g1[_g];++_g;this.buttonsDown.push(0);this.buttonsStarted.push(false);this.buttonsReleased.push(false)}this.num=i;this.reset();if(virtual){this.connected=true}else{this.connect()}}connect(){let gamepad=kha_input_Gamepad.get(this.num);if(gamepad==null){return}this.connected=true;gamepad.notify($bind(this,this.axisListener),$bind(this,this.buttonListener))}endFrame(){if(this.buttonsFrame.length>0){let _g=0;let _g1=this.buttonsFrame;while(_g<_g1.length){let i=_g1[_g];++_g;this.buttonsStarted[i]=false;this.buttonsReleased[i]=false}this.buttonsFrame.splice(0,this.buttonsFrame.length)}this.leftStick.moved=false;this.leftStick.movementX=0;this.leftStick.movementY=0;this.rightStick.moved=false;this.rightStick.movementX=0;this.rightStick.movementY=0}reset(){let _g=0;let _g1=this.buttonsDown.length;while(_g<_g1){let i=_g++;this.buttonsDown[i]=0;this.buttonsStarted[i]=false;this.buttonsReleased[i]=false}this.endFrame()}axisListener(axis,value){let stick=axis<=1?this.leftStick:this.rightStick;if(axis==0||axis==2){stick.lastX=stick.x;stick.x=value;stick.movementX=stick.x-stick.lastX}else if(axis==1||axis==3){stick.lastY=stick.y;stick.y=value;stick.movementY=stick.y-stick.lastY}stick.moved=true}buttonListener(button,value){this.buttonsFrame.push(button);this.buttonsDown[button]=value;if(value>0){this.buttonsStarted[button]=true}else{this.buttonsReleased[button]=true}if(value==0){this.upVirtual(iron_system_Gamepad.buttons[button])}else if(value==1){this.downVirtual(iron_system_Gamepad.buttons[button])}}}$hxClasses["iron.system.Gamepad"]=iron_system_Gamepad;iron_system_Gamepad.__name__=true;iron_system_Gamepad.__super__=iron_system_VirtualInput;Object.assign(iron_system_Gamepad.prototype,{__class__:iron_system_Gamepad});class iron_system_Time{static get_delta(){if(iron_system_Time.frequency==null){iron_system_Time.initFrequency()}return 1/iron_system_Time.frequency*iron_system_Time.scale}static initFrequency(){iron_system_Time.frequency=kha_Display.get_primary()!=null?kha_Display.get_primary().get_frequency():60}static update(){iron_system_Time.realDelta=kha_Scheduler.realTime()-iron_system_Time.last;iron_system_Time.last=kha_Scheduler.realTime()}}$hxClasses["iron.system.Time"]=iron_system_Time;iron_system_Time.__name__=true;iron_system_Time.__properties__={get_delta:"get_delta"};class js_Boot{static getClass(o){if(o==null){return null}else if(o instanceof Array){return Array}else{let cl=o.__class__;if(cl!=null){return cl}let name=js_Boot.__nativeClassName(o);if(name!=null){return js_Boot.__resolveNativeClass(name)}return null}}static __string_rec(o,s){if(o==null){return"null"}if(s.length>=5){return"<...>"}let t=typeof o;if(t=="function"&&(o.__name__||o.__ename__)){t="object"}switch(t){case"function":return"<function>";case"object":if(o.__enum__){let e=$hxEnums[o.__enum__];let con=e.__constructs__[o._hx_index];let n=con._hx_name;if(con.__params__){s=s+"\t";return n+"("+function($this){var $r;let _g=[];{let _g1=0;let _g2=con.__params__;while(true){if(!(_g1<_g2.length)){break}let p=_g2[_g1];_g1=_g1+1;_g.push(js_Boot.__string_rec(o[p],s))}}$r=_g;return $r}(this).join(",")+")"}else{return n}}if(o instanceof Array){let str="[";s+="\t";let _g=0;let _g1=o.length;while(_g<_g1){let i=_g++;str+=(i>0?",":"")+js_Boot.__string_rec(o[i],s)}str+="]";return str}let tostr;try{tostr=o.toString}catch(_g){return"???"}if(tostr!=null&&tostr!=Object.toString&&typeof tostr=="function"){let s2=o.toString();if(s2!="[object Object]"){return s2}}let str="{\n";s+="\t";let hasp=o.hasOwnProperty!=null;let k=null;for(k in o){if(hasp&&!o.hasOwnProperty(k)){continue}if(k=="prototype"||k=="__class__"||k=="__super__"||k=="__interfaces__"||k=="__properties__"){continue}if(str.length!=2){str+=", \n"}str+=s+k+" : "+js_Boot.__string_rec(o[k],s)}s=s.substring(1);str+="\n"+s+"}";return str;case"string":return o;default:return String(o)}}static __interfLoop(cc,cl){if(cc==null){return false}if(cc==cl){return true}let intf=cc.__interfaces__;if(intf!=null&&(cc.__super__==null||cc.__super__.__interfaces__!=intf)){let _g=0;let _g1=intf.length;while(_g<_g1){let i=_g++;let i1=intf[i];if(i1==cl||js_Boot.__interfLoop(i1,cl)){return true}}}return js_Boot.__interfLoop(cc.__super__,cl)}static __instanceof(o,cl){if(cl==null){return false}switch(cl){case Array:return o instanceof Array;case Bool:return typeof o=="boolean";case Dynamic:return o!=null;case Float:return typeof o=="number";case Int:if(typeof o=="number"){return(o|0)===o}else{return false}break;case String:return typeof o=="string";default:if(o!=null){if(typeof cl=="function"){if(js_Boot.__downcastCheck(o,cl)){return true}}else if(typeof cl=="object"&&js_Boot.__isNativeObj(cl)){if(o instanceof cl){return true}}}else{return false}if(cl==Class?o.__name__!=null:false){return true}if(cl==Enum?o.__ename__!=null:false){return true}return o.__enum__!=null?$hxEnums[o.__enum__]==cl:false}}static __downcastCheck(o,cl){if(!(o instanceof cl)){if(cl.__isInterface__){return js_Boot.__interfLoop(js_Boot.getClass(o),cl)}else{return false}}else{return true}}static __cast(o,t){if(o==null||js_Boot.__instanceof(o,t)){return o}else{throw haxe_Exception.thrown("Cannot cast "+Std.string(o)+" to "+Std.string(t))}}static __nativeClassName(o){let name=js_Boot.__toStr.call(o).slice(8,-1);if(name=="Object"||name=="Function"||name=="Math"||name=="JSON"){return null}return name}static __isNativeObj(o){return js_Boot.__nativeClassName(o)!=null}static __resolveNativeClass(name){return $global[name]}}$hxClasses["js.Boot"]=js_Boot;js_Boot.__name__=true;class kha_Assets{static loadImageFromPath(path,readable,done,failed,pos){let description={files:[path],readable:readable};kha_LoaderImpl.loadImageFromDescription(description,done,kha_Assets.reporter(failed,pos))}static loadBlobFromPath(path,done,failed,pos){let description={files:[path]};kha_LoaderImpl.loadBlobFromDescription(description,done,kha_Assets.reporter(failed,pos))}static loadSoundFromPath(path,done,failed,pos){let description={files:[path]};kha_LoaderImpl.loadSoundFromDescription(description,done,kha_Assets.reporter(failed,pos))}static reporter(custom,pos){if(custom!=null){return custom}else{let _g=haxe_Log.trace;let infos=pos;return function(v){_g(v,infos)}}}}$hxClasses["kha.Assets"]=kha_Assets;kha_Assets.__name__=true;class kha_Canvas{}$hxClasses["kha.Canvas"]=kha_Canvas;kha_Canvas.__name__=true;kha_Canvas.__isInterface__=true;Object.assign(kha_Canvas.prototype,{__class__:kha_Canvas,__properties__:{get_g4:"get_g4",get_height:"get_height",get_width:"get_width"}});class kha_Color{static fromFloats(r,g,b,a){if(a==null){a=1}return kha_Color._new((a*255|0)<<24|(r*255|0)<<16|(g*255|0)<<8|(b*255|0))}static _new(value){let this1=value;return this1}}class kha_Display{constructor(num,isPrimary){this.num=num;this.isPrimary=isPrimary}get_frequency(){return 60}static init(){if(kha_Display.displays==null){kha_Display.displays=[];let _g=0;let _g1=Krom.displayCount();while(_g<_g1){let i=_g++;kha_Display.displays.push(new kha_Display(i,Krom.displayIsPrimary(i)))}}}static get_primary(){kha_Display.init();let _g=0;let _g1=kha_Display.displays;while(_g<_g1.length){let display=_g1[_g];++_g;if(display.isPrimary){return display}}return null}}$hxClasses["kha.Display"]=kha_Display;kha_Display.__name__=true;kha_Display.__properties__={get_primary:"get_primary"};Object.assign(kha_Display.prototype,{__class__:kha_Display,__properties__:{get_frequency:"get_frequency"}});class kha_Framebuffer{constructor($window,g1,g2,g4){this.window=$window;this.graphics1=g1;this.graphics2=g2;this.graphics4=g4}init(g1,g2,g4){this.graphics1=g1;this.graphics2=g2;this.graphics4=g4}get_g2(){return this.graphics2}get_g4(){return this.graphics4}get_width(){return kha_System.windowWidth(this.window)}get_height(){return kha_System.windowHeight(this.window)}}$hxClasses["kha.Framebuffer"]=kha_Framebuffer;kha_Framebuffer.__name__=true;kha_Framebuffer.__interfaces__=[kha_Canvas];Object.assign(kha_Framebuffer.prototype,{__class__:kha_Framebuffer,__properties__:{get_height:"get_height",get_width:"get_width",get_g4:"get_g4",get_g2:"get_g2"}});class kha_FramebufferOptions{constructor(frequency,verticalSync,colorBufferBits,depthBufferBits,stencilBufferBits,samplesPerPixel){if(samplesPerPixel==null){samplesPerPixel=1}if(stencilBufferBits==null){stencilBufferBits=8}if(depthBufferBits==null){depthBufferBits=16}if(colorBufferBits==null){colorBufferBits=32}if(verticalSync==null){verticalSync=true}if(frequency==null){frequency=60}this.samplesPerPixel=1;this.stencilBufferBits=8;this.depthBufferBits=16;this.colorBufferBits=32;this.verticalSync=true;this.frequency=60;this.frequency=frequency;this.verticalSync=verticalSync;this.colorBufferBits=colorBufferBits;this.depthBufferBits=depthBufferBits;this.stencilBufferBits=stencilBufferBits;this.samplesPerPixel=samplesPerPixel}}$hxClasses["kha.FramebufferOptions"]=kha_FramebufferOptions;kha_FramebufferOptions.__name__=true;Object.assign(kha_FramebufferOptions.prototype,{__class__:kha_FramebufferOptions});class kha_Resource{}$hxClasses["kha.Resource"]=kha_Resource;kha_Resource.__name__=true;kha_Resource.__isInterface__=true;class kha_Image{constructor(texture){this.texture_=texture}unload(){Krom.unloadImage(this);this.texture_=null;this.renderTarget_=null}generateMipmaps(levels){if(this.texture_==null){Krom.generateRenderTargetMipmaps(this.renderTarget_,levels)}else{Krom.generateTextureMipmaps(this.texture_,levels)}}setMipmaps(mipmaps){Krom.setMipmaps(this.texture_,mipmaps)}setDepthStencilFrom(image){Krom.setDepthStencilFrom(this.renderTarget_,image.renderTarget_)}get_width(){if(this.texture_==null){return this.renderTarget_.width}else{return this.texture_.width}}get_height(){if(this.texture_==null){return this.renderTarget_.height}else{return this.texture_.height}}get_depth(){if(this.texture_!=null){return this.texture_.depth}else{return 1}}get_g4(){if(this.graphics4==null){this.graphics4=new kha_krom_Graphics(this)}return this.graphics4}static getRenderTargetFormat(format){switch(format){case 0:return 0;case 1:return 5;case 2:return 3;case 3:return 4;case 4:return 1;case 5:return 2;case 6:return 6;default:return 0}}static getDepthBufferBits(depthAndStencil){switch(depthAndStencil){case 0:return-1;case 1:return 24;case 2:return 24;case 3:return 24;case 4:return 32;case 5:return 16}}static getStencilBufferBits(depthAndStencil){switch(depthAndStencil){case 0:return-1;case 1:return-1;case 2:return 8;case 3:return 8;case 4:return 8;case 5:return 0}}static getTextureFormat(format){switch(format){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;case 6:return 7;default:return 1}}static _fromTexture(texture){return new kha_Image(texture)}static fromBytes(bytes,width,height,format,usage,readable){if(readable==null){readable=false}if(format==null){format=0}let image=new kha_Image(null);image.myFormat=format;image.texture_=Krom.createTextureFromBytes(bytes.b.bufferValue,width,height,kha_Image.getTextureFormat(format),readable);return image}static fromBytes3D(bytes,width,height,depth,format,usage,readable){if(readable==null){readable=false}if(format==null){format=0}let image=new kha_Image(null);image.myFormat=format;image.texture_=Krom.createTextureFromBytes3D(bytes.b.bufferValue,width,height,depth,kha_Image.getTextureFormat(format),readable);return image}static create(width,height,format,usage,readable){if(readable==null){readable=false}if(format==null){format=0}let image=new kha_Image(null);image.myFormat=format;image.texture_=Krom.createTexture(width,height,kha_Image.getTextureFormat(format));return image}static create3D(width,height,depth,format,usage,readable){if(readable==null){readable=false}if(format==null){format=0}let image=new kha_Image(null);image.myFormat=format;image.texture_=Krom.createTexture3D(width,height,depth,kha_Image.getTextureFormat(format));return image}static createRenderTarget(width,height,format,depthStencil,antiAliasingSamples){if(antiAliasingSamples==null){antiAliasingSamples=1}if(depthStencil==null){depthStencil=0}if(format==null){format=0}let image=new kha_Image(null);image.myFormat=format;image.renderTarget_=Krom.createRenderTarget(width,height,kha_Image.getRenderTargetFormat(format),kha_Image.getDepthBufferBits(depthStencil),kha_Image.getStencilBufferBits(depthStencil));return image}static get_nonPow2Supported(){return true}static renderTargetsInvertedY(){return Krom.renderTargetsInvertedY()}}$hxClasses["kha.Image"]=kha_Image;kha_Image.__name__=true;kha_Image.__interfaces__=[kha_Resource,kha_Canvas];kha_Image.__properties__={get_nonPow2Supported:"get_nonPow2Supported"};Object.assign(kha_Image.prototype,{__class__:kha_Image,__properties__:{get_g4:"get_g4",get_depth:"get_depth",get_height:"get_height",get_width:"get_width"}});class kha_LoaderImpl{static loadImageFromDescription(desc,done,failed){let readable=Object.prototype.hasOwnProperty.call(desc,"readable")&&desc.readable;let texture=Krom.loadImage(desc.files[0],readable);if(texture==null){failed({url:desc.files.join(","),error:"Could not load image(s)"})}else{done(kha_Image._fromTexture(texture))}}static loadSoundFromDescription(desc,done,failed){let sound=Krom.loadSound(desc.files[0]);if(sound==null){failed({url:desc.files.join(","),error:"Could not load sound(s)"})}else{done(new kha_krom_Sound(haxe_io_Bytes.ofData(sound)))}}static loadBlobFromDescription(desc,done,failed){let blob=Krom.loadBlob(desc.files[0]);if(blob==null){failed({url:desc.files.join(","),error:"Could not load blob(s)"})}else{done(new kha_internal_BytesBlob(haxe_io_Bytes.ofData(blob)))}}}$hxClasses["kha.LoaderImpl"]=kha_LoaderImpl;kha_LoaderImpl.__name__=true;class kha_TimeTask{constructor(){}}$hxClasses["kha.TimeTask"]=kha_TimeTask;kha_TimeTask.__name__=true;Object.assign(kha_TimeTask.prototype,{__class__:kha_TimeTask});class kha_FrameTask{constructor(task,priority,id){this.task=task;this.priority=priority;this.id=id;this.active=true;this.paused=false}}$hxClasses["kha.FrameTask"]=kha_FrameTask;kha_FrameTask.__name__=true;Object.assign(kha_FrameTask.prototype,{__class__:kha_FrameTask});class kha_Scheduler{static init(){kha_Scheduler.deltas=[];let _g=0;let _g1=kha_Scheduler.DIF_COUNT;while(_g<_g1){let i=_g++;kha_Scheduler.deltas[i]=0}kha_Scheduler.stopped=true;kha_Scheduler.frame_tasks_sorted=true;kha_Scheduler.current=kha_Scheduler.lastTime=kha_Scheduler.lastFrameEnd=kha_Scheduler.realTime();kha_Scheduler.currentFrameTaskId=0;kha_Scheduler.currentTimeTaskId=0;kha_Scheduler.currentGroupId=0;kha_Scheduler.timeTasks=[];kha_Scheduler.pausedTimeTasks=[];kha_Scheduler.outdatedTimeTasks=[];kha_Scheduler.timeTasksScratchpad=[];kha_Scheduler.frameTasks=[];kha_Scheduler.toDeleteFrame=[]}static start(restartTimers){if(restartTimers==null){restartTimers=false}kha_Scheduler.vsync=kha_Window.get(0).get_vSynced();let hz=kha_Display.get_primary()!=null?kha_Display.get_primary().get_frequency():60;if(hz>=57&&hz<=63){hz=60}kha_Scheduler.onedifhz=1/hz;kha_Scheduler.stopped=false;kha_Scheduler.resetTime();kha_Scheduler.lastTime=kha_Scheduler.realTime()-kha_Scheduler.startTime;let _g=0;let _g1=kha_Scheduler.DIF_COUNT;while(_g<_g1){let i=_g++;kha_Scheduler.deltas[i]=0}if(restartTimers){let _g=0;let _g1=kha_Scheduler.timeTasks;while(_g<_g1.length){let timeTask=_g1[_g];++_g;timeTask.paused=false}let _g2=0;let _g3=kha_Scheduler.frameTasks;while(_g2<_g3.length){let frameTask=_g3[_g2];++_g2;frameTask.paused=false}}}static executeFrame(){let real=kha_Scheduler.realTime();let now=real-kha_Scheduler.startTime;let delta=now-kha_Scheduler.lastTime;let frameEnd=kha_Scheduler.lastFrameEnd;if(delta>=0){if(kha_netsync_Session.the()==null){if(delta>kha_Scheduler.maxframetime){kha_Scheduler.startTime+=delta-kha_Scheduler.maxframetime;now=real-kha_Scheduler.startTime;delta=kha_Scheduler.maxframetime;frameEnd+=delta}else if(kha_Scheduler.vsync){let frames=Math.round(delta/kha_Scheduler.onedifhz);if(frames<1){return}let realdif=frames*kha_Scheduler.onedifhz;delta=realdif;let _g=0;let _g1=kha_Scheduler.DIF_COUNT-2;while(_g<_g1){let i=_g++;delta+=kha_Scheduler.deltas[i];kha_Scheduler.deltas[i]=kha_Scheduler.deltas[i+1]}delta+=kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2];delta/=kha_Scheduler.DIF_COUNT;kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-2]=realdif;frameEnd+=delta}else{let _g=0;let _g1=kha_Scheduler.DIF_COUNT-1;while(_g<_g1){let i=_g++;kha_Scheduler.deltas[i]=kha_Scheduler.deltas[i+1]}kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT-1]=delta;let next=0;let _g2=0;let _g3=kha_Scheduler.DIF_COUNT;while(_g2<_g3){let i=_g2++;next+=kha_Scheduler.deltas[i]}next/=kha_Scheduler.DIF_COUNT;frameEnd+=next}}else{frameEnd+=delta}kha_Scheduler.lastTime=now;if(!kha_Scheduler.stopped){kha_Scheduler.lastFrameEnd=frameEnd}let _g=0;let _g1=kha_Scheduler.pausedTimeTasks;while(_g<_g1.length){let pausedTask=_g1[_g];++_g;pausedTask.next+=delta}if(kha_Scheduler.stopped){let _g=0;let _g1=kha_Scheduler.timeTasks;while(_g<_g1.length){let timeTask=_g1[_g];++_g;timeTask.next+=delta}}kha_Scheduler.executeTimeTasks(frameEnd);let _g2=0;let _g3=kha_Scheduler.outdatedTimeTasks;while(_g2<_g3.length){let task=_g3[_g2];++_g2;if(task.next<frameEnd-10){kha_Scheduler.timeTasksScratchpad.push(task)}}let _g4=0;let _g5=kha_Scheduler.timeTasksScratchpad;while(_g4<_g5.length){let task=_g5[_g4];++_g4;HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,task)}while(kha_Scheduler.timeTasksScratchpad.length>0)HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0])}kha_Scheduler.current=frameEnd;kha_Scheduler.sortFrameTasks();let _g=0;let _g1=kha_Scheduler.frameTasks;while(_g<_g1.length){let frameTask=_g1[_g];++_g;if(!kha_Scheduler.stopped&&!frameTask.paused&&frameTask.active){if(!frameTask.task()){frameTask.active=false}}}let _g2=0;let _g3=kha_Scheduler.frameTasks;while(_g2<_g3.length){let frameTask=_g3[_g2];++_g2;if(!frameTask.active){kha_Scheduler.toDeleteFrame.push(frameTask)}}while(kha_Scheduler.toDeleteFrame.length>0)HxOverrides.remove(kha_Scheduler.frameTasks,kha_Scheduler.toDeleteFrame.pop())}static executeTimeTasks(until){while(kha_Scheduler.timeTasks.length>0){kha_Scheduler.activeTimeTask=kha_Scheduler.timeTasks[0];if(kha_Scheduler.activeTimeTask.next<=until){kha_Scheduler.current=kha_Scheduler.activeTimeTask.next;kha_Scheduler.activeTimeTask.next+=kha_Scheduler.activeTimeTask.period;HxOverrides.remove(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask);if(kha_Scheduler.activeTimeTask.active&&kha_Scheduler.activeTimeTask.task()){if(kha_Scheduler.activeTimeTask.period>0&&(kha_Scheduler.activeTimeTask.duration==0||kha_Scheduler.activeTimeTask.duration>=kha_Scheduler.activeTimeTask.start+kha_Scheduler.activeTimeTask.next)){kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask)}else{kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,until)}}else{kha_Scheduler.activeTimeTask.active=false;kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,until)}}else{break}}kha_Scheduler.activeTimeTask=null}static archiveTimeTask(timeTask,frameEnd){}static time(){return kha_Scheduler.current}static realTime(){return kha_System.get_time()}static resetTime(){let now=kha_System.get_time();let dif=now-kha_Scheduler.startTime;kha_Scheduler.startTime=now;let _g=0;let _g1=kha_Scheduler.timeTasks;while(_g<_g1.length){let timeTask=_g1[_g];++_g;timeTask.start-=dif;timeTask.next-=dif}let _g2=0;let _g3=kha_Scheduler.DIF_COUNT;while(_g2<_g3){let i=_g2++;kha_Scheduler.deltas[i]=0}kha_Scheduler.current=0;kha_Scheduler.lastTime=0;kha_Scheduler.lastFrameEnd=0}static addBreakableTimeTaskToGroup(groupId,task,start,period,duration){if(duration==null){duration=0}if(period==null){period=0}let t=new kha_TimeTask;t.active=true;t.task=task;t.id=++kha_Scheduler.currentTimeTaskId;t.groupId=groupId;t.start=kha_Scheduler.current+start;t.period=0;if(period!=0){t.period=period}t.duration=0;if(duration!=0){t.duration=t.start+duration}t.next=t.start;kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,t);return t.id}static addTimeTaskToGroup(groupId,task,start,period,duration){if(duration==null){duration=0}if(period==null){period=0}return kha_Scheduler.addBreakableTimeTaskToGroup(groupId,function(){task();return true},start,period,duration)}static addTimeTask(task,start,period,duration){if(duration==null){duration=0}if(period==null){period=0}return kha_Scheduler.addTimeTaskToGroup(0,task,start,period,duration)}static insertSorted(list,task){let _g=0;let _g1=list.length;while(_g<_g1){let i=_g++;if(list[i].next>task.next){list.splice(i,0,task);return}}list.push(task)}static sortFrameTasks(){if(kha_Scheduler.frame_tasks_sorted){return}kha_Scheduler.frameTasks.sort(function(a,b){if(a.priority>b.priority){return 1}else if(a.priority<b.priority){return-1}else{return 0}});kha_Scheduler.frame_tasks_sorted=true}}$hxClasses["kha.Scheduler"]=kha_Scheduler;kha_Scheduler.__name__=true;class kha_Shaders{static init(){let blobs=[];let data=Reflect.field(kha_Shaders,"Default_Material_mesh_fragData"+0);let bytes=haxe_Unserializer.run(data);blobs.push(kha_internal_BytesBlob.fromBytes(bytes));kha_Shaders.Default_Material_mesh_frag=new kha_graphics4_FragmentShader(blobs,["Default_Material_mesh.frag.d3d11"]);let blobs1=[];let data1=Reflect.field(kha_Shaders,"Default_Material_mesh_vertData"+0);let bytes1=haxe_Unserializer.run(data1);blobs1.push(kha_internal_BytesBlob.fromBytes(bytes1));kha_Shaders.Default_Material_mesh_vert=new kha_graphics4_VertexShader(blobs1,["Default_Material_mesh.vert.d3d11"]);let blobs2=[];let data2=Reflect.field(kha_Shaders,"Default_Material_shadowmap_fragData"+0);let bytes2=haxe_Unserializer.run(data2);blobs2.push(kha_internal_BytesBlob.fromBytes(bytes2));kha_Shaders.Default_Material_shadowmap_frag=new kha_graphics4_FragmentShader(blobs2,["Default_Material_shadowmap.frag.d3d11"]);let blobs3=[];let data3=Reflect.field(kha_Shaders,"Default_Material_shadowmap_vertData"+0);let bytes3=haxe_Unserializer.run(data3);blobs3.push(kha_internal_BytesBlob.fromBytes(bytes3));kha_Shaders.Default_Material_shadowmap_vert=new kha_graphics4_VertexShader(blobs3,["Default_Material_shadowmap.vert.d3d11"]);let blobs4=[];let data4=Reflect.field(kha_Shaders,"World_World_fragData"+0);let bytes4=haxe_Unserializer.run(data4);blobs4.push(kha_internal_BytesBlob.fromBytes(bytes4));kha_Shaders.World_World_frag=new kha_graphics4_FragmentShader(blobs4,["World_World.frag.d3d11"]);let blobs5=[];let data5=Reflect.field(kha_Shaders,"World_World_vertData"+0);let bytes5=haxe_Unserializer.run(data5);blobs5.push(kha_internal_BytesBlob.fromBytes(bytes5));kha_Shaders.World_World_vert=new kha_graphics4_VertexShader(blobs5,["World_World.vert.d3d11"]);let blobs6=[];let data6=Reflect.field(kha_Shaders,"blur_edge_pass_fragData"+0);let bytes6=haxe_Unserializer.run(data6);blobs6.push(kha_internal_BytesBlob.fromBytes(bytes6));kha_Shaders.blur_edge_pass_frag=new kha_graphics4_FragmentShader(blobs6,["blur_edge_pass.frag.d3d11"]);let blobs7=[];let data7=Reflect.field(kha_Shaders,"compositor_pass_fragData"+0);let bytes7=haxe_Unserializer.run(data7);blobs7.push(kha_internal_BytesBlob.fromBytes(bytes7));kha_Shaders.compositor_pass_frag=new kha_graphics4_FragmentShader(blobs7,["compositor_pass.frag.d3d11"]);let blobs8=[];let data8=Reflect.field(kha_Shaders,"compositor_pass_vertData"+0);let bytes8=haxe_Unserializer.run(data8);blobs8.push(kha_internal_BytesBlob.fromBytes(bytes8));kha_Shaders.compositor_pass_vert=new kha_graphics4_VertexShader(blobs8,["compositor_pass.vert.d3d11"]);let blobs9=[];let data9=Reflect.field(kha_Shaders,"deferred_light_fragData"+0);let bytes9=haxe_Unserializer.run(data9);blobs9.push(kha_internal_BytesBlob.fromBytes(bytes9));kha_Shaders.deferred_light_frag=new kha_graphics4_FragmentShader(blobs9,["deferred_light.frag.d3d11"]);let blobs10=[];let data10=Reflect.field(kha_Shaders,"lambert1_mesh_fragData"+0);let bytes10=haxe_Unserializer.run(data10);blobs10.push(kha_internal_BytesBlob.fromBytes(bytes10));kha_Shaders.lambert1_mesh_frag=new kha_graphics4_FragmentShader(blobs10,["lambert1_mesh.frag.d3d11"]);let blobs11=[];let data11=Reflect.field(kha_Shaders,"lambert3_001_mesh_fragData"+0);let bytes11=haxe_Unserializer.run(data11);blobs11.push(kha_internal_BytesBlob.fromBytes(bytes11));kha_Shaders.lambert3_001_mesh_frag=new kha_graphics4_FragmentShader(blobs11,["lambert3_001_mesh.frag.d3d11"]);let blobs12=[];let data12=Reflect.field(kha_Shaders,"painter_colored_fragData"+0);let bytes12=haxe_Unserializer.run(data12);blobs12.push(kha_internal_BytesBlob.fromBytes(bytes12));kha_Shaders.painter_colored_frag=new kha_graphics4_FragmentShader(blobs12,["painter-colored.frag.d3d11"]);let blobs13=[];let data13=Reflect.field(kha_Shaders,"painter_colored_vertData"+0);let bytes13=haxe_Unserializer.run(data13);blobs13.push(kha_internal_BytesBlob.fromBytes(bytes13));kha_Shaders.painter_colored_vert=new kha_graphics4_VertexShader(blobs13,["painter-colored.vert.d3d11"]);let blobs14=[];let data14=Reflect.field(kha_Shaders,"painter_image_fragData"+0);let bytes14=haxe_Unserializer.run(data14);blobs14.push(kha_internal_BytesBlob.fromBytes(bytes14));kha_Shaders.painter_image_frag=new kha_graphics4_FragmentShader(blobs14,["painter-image.frag.d3d11"]);let blobs15=[];let data15=Reflect.field(kha_Shaders,"painter_image_vertData"+0);let bytes15=haxe_Unserializer.run(data15);blobs15.push(kha_internal_BytesBlob.fromBytes(bytes15));kha_Shaders.painter_image_vert=new kha_graphics4_VertexShader(blobs15,["painter-image.vert.d3d11"]);let blobs16=[];let data16=Reflect.field(kha_Shaders,"painter_text_fragData"+0);let bytes16=haxe_Unserializer.run(data16);blobs16.push(kha_internal_BytesBlob.fromBytes(bytes16));kha_Shaders.painter_text_frag=new kha_graphics4_FragmentShader(blobs16,["painter-text.frag.d3d11"]);let blobs17=[];let data17=Reflect.field(kha_Shaders,"painter_text_vertData"+0);let bytes17=haxe_Unserializer.run(data17);blobs17.push(kha_internal_BytesBlob.fromBytes(bytes17));kha_Shaders.painter_text_vert=new kha_graphics4_VertexShader(blobs17,["painter-text.vert.d3d11"]);let blobs18=[];let data18=Reflect.field(kha_Shaders,"painter_video_fragData"+0);let bytes18=haxe_Unserializer.run(data18);blobs18.push(kha_internal_BytesBlob.fromBytes(bytes18));kha_Shaders.painter_video_frag=new kha_graphics4_FragmentShader(blobs18,["painter-video.frag.d3d11"]);let blobs19=[];let data19=Reflect.field(kha_Shaders,"painter_video_vertData"+0);let bytes19=haxe_Unserializer.run(data19);blobs19.push(kha_internal_BytesBlob.fromBytes(bytes19));kha_Shaders.painter_video_vert=new kha_graphics4_VertexShader(blobs19,["painter-video.vert.d3d11"]);let blobs20=[];let data20=Reflect.field(kha_Shaders,"pass_copy_fragData"+0);let bytes20=haxe_Unserializer.run(data20);blobs20.push(kha_internal_BytesBlob.fromBytes(bytes20));kha_Shaders.pass_copy_frag=new kha_graphics4_FragmentShader(blobs20,["pass_copy.frag.d3d11"]);let blobs21=[];let data21=Reflect.field(kha_Shaders,"pass_vertData"+0);let bytes21=haxe_Unserializer.run(data21);blobs21.push(kha_internal_BytesBlob.fromBytes(bytes21));kha_Shaders.pass_vert=new kha_graphics4_VertexShader(blobs21,["pass.vert.d3d11"]);let blobs22=[];let data22=Reflect.field(kha_Shaders,"pass_viewray_vertData"+0);let bytes22=haxe_Unserializer.run(data22);blobs22.push(kha_internal_BytesBlob.fromBytes(bytes22));kha_Shaders.pass_viewray_vert=new kha_graphics4_VertexShader(blobs22,["pass_viewray.vert.d3d11"]);let blobs23=[];let data23=Reflect.field(kha_Shaders,"smaa_blend_weight_fragData"+0);let bytes23=haxe_Unserializer.run(data23);blobs23.push(kha_internal_BytesBlob.fromBytes(bytes23));kha_Shaders.smaa_blend_weight_frag=new kha_graphics4_FragmentShader(blobs23,["smaa_blend_weight.frag.d3d11"]);let blobs24=[];let data24=Reflect.field(kha_Shaders,"smaa_blend_weight_vertData"+0);let bytes24=haxe_Unserializer.run(data24);blobs24.push(kha_internal_BytesBlob.fromBytes(bytes24));kha_Shaders.smaa_blend_weight_vert=new kha_graphics4_VertexShader(blobs24,["smaa_blend_weight.vert.d3d11"]);let blobs25=[];let data25=Reflect.field(kha_Shaders,"smaa_edge_detect_fragData"+0);let bytes25=haxe_Unserializer.run(data25);blobs25.push(kha_internal_BytesBlob.fromBytes(bytes25));kha_Shaders.smaa_edge_detect_frag=new kha_graphics4_FragmentShader(blobs25,["smaa_edge_detect.frag.d3d11"]);let blobs26=[];let data26=Reflect.field(kha_Shaders,"smaa_edge_detect_vertData"+0);let bytes26=haxe_Unserializer.run(data26);blobs26.push(kha_internal_BytesBlob.fromBytes(bytes26));kha_Shaders.smaa_edge_detect_vert=new kha_graphics4_VertexShader(blobs26,["smaa_edge_detect.vert.d3d11"]);let blobs27=[];let data27=Reflect.field(kha_Shaders,"smaa_neighborhood_blend_fragData"+0);let bytes27=haxe_Unserializer.run(data27);blobs27.push(kha_internal_BytesBlob.fromBytes(bytes27));kha_Shaders.smaa_neighborhood_blend_frag=new kha_graphics4_FragmentShader(blobs27,["smaa_neighborhood_blend.frag.d3d11"]);let blobs28=[];let data28=Reflect.field(kha_Shaders,"smaa_neighborhood_blend_vertData"+0);let bytes28=haxe_Unserializer.run(data28);blobs28.push(kha_internal_BytesBlob.fromBytes(bytes28));kha_Shaders.smaa_neighborhood_blend_vert=new kha_graphics4_VertexShader(blobs28,["smaa_neighborhood_blend.vert.d3d11"]);let blobs29=[];let data29=Reflect.field(kha_Shaders,"ssao_pass_fragData"+0);let bytes29=haxe_Unserializer.run(data29);blobs29.push(kha_internal_BytesBlob.fromBytes(bytes29));kha_Shaders.ssao_pass_frag=new kha_graphics4_FragmentShader(blobs29,["ssao_pass.frag.d3d11"])}}$hxClasses["kha.Shaders"]=kha_Shaders;kha_Shaders.__name__=true;class kha_Sound{constructor(){this.sampleRate=0;this.channels=0;this.length=0}uncompress(done){if(this.uncompressedData!=null){done();return}let output=new haxe_io_BytesOutput;let header=kha_audio2_ogg_vorbis_Reader.readAll(this.compressedData,output,true);let soundBytes=output.getBytes();let count=soundBytes.length/4|0;if(header.channel==1){this.length=count/kha_audio2_Audio.samplesPerSecond;this.uncompressedData=kha_arrays_Float32Array._new(count*2);let _g=0;let _g1=count;while(_g<_g1){let i=_g++;let this1=this.uncompressedData;let v=soundBytes.getFloat(i*4);this1.setFloat32(i*2*4,v,true);let this2=this.uncompressedData;let v1=soundBytes.getFloat(i*4);this2.setFloat32((i*2+1)*4,v1,true)}}else{this.length=count/2/kha_audio2_Audio.samplesPerSecond;this.uncompressedData=kha_arrays_Float32Array._new(count);let _g=0;let _g1=count;while(_g<_g1){let i=_g++;let this1=this.uncompressedData;let v=soundBytes.getFloat(i*4);this1.setFloat32(i*4,v,true)}}this.channels=header.channel;this.sampleRate=header.sampleRate;this.compressedData=null;done()}}$hxClasses["kha.Sound"]=kha_Sound;kha_Sound.__name__=true;kha_Sound.__interfaces__=[kha_Resource];Object.assign(kha_Sound.prototype,{__class__:kha_Sound});class kha_SystemOptions{constructor(title,width,height,$window,framebuffer){if(height==null){height=-1}if(width==null){width=-1}if(title==null){title="Kha"}this.framebuffer=null;this.window=null;this.height=-1;this.width=-1;this.title="Kha";this.title=title;this.window=$window==null?new kha_WindowOptions(null,-1,-1,800,600,-1,true,null,0):$window;if(width>0){this.window.width=width;this.width=width}else{this.width=this.window.width}if(height>0){this.window.height=height;this.height=height}else{this.height=this.window.height}if(this.window.title==null){this.window.title=title}this.framebuffer=framebuffer==null?new kha_FramebufferOptions(60,true,32,16,8,1):framebuffer}}$hxClasses["kha.SystemOptions"]=kha_SystemOptions;kha_SystemOptions.__name__=true;Object.assign(kha_SystemOptions.prototype,{__class__:kha_SystemOptions});class kha_System{static start(options,callback){kha_System.theTitle=options.title;kha_SystemImpl.init(options,callback)}static notifyOnFrames(listener){kha_System.renderListeners.push(listener)}static notifyOnApplicationState(foregroundListener,resumeListener,pauseListener,backgroundListener,shutdownListener){if(foregroundListener!=null){kha_System.foregroundListeners.push(foregroundListener)}if(resumeListener!=null){kha_System.resumeListeners.push(resumeListener)}if(pauseListener!=null){kha_System.pauseListeners.push(pauseListener)}if(backgroundListener!=null){kha_System.backgroundListeners.push(backgroundListener)}if(shutdownListener!=null){kha_System.shutdownListeners.push(shutdownListener)}}static render(framebuffers){let _g=0;let _g1=kha_System.renderListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(framebuffers)}}static foreground(){let _g=0;let _g1=kha_System.foregroundListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}static resume(){let _g=0;let _g1=kha_System.resumeListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}static pause(){let _g=0;let _g1=kha_System.pauseListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}static background(){let _g=0;let _g1=kha_System.backgroundListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}static shutdown(){let _g=0;let _g1=kha_System.shutdownListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}static dropFiles(filePath){let _g=0;let _g1=kha_System.dropFilesListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(filePath)}}static get_time(){return kha_SystemImpl.getTime()}static windowWidth($window){if($window==null){$window=0}return kha_Window.get($window).get_width()}static windowHeight($window){if($window==null){$window=0}return kha_Window.get_all()[$window].get_height()}}$hxClasses["kha.System"]=kha_System;kha_System.__name__=true;kha_System.__properties__={get_time:"get_time"};class kha_SystemImpl{static renderCallback(){kha_Scheduler.executeFrame();kha_System.render([kha_SystemImpl.framebuffer])}static dropFilesCallback(filePath){kha_System.dropFiles(filePath)}static copyCallback(){if(kha_System.copyListener!=null){return kha_System.copyListener()}else{return null}}static cutCallback(){if(kha_System.cutListener!=null){return kha_System.cutListener()}else{return null}}static pasteCallback(data){if(kha_System.pasteListener!=null){kha_System.pasteListener(data)}}static foregroundCallback(){kha_System.foreground()}static resumeCallback(){kha_System.resume()}static pauseCallback(){kha_System.pause()}static backgroundCallback(){kha_System.background()}static shutdownCallback(){kha_System.shutdown()}static keyboardDownCallback(code){kha_SystemImpl.keyboard.sendDownEvent(code)}static keyboardUpCallback(code){kha_SystemImpl.keyboard.sendUpEvent(code)}static keyboardPressCallback(charCode){kha_SystemImpl.keyboard.sendPressEvent(String.fromCodePoint(charCode))}static mouseDownCallback(button,x,y){kha_SystemImpl.mouse.sendDownEvent(0,button,x,y)}static mouseUpCallback(button,x,y){kha_SystemImpl.mouse.sendUpEvent(0,button,x,y)}static mouseMoveCallback(x,y,mx,my){kha_SystemImpl.mouse.sendMoveEvent(0,x,y,mx,my)}static mouseWheelCallback(delta){kha_SystemImpl.mouse.sendWheelEvent(0,delta)}static penDownCallback(x,y,pressure){kha_SystemImpl.pen.sendDownEvent(0,x,y,pressure)}static penUpCallback(x,y,pressure){kha_SystemImpl.pen.sendUpEvent(0,x,y,pressure)}static penMoveCallback(x,y,pressure){kha_SystemImpl.pen.sendMoveEvent(0,x,y,pressure)}static gamepadAxisCallback(gamepad,axis,value){kha_SystemImpl.gamepads[gamepad].sendAxisEvent(axis,value)}static gamepadButtonCallback(gamepad,button,value){kha_SystemImpl.gamepads[gamepad].sendButtonEvent(button,value)}static audioCallback(samples){kha_audio2_Audio._callCallback(samples);let buffer=kha_audio2_Audio.buffer;Krom.writeAudioBuffer(buffer.data.buffer,samples)}static init(options,callback){Krom.init(options.title,options.width,options.height,options.framebuffer.samplesPerPixel,options.framebuffer.verticalSync,options.window.mode,options.window.windowFeatures,6);kha_SystemImpl.start=Krom.getTime();haxe_Log.trace=function(v,infos){let message=haxe_Log.formatOutput(v,infos);Krom.log(message)};new kha_Window(0);kha_Scheduler.init();kha_Shaders.init();let g4=new kha_krom_Graphics;kha_SystemImpl.framebuffer=new kha_Framebuffer(0,null,null,g4);kha_SystemImpl.framebuffer.init(new kha_graphics2_Graphics1(kha_SystemImpl.framebuffer),new kha_graphics4_Graphics2(kha_SystemImpl.framebuffer),g4);Krom.setCallback(kha_SystemImpl.renderCallback);Krom.setDropFilesCallback(kha_SystemImpl.dropFilesCallback);Krom.setCutCopyPasteCallback(kha_SystemImpl.cutCallback,kha_SystemImpl.copyCallback,kha_SystemImpl.pasteCallback);Krom.setApplicationStateCallback(kha_SystemImpl.foregroundCallback,kha_SystemImpl.resumeCallback,kha_SystemImpl.pauseCallback,kha_SystemImpl.backgroundCallback,kha_SystemImpl.shutdownCallback);kha_SystemImpl.keyboard=new kha_input_Keyboard;kha_SystemImpl.mouse=new kha_input_MouseImpl;kha_SystemImpl.pen=new kha_input_Pen;kha_SystemImpl.gamepads=[];let _g=0;let _g1=kha_SystemImpl.maxGamepads;while(_g<_g1){let i=_g++;kha_SystemImpl.gamepads[i]=new kha_input_Gamepad(i)}Krom.setKeyboardDownCallback(kha_SystemImpl.keyboardDownCallback);Krom.setKeyboardUpCallback(kha_SystemImpl.keyboardUpCallback);Krom.setKeyboardPressCallback(kha_SystemImpl.keyboardPressCallback);Krom.setMouseDownCallback(kha_SystemImpl.mouseDownCallback);Krom.setMouseUpCallback(kha_SystemImpl.mouseUpCallback);Krom.setMouseMoveCallback(kha_SystemImpl.mouseMoveCallback);Krom.setMouseWheelCallback(kha_SystemImpl.mouseWheelCallback);Krom.setPenDownCallback(kha_SystemImpl.penDownCallback);Krom.setPenUpCallback(kha_SystemImpl.penUpCallback);Krom.setPenMoveCallback(kha_SystemImpl.penMoveCallback);Krom.setGamepadAxisCallback(kha_SystemImpl.gamepadAxisCallback);Krom.setGamepadButtonCallback(kha_SystemImpl.gamepadButtonCallback);kha_audio2_Audio._init();kha_audio2_Audio1._init();Krom.setAudioCallback(kha_SystemImpl.audioCallback);kha_Scheduler.start();callback(kha_Window.get(0))}static getTime(){return Krom.getTime()-kha_SystemImpl.start}static getMouse(num){return kha_SystemImpl.mouse}static getPen(num){return kha_SystemImpl.pen}static getKeyboard(num){return kha_SystemImpl.keyboard}static lockMouse(){if(!kha_SystemImpl.isMouseLocked()){Krom.lockMouse();let _g=0;let _g1=kha_SystemImpl.mouseLockListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}}static unlockMouse(){if(kha_SystemImpl.isMouseLocked()){Krom.unlockMouse();let _g=0;let _g1=kha_SystemImpl.mouseLockListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}}static canLockMouse(){return Krom.canLockMouse()}static isMouseLocked(){return Krom.isMouseLocked()}static notifyOfMouseLockChange(func,error){if(kha_SystemImpl.canLockMouse()&&func!=null){kha_SystemImpl.mouseLockListeners.push(func)}}static removeFromMouseLockChange(func,error){if(kha_SystemImpl.canLockMouse()&&func!=null){HxOverrides.remove(kha_SystemImpl.mouseLockListeners,func)}}static hideSystemCursor(){Krom.showMouse(false)}static showSystemCursor(){Krom.showMouse(true)}static getGamepadId(index){return"unknown"}static getGamepadVendor(index){return"unknown"}static setGamepadRumble(index,leftAmount,rightAmount){}}$hxClasses["kha.SystemImpl"]=kha_SystemImpl;kha_SystemImpl.__name__=true;class kha_Window{constructor(num){this.num=num;kha_Window.windows.push(this)}get_width(){return Krom.windowWidth(this.num)}get_height(){return Krom.windowHeight(this.num)}get_vSynced(){return true}static get(index){return kha_Window.windows[index]}static get_all(){return kha_Window.windows}}$hxClasses["kha.Window"]=kha_Window;kha_Window.__name__=true;kha_Window.__properties__={get_all:"get_all"};Object.assign(kha_Window.prototype,{__class__:kha_Window,__properties__:{get_vSynced:"get_vSynced",get_height:"get_height",get_width:"get_width"}});class kha_WindowOptions{constructor(title,x,y,width,height,display,visible,windowFeatures,mode){if(mode==null){mode=0}if(visible==null){visible=true}if(display==null){display=-1}if(height==null){height=600}if(width==null){width=800}if(y==null){y=-1}if(x==null){x=-1}this.mode=0;this.windowFeatures=1|4|2;this.visible=true;this.display=-1;this.height=600;this.width=800;this.y=-1;this.x=-1;this.title=null;this.title=title;this.x=x;this.y=y;this.width=width;this.height=height;this.display=display;this.visible=visible;this.windowFeatures=windowFeatures==null?1|4|2:windowFeatures;this.mode=mode}}$hxClasses["kha.WindowOptions"]=kha_WindowOptions;kha_WindowOptions.__name__=true;Object.assign(kha_WindowOptions.prototype,{__class__:kha_WindowOptions});class kha_arrays_ByteArray{static _new(buffer,byteOffset,byteLength){let this1=new DataView(buffer,byteOffset,byteLength);return this1}static make(byteLength){return kha_arrays_ByteArray._new(kha_arrays_ByteBuffer.create(byteLength))}}class kha_arrays_ByteBuffer{static create(length){return kha_arrays_ByteBuffer._new(length)}static _new(length){let this1=new ArrayBuffer(length);return this1}}class kha_arrays_Float32Array{static _new(elements){let this1=kha_arrays_ByteArray.make(elements*4);return this1}}class kha_arrays_Int16Array{static _new(elements){let this1=kha_arrays_ByteArray.make(elements*2);return this1}}class kha_arrays_Uint32Array{static _new(elements){let this1=kha_arrays_ByteArray.make(elements*4);return this1}}class kha_audio1_AudioChannel{}$hxClasses["kha.audio1.AudioChannel"]=kha_audio1_AudioChannel;kha_audio1_AudioChannel.__name__=true;kha_audio1_AudioChannel.__isInterface__=true;Object.assign(kha_audio1_AudioChannel.prototype,{__class__:kha_audio1_AudioChannel,__properties__:{get_finished:"get_finished",set_volume:"set_volume"}});class kha_internal_IntBox{constructor(value){this.value=value}}$hxClasses["kha.internal.IntBox"]=kha_internal_IntBox;kha_internal_IntBox.__name__=true;Object.assign(kha_internal_IntBox.prototype,{__class__:kha_internal_IntBox});class kha_audio2_Audio{static _init(){let bufferSize=2048;kha_audio2_Audio.buffer=new kha_audio2_Buffer(bufferSize*4,2,44100);kha_audio2_Audio.samplesPerSecond=44100}static _callCallback(samples){if(kha_audio2_Audio.buffer==null){return}if(kha_audio2_Audio.audioCallback!=null){kha_audio2_Audio.intBox.value=samples;kha_audio2_Audio.audioCallback(kha_audio2_Audio.intBox,kha_audio2_Audio.buffer)}else{let _g=0;let _g1=samples;while(_g<_g1){let i=_g++;kha_audio2_Audio.buffer.data.setFloat32(kha_audio2_Audio.buffer.writeLocation*4,0,true);kha_audio2_Audio.buffer.writeLocation+=1;if(kha_audio2_Audio.buffer.writeLocation>=kha_audio2_Audio.buffer.size){kha_audio2_Audio.buffer.writeLocation=0}}}}static stream(sound,loop){if(loop==null){loop=false}return null}}$hxClasses["kha.audio2.Audio"]=kha_audio2_Audio;kha_audio2_Audio.__name__=true;class kha_audio2_Audio1{static _init(){let this1=new Array(32);kha_audio2_Audio1.soundChannels=this1;let this2=new Array(32);kha_audio2_Audio1.streamChannels=this2;let this3=new Array(32);kha_audio2_Audio1.internalSoundChannels=this3;let this4=new Array(32);kha_audio2_Audio1.internalStreamChannels=this4;kha_audio2_Audio1.sampleCache1=kha_arrays_Float32Array._new(512);kha_audio2_Audio1.sampleCache2=kha_arrays_Float32Array._new(512);kha_audio2_Audio1.lastAllocationCount=0;kha_audio2_Audio.audioCallback=kha_audio2_Audio1.mix}static mix(samplesBox,buffer){let samples=samplesBox.value;if(kha_audio2_Audio1.sampleCache1.byteLength>>2<samples){if(kha_audio2_Audio.disableGcInteractions){haxe_Log.trace("Unexpected allocation request in audio thread.",{fileName:"kha/audio2/Audio1.hx",lineNumber:50,className:"kha.audio2.Audio1",methodName:"mix"});let _g=0;let _g1=samples;while(_g<_g1){let i=_g++;buffer.data.setFloat32(buffer.writeLocation*4,0,true);buffer.writeLocation+=1;if(buffer.writeLocation>=buffer.size){buffer.writeLocation=0}}kha_audio2_Audio1.lastAllocationCount=0;kha_audio2_Audio.disableGcInteractions=false;return}kha_audio2_Audio1.sampleCache1=kha_arrays_Float32Array._new(samples*2);kha_audio2_Audio1.sampleCache2=kha_arrays_Float32Array._new(samples*2);kha_audio2_Audio1.lastAllocationCount=0}else if(kha_audio2_Audio1.lastAllocationCount>100){kha_audio2_Audio.disableGcInteractions=true}else{kha_audio2_Audio1.lastAllocationCount+=1}let _g=0;let _g1=samples;while(_g<_g1){let i=_g++;kha_audio2_Audio1.sampleCache2.setFloat32(i*4,0,true)}let _g2=0;while(_g2<32){let i=_g2++;kha_audio2_Audio1.internalSoundChannels[i]=kha_audio2_Audio1.soundChannels[i]}let _g3=0;while(_g3<32){let i=_g3++;kha_audio2_Audio1.internalStreamChannels[i]=kha_audio2_Audio1.streamChannels[i]}let _g4=0;let _g5=kha_audio2_Audio1.internalSoundChannels;while(_g4<_g5.length){let channel=_g5[_g4];++_g4;if(channel==null||channel.get_finished()){continue}channel.nextSamples(kha_audio2_Audio1.sampleCache1,samples,buffer.samplesPerSecond);let _g=0;let _g1=samples;while(_g<_g1){let i=_g++;let _g1=i;let _g2=kha_audio2_Audio1.sampleCache2;let v=_g2.getFloat32(_g1*4,kha_arrays_ByteArray.LITTLE_ENDIAN)+kha_audio2_Audio1.sampleCache1.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*channel.get_volume();_g2.setFloat32(_g1*4,v,true)}}let _g6=0;let _g7=kha_audio2_Audio1.internalStreamChannels;while(_g6<_g7.length){let channel=_g7[_g6];++_g6;if(channel==null||channel.get_finished()){continue}channel.nextSamples(kha_audio2_Audio1.sampleCache1,samples,buffer.samplesPerSecond);let _g=0;let _g1=samples;while(_g<_g1){let i=_g++;let _g1=i;let _g2=kha_audio2_Audio1.sampleCache2;let v=_g2.getFloat32(_g1*4,kha_arrays_ByteArray.LITTLE_ENDIAN)+kha_audio2_Audio1.sampleCache1.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN)*channel.get_volume();_g2.setFloat32(_g1*4,v,true)}}let _g8=0;let _g9=samples;while(_g8<_g9){let i=_g8++;let a=kha_audio2_Audio1.sampleCache2.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let a1=a<1?a:1;let v=a1>-1?a1:-1;buffer.data.setFloat32(buffer.writeLocation*4,v,true);buffer.writeLocation+=1;if(buffer.writeLocation>=buffer.size){buffer.writeLocation=0}}}static play(sound,loop){if(loop==null){loop=false}let channel=null;if(kha_audio2_Audio.samplesPerSecond!=sound.sampleRate){channel=new kha_audio2_ResamplingAudioChannel(loop,sound.sampleRate)}else{channel=new kha_audio2_AudioChannel(loop)}channel.data=sound.uncompressedData;let foundChannel=false;let _g=0;while(_g<32){let i=_g++;if(kha_audio2_Audio1.soundChannels[i]==null||kha_audio2_Audio1.soundChannels[i].get_finished()){kha_audio2_Audio1.soundChannels[i]=channel;foundChannel=true;break}}if(foundChannel){return channel}else{return null}}static _playAgain(channel){let _g=0;while(_g<32){let i=_g++;if(kha_audio2_Audio1.soundChannels[i]==channel){kha_audio2_Audio1.soundChannels[i]=null}}let _g1=0;while(_g1<32){let i=_g1++;if(kha_audio2_Audio1.soundChannels[i]==null||kha_audio2_Audio1.soundChannels[i].get_finished()||kha_audio2_Audio1.soundChannels[i]==channel){kha_audio2_Audio1.soundChannels[i]=channel;break}}}static stream(sound,loop){if(loop==null){loop=false}let hardwareChannel=kha_audio2_Audio.stream(sound,loop);if(hardwareChannel!=null){return hardwareChannel}let channel=new kha_audio2_StreamChannel(sound.compressedData,loop);let foundChannel=false;let _g=0;while(_g<32){let i=_g++;if(kha_audio2_Audio1.streamChannels[i]==null||kha_audio2_Audio1.streamChannels[i].get_finished()){kha_audio2_Audio1.streamChannels[i]=channel;foundChannel=true;break}}if(foundChannel){return channel}else{return null}}}$hxClasses["kha.audio2.Audio1"]=kha_audio2_Audio1;kha_audio2_Audio1.__name__=true;class kha_audio2_AudioChannel{constructor(looping){this.data=null;this.looping=looping;this.stopped=false;this.paused=false;this.myPosition=0;this.myVolume=1}nextSamples(requestedSamples,requestedLength,sampleRate){if(this.paused||this.stopped){let _g=0;let _g1=requestedLength;while(_g<_g1){let i=_g++;requestedSamples.setFloat32(i*4,0,true)}return}let requestedSamplesIndex=0;while(requestedSamplesIndex<requestedLength){let _g=0;let a=(this.data.byteLength>>2)-this.myPosition;let b=requestedLength-requestedSamplesIndex;let _g1=a<b?a:b;while(_g<_g1){let i=_g++;let v=this.data.getFloat32(this.myPosition++*4,kha_arrays_ByteArray.LITTLE_ENDIAN);requestedSamples.setFloat32(requestedSamplesIndex++*4,v,true)}if(this.myPosition>=this.data.byteLength>>2){this.myPosition=0;if(!this.looping){this.stopped=true;break}}}while(requestedSamplesIndex<requestedLength)requestedSamples.setFloat32(requestedSamplesIndex++*4,0,true)}play(){this.paused=false;this.stopped=false;kha_audio2_Audio1._playAgain(this)}stop(){this.myPosition=0;this.stopped=true}get_volume(){return this.myVolume}set_volume(value){return this.myVolume=value}get_finished(){return this.stopped}}$hxClasses["kha.audio2.AudioChannel"]=kha_audio2_AudioChannel;kha_audio2_AudioChannel.__name__=true;kha_audio2_AudioChannel.__interfaces__=[kha_audio1_AudioChannel];Object.assign(kha_audio2_AudioChannel.prototype,{__class__:kha_audio2_AudioChannel,__properties__:{get_finished:"get_finished",set_volume:"set_volume",get_volume:"get_volume"}});class kha_audio2_Buffer{constructor(size,channels,samplesPerSecond){this.size=size;this.data=kha_arrays_Float32Array._new(size);this.channels=channels;this.samplesPerSecond=samplesPerSecond;this.readLocation=0;this.writeLocation=0}}$hxClasses["kha.audio2.Buffer"]=kha_audio2_Buffer;kha_audio2_Buffer.__name__=true;Object.assign(kha_audio2_Buffer.prototype,{__class__:kha_audio2_Buffer});class kha_audio2_ResamplingAudioChannel extends kha_audio2_AudioChannel{constructor(looping,sampleRate){super(looping);this.sampleRate=sampleRate}nextSamples(requestedSamples,requestedLength,sampleRate){if(this.paused||this.stopped){let _g=0;let _g1=requestedLength;while(_g<_g1){let i=_g++;requestedSamples.setFloat32(i*4,0,true)}return}let requestedSamplesIndex=0;while(requestedSamplesIndex<requestedLength){let _g=0;let value=Math.ceil((this.data.byteLength>>2)*(sampleRate/this.sampleRate));let a=(value%2==0?value:value+1)-this.myPosition;let b=requestedLength-requestedSamplesIndex;let _g1=a<b?a:b;while(_g<_g1){let i=_g++;let k=requestedSamplesIndex++;let position=this.myPosition++;let even=position%2==0;let factor=this.sampleRate/sampleRate;let v;if(even){position=position/2|0;let pos=factor*position;let pos1=Math.floor(pos);let pos2=Math.floor(pos+1);pos1*=2;pos2*=2;let minimum=0;let maximum=(this.data.byteLength>>2)-1;if(maximum%2!=0){--maximum}let a=pos1<minimum||pos1>maximum?0:this.data.getFloat32(pos1*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let b=pos2<minimum||pos2>maximum?0:this.data.getFloat32(pos2*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let t=pos-Math.floor(pos);v=(1-t)*a+t*b}else{position=position/2|0;let pos=factor*position;let pos1=Math.floor(pos);let pos2=Math.floor(pos+1);pos1=pos1*2+1;pos2=pos2*2+1;let minimum=1;let maximum=(this.data.byteLength>>2)-1;if(maximum%2==0){--maximum}let a=pos1<minimum||pos1>maximum?0:this.data.getFloat32(pos1*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let b=pos2<minimum||pos2>maximum?0:this.data.getFloat32(pos2*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let t=pos-Math.floor(pos);v=(1-t)*a+t*b}requestedSamples.setFloat32(k*4,v,true)}let value1=Math.ceil((this.data.byteLength>>2)*(sampleRate/this.sampleRate));if(this.myPosition>=(value1%2==0?value1:value1+1)){this.myPosition=0;if(!this.looping){this.stopped=true;break}}}while(requestedSamplesIndex<requestedLength)requestedSamples.setFloat32(requestedSamplesIndex++*4,0,true)}play(){this.paused=false;this.stopped=false;kha_audio2_Audio1._playAgain(this)}stop(){this.myPosition=0;this.stopped=true}get_volume(){return this.myVolume}set_volume(value){return this.myVolume=value}get_finished(){return this.stopped}}$hxClasses["kha.audio2.ResamplingAudioChannel"]=kha_audio2_ResamplingAudioChannel;kha_audio2_ResamplingAudioChannel.__name__=true;kha_audio2_ResamplingAudioChannel.__super__=kha_audio2_AudioChannel;Object.assign(kha_audio2_ResamplingAudioChannel.prototype,{__class__:kha_audio2_ResamplingAudioChannel});class kha_audio2_StreamChannel{constructor(data,loop){this.paused=false;this.atend=false;this.myVolume=1;this.loop=loop;this.reader=kha_audio2_ogg_vorbis_Reader.openFromBytes(data)}nextSamples(samples,length,sampleRate){if(this.paused){let _g=0;let _g1=length;while(_g<_g1){let i=_g++;samples.setFloat32(i*4,0,true)}return}let count=this.reader.read(samples,length/2|0,2,sampleRate,true)*2;if(count<length){if(this.loop){this.reader.set_currentMillisecond(0)}else{this.atend=true}let _g=count;let _g1=length;while(_g<_g1){let i=_g++;samples.setFloat32(i*4,0,true)}}}play(){this.paused=false}stop(){this.atend=true}get_volume(){return this.myVolume}set_volume(value){return this.myVolume=value}get_finished(){return this.atend}}$hxClasses["kha.audio2.StreamChannel"]=kha_audio2_StreamChannel;kha_audio2_StreamChannel.__name__=true;kha_audio2_StreamChannel.__interfaces__=[kha_audio1_AudioChannel];Object.assign(kha_audio2_StreamChannel.prototype,{__class__:kha_audio2_StreamChannel,__properties__:{get_finished:"get_finished",set_volume:"set_volume",get_volume:"get_volume"}});class kha_audio2_ogg_tools_Crc32{static init(){if(kha_audio2_ogg_tools_Crc32.table!=null){return}let this1=new Array(256);kha_audio2_ogg_tools_Crc32.table=this1;let _g=0;while(_g<256){let i=_g++;let s=i<<24;s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);s=s<<1^(UInt.gte(s,1<<31)?79764919:0);kha_audio2_ogg_tools_Crc32.table[i]=s}}}$hxClasses["kha.audio2.ogg.tools.Crc32"]=kha_audio2_ogg_tools_Crc32;kha_audio2_ogg_tools_Crc32.__name__=true;class kha_audio2_ogg_vorbis_Reader{constructor(input,seekFunc,inputLength){this.seekFunc=seekFunc;this.inputLength=inputLength;this.decoder=kha_audio2_ogg_vorbis_VorbisDecoder.start(input);this.decoder.setupSampleNumber(seekFunc,inputLength);this.loopStart=this.get_header().comment.get_loopStart();this.loopLength=this.get_header().comment.get_loopLength()}get_header(){return this.decoder.header}get_currentSample(){return this.decoder.currentSample}set_currentSample(value){this.decoder.seek(this.seekFunc,this.inputLength,value);return this.decoder.currentSample}get_currentMillisecond(){let samples=this.get_currentSample();let b=this.get_header().sampleRate;return UInt.toFloat(samples)/UInt.toFloat(b)*1e3}set_currentMillisecond(value){this.set_currentSample(Math.floor(UInt.toFloat(this.get_header().sampleRate)*(value/1e3)));return this.get_currentMillisecond()}read(output,samples,channels,sampleRate,useFloat){if(useFloat==null){useFloat=false}this.decoder.ensurePosition(this.seekFunc);if(samples==null){samples=this.decoder.totalSample}if(channels==null){channels=this.get_header().channel}if(sampleRate==null){sampleRate=this.get_header().sampleRate}return this.decoder.read(output,samples,channels,sampleRate,useFloat)}static openFromBytes(bytes){let input=new haxe_io_BytesInput(bytes);let bytes1=input;return new kha_audio2_ogg_vorbis_Reader(input,function(pos){kha_audio2_ogg_vorbis_Reader.seekBytes(bytes1,pos)},bytes.length)}static seekBytes(bytes,pos){bytes.set_position(pos)}static readAll(bytes,output,useFloat){if(useFloat==null){useFloat=false}let input=new haxe_io_BytesInput(bytes);let decoder=kha_audio2_ogg_vorbis_VorbisDecoder.start(input);let bytes1=input;decoder.setupSampleNumber(function(pos){kha_audio2_ogg_vorbis_Reader.seekBytes(bytes1,pos)},bytes.length);let header=decoder.header;let count=0;let bufferSize=4096;let buffer=kha_arrays_Float32Array._new(bufferSize*header.channel);while(true){let n=decoder.read(buffer,bufferSize,header.channel,header.sampleRate,useFloat);let _g=0;let _g1=n*header.channel;while(_g<_g1){let i=_g++;output.writeFloat(buffer.getFloat32(i*4,kha_arrays_ByteArray.LITTLE_ENDIAN))}if(n==0){break}count+=n}return decoder.header}}$hxClasses["kha.audio2.ogg.vorbis.Reader"]=kha_audio2_ogg_vorbis_Reader;kha_audio2_ogg_vorbis_Reader.__name__=true;Object.assign(kha_audio2_ogg_vorbis_Reader.prototype,{__class__:kha_audio2_ogg_vorbis_Reader,__properties__:{set_currentMillisecond:"set_currentMillisecond",get_currentMillisecond:"get_currentMillisecond",set_currentSample:"set_currentSample",get_currentSample:"get_currentSample",get_header:"get_header"}});class kha_audio2_ogg_vorbis_VorbisDecodeState{constructor(input){this.nextSeg=0;this.firstDecode=false;this.bytesInSeg=0;this.validBits=0;this.input=input;this.inputPosition=0;this.page=new kha_audio2_ogg_vorbis_data_Page;kha_audio2_ogg_tools_Crc32.init()}setup(loc0,loc1){this.inputPosition+=1;let segmentCount=this.input.readByte();this.inputPosition+=segmentCount;let this1=new Array(segmentCount);let vec=this1;let _g=0;let _g1=segmentCount;while(_g<_g1){let i=_g++;vec[i]=this.input.readByte()}this.segments=vec;this.endSegWithKnownLoc=-2;if(loc0!=-1||loc1!=-1){let i=segmentCount-1;while(i>=0){if(this.segments[i]<255){break}if(i>=0){this.endSegWithKnownLoc=i;this.knownLocForPacket=loc0}--i}}if(this.firstDecode){let i=0;let len=0;let p=new kha_audio2_ogg_vorbis_data_ProbedPage;let _g=0;let _g1=segmentCount;while(_g<_g1){let i=_g++;len+=this.segments[i]}len+=27+segmentCount;p.pageStart=this.firstAudioPageOffset;p.pageEnd=p.pageStart+len;p.firstDecodedSample=0;p.lastDecodedSample=loc0;this.pFirst=p}this.nextSeg=0}clone(seekFunc){let state=Object.create(kha_audio2_ogg_vorbis_VorbisDecodeState.prototype);seekFunc(this.inputPosition);state.input=this.input;state.eof=this.eof;state.validBits=this.validBits;state.discardSamplesDeferred=this.discardSamplesDeferred;state.firstDecode=this.firstDecode;state.nextSeg=this.nextSeg;state.bytesInSeg=this.bytesInSeg;state.acc=state.acc;state.lastSeg=this.lastSeg;state.lastSegWhich=this.lastSegWhich;state.currentLoc=this.currentLoc;state.currentLocValid=this.currentLocValid;state.inputPosition=this.inputPosition;state.firstAudioPageOffset=this.firstAudioPageOffset;state.error=this.error;state.segments=this.segments;state.pFirst=this.pFirst;state.pLast=this.pLast;state.page=this.page.clone();return state}next(){if(this.lastSeg){return 0}if(this.nextSeg==-1){this.lastSegWhich=this.segments.length-1;try{this.page.start(this)}catch(_g){let _g1=haxe_Exception.caught(_g).unwrap();if(_g1 instanceof kha_audio2_ogg_vorbis_data_ReaderError){let e=_g1;this.lastSeg=true;this.error=e;return 0}else{throw _g}}if((this.page.flag&1)==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CONTINUED_PACKET_FLAG_INVALID,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:171,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}))}}let len=this.segments[this.nextSeg++];if(len<255){this.lastSeg=true;this.lastSegWhich=this.nextSeg-1}if(this.nextSeg>=this.segments.length){this.nextSeg=-1}this.bytesInSeg=len;return len}startPacket(){while(this.nextSeg==-1){this.page.start(this);if((this.page.flag&1)!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:193,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"startPacket"}))}}this.lastSeg=false;this.validBits=0;this.bytesInSeg=0}maybeStartPacket(){if(this.nextSeg==-1){let eof=false;let x;try{this.inputPosition+=1;x=this.input.readByte()}catch(_g){if(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof){eof=true;x=0}else{throw _g}}if(eof){return false}let tmp;let tmp1;let tmp2;if(x==79){this.inputPosition+=1;tmp2=this.input.readByte()!=103}else{tmp2=true}if(!tmp2){this.inputPosition+=1;tmp1=this.input.readByte()!=103}else{tmp1=true}if(!tmp1){this.inputPosition+=1;tmp=this.input.readByte()!=83}else{tmp=true}if(tmp){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:218,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"maybeStartPacket"}))}this.page.startWithoutCapturePattern(this)}this.startPacket();return true}readBits(n){if(this.validBits<0){return 0}else if(this.validBits<n){if(n>24){return this.readBits(24)+(this.readBits(n-24)<<24)}else{if(this.validBits==0){this.acc=0}while(true){if(this.bytesInSeg==0&&(this.lastSeg||this.next()==0)){this.validBits=-1;break}else{this.bytesInSeg--;this.inputPosition+=1;this.acc=this.acc+(this.input.readByte()<<this.validBits);this.validBits+=8}if(!(this.validBits<n)){break}}if(this.validBits<0){return 0}else{let z=this.acc&(1<<n)-1;this.acc=this.acc>>>n;this.validBits-=n;return z}}}else{let z=this.acc&(1<<n)-1;this.acc=this.acc>>>n;this.validBits-=n;return z}}firstPageValidate(){if(this.segments.length!=1){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"segmentCount",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:308,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}))}if(this.segments[0]!=30){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:311,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}))}}startFirstDecode(){this.firstAudioPageOffset=this.inputPosition;this.firstDecode=true}prepHuffman(){if(this.validBits<=24){if(this.validBits==0){this.acc=0}while(true){if(this.bytesInSeg==0&&(this.lastSeg||this.next()==0)){return}else{this.bytesInSeg--;this.inputPosition+=1;this.acc=this.acc+(this.input.readByte()<<this.validBits);this.validBits+=8}if(!(this.validBits<=24)){break}}}}finishDecodePacket(previousLength,n,r){let left=r.left.start;let currentLocValid=false;let n2=n>>1;if(this.firstDecode){this.currentLoc=-n2;this.discardSamplesDeferred=n-r.right.end;currentLocValid=true;this.firstDecode=false}else if(this.discardSamplesDeferred!=0){r.left.start+=this.discardSamplesDeferred;left=r.left.start;this.discardSamplesDeferred=0}else{let tmp=previousLength==0&&currentLocValid}if(this.lastSegWhich==this.endSegWithKnownLoc){if(currentLocValid&&(this.page.flag&4)!=0){let currentEnd=this.knownLocForPacket-(n-r.right.end);if(currentEnd<this.currentLoc+r.right.end){let len=currentEnd<this.currentLoc?0:currentEnd-this.currentLoc;len+=r.left.start;this.currentLoc+=len;return{len:len,left:left,right:r.right.start}}}this.currentLoc=this.knownLocForPacket-(n2-r.left.start);currentLocValid=true}if(currentLocValid){this.currentLoc+=r.right.start-r.left.start}return{len:r.right.end,left:left,right:r.right.start}}getSampleNumber(seekFunc,inputLength){let restoreOffset=this.inputPosition;let previousSafe=UInt.gte(inputLength,65536)&&UInt.gte(inputLength-65536,this.firstAudioPageOffset)?inputLength-65536:this.firstAudioPageOffset;seekFunc(this.inputPosition=previousSafe);let end=0;let last=false;let _g=this.findPage(seekFunc,inputLength);switch(_g._hx_index){case 0:let e=_g.end;let l=_g.last;end=e;last=l;break;case 1:throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}))}let lastPageLoc=this.inputPosition;_hx_loop1:while(!last){seekFunc(this.inputPosition=end);let _g=this.findPage(seekFunc,inputLength);switch(_g._hx_index){case 0:let e=_g.end;let l=_g.last;end=e;last=l;break;case 1:break _hx_loop1}previousSafe=lastPageLoc+1;lastPageLoc=this.inputPosition}seekFunc(this.inputPosition=lastPageLoc);this.inputPosition+=6;let this1=new Array(6);let vec=this1;let _g1=0;let _g2=6;while(_g1<_g2){let i=_g1++;vec[i]=this.input.readByte()}let vorbisHeader=vec;this.inputPosition+=4;let lo=this.input.readInt32();this.inputPosition+=4;let hi=this.input.readInt32();if(lo==-1&&hi==-1||hi>0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:553,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}))}this.pLast=new kha_audio2_ogg_vorbis_data_ProbedPage;this.pLast.pageStart=lastPageLoc;this.pLast.pageEnd=end;this.pLast.lastDecodedSample=lo;this.pLast.firstDecodedSample=null;this.pLast.afterPreviousPageStart=previousSafe;seekFunc(this.inputPosition=restoreOffset);return lo}findPage(seekFunc,inputLength){try{while(true){this.inputPosition+=1;let n=this.input.readByte();if(n==79){let retryLoc=this.inputPosition;if(retryLoc-25>inputLength){return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound}let tmp;let tmp1;this.inputPosition+=1;if(this.input.readByte()==103){this.inputPosition+=1;tmp1=this.input.readByte()!=103}else{tmp1=true}if(!tmp1){this.inputPosition+=1;tmp=this.input.readByte()!=83}else{tmp=true}if(tmp){continue}let this1=new Array(27);let header=this1;header[0]=79;header[1]=103;header[2]=103;header[3]=83;this.inputPosition+=1;header[4]=this.input.readByte();this.inputPosition+=1;header[5]=this.input.readByte();this.inputPosition+=1;header[6]=this.input.readByte();this.inputPosition+=1;header[7]=this.input.readByte();this.inputPosition+=1;header[8]=this.input.readByte();this.inputPosition+=1;header[9]=this.input.readByte();this.inputPosition+=1;header[10]=this.input.readByte();this.inputPosition+=1;header[11]=this.input.readByte();this.inputPosition+=1;header[12]=this.input.readByte();this.inputPosition+=1;header[13]=this.input.readByte();this.inputPosition+=1;header[14]=this.input.readByte();this.inputPosition+=1;header[15]=this.input.readByte();this.inputPosition+=1;header[16]=this.input.readByte();this.inputPosition+=1;header[17]=this.input.readByte();this.inputPosition+=1;header[18]=this.input.readByte();this.inputPosition+=1;header[19]=this.input.readByte();this.inputPosition+=1;header[20]=this.input.readByte();this.inputPosition+=1;header[21]=this.input.readByte();this.inputPosition+=1;header[22]=this.input.readByte();this.inputPosition+=1;header[23]=this.input.readByte();this.inputPosition+=1;header[24]=this.input.readByte();this.inputPosition+=1;header[25]=this.input.readByte();this.inputPosition+=1;header[26]=this.input.readByte();if(header[4]!=0){seekFunc(this.inputPosition=retryLoc);continue}let goal=header[22]+(header[23]<<8)+(header[24]<<16)+(header[25]<<24);header[22]=0;header[23]=0;header[24]=0;header[25]=0;let crc=0;let _g=0;while(_g<27){let i=_g++;crc=crc<<8^kha_audio2_ogg_tools_Crc32.table[header[i]^crc>>>24]}let len=0;try{let _g=0;let _g1=header[26];while(_g<_g1){let i=_g++;this.inputPosition+=1;let s=this.input.readByte();crc=crc<<8^kha_audio2_ogg_tools_Crc32.table[s^crc>>>24];len+=s}let _g2=0;let _g3=len;while(_g2<_g3){let i=_g2++;this.inputPosition+=1;let byte=this.input.readByte();crc=crc<<8^kha_audio2_ogg_tools_Crc32.table[byte^crc>>>24]}}catch(_g){if(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof){return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound}else{throw _g}}if(crc==goal){let end=this.inputPosition;seekFunc(this.inputPosition=retryLoc-1);return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.Found(end,(header[5]&4)!=0)}}}}catch(_g){if(haxe_Exception.caught(_g).unwrap()instanceof haxe_io_Eof){return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound}else{throw _g}}}analyzePage(seekFunc,h){let z=new kha_audio2_ogg_vorbis_data_ProbedPage;let this1=new Array(255);let packetType=this1;z.pageStart=this.inputPosition;this.inputPosition+=27;let this2=new Array(27);let vec=this2;let _g=0;let _g1=27;while(_g<_g1){let i=_g++;vec[i]=this.input.readByte()}let pageHeader=vec;let n=pageHeader[26];this.inputPosition+=n;let this3=new Array(n);let vec1=this3;let _g2=0;let _g3=n;while(_g2<_g3){let i=_g2++;vec1[i]=this.input.readByte()}let lacing=vec1;let len=0;let _g4=0;let _g5=pageHeader[26];while(_g4<_g5){let i=_g4++;len+=lacing[i]}z.pageEnd=z.pageStart+27+pageHeader[26]+len;z.lastDecodedSample=pageHeader[6]+(pageHeader[7]<<8)+(pageHeader[8]<<16)+(pageHeader[9]<<16);if((pageHeader[5]&4)!=0){z.firstDecodedSample=null;seekFunc(this.inputPosition=z.pageStart);return z}let numPacket=0;let packetStart=(pageHeader[5]&1)==0;let modeCount=h.modes.length;let _g6=0;let _g7=pageHeader[26];while(_g6<_g7){let i=_g6++;if(packetStart){if(lacing[i]==0){seekFunc(this.inputPosition=z.pageStart);return null}this.inputPosition+=1;let n=this.input.readByte();if((n&1)!=0){seekFunc(this.inputPosition=z.pageStart);return null}n>>=1;let n1=modeCount-1;let log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];let b=n1<16384?n1<16?log2_4[n1]:n1<512?5+log2_4[n1>>5]:10+log2_4[n1>>10]:n1<16777216?n1<524288?15+log2_4[n1>>15]:20+log2_4[n1>>20]:n1<536870912?25+log2_4[n1>>25]:n1<-2147483648?30+log2_4[n1>>30]:0;n&=(1<<b)-1;if(n>=modeCount){seekFunc(this.inputPosition=z.pageStart);return null}packetType[numPacket++]=h.modes[n].blockflag;let len=lacing[i]-1;this.inputPosition+=len;let this1=new Array(len);let vec=this1;let _g=0;let _g1=len;while(_g<_g1){let i=_g++;vec[i]=this.input.readByte()}}else{let len=lacing[i];this.inputPosition+=len;let this1=new Array(len);let vec=this1;let _g=0;let _g1=len;while(_g<_g1){let i=_g++;vec[i]=this.input.readByte()}}packetStart=lacing[i]<255}let samples=0;if(numPacket>1){samples+=packetType[numPacket-1]?h.blocksize1:h.blocksize0}let i=numPacket-2;while(i>=1){--i;if(packetType[i]){if(packetType[i+1]){samples+=h.blocksize1>>1}else{samples+=(h.blocksize1-h.blocksize0>>2)+(h.blocksize0>>1)}}else{samples+=h.blocksize0>>1}--i}z.firstDecodedSample=z.lastDecodedSample-samples;seekFunc(this.inputPosition=z.pageStart);return z}decodeScalarRaw(c){this.prepHuffman();let codewordLengths=c.codewordLengths;let codewords=c.codewords;let sortedCodewords=c.sortedCodewords;if(c.entries>8?sortedCodewords!=null:codewords!=null){let n=this.acc;n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;let code=n>>>16|n<<16;let x=0;let n1=c.sortedEntries;while(n1>1){let m=x+(n1>>1);if(UInt.gte(code,sortedCodewords[m])){x=m;n1-=n1>>1}else{n1>>=1}}if(!c.sparse){x=c.sortedValues[x]}let len=codewordLengths[x];if(this.validBits>=len){this.acc=this.acc>>>len;this.validBits-=len;return x}this.validBits=0;return-1}let _g=0;let _g1=c.entries;while(_g<_g1){let i=_g++;let cl=codewordLengths[i];if(cl==255){continue}if(codewords[i]==(this.acc&(1<<cl)-1)){if(this.validBits>=cl){this.acc=this.acc>>>cl;this.validBits-=cl;return i}this.validBits=0;return-1}}this.error=new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:847,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"});this.validBits=0;return-1}}$hxClasses["kha.audio2.ogg.vorbis.VorbisDecodeState"]=kha_audio2_ogg_vorbis_VorbisDecodeState;kha_audio2_ogg_vorbis_VorbisDecodeState.__name__=true;Object.assign(kha_audio2_ogg_vorbis_VorbisDecodeState.prototype,{__class__:kha_audio2_ogg_vorbis_VorbisDecodeState});var kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult=$hxEnums["kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult"]={__ename__:true,__constructs__:null,Found:($_=function(end,last){return{_hx_index:0,end:end,last:last,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:$estr}},$_._hx_name="Found",$_.__params__=["end","last"],$_),NotFound:{_hx_name:"NotFound",_hx_index:1,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:$estr}};kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.__constructs__=[kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.Found,kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound];class kha_audio2_ogg_vorbis_VorbisDecoder{constructor(header,decodeState){this.header=header;this.decodeState=decodeState;this.totalSample=null;this.currentSample=0;this.previousLength=0;let this1=new Array(header.channel);this.channelBuffers=this1;let this2=new Array(header.channel);this.previousWindow=this2;let this3=new Array(header.channel);this.finalY=this3;let _g=0;let _g1=header.channel;while(_g<_g1){let i=_g++;let this1=this.channelBuffers;let this2=new Array(header.blocksize1);let vec=this2;this1[i]=vec;let this3=this.previousWindow;let this4=new Array(header.blocksize1/2|0);let vec1=this4;this3[i]=vec1;this.finalY[i]=[]}let this4=new Array(2);this.a=this4;let this5=new Array(2);this.b=this5;let this6=new Array(2);this.c=this6;let this7=new Array(2);this.window=this7;let this8=new Array(2);this.bitReverseData=this8;this.initBlocksize(0,header.blocksize0);this.initBlocksize(1,header.blocksize1)}read(output,samples,channels,sampleRate,useFloat){let b=this.header.sampleRate;if((UInt.toFloat(sampleRate)%UInt.toFloat(b)|0)!=0){throw haxe_Exception.thrown("Unsupported sampleRate : can't convert "+(this.header.sampleRate==null?"null":Std.string(UInt.toFloat(this.header.sampleRate)))+" to "+sampleRate)}if(channels%this.header.channel!=0){throw haxe_Exception.thrown("Unsupported channels : can't convert "+this.header.channel+" to "+channels)}let b1=this.header.sampleRate;let sampleRepeat=UInt.toFloat(sampleRate)/UInt.toFloat(b1)|0;let channelRepeat=channels/this.header.channel|0;let n=0;let len=Math.floor(samples/sampleRepeat);if(this.totalSample!=null&&len>this.totalSample-this.currentSample){len=this.totalSample-this.currentSample}let index=0;while(n<len){let k=this.channelBufferEnd-this.channelBufferStart;if(k>=len-n){k=len-n}let _g=this.channelBufferStart;let _g1=this.channelBufferStart+k;while(_g<_g1){let j=_g++;let _g1=0;let _g2=sampleRepeat;while(_g1<_g2){let sr=_g1++;let _g=0;let _g2=this.header.channel;while(_g<_g2){let i=_g++;let _g1=0;let _g2=channelRepeat;while(_g1<_g2){let cr=_g1++;let value=this.channelBuffers[i][j];if(value>1){value=1}else if(value<-1){value=-1}if(useFloat){output.setFloat32(index*4,value,true);++index}}}}}n+=k;this.channelBufferStart+=k;if(n==len||this.getFrameFloat()==0){break}}let _g=n;let _g1=len;while(_g<_g1){let j=_g++;let _g1=0;let _g2=sampleRepeat;while(_g1<_g2){let sr=_g1++;let _g=0;let _g2=this.header.channel;while(_g<_g2){let i=_g++;let _g1=0;let _g2=channelRepeat;while(_g1<_g2){let cr=_g1++;if(useFloat){output.setFloat32(index*4,0,true);++index}}}}}this.currentSample+=len;return len*sampleRepeat}skipSamples(len){let n=0;if(this.totalSample!=null&&len>this.totalSample-this.currentSample){len=this.totalSample-this.currentSample}while(n<len){let k=this.channelBufferEnd-this.channelBufferStart;if(k>=len-n){k=len-n}n+=k;this.channelBufferStart+=k;if(n==len||this.getFrameFloat()==0){break}}this.currentSample+=len;return len}setupSampleNumber(seekFunc,inputLength){if(this.totalSample==null){this.totalSample=this.decodeState.getSampleNumber(seekFunc,inputLength)}}seek(seekFunc,inputLength,sampleNumber){if(this.currentSample==sampleNumber){return}if(this.totalSample==null){this.setupSampleNumber(seekFunc,inputLength);if(this.totalSample==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:187,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}}if(sampleNumber<0){sampleNumber=0}let p0=this.decodeState.pFirst;let p1=this.decodeState.pLast;if(sampleNumber>=p1.lastDecodedSample){sampleNumber=p1.lastDecodedSample-1}if(sampleNumber<p0.lastDecodedSample){this.seekFrameFromPage(seekFunc,p0.pageStart,0,sampleNumber)}else{let attempts=0;while(p0.pageEnd<p1.pageStart){let startOffset=p0.pageEnd;let endOffset=p1.afterPreviousPageStart;let startSample=p0.lastDecodedSample;let endSample=p1.lastDecodedSample;if(startSample==null||endSample==null){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:219,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}if(UInt.gt(endOffset,startOffset+4e3)){endOffset=endOffset-4e3}let probe=startOffset+Math.floor(UInt.toFloat(endOffset-startOffset)/UInt.toFloat(endSample-startSample)*(sampleNumber-startSample));if(attempts>=4){let probe2=startOffset+(endOffset-startOffset>>>1);probe=attempts>=8?probe2:UInt.gt(probe2,probe)?probe+(probe2-probe>>>1):probe2+(probe-probe2>>>1)}++attempts;seekFunc(this.decodeState.inputPosition=probe);let _g=this.decodeState.findPage(seekFunc,inputLength);switch(_g._hx_index){case 0:let _g1=_g.end;let _g2=_g.last;break;case 1:throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:249,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}let q=this.decodeState.analyzePage(seekFunc,this.header);if(q==null){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:255,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}q.afterPreviousPageStart=probe;if(q.pageStart==p1.pageStart){p1=q;continue}if(sampleNumber<q.lastDecodedSample){p1=q}else{p0=q}}if(p0.lastDecodedSample<=sampleNumber&&sampleNumber<p1.lastDecodedSample){this.seekFrameFromPage(seekFunc,p1.pageStart,p0.lastDecodedSample,sampleNumber)}else{throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:275,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}}}seekFrameFromPage(seekFunc,pageStart,firstSample,targetSample){let frame=0;let frameStart=firstSample;seekFunc(this.decodeState.inputPosition=pageStart);this.decodeState.nextSeg=-1;let leftEnd=0;let leftStart=0;let prevState=null;let lastState=null;while(true){prevState=lastState;lastState=this.decodeState.clone(seekFunc);let initialResult=this.decodeInitial();if(initialResult==null){lastState=prevState;break}leftStart=initialResult.left.start;leftEnd=initialResult.left.end;let start=frame==0?leftEnd:leftStart;if(targetSample<frameStart+initialResult.right.start-start){break}let _this=this.decodeState;while(_this.bytesInSeg!=0||!_this.lastSeg&&_this.next()!=0){_this.bytesInSeg--;_this.inputPosition+=1;_this.input.readByte()}frameStart+=initialResult.right.start-start;++frame}this.decodeState=lastState;seekFunc(this.decodeState.inputPosition);this.previousLength=0;this.pumpFirstFrame();this.currentSample=frameStart;this.skipSamples(targetSample-frameStart)}ensurePosition(seekFunc){seekFunc(this.decodeState.inputPosition)}getFrameFloat(){let result=this.decodePacket();if(result==null){this.channelBufferStart=this.channelBufferEnd=0;return 0}let len=this.finishFrame(result);this.channelBufferStart=result.left;this.channelBufferEnd=result.left+len;return len}pumpFirstFrame(){this.finishFrame(this.decodePacket())}finishFrame(r){let len=r.len;let right=r.right;let left=r.left;if(this.previousLength!=0){let n=this.previousLength;let w=this.getWindow(n);let _g=0;let _g1=this.header.channel;while(_g<_g1){let i=_g++;let cb=this.channelBuffers[i];let pw=this.previousWindow[i];let _g1=0;let _g2=n;while(_g1<_g2){let j=_g1++;cb[left+j]=cb[left+j]*w[j]+pw[j]*w[n-1-j]}}}let prev=this.previousLength;this.previousLength=len-right;let _g=0;let _g1=this.header.channel;while(_g<_g1){let i=_g++;let pw=this.previousWindow[i];let cb=this.channelBuffers[i];let _g1=0;let _g2=len-right;while(_g1<_g2){let j=_g1++;pw[j]=cb[right+j]}}if(prev==0){return 0}if(len<right){right=len}return right-left}getWindow(len){len<<=1;if(len==this.header.blocksize0){return this.window[0]}else if(len==this.header.blocksize1){return this.window[1]}else{return null}}initBlocksize(bs,n){let n2=n>>1;let n4=n>>2;let n8=n>>3;let this1=this.a;let this2=new Array(n2);this1[bs]=this2;let this3=this.b;let this4=new Array(n2);this3[bs]=this4;let this5=this.c;let this6=new Array(n4);this5[bs]=this6;let this7=this.window;let this8=new Array(n2);this7[bs]=this8;let this9=this.bitReverseData;let this10=new Array(n8);this9[bs]=this10;kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors(n,this.a[bs],this.b[bs],this.c[bs]);kha_audio2_ogg_vorbis_VorbisTools.computeWindow(n,this.window[bs]);kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse(n,this.bitReverseData[bs])}inverseMdct(buffer,n,blocktype){let bt=blocktype?1:0;let a=this.a[bt];let b=this.b[bt];let c=this.c[bt];let bitReverse=this.bitReverseData[bt];let n2=n>>1;let n4=n>>2;let n8=n>>3;let this1=new Array(n2);let buf2=this1;let dOffset=n2-2;let aaOffset=0;let eOffset=0;let eStopOffset=n2;while(eOffset!=eStopOffset){buf2[dOffset+1]=buffer[eOffset]*a[aaOffset]-buffer[eOffset+2]*a[aaOffset+1];buf2[dOffset]=buffer[eOffset]*a[aaOffset+1]+buffer[eOffset+2]*a[aaOffset];dOffset-=2;aaOffset+=2;eOffset+=4}eOffset=n2-3;while(dOffset>=0){buf2[dOffset+1]=-buffer[eOffset+2]*a[aaOffset]- -buffer[eOffset]*a[aaOffset+1];buf2[dOffset]=-buffer[eOffset+2]*a[aaOffset+1]+-buffer[eOffset]*a[aaOffset];dOffset-=2;aaOffset+=2;eOffset-=4}let u=buffer;let v=buf2;let aaOffset1=n2-8;let eOffset0=n4;let eOffset1=0;let dOffset0=n4;let dOffset1=0;while(aaOffset1>=0){let v41_21=v[eOffset0+1]-v[eOffset1+1];let v40_20=v[eOffset0]-v[eOffset1];u[dOffset0+1]=v[eOffset0+1]+v[eOffset1+1];u[dOffset0]=v[eOffset0]+v[eOffset1];u[dOffset1+1]=v41_21*a[aaOffset1+4]-v40_20*a[aaOffset1+5];u[dOffset1]=v40_20*a[aaOffset1+4]+v41_21*a[aaOffset1+5];v41_21=v[eOffset0+3]-v[eOffset1+3];v40_20=v[eOffset0+2]-v[eOffset1+2];u[dOffset0+3]=v[eOffset0+3]+v[eOffset1+3];u[dOffset0+2]=v[eOffset0+2]+v[eOffset1+2];u[dOffset1+3]=v41_21*a[aaOffset1]-v40_20*a[aaOffset1+1];u[dOffset1+2]=v40_20*a[aaOffset1]+v41_21*a[aaOffset1+1];aaOffset1-=8;dOffset0+=4;dOffset1+=4;eOffset0+=4;eOffset1+=4}let log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];let ld=(n<16384?n<16?log2_4[n]:n<512?5+log2_4[n>>5]:10+log2_4[n>>10]:n<16777216?n<524288?15+log2_4[n>>15]:20+log2_4[n>>20]:n<536870912?25+log2_4[n>>25]:n<-2147483648?30+log2_4[n>>30]:0)-1;let i_off=n2-1-n4*0;let eeOffset0=i_off;let eeOffset2=i_off+-(n>>3);let aOffset=0;let i=(n>>4>>2)+1;while(--i>0){let k00_20=u[eeOffset0]-u[eeOffset2];let k01_21=u[eeOffset0+-1]-u[eeOffset2+-1];u[eeOffset0]+=u[eeOffset2];u[eeOffset0+-1]+=u[eeOffset2+-1];u[eeOffset2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-1]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;k00_20=u[eeOffset0+-2]-u[eeOffset2+-2];k01_21=u[eeOffset0+-3]-u[eeOffset2+-3];u[eeOffset0+-2]+=u[eeOffset2+-2];u[eeOffset0+-3]+=u[eeOffset2+-3];u[eeOffset2+-2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-3]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;k00_20=u[eeOffset0+-4]-u[eeOffset2+-4];k01_21=u[eeOffset0+-5]-u[eeOffset2+-5];u[eeOffset0+-4]+=u[eeOffset2+-4];u[eeOffset0+-5]+=u[eeOffset2+-5];u[eeOffset2+-4]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-5]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;k00_20=u[eeOffset0+-6]-u[eeOffset2+-6];k01_21=u[eeOffset0+-7]-u[eeOffset2+-7];u[eeOffset0+-6]+=u[eeOffset2+-6];u[eeOffset0+-7]+=u[eeOffset2+-7];u[eeOffset2+-6]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eeOffset2+-7]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=8;eeOffset0-=8;eeOffset2-=8}let i_off1=n2-1-n4;let eeOffset01=i_off1;let eeOffset21=i_off1+-(n>>3);let aOffset1=0;let i1=(n>>4>>2)+1;while(--i1>0){let k00_20=u[eeOffset01]-u[eeOffset21];let k01_21=u[eeOffset01+-1]-u[eeOffset21+-1];u[eeOffset01]+=u[eeOffset21];u[eeOffset01+-1]+=u[eeOffset21+-1];u[eeOffset21]=k00_20*a[aOffset1]-k01_21*a[aOffset1+1];u[eeOffset21+-1]=k01_21*a[aOffset1]+k00_20*a[aOffset1+1];aOffset1+=8;k00_20=u[eeOffset01+-2]-u[eeOffset21+-2];k01_21=u[eeOffset01+-3]-u[eeOffset21+-3];u[eeOffset01+-2]+=u[eeOffset21+-2];u[eeOffset01+-3]+=u[eeOffset21+-3];u[eeOffset21+-2]=k00_20*a[aOffset1]-k01_21*a[aOffset1+1];u[eeOffset21+-3]=k01_21*a[aOffset1]+k00_20*a[aOffset1+1];aOffset1+=8;k00_20=u[eeOffset01+-4]-u[eeOffset21+-4];k01_21=u[eeOffset01+-5]-u[eeOffset21+-5];u[eeOffset01+-4]+=u[eeOffset21+-4];u[eeOffset01+-5]+=u[eeOffset21+-5];u[eeOffset21+-4]=k00_20*a[aOffset1]-k01_21*a[aOffset1+1];u[eeOffset21+-5]=k01_21*a[aOffset1]+k00_20*a[aOffset1+1];aOffset1+=8;k00_20=u[eeOffset01+-6]-u[eeOffset21+-6];k01_21=u[eeOffset01+-7]-u[eeOffset21+-7];u[eeOffset01+-6]+=u[eeOffset21+-6];u[eeOffset01+-7]+=u[eeOffset21+-7];u[eeOffset21+-6]=k00_20*a[aOffset1]-k01_21*a[aOffset1+1];u[eeOffset21+-7]=k01_21*a[aOffset1]+k00_20*a[aOffset1+1];aOffset1+=8;eeOffset01-=8;eeOffset21-=8}let d0=n2-1-n8*0;let aOffset2=0;let eOffset01=d0;let eOffset2=d0+-(n>>4);let i2=(n>>5>>2)+1;while(--i2>0){let k00_20=u[eOffset01]-u[eOffset2];let k01_21=u[eOffset01+-1]-u[eOffset2+-1];u[eOffset01]+=u[eOffset2];u[eOffset01+-1]+=u[eOffset2+-1];u[eOffset2]=k00_20*a[aOffset2]-k01_21*a[aOffset2+1];u[eOffset2+-1]=k01_21*a[aOffset2]+k00_20*a[aOffset2+1];aOffset2+=16;k00_20=u[eOffset01+-2]-u[eOffset2+-2];k01_21=u[eOffset01+-3]-u[eOffset2+-3];u[eOffset01+-2]+=u[eOffset2+-2];u[eOffset01+-3]+=u[eOffset2+-3];u[eOffset2+-2]=k00_20*a[aOffset2]-k01_21*a[aOffset2+1];u[eOffset2+-3]=k01_21*a[aOffset2]+k00_20*a[aOffset2+1];aOffset2+=16;k00_20=u[eOffset01+-4]-u[eOffset2+-4];k01_21=u[eOffset01+-5]-u[eOffset2+-5];u[eOffset01+-4]+=u[eOffset2+-4];u[eOffset01+-5]+=u[eOffset2+-5];u[eOffset2+-4]=k00_20*a[aOffset2]-k01_21*a[aOffset2+1];u[eOffset2+-5]=k01_21*a[aOffset2]+k00_20*a[aOffset2+1];aOffset2+=16;k00_20=u[eOffset01+-6]-u[eOffset2+-6];k01_21=u[eOffset01+-7]-u[eOffset2+-7];u[eOffset01+-6]+=u[eOffset2+-6];u[eOffset01+-7]+=u[eOffset2+-7];u[eOffset2+-6]=k00_20*a[aOffset2]-k01_21*a[aOffset2+1];u[eOffset2+-7]=k01_21*a[aOffset2]+k00_20*a[aOffset2+1];eOffset01-=8;eOffset2-=8;aOffset2+=16}let d01=n2-1-n8;let aOffset3=0;let eOffset02=d01;let eOffset21=d01+-(n>>4);let i3=(n>>5>>2)+1;while(--i3>0){let k00_20=u[eOffset02]-u[eOffset21];let k01_21=u[eOffset02+-1]-u[eOffset21+-1];u[eOffset02]+=u[eOffset21];u[eOffset02+-1]+=u[eOffset21+-1];u[eOffset21]=k00_20*a[aOffset3]-k01_21*a[aOffset3+1];u[eOffset21+-1]=k01_21*a[aOffset3]+k00_20*a[aOffset3+1];aOffset3+=16;k00_20=u[eOffset02+-2]-u[eOffset21+-2];k01_21=u[eOffset02+-3]-u[eOffset21+-3];u[eOffset02+-2]+=u[eOffset21+-2];u[eOffset02+-3]+=u[eOffset21+-3];u[eOffset21+-2]=k00_20*a[aOffset3]-k01_21*a[aOffset3+1];u[eOffset21+-3]=k01_21*a[aOffset3]+k00_20*a[aOffset3+1];aOffset3+=16;k00_20=u[eOffset02+-4]-u[eOffset21+-4];k01_21=u[eOffset02+-5]-u[eOffset21+-5];u[eOffset02+-4]+=u[eOffset21+-4];u[eOffset02+-5]+=u[eOffset21+-5];u[eOffset21+-4]=k00_20*a[aOffset3]-k01_21*a[aOffset3+1];u[eOffset21+-5]=k01_21*a[aOffset3]+k00_20*a[aOffset3+1];aOffset3+=16;k00_20=u[eOffset02+-6]-u[eOffset21+-6];k01_21=u[eOffset02+-7]-u[eOffset21+-7];u[eOffset02+-6]+=u[eOffset21+-6];u[eOffset02+-7]+=u[eOffset21+-7];u[eOffset21+-6]=k00_20*a[aOffset3]-k01_21*a[aOffset3+1];u[eOffset21+-7]=k01_21*a[aOffset3]+k00_20*a[aOffset3+1];eOffset02-=8;eOffset21-=8;aOffset3+=16}let d02=n2-1-n8*2;let aOffset4=0;let eOffset03=d02;let eOffset22=d02+-(n>>4);let i4=(n>>5>>2)+1;while(--i4>0){let k00_20=u[eOffset03]-u[eOffset22];let k01_21=u[eOffset03+-1]-u[eOffset22+-1];u[eOffset03]+=u[eOffset22];u[eOffset03+-1]+=u[eOffset22+-1];u[eOffset22]=k00_20*a[aOffset4]-k01_21*a[aOffset4+1];u[eOffset22+-1]=k01_21*a[aOffset4]+k00_20*a[aOffset4+1];aOffset4+=16;k00_20=u[eOffset03+-2]-u[eOffset22+-2];k01_21=u[eOffset03+-3]-u[eOffset22+-3];u[eOffset03+-2]+=u[eOffset22+-2];u[eOffset03+-3]+=u[eOffset22+-3];u[eOffset22+-2]=k00_20*a[aOffset4]-k01_21*a[aOffset4+1];u[eOffset22+-3]=k01_21*a[aOffset4]+k00_20*a[aOffset4+1];aOffset4+=16;k00_20=u[eOffset03+-4]-u[eOffset22+-4];k01_21=u[eOffset03+-5]-u[eOffset22+-5];u[eOffset03+-4]+=u[eOffset22+-4];u[eOffset03+-5]+=u[eOffset22+-5];u[eOffset22+-4]=k00_20*a[aOffset4]-k01_21*a[aOffset4+1];u[eOffset22+-5]=k01_21*a[aOffset4]+k00_20*a[aOffset4+1];aOffset4+=16;k00_20=u[eOffset03+-6]-u[eOffset22+-6];k01_21=u[eOffset03+-7]-u[eOffset22+-7];u[eOffset03+-6]+=u[eOffset22+-6];u[eOffset03+-7]+=u[eOffset22+-7];u[eOffset22+-6]=k00_20*a[aOffset4]-k01_21*a[aOffset4+1];u[eOffset22+-7]=k01_21*a[aOffset4]+k00_20*a[aOffset4+1];eOffset03-=8;eOffset22-=8;aOffset4+=16}let d03=n2-1-n8*3;let aOffset5=0;let eOffset04=d03;let eOffset23=d03+-(n>>4);let i5=(n>>5>>2)+1;while(--i5>0){let k00_20=u[eOffset04]-u[eOffset23];let k01_21=u[eOffset04+-1]-u[eOffset23+-1];u[eOffset04]+=u[eOffset23];u[eOffset04+-1]+=u[eOffset23+-1];u[eOffset23]=k00_20*a[aOffset5]-k01_21*a[aOffset5+1];u[eOffset23+-1]=k01_21*a[aOffset5]+k00_20*a[aOffset5+1];aOffset5+=16;k00_20=u[eOffset04+-2]-u[eOffset23+-2];k01_21=u[eOffset04+-3]-u[eOffset23+-3];u[eOffset04+-2]+=u[eOffset23+-2];u[eOffset04+-3]+=u[eOffset23+-3];u[eOffset23+-2]=k00_20*a[aOffset5]-k01_21*a[aOffset5+1];u[eOffset23+-3]=k01_21*a[aOffset5]+k00_20*a[aOffset5+1];aOffset5+=16;k00_20=u[eOffset04+-4]-u[eOffset23+-4];k01_21=u[eOffset04+-5]-u[eOffset23+-5];u[eOffset04+-4]+=u[eOffset23+-4];u[eOffset04+-5]+=u[eOffset23+-5];u[eOffset23+-4]=k00_20*a[aOffset5]-k01_21*a[aOffset5+1];u[eOffset23+-5]=k01_21*a[aOffset5]+k00_20*a[aOffset5+1];aOffset5+=16;k00_20=u[eOffset04+-6]-u[eOffset23+-6];k01_21=u[eOffset04+-7]-u[eOffset23+-7];u[eOffset04+-6]+=u[eOffset23+-6];u[eOffset04+-7]+=u[eOffset23+-7];u[eOffset23+-6]=k00_20*a[aOffset5]-k01_21*a[aOffset5+1];u[eOffset23+-7]=k01_21*a[aOffset5]+k00_20*a[aOffset5+1];eOffset04-=8;eOffset23-=8;aOffset5+=16}let _g=2;let _g1=ld-3>>1;while(_g<_g1){let l=_g++;let k0=n>>l+2;let k0_2=k0>>1;let lim=1<<l+1;let _g1=0;let _g2=lim;while(_g1<_g2){let i=_g1++;let d0=n2-1-k0*i;let k1=1<<l+3;let aOffset=0;let eOffset0=d0;let eOffset2=d0+-k0_2;let i1=(n>>l+4>>2)+1;while(--i1>0){let k00_20=u[eOffset0]-u[eOffset2];let k01_21=u[eOffset0+-1]-u[eOffset2+-1];u[eOffset0]+=u[eOffset2];u[eOffset0+-1]+=u[eOffset2+-1];u[eOffset2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-1]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=k1;k00_20=u[eOffset0+-2]-u[eOffset2+-2];k01_21=u[eOffset0+-3]-u[eOffset2+-3];u[eOffset0+-2]+=u[eOffset2+-2];u[eOffset0+-3]+=u[eOffset2+-3];u[eOffset2+-2]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-3]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=k1;k00_20=u[eOffset0+-4]-u[eOffset2+-4];k01_21=u[eOffset0+-5]-u[eOffset2+-5];u[eOffset0+-4]+=u[eOffset2+-4];u[eOffset0+-5]+=u[eOffset2+-5];u[eOffset2+-4]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-5]=k01_21*a[aOffset]+k00_20*a[aOffset+1];aOffset+=k1;k00_20=u[eOffset0+-6]-u[eOffset2+-6];k01_21=u[eOffset0+-7]-u[eOffset2+-7];u[eOffset0+-6]+=u[eOffset2+-6];u[eOffset0+-7]+=u[eOffset2+-7];u[eOffset2+-6]=k00_20*a[aOffset]-k01_21*a[aOffset+1];u[eOffset2+-7]=k01_21*a[aOffset]+k00_20*a[aOffset+1];eOffset0-=8;eOffset2-=8;aOffset+=k1}}}let _g2=ld-3>>1;let _g3=ld-6;while(_g2<_g3){let l=_g2++;let k0=n>>l+2;let k1=1<<l+3;let k0_2=k0>>1;let rlim=n>>l+6;let lim=1<<l+1;let aOffset=0;let i_off=n2-1;let r=rlim+1;while(--r>0){let A0=a[aOffset];let A1=a[aOffset+1];let A2=a[aOffset+k1];let A3=a[aOffset+k1+1];let A4=a[aOffset+k1*2];let A5=a[aOffset+k1*2+1];let A6=a[aOffset+k1*3];let A7=a[aOffset+k1*3+1];let eeOffset0=i_off;let eeOffset2=i_off+-k0_2;let i=lim+1;while(--i>0){let k00=u[eeOffset0]-u[eeOffset2];let k11=u[eeOffset0+-1]-u[eeOffset2+-1];u[eeOffset0]+=u[eeOffset2];u[eeOffset0+-1]+=u[eeOffset2+-1];u[eeOffset2]=k00*A0-k11*A1;u[eeOffset2+-1]=k11*A0+k00*A1;k00=u[eeOffset0+-2]-u[eeOffset2+-2];k11=u[eeOffset0+-3]-u[eeOffset2+-3];u[eeOffset0+-2]+=u[eeOffset2+-2];u[eeOffset0+-3]+=u[eeOffset2+-3];u[eeOffset2+-2]=k00*A2-k11*A3;u[eeOffset2+-3]=k11*A2+k00*A3;k00=u[eeOffset0+-4]-u[eeOffset2+-4];k11=u[eeOffset0+-5]-u[eeOffset2+-5];u[eeOffset0+-4]+=u[eeOffset2+-4];u[eeOffset0+-5]+=u[eeOffset2+-5];u[eeOffset2+-4]=k00*A4-k11*A5;u[eeOffset2+-5]=k11*A4+k00*A5;k00=u[eeOffset0+-6]-u[eeOffset2+-6];k11=u[eeOffset0+-7]-u[eeOffset2+-7];u[eeOffset0+-6]+=u[eeOffset2+-6];u[eeOffset0+-7]+=u[eeOffset2+-7];u[eeOffset2+-6]=k00*A6-k11*A7;u[eeOffset2+-7]=k11*A6+k00*A7;eeOffset0-=k0;eeOffset2-=k0}aOffset+=k1*4;i_off-=8}}let i_off2=n2-1;let A2=a[n>>3];let zOffset=i_off2;let baseOffset=i_off2-16*(n>>5);while(zOffset>baseOffset){let t0=u[zOffset];let t1=u[zOffset+-8];u[zOffset+-8]=t0-t1;u[zOffset]=t0+t1;t0=u[zOffset+-1];t1=u[zOffset+-9];u[zOffset+-9]=t0-t1;u[zOffset+-1]=t0+t1;t0=u[zOffset+-2];t1=u[zOffset+-10];let k00=t0-t1;u[zOffset+-2]=t0+t1;t0=u[zOffset+-3];t1=u[zOffset+-11];let k11=t0-t1;u[zOffset+-3]=t0+t1;u[zOffset+-10]=(k00+k11)*A2;u[zOffset+-11]=(k11-k00)*A2;t0=u[zOffset+-4];t1=u[zOffset+-12];k00=t1-t0;u[zOffset+-4]=t0+t1;t0=u[zOffset+-5];t1=u[zOffset+-13];k11=t0-t1;u[zOffset+-5]=t0+t1;u[zOffset+-12]=k11;u[zOffset+-13]=k00;t0=u[zOffset+-6];t1=u[zOffset+-14];k00=t1-t0;u[zOffset+-6]=t0+t1;t0=u[zOffset+-7];t1=u[zOffset+-15];k11=t0-t1;u[zOffset+-7]=t0+t1;u[zOffset+-14]=(k00+k11)*A2;u[zOffset+-15]=(k00-k11)*A2;let t01=u[zOffset];let t11=u[zOffset+-4];let k001=t01-t11;let y0=t01+t11;t01=u[zOffset+-2];t11=u[zOffset+-6];let y2=t01+t11;let k22=t01-t11;u[zOffset]=y0+y2;u[zOffset+-2]=y0-y2;let k33=u[zOffset+-3]-u[zOffset+-7];u[zOffset+-4]=k001+k33;u[zOffset+-6]=k001-k33;t01=u[zOffset+-1];t11=u[zOffset+-5];let k111=t01-t11;let y1=t01+t11;let y3=u[zOffset+-3]+u[zOffset+-7];u[zOffset+-1]=y1+y3;u[zOffset+-3]=y1-y3;u[zOffset+-5]=k111-k22;u[zOffset+-7]=k111+k22;let zOffset1=zOffset-8;let t02=u[zOffset1];let t12=u[zOffset1+-4];let k002=t02-t12;let y01=t02+t12;t02=u[zOffset1+-2];t12=u[zOffset1+-6];let y21=t02+t12;let k221=t02-t12;u[zOffset1]=y01+y21;u[zOffset1+-2]=y01-y21;let k331=u[zOffset1+-3]-u[zOffset1+-7];u[zOffset1+-4]=k002+k331;u[zOffset1+-6]=k002-k331;t02=u[zOffset1+-1];t12=u[zOffset1+-5];let k112=t02-t12;let y11=t02+t12;let y31=u[zOffset1+-3]+u[zOffset1+-7];u[zOffset1+-1]=y11+y31;u[zOffset1+-3]=y11-y31;u[zOffset1+-5]=k112-k221;u[zOffset1+-7]=k112+k221;zOffset-=16}let brOffset=0;let dOffset01=n4-4;let dOffset11=n2-4;while(dOffset01>=0){let k4=bitReverse[brOffset];v[dOffset11+3]=u[k4];v[dOffset11+2]=u[k4+1];v[dOffset01+3]=u[k4+2];v[dOffset01+2]=u[k4+3];k4=bitReverse[brOffset+1];v[dOffset11+1]=u[k4];v[dOffset11]=u[k4+1];v[dOffset01+1]=u[k4+2];v[dOffset01]=u[k4+3];dOffset01-=4;dOffset11-=4;brOffset+=2}let cOffset=0;let dOffset2=0;let eOffset3=n2-4;while(dOffset2<eOffset3){let a02=v[dOffset2]-v[eOffset3+2];let a11=v[dOffset2+1]+v[eOffset3+3];let b0=c[cOffset+1]*a02+c[cOffset]*a11;let b1=c[cOffset+1]*a11-c[cOffset]*a02;let b2=v[dOffset2]+v[eOffset3+2];let b3=v[dOffset2+1]-v[eOffset3+3];v[dOffset2]=b2+b0;v[dOffset2+1]=b3+b1;v[eOffset3+2]=b2-b0;v[eOffset3+3]=b1-b3;a02=v[dOffset2+2]-v[eOffset3];a11=v[dOffset2+3]+v[eOffset3+1];b0=c[cOffset+3]*a02+c[cOffset+2]*a11;b1=c[cOffset+3]*a11-c[cOffset+2]*a02;b2=v[dOffset2+2]+v[eOffset3];b3=v[dOffset2+3]-v[eOffset3+1];v[dOffset2+2]=b2+b0;v[dOffset2+3]=b3+b1;v[eOffset3]=b2-b0;v[eOffset3+1]=b1-b3;cOffset+=4;dOffset2+=4;eOffset3-=4}let bOffset=n2-8;let eOffset4=n2-8;let dOffset02=0;let dOffset12=n2-4;let dOffset21=n2;let dOffset3=n-4;while(eOffset4>=0){let p3=buf2[eOffset4+6]*b[bOffset+7]-buf2[eOffset4+7]*b[bOffset+6];let p2=-buf2[eOffset4+6]*b[bOffset+6]-buf2[eOffset4+7]*b[bOffset+7];buffer[dOffset02]=p3;buffer[dOffset12+3]=-p3;buffer[dOffset21]=p2;buffer[dOffset3+3]=p2;let p1=buf2[eOffset4+4]*b[bOffset+5]-buf2[eOffset4+5]*b[bOffset+4];let p0=-buf2[eOffset4+4]*b[bOffset+4]-buf2[eOffset4+5]*b[bOffset+5];buffer[dOffset02+1]=p1;buffer[dOffset12+2]=-p1;buffer[dOffset21+1]=p0;buffer[dOffset3+2]=p0;p3=buf2[eOffset4+2]*b[bOffset+3]-buf2[eOffset4+3]*b[bOffset+2];p2=-buf2[eOffset4+2]*b[bOffset+2]-buf2[eOffset4+3]*b[bOffset+3];buffer[dOffset02+2]=p3;buffer[dOffset12+1]=-p3;buffer[dOffset21+2]=p2;buffer[dOffset3+1]=p2;p1=buf2[eOffset4]*b[bOffset+1]-buf2[eOffset4+1]*b[bOffset];p0=-buf2[eOffset4]*b[bOffset]-buf2[eOffset4+1]*b[bOffset+1];buffer[dOffset02+3]=p1;buffer[dOffset12]=-p1;buffer[dOffset21+3]=p0;buffer[dOffset3]=p0;bOffset-=8;eOffset4-=8;dOffset02+=4;dOffset21+=4;dOffset12-=4;dOffset3-=4}}decodePacket(){let result=this.decodeInitial();if(result==null){return null}let rest=this.decodePacketRest(result);return rest}decodeInitial(){this.channelBufferStart=this.channelBufferEnd=0;while(true){if(!this.decodeState.maybeStartPacket()){return null}if(this.decodeState.readBits(1)!=0){while(true){let _this=this.decodeState;let x;if(_this.bytesInSeg==0&&(_this.lastSeg||_this.next()==0)){x=-1}else{_this.bytesInSeg--;_this.inputPosition+=1;x=_this.input.readByte()}_this.validBits=0;if(!(-1!=x)){break}}continue}break}let n=this.header.modes.length-1;let log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];let i=this.decodeState.readBits(n<16384?n<16?log2_4[n]:n<512?5+log2_4[n>>5]:10+log2_4[n>>10]:n<16777216?n<524288?15+log2_4[n>>15]:20+log2_4[n>>20]:n<536870912?25+log2_4[n>>25]:n<-2147483648?30+log2_4[n>>30]:0);if(i==-1||i>=this.header.modes.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodeInitial"}))}let m=this.header.modes[i];let n1;let prev;let next;if(m.blockflag){n1=this.header.blocksize1;prev=this.decodeState.readBits(1);next=this.decodeState.readBits(1)}else{next=0;prev=next;n1=this.header.blocksize0}let windowCenter=n1>>1;return{mode:i,left:m.blockflag&&prev==0?{start:n1-this.header.blocksize0>>2,end:n1+this.header.blocksize0>>2}:{start:0,end:windowCenter},right:m.blockflag&&next==0?{start:n1*3-this.header.blocksize0>>2,end:n1*3+this.header.blocksize0>>2}:{start:windowCenter,end:n1}}}decodePacketRest(r){let len=0;let m=this.header.modes[r.mode];let this1=new Array(256);let zeroChannel=this1;let this2=new Array(256);let reallyZeroChannel=this2;let n=m.blockflag?this.header.blocksize1:this.header.blocksize0;let map=this.header.mapping[m.mapping];let n2=n>>1;let rangeList=[256,128,86,64];let codebooks=this.header.codebooks;let _g=0;let _g1=this.header.channel;while(_g<_g1){let i=_g++;let s=map.chan[i].mux;zeroChannel[i]=false;let floor=this.header.floorConfig[map.submapFloor[s]];if(floor.type==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:581,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodePacketRest"}))}else{let g=floor.floor1;if(this.decodeState.readBits(1)!=0){let fy=[];let this1=new Array(256);let step2Flag=this1;let range=rangeList[g.floor1Multiplier-1];let offset=2;fy=this.finalY[i];let log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];fy[0]=this.decodeState.readBits((range<16384?range<16?log2_4[range]:range<512?5+log2_4[range>>5]:10+log2_4[range>>10]:range<16777216?range<524288?15+log2_4[range>>15]:20+log2_4[range>>20]:range<536870912?25+log2_4[range>>25]:range<-2147483648?30+log2_4[range>>30]:0)-1);let log2_41=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];fy[1]=this.decodeState.readBits((range<16384?range<16?log2_41[range]:range<512?5+log2_41[range>>5]:10+log2_41[range>>10]:range<16777216?range<524288?15+log2_41[range>>15]:20+log2_41[range>>20]:range<536870912?25+log2_41[range>>25]:range<-2147483648?30+log2_41[range>>30]:0)-1);let _g=0;let _g1=g.partitions;while(_g<_g1){let j=_g++;let pclass=g.partitionClassList[j];let cdim=g.classDimensions[pclass];let cbits=g.classSubclasses[pclass];let csub=(1<<cbits)-1;let cval=0;if(cbits!=0){let c=codebooks[g.classMasterbooks[pclass]];let _this=this.decodeState;if(_this.validBits<10){_this.prepHuffman()}let i=c.fastHuffman[_this.acc&1023];let val;if(i>=0){let l=c.codewordLengths[i];_this.acc=_this.acc>>>l;_this.validBits-=l;if(_this.validBits<0){_this.validBits=0;val=-1}else{val=i}}else{val=_this.decodeScalarRaw(c)}if(c.sparse){val=c.sortedValues[val]}cval=val}let books=g.subclassBooks[pclass];let _g1=0;let _g2=cdim;while(_g1<_g2){let k=_g1++;let book=books[cval&csub];cval>>=cbits;let tmp=offset++;let tmp1;if(book>=0){let _this=this.decodeState;let c=codebooks[book];if(_this.validBits<10){_this.prepHuffman()}let i=c.fastHuffman[_this.acc&1023];let val;if(i>=0){let l=c.codewordLengths[i];_this.acc=_this.acc>>>l;_this.validBits-=l;if(_this.validBits<0){_this.validBits=0;val=-1}else{val=i}}else{val=_this.decodeScalarRaw(c)}if(c.sparse){val=c.sortedValues[val]}tmp1=val}else{tmp1=0}fy[tmp]=tmp1}}if(this.decodeState.validBits==-1){zeroChannel[i]=true;continue}step2Flag[0]=step2Flag[1]=true;let naighbors=g.neighbors;let xlist=g.xlist;let _g2=2;let _g3=g.values;while(_g2<_g3){let j=_g2++;let low=naighbors[j][0];let high=naighbors[j][1];let x0=xlist[low];let y0=fy[low];let dy=fy[high]-y0;let adx=xlist[high]-x0;let err=Math.abs(dy)*(xlist[j]-x0);let off=err/adx|0;let lowroom=dy<0?y0-off:y0+off;let val=fy[j];let highroom=range-lowroom;let room=highroom<lowroom?highroom*2:lowroom*2;if(val!=0){step2Flag[low]=step2Flag[high]=true;step2Flag[j]=true;if(val>=room){if(highroom>lowroom){fy[j]=val-lowroom+lowroom}else{fy[j]=lowroom-val+highroom-1}}else if((val&1)!=0){fy[j]=lowroom-(val+1>>1)}else{fy[j]=lowroom+(val>>1)}}else{step2Flag[j]=false;fy[j]=lowroom}}let _g4=0;let _g5=g.values;while(_g4<_g5){let j=_g4++;if(!step2Flag[j]){fy[j]=-1}}}else{zeroChannel[i]=true}}}let _g2=0;let _g3=this.header.channel;while(_g2<_g3){let i=_g2++;reallyZeroChannel[i]=zeroChannel[i]}let _g4=0;let _g5=map.couplingSteps;while(_g4<_g5){let i=_g4++;if(!zeroChannel[map.chan[i].magnitude]||!zeroChannel[map.chan[i].angle]){zeroChannel[map.chan[i].magnitude]=zeroChannel[map.chan[i].angle]=false}}let _g6=0;let _g7=map.submaps;while(_g6<_g7){let i=_g6++;let this1=new Array(this.header.channel);let residueBuffers=this1;let this2=new Array(256);let doNotDecode=this2;let ch=0;let _g=0;let _g1=this.header.channel;while(_g<_g1){let j=_g++;if(map.chan[j].mux==i){if(zeroChannel[j]){doNotDecode[ch]=true;residueBuffers[ch]=null}else{doNotDecode[ch]=false;residueBuffers[ch]=this.channelBuffers[j]}++ch}}let r=map.submapResidue[i];let residue=this.header.residueConfig[r];residue.decode(this.decodeState,this.header,residueBuffers,ch,n2,doNotDecode,this.channelBuffers)}let i=map.couplingSteps;let n21=n>>1;while(--i>=0){let m=this.channelBuffers[map.chan[i].magnitude];let a=this.channelBuffers[map.chan[i].angle];let _g=0;let _g1=n21;while(_g<_g1){let j=_g++;let a2;let m2;if(m[j]>0){if(a[j]>0){m2=m[j];a2=m[j]-a[j]}else{a2=m[j];m2=m[j]+a[j]}}else if(a[j]>0){m2=m[j];a2=m[j]+a[j]}else{a2=m[j];m2=m[j]-a[j]}m[j]=m2;a[j]=a2}}let _g8=0;let _g9=this.header.channel;while(_g8<_g9){let i=_g8++;if(reallyZeroChannel[i]){let _g=0;let _g1=n21;while(_g<_g1){let j=_g++;this.channelBuffers[i][j]=0}}else{map.doFloor(this.header.floorConfig,i,n,this.channelBuffers[i],this.finalY[i],null)}}let _g10=0;let _g11=this.header.channel;while(_g10<_g11){let i=_g10++;this.inverseMdct(this.channelBuffers[i],n,m.blockflag)}let _this=this.decodeState;while(_this.bytesInSeg!=0||!_this.lastSeg&&_this.next()!=0){_this.bytesInSeg--;_this.inputPosition+=1;_this.input.readByte()}return this.decodeState.finishDecodePacket(this.previousLength,n,r)}static start(input){let decodeState=new kha_audio2_ogg_vorbis_VorbisDecodeState(input);let header=kha_audio2_ogg_vorbis_data_Header.read(decodeState);let decoder=new kha_audio2_ogg_vorbis_VorbisDecoder(header,decodeState);decodeState.startFirstDecode();decoder.pumpFirstFrame();return decoder}}$hxClasses["kha.audio2.ogg.vorbis.VorbisDecoder"]=kha_audio2_ogg_vorbis_VorbisDecoder;kha_audio2_ogg_vorbis_VorbisDecoder.__name__=true;Object.assign(kha_audio2_ogg_vorbis_VorbisDecoder.prototype,{__class__:kha_audio2_ogg_vorbis_VorbisDecoder});class kha_audio2_ogg_vorbis_VorbisTools{static pointCompare(a,b){if(a.x<b.x){return-1}else if(a.x>b.x){return 1}else{return 0}}static uintAsc(a,b){if(UInt.gt(b,a)){return-1}else if(a==b){return 0}else{return 1}}static lookup1Values(entries,dim){let r=Math.exp(Math.log(entries)/dim)|0;if((Math.pow(r+1,dim)|0)<=entries){++r}return r}static computeWindow(n,$window){let n2=n>>1;let _g=0;let _g1=n2;while(_g<_g1){let i=_g++;$window[i]=Math.sin(1.5707963267948966*kha_audio2_ogg_vorbis_VorbisTools.square(Math.sin((i+.5)/n2*.5*3.141592653589793)))}}static square(f){return f*f}static computeBitReverse(n,rev){let log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];let ld=(n<16384?n<16?log2_4[n]:n<512?5+log2_4[n>>5]:10+log2_4[n>>10]:n<16777216?n<524288?15+log2_4[n>>15]:20+log2_4[n>>20]:n<536870912?25+log2_4[n>>25]:n<-2147483648?30+log2_4[n>>30]:0)-1;let n8=n>>3;let _g=0;let _g1=n8;while(_g<_g1){let i=_g++;let n=i;n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;rev[i]=(n>>>16|n<<16)>>>32-ld+3<<2}}static computeTwiddleFactors(n,af,bf,cf){let n4=n>>2;let n8=n>>3;let k2=0;let _g=0;let _g1=n4;while(_g<_g1){let k=_g++;af[k2]=Math.cos(4*k*3.141592653589793/n);af[k2+1]=-Math.sin(4*k*3.141592653589793/n);bf[k2]=Math.cos((k2+1)*3.141592653589793/n/2)*.5;bf[k2+1]=Math.sin((k2+1)*3.141592653589793/n/2)*.5;k2+=2}let k21=0;let _g2=0;let _g3=n8;while(_g2<_g3){let k=_g2++;cf[k21]=Math.cos(2*(k21+1)*3.141592653589793/n);cf[k21+1]=-Math.sin(2*(k21+1)*3.141592653589793/n);k21+=2}}static drawLine(output,x0,y0,x1,y1,n){if(kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable==null){let this1=new Array(32);kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable=this1;let _g=0;while(_g<32){let i=_g++;let this1=kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable;let this2=new Array(64);this1[i]=this2;let _g1=1;while(_g1<64){let j=_g1++;kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[i][j]=i/j|0}}}let dy=y1-y0;let adx=x1-x0;let ady=dy<0?-dy:dy;let base;let x=x0;let y=y0;let err=0;let sy;if(adx<64&&ady<32){if(dy<0){base=-kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[ady][adx];sy=base-1}else{base=kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[ady][adx];sy=base+1}}else{base=dy/adx|0;sy=dy<0?base-1:base+1}ady-=(base<0?-base:base)*adx;if(x1>n){x1=n}output[x]*=kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[y];let _g=x+1;let _g1=x1;while(_g<_g1){let i=_g++;err+=ady;if(err>=adx){err-=adx;y+=sy}else{y+=base}output[i]*=kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[y]}}}$hxClasses["kha.audio2.ogg.vorbis.VorbisTools"]=kha_audio2_ogg_vorbis_VorbisTools;kha_audio2_ogg_vorbis_VorbisTools.__name__=true;class kha_audio2_ogg_vorbis_data_Codebook{constructor(){}computeCodewords(len,n,values){let this1=new Array(32);let available=this1;available[0]=0;available[1]=0;available[2]=0;available[3]=0;available[4]=0;available[5]=0;available[6]=0;available[7]=0;available[8]=0;available[9]=0;available[10]=0;available[11]=0;available[12]=0;available[13]=0;available[14]=0;available[15]=0;available[16]=0;available[17]=0;available[18]=0;available[19]=0;available[20]=0;available[21]=0;available[22]=0;available[23]=0;available[24]=0;available[25]=0;available[26]=0;available[27]=0;available[28]=0;available[29]=0;available[30]=0;available[31]=0;let k=0;while(k<n){if(len[k]<255){break}++k}if(k==n){return true}let m=0;let count=m++;if(!this.sparse){this.codewords[k]=0}else{this.codewords[count]=0;this.codewordLengths[count]=len[k];values[count]=k}let i=0;while(++i<=len[k])available[i]=1<<32-i;i=k;while(++i<n){let z=len[i];if(z==255){continue}while(z>0&&available[z]==0)--z;if(z==0){return false}let res=available[z];available[z]=0;let n=res;n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;let huffCode=n>>>16|n<<16;let count=m++;if(!this.sparse){this.codewords[i]=huffCode}else{this.codewords[count]=huffCode;this.codewordLengths[count]=len[i];values[count]=i}if(z!=len[i]){let y=len[i];while(y>z){available[y]=res+(1<<32-y);--y}}}return true}computeSortedHuffman(lengths,values){if(!this.sparse){let k=0;let _g=0;let _g1=this.entries;while(_g<_g1){let i=_g++;let len=lengths[i];if(this.sparse?true:len==255?false:len>10){let n=this.codewords[i];n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;this.sortedCodewords[k++]=n>>>16|n<<16}}}else{let _g=0;let _g1=this.sortedEntries;while(_g<_g1){let i=_g++;let n=this.codewords[i];n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;this.sortedCodewords[i]=n>>>16|n<<16}}this.sortedCodewords[this.sortedEntries]=-1;this.sortedCodewords.sort(kha_audio2_ogg_vorbis_VorbisTools.uintAsc);let len=this.sparse?this.sortedEntries:this.entries;let _g=0;let _g1=len;while(_g<_g1){let i=_g++;let huffLen=this.sparse?lengths[values[i]]:lengths[i];if(this.sparse?true:huffLen==255?false:huffLen>10){let n=this.codewords[i];n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;let code=n>>>16|n<<16;let x=0;let n1=this.sortedEntries;while(n1>1){let m=x+(n1>>1);if(UInt.gte(code,this.sortedCodewords[m])){x=m;n1-=n1>>1}else{n1>>=1}}if(this.sparse){this.sortedValues[x]=values[i];this.codewordLengths[x]=huffLen}else{this.sortedValues[x]=i}}}}computeAcceleratedHuffman(){let this1=new Array(1024);this.fastHuffman=this1;this.fastHuffman[0]=-1;let _g=0;let _g1=1024;while(_g<_g1){let i=_g++;this.fastHuffman[i]=-1}let len=this.sparse?this.sortedEntries:this.entries;let _g2=0;let _g3=len;while(_g2<_g3){let i=_g2++;if(this.codewordLengths[i]<=10){let z;if(this.sparse){let n=this.sortedCodewords[i];n=(n&-1431655766)>>>1|(n&1431655765)<<1;n=(n&-858993460)>>>2|(n&858993459)<<2;n=(n&-252645136)>>>4|(n&252645135)<<4;n=(n&-16711936)>>>8|(n&16711935)<<8;z=n>>>16|n<<16}else{z=this.codewords[i]}while(z<1024){this.fastHuffman[z]=i;z+=1<<this.codewordLengths[i]}}}}codebookDecode(decodeState,output,offset,len){if(decodeState.validBits<10){decodeState.prepHuffman()}let i=this.fastHuffman[decodeState.acc&1023];let val;if(i>=0){let l=this.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(this)}if(this.sparse){val=this.sortedValues[val]}let z=val;let lookupValues=this.lookupValues;let sequenceP=this.sequenceP;let multiplicands=this.multiplicands;let minimumValue=this.minimumValue;if(z<0){return false}if(len>this.dimensions){len=this.dimensions}if(this.lookupType==1){let div=1;let last=0;let _g=0;let _g1=len;while(_g<_g1){let i=_g++;let off=UInt.toFloat(z/div|0)%UInt.toFloat(lookupValues)|0;let val=multiplicands[off]+last;output[offset+i]+=val;if(sequenceP){last=val+minimumValue}div=div*lookupValues}return true}z*=this.dimensions;if(sequenceP){let last=0;let _g=0;let _g1=len;while(_g<_g1){let i=_g++;let val=multiplicands[z+i]+last;output[offset+i]+=val;last=val+minimumValue}}else{let last=0;let _g=0;let _g1=len;while(_g<_g1){let i=_g++;output[offset+i]+=multiplicands[z+i]+last}}return true}codebookDecodeStep(decodeState,output,offset,len,step){if(decodeState.validBits<10){decodeState.prepHuffman()}let i=this.fastHuffman[decodeState.acc&1023];let val;if(i>=0){let l=this.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(this)}if(this.sparse){val=this.sortedValues[val]}let z=val;let last=0;if(z<0){return false}if(len>this.dimensions){len=this.dimensions}let lookupValues=this.lookupValues;let sequenceP=this.sequenceP;let multiplicands=this.multiplicands;if(this.lookupType==1){let div=1;let _g=0;let _g1=len;while(_g<_g1){let i=_g++;let off=UInt.toFloat(z/div|0)%UInt.toFloat(lookupValues)|0;let val=multiplicands[off]+last;output[offset+i*step]+=val;if(sequenceP){last=val}div=div*lookupValues}return true}z*=this.dimensions;let _g=0;let _g1=len;while(_g<_g1){let i=_g++;let val=multiplicands[z+i]+last;output[offset+i*step]+=val;if(sequenceP){last=val}}return true}decodeDeinterleaveRepeat(decodeState,residueBuffers,ch,cInter,pInter,len,totalDecode){let effective=this.dimensions;if(this.lookupType==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:488,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}))}let multiplicands=this.multiplicands;let sequenceP=this.sequenceP;let lookupValues=this.lookupValues;while(totalDecode>0){let last=0;if(decodeState.validBits<10){decodeState.prepHuffman()}let i=this.fastHuffman[decodeState.acc&1023];let val;if(i>=0){let l=this.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(this)}if(this.sparse){val=this.sortedValues[val]}let z=val;if(z<0){if(decodeState.bytesInSeg==0&&decodeState.lastSeg){return null}throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:503,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}))}if(cInter+pInter*ch+effective>len*ch){effective=len*ch-(pInter*ch-cInter)}if(this.lookupType==1){let div=1;if(sequenceP){let _g=0;let _g1=effective;while(_g<_g1){let i=_g++;let off=UInt.toFloat(z/div|0)%UInt.toFloat(lookupValues)|0;let val=multiplicands[off]+last;residueBuffers[cInter][pInter]+=val;if(++cInter==ch){cInter=0;++pInter}last=val;div=div*lookupValues}}else{let _g=0;let _g1=effective;while(_g<_g1){let i=_g++;let off=UInt.toFloat(z/div|0)%UInt.toFloat(lookupValues)|0;let val=multiplicands[off]+last;residueBuffers[cInter][pInter]+=val;if(++cInter==ch){cInter=0;++pInter}div=div*lookupValues}}}else{z*=this.dimensions;if(sequenceP){let _g=0;let _g1=effective;while(_g<_g1){let i=_g++;let val=multiplicands[z+i]+last;residueBuffers[cInter][pInter]+=val;if(++cInter==ch){cInter=0;++pInter}last=val}}else{let _g=0;let _g1=effective;while(_g<_g1){let i=_g++;let val=multiplicands[z+i]+last;residueBuffers[cInter][pInter]+=val;if(++cInter==ch){cInter=0;++pInter}}}}totalDecode-=effective}return{cInter:cInter,pInter:pInter}}residueDecode(decodeState,target,offset,n,rtype){if(rtype==0){let step=n/this.dimensions|0;let _g=0;let _g1=step;while(_g<_g1){let k=_g++;if(!this.codebookDecodeStep(decodeState,target,offset+k,n-offset-k,step)){return false}}}else{let k=0;while(k<n){if(!this.codebookDecode(decodeState,target,offset,n-k)){return false}k+=this.dimensions;offset+=this.dimensions}}return true}static read(decodeState){let c=new kha_audio2_ogg_vorbis_data_Codebook;if(decodeState.readBits(8)!=66||decodeState.readBits(8)!=67||decodeState.readBits(8)!=86){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:40,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}))}let x=decodeState.readBits(8);c.dimensions=(decodeState.readBits(8)<<8)+x;let x1=decodeState.readBits(8);let y=decodeState.readBits(8);c.entries=(decodeState.readBits(8)<<16)+(y<<8)+x1;let ordered=decodeState.readBits(1);c.sparse=ordered!=0?false:decodeState.readBits(1)!=0;let this1=new Array(c.entries);let lengths=this1;if(!c.sparse){c.codewordLengths=lengths}let total=0;if(ordered!=0){let currentEntry=0;let currentLength=decodeState.readBits(5)+1;while(currentEntry<c.entries){let limit=c.entries-currentEntry;let log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];let n=decodeState.readBits(limit<16384?limit<16?log2_4[limit]:limit<512?5+log2_4[limit>>5]:10+log2_4[limit>>10]:limit<16777216?limit<524288?15+log2_4[limit>>15]:20+log2_4[limit>>20]:limit<536870912?25+log2_4[limit>>25]:limit<-2147483648?30+log2_4[limit>>30]:0);if(currentEntry+n>c.entries){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook entrys",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}))}let _g=0;let _g1=n;while(_g<_g1){let i=_g++;lengths[currentEntry+i]=currentLength}currentEntry+=n;++currentLength}}else{let _g=0;let _g1=c.entries;while(_g<_g1){let j=_g++;let present=c.sparse?decodeState.readBits(1):1;if(present!=0){lengths[j]=decodeState.readBits(5)+1;++total}else{lengths[j]=255}}}if(c.sparse&&total>=c.entries>>2){c.codewordLengths=lengths;c.sparse=false}let tmp;if(c.sparse){tmp=total}else{let sortedCount=0;let _g=0;let _g1=c.entries;while(_g<_g1){let j=_g++;let l=lengths[j];if(l>10&&l!=255){++sortedCount}}tmp=sortedCount}c.sortedEntries=tmp;let values=null;if(!c.sparse){let this1=new Array(c.entries);c.codewords=this1}else{if(c.sortedEntries!=0){let this1=new Array(c.sortedEntries);c.codewordLengths=this1;let this2=new Array(c.entries);c.codewords=this2;let this3=new Array(c.entries);values=this3}let size=c.entries+64*c.sortedEntries}if(!c.computeCodewords(lengths,c.entries,values)){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"compute codewords",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:120,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}))}if(c.sortedEntries!=0){c.sortedCodewords=[];let this1=new Array(c.sortedEntries);c.sortedValues=this1;c.computeSortedHuffman(lengths,values)}if(c.sparse){values=null;c.codewords=null;lengths=null}c.computeAcceleratedHuffman();c.lookupType=decodeState.readBits(4);if(c.lookupType>2){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook lookup type",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:143,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}))}if(c.lookupType>0){let x=decodeState.readBits(32);let mantissa=UInt.toFloat(x&2097151);let sign=x&-2147483648;let exp=(x&2145386496)>>>21;let res=sign!=0?-mantissa:mantissa;c.minimumValue=res*Math.pow(2,exp-788);let x1=decodeState.readBits(32);let mantissa1=UInt.toFloat(x1&2097151);let sign1=x1&-2147483648;let exp1=(x1&2145386496)>>>21;let res1=sign1!=0?-mantissa1:mantissa1;c.deltaValue=res1*Math.pow(2,exp1-788);c.valueBits=decodeState.readBits(4)+1;c.sequenceP=decodeState.readBits(1)!=0;if(c.lookupType==1){c.lookupValues=kha_audio2_ogg_vorbis_VorbisTools.lookup1Values(c.entries,c.dimensions)}else{c.lookupValues=c.entries*c.dimensions}let this1=new Array(c.lookupValues);let mults=this1;let _g=0;let _g1=c.lookupValues;while(_g<_g1){let j=_g++;let q=decodeState.readBits(c.valueBits);if(q==-1){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"fail lookup",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:161,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}))}mults[j]=q}let this2=new Array(c.lookupValues);c.multiplicands=this2;let _g2=0;let _g3=c.lookupValues;while(_g2<_g3){let j=_g2++;c.multiplicands[j]=mults[j]*c.deltaValue+c.minimumValue}if(c.lookupType==2&&c.sequenceP){let _g=1;let _g1=c.lookupValues;while(_g<_g1){let j=_g++;c.multiplicands[j]=c.multiplicands[j-1]}c.sequenceP=false}}return c}}$hxClasses["kha.audio2.ogg.vorbis.data.Codebook"]=kha_audio2_ogg_vorbis_data_Codebook;kha_audio2_ogg_vorbis_data_Codebook.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_Codebook.prototype,{__class__:kha_audio2_ogg_vorbis_data_Codebook});class kha_audio2_ogg_vorbis_data_Comment{constructor(){this.data=new haxe_ds_StringMap}get_loopStart(){return Std.parseInt(this.getString("loopstart"))}get_loopLength(){return Std.parseInt(this.getString("looplength"))}add(key,value){key=key.toLowerCase();if(Object.prototype.hasOwnProperty.call(this.data.h,key)){this.data.h[key].push(value)}else{let v=[value];this.data.h[key]=v}}getString(key){key=key.toLowerCase();if(Object.prototype.hasOwnProperty.call(this.data.h,key)){return this.data.h[key][0]}else{return null}}}$hxClasses["kha.audio2.ogg.vorbis.data.Comment"]=kha_audio2_ogg_vorbis_data_Comment;kha_audio2_ogg_vorbis_data_Comment.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_Comment.prototype,{__class__:kha_audio2_ogg_vorbis_data_Comment,__properties__:{get_loopLength:"get_loopLength",get_loopStart:"get_loopStart"}});class kha_audio2_ogg_vorbis_data_Floor{constructor(){}static read(decodeState,codebooks){let floor=new kha_audio2_ogg_vorbis_data_Floor;floor.type=decodeState.readBits(16);if(floor.type>1){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:28,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}if(floor.type==0){let g=floor.floor0=new kha_audio2_ogg_vorbis_data_Floor0;g.order=decodeState.readBits(8);g.rate=decodeState.readBits(16);g.barkMapSize=decodeState.readBits(16);g.amplitudeBits=decodeState.readBits(6);g.amplitudeOffset=decodeState.readBits(8);g.numberOfBooks=decodeState.readBits(4)+1;let _g=0;let _g1=g.numberOfBooks;while(_g<_g1){let j=_g++;g.bookList[j]=decodeState.readBits(8)}throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.FEATURE_NOT_SUPPORTED,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:41,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}else{let p=[];let g=floor.floor1=new kha_audio2_ogg_vorbis_data_Floor1;let maxClass=-1;g.partitions=decodeState.readBits(5);let this1=new Array(g.partitions);g.partitionClassList=this1;let _g=0;let _g1=g.partitions;while(_g<_g1){let j=_g++;g.partitionClassList[j]=decodeState.readBits(4);if(g.partitionClassList[j]>maxClass){maxClass=g.partitionClassList[j]}}let this2=new Array(maxClass+1);g.classDimensions=this2;let this3=new Array(maxClass+1);g.classMasterbooks=this3;let this4=new Array(maxClass+1);g.classSubclasses=this4;let this5=new Array(maxClass+1);g.subclassBooks=this5;let _g2=0;let _g3=maxClass+1;while(_g2<_g3){let j=_g2++;g.classDimensions[j]=decodeState.readBits(3)+1;g.classSubclasses[j]=decodeState.readBits(2);if(g.classSubclasses[j]!=0){g.classMasterbooks[j]=decodeState.readBits(8);if(g.classMasterbooks[j]>=codebooks.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:64,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}}let kl=1<<g.classSubclasses[j];let this1=g.subclassBooks;let this2=new Array(kl);this1[j]=this2;let _g=0;let _g1=kl;while(_g<_g1){let k=_g++;g.subclassBooks[j][k]=decodeState.readBits(8)-1;if(g.subclassBooks[j][k]>=codebooks.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}}}g.floor1Multiplier=decodeState.readBits(2)+1;g.rangebits=decodeState.readBits(4);let this6=new Array(250);g.xlist=this6;g.xlist[0]=0;g.xlist[1]=1<<g.rangebits;g.values=2;let _g4=0;let _g5=g.partitions;while(_g4<_g5){let j=_g4++;let c=g.partitionClassList[j];let _g=0;let _g1=g.classDimensions[c];while(_g<_g1){let k=_g++;g.xlist[g.values]=decodeState.readBits(g.rangebits);g.values++}}let _g6=0;let _g7=g.values;while(_g6<_g7){let j=_g6++;p.push(new kha_audio2_ogg_vorbis_data_IntPoint);p[j].x=g.xlist[j];p[j].y=j}p.sort(kha_audio2_ogg_vorbis_VorbisTools.pointCompare);let this7=new Array(g.values);g.sortedOrder=this7;let _g8=0;let _g9=g.values;while(_g8<_g9){let j=_g8++;g.sortedOrder[j]=p[j].y}let this8=new Array(g.values);g.neighbors=this8;let _g10=2;let _g11=g.values;while(_g10<_g11){let j=_g10++;let x=g.xlist;let low=-1;let high=65536;let plow=0;let phigh=0;let _g=0;let _g1=j;while(_g<_g1){let i=_g++;if(x[i]>low&&x[i]<x[j]){plow=i;low=x[i]}if(x[i]<high&&x[i]>x[j]){phigh=i;high=x[i]}}let ne_low=plow;let ne_high=phigh;let this1=g.neighbors;let this2=new Array(g.values);this1[j]=this2;g.neighbors[j][0]=ne_low;g.neighbors[j][1]=ne_high}}return floor}}$hxClasses["kha.audio2.ogg.vorbis.data.Floor"]=kha_audio2_ogg_vorbis_data_Floor;kha_audio2_ogg_vorbis_data_Floor.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_Floor.prototype,{__class__:kha_audio2_ogg_vorbis_data_Floor});class kha_audio2_ogg_vorbis_data_Floor0{constructor(){}}$hxClasses["kha.audio2.ogg.vorbis.data.Floor0"]=kha_audio2_ogg_vorbis_data_Floor0;kha_audio2_ogg_vorbis_data_Floor0.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_Floor0.prototype,{__class__:kha_audio2_ogg_vorbis_data_Floor0});class kha_audio2_ogg_vorbis_data_Floor1{constructor(){}}$hxClasses["kha.audio2.ogg.vorbis.data.Floor1"]=kha_audio2_ogg_vorbis_data_Floor1;kha_audio2_ogg_vorbis_data_Floor1.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_Floor1.prototype,{__class__:kha_audio2_ogg_vorbis_data_Floor1});class kha_audio2_ogg_vorbis_data_Header{constructor(){}static read(decodeState){let page=decodeState.page;page.start(decodeState);if((page.flag&2)==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"not firstPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if((page.flag&4)!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"lastPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if((page.flag&1)!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"continuedPacket",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.firstPageValidate();decodeState.inputPosition+=1;if(decodeState.input.readByte()!=1){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:57,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}let header=new haxe_io_Bytes(new ArrayBuffer(6));let x;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x=decodeState.input.readByte()}decodeState.validBits=0;header.b[0]=x;let x1;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x1=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x1=decodeState.input.readByte()}decodeState.validBits=0;header.b[1]=x1;let x2;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x2=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x2=decodeState.input.readByte()}decodeState.validBits=0;header.b[2]=x2;let x3;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x3=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x3=decodeState.input.readByte()}decodeState.validBits=0;header.b[3]=x3;let x4;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x4=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x4=decodeState.input.readByte()}decodeState.validBits=0;header.b[4]=x4;let x5;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x5=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x5=decodeState.input.readByte()}decodeState.validBits=0;header.b[5]=x5;if(header.toString()!="vorbis"){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}))}decodeState.inputPosition+=4;let version=decodeState.input.readInt32();if(version!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"vorbis version : "+version,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:66,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}let header1=new kha_audio2_ogg_vorbis_data_Header;decodeState.inputPosition+=1;header1.channel=decodeState.input.readByte();if(header1.channel==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no channel",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}else if(header1.channel>16){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.TOO_MANY_CHANNELS,"too many channels",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:75,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.inputPosition+=4;header1.sampleRate=decodeState.input.readInt32();if(header1.sampleRate==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no sampling rate",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:80,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.inputPosition+=4;header1.maximumBitRate=decodeState.input.readInt32();decodeState.inputPosition+=4;header1.nominalBitRate=decodeState.input.readInt32();decodeState.inputPosition+=4;header1.minimumBitRate=decodeState.input.readInt32();decodeState.inputPosition+=1;let x6=decodeState.input.readByte();let log0=x6&15;let log1=x6>>4;header1.blocksize0=1<<log0;header1.blocksize1=1<<log1;if(log0<6||log0>13){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:93,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if(log1<6||log1>13){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:96,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if(log0>log1){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:99,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.inputPosition+=1;let x7=decodeState.input.readByte();if((x7&1)==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:105,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.page.start(decodeState);decodeState.startPacket();let len=0;let output=new haxe_io_BytesOutput;while(true){len=decodeState.next();if(!(len!=0)){break}decodeState.inputPosition+=len;output.write(decodeState.input.read(len));decodeState.bytesInSeg=0}let packetInput=new haxe_io_BytesInput(output.getBytes());packetInput.readByte();packetInput.read(6);let vendorLength=packetInput.readInt32();header1.vendor=packetInput.readString(vendorLength);header1.comment=new kha_audio2_ogg_vorbis_data_Comment;let commentCount=packetInput.readInt32();let _g=0;let _g1=commentCount;while(_g<_g1){let i=_g++;let n=packetInput.readInt32();let str=packetInput.readString(n);let splitter=str.indexOf("=");if(splitter!=-1){header1.comment.add(str.substring(0,splitter),str.substring(splitter+1))}}let x8=packetInput.readByte();if((x8&1)==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:141,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}decodeState.startPacket();let x9;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x9=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x9=decodeState.input.readByte()}decodeState.validBits=0;if(x9!=5){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"setup packet",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:149,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}let header2=new haxe_io_Bytes(new ArrayBuffer(6));let x10;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x10=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x10=decodeState.input.readByte()}decodeState.validBits=0;header2.b[0]=x10;let x11;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x11=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x11=decodeState.input.readByte()}decodeState.validBits=0;header2.b[1]=x11;let x12;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x12=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x12=decodeState.input.readByte()}decodeState.validBits=0;header2.b[2]=x12;let x13;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x13=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x13=decodeState.input.readByte()}decodeState.validBits=0;header2.b[3]=x13;let x14;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x14=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x14=decodeState.input.readByte()}decodeState.validBits=0;header2.b[4]=x14;let x15;if(decodeState.bytesInSeg==0&&(decodeState.lastSeg||decodeState.next()==0)){x15=-1}else{decodeState.bytesInSeg--;decodeState.inputPosition+=1;x15=decodeState.input.readByte()}decodeState.validBits=0;header2.b[5]=x15;if(header2.toString()!="vorbis"){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}))}let codebookCount=decodeState.readBits(8)+1;let this1=new Array(codebookCount);header1.codebooks=this1;let _g2=0;let _g3=codebookCount;while(_g2<_g3){let i=_g2++;header1.codebooks[i]=kha_audio2_ogg_vorbis_data_Codebook.read(decodeState)}x7=decodeState.readBits(6)+1;let _g4=0;let _g5=x7;while(_g4<_g5){let i=_g4++;if(decodeState.readBits(16)!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:165,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}}let floorCount=decodeState.readBits(6)+1;let this2=new Array(floorCount);header1.floorConfig=this2;let _g6=0;let _g7=floorCount;while(_g6<_g7){let i=_g6++;header1.floorConfig[i]=kha_audio2_ogg_vorbis_data_Floor.read(decodeState,header1.codebooks)}let residueCount=decodeState.readBits(6)+1;let this3=new Array(residueCount);header1.residueConfig=this3;let _g8=0;let _g9=residueCount;while(_g8<_g9){let i=_g8++;header1.residueConfig[i]=kha_audio2_ogg_vorbis_data_Residue.read(decodeState,header1.codebooks)}let mappingCount=decodeState.readBits(6)+1;let this4=new Array(mappingCount);header1.mapping=this4;let _g10=0;let _g11=mappingCount;while(_g10<_g11){let i=_g10++;let map=kha_audio2_ogg_vorbis_data_Mapping.read(decodeState,header1.channel);header1.mapping[i]=map;let _g=0;let _g1=map.submaps;while(_g<_g1){let j=_g++;if(map.submapFloor[j]>=header1.floorConfig.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:191,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}if(map.submapResidue[j]>=header1.residueConfig.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:194,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}}}let modeCount=decodeState.readBits(6)+1;let this5=new Array(modeCount);header1.modes=this5;let _g12=0;let _g13=modeCount;while(_g12<_g13){let i=_g12++;let mode=kha_audio2_ogg_vorbis_data_Mode.read(decodeState);header1.modes[i]=mode;if(mode.mapping>=header1.mapping.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:205,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}}while(decodeState.bytesInSeg!=0||!decodeState.lastSeg&&decodeState.next()!=0){decodeState.bytesInSeg--;decodeState.inputPosition+=1;decodeState.input.readByte()}return header1}}$hxClasses["kha.audio2.ogg.vorbis.data.Header"]=kha_audio2_ogg_vorbis_data_Header;kha_audio2_ogg_vorbis_data_Header.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_Header.prototype,{__class__:kha_audio2_ogg_vorbis_data_Header});class kha_audio2_ogg_vorbis_data_IntPoint{constructor(){}}$hxClasses["kha.audio2.ogg.vorbis.data.IntPoint"]=kha_audio2_ogg_vorbis_data_IntPoint;kha_audio2_ogg_vorbis_data_IntPoint.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_IntPoint.prototype,{__class__:kha_audio2_ogg_vorbis_data_IntPoint});class kha_audio2_ogg_vorbis_data_Mapping{constructor(){}doFloor(floors,i,n,target,finalY,step2Flag){let n2=n>>1;let s=this.chan[i].mux;let floor;let floor1=floors[this.submapFloor[s]];if(floor1.type==0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:94,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"doFloor"}))}else{let g=floor1.floor1;let lx=0;let ly=finalY[0]*g.floor1Multiplier;let _g=1;let _g1=g.values;while(_g<_g1){let q=_g++;let j=g.sortedOrder[q];if(finalY[j]>=0){let hy=finalY[j]*g.floor1Multiplier;let hx=g.xlist[j];kha_audio2_ogg_vorbis_VorbisTools.drawLine(target,lx,ly,hx,hy,n2);lx=hx;ly=hy}}if(lx<n2){let _g=lx;let _g1=n2;while(_g<_g1){let j=_g++;target[j]*=kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[ly]}}}}static read(decodeState,channels){let m=new kha_audio2_ogg_vorbis_data_Mapping;let mappingType=decodeState.readBits(16);if(mappingType!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"mapping type "+mappingType,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}let this1=new Array(channels);m.chan=this1;let _g=0;let _g1=channels;while(_g<_g1){let j=_g++;m.chan[j]=new kha_audio2_ogg_vorbis_data_MappingChannel}if(decodeState.readBits(1)!=0){m.submaps=decodeState.readBits(4)+1}else{m.submaps=1}if(decodeState.readBits(1)!=0){m.couplingSteps=decodeState.readBits(8)+1;let _g=0;let _g1=m.couplingSteps;while(_g<_g1){let k=_g++;let n=channels-1;let log2_4=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];m.chan[k].magnitude=decodeState.readBits(n<16384?n<16?log2_4[n]:n<512?5+log2_4[n>>5]:10+log2_4[n>>10]:n<16777216?n<524288?15+log2_4[n>>15]:20+log2_4[n>>20]:n<536870912?25+log2_4[n>>25]:n<-2147483648?30+log2_4[n>>30]:0);let n1=channels-1;let log2_41=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];m.chan[k].angle=decodeState.readBits(n1<16384?n1<16?log2_41[n1]:n1<512?5+log2_41[n1>>5]:10+log2_41[n1>>10]:n1<16777216?n1<524288?15+log2_41[n1>>15]:20+log2_41[n1>>20]:n1<536870912?25+log2_41[n1>>25]:n1<-2147483648?30+log2_41[n1>>30]:0);if(m.chan[k].magnitude>=channels){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}if(m.chan[k].angle>=channels){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}if(m.chan[k].magnitude==m.chan[k].angle){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}}}else{m.couplingSteps=0}if(decodeState.readBits(2)!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:61,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}if(m.submaps>1){let _g=0;let _g1=channels;while(_g<_g1){let j=_g++;m.chan[j].mux=decodeState.readBits(4);if(m.chan[j].mux>=m.submaps){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}}}else{let _g=0;let _g1=channels;while(_g<_g1){let j=_g++;m.chan[j].mux=0}}let this2=new Array(m.submaps);m.submapFloor=this2;let this3=new Array(m.submaps);m.submapResidue=this3;let _g2=0;let _g3=m.submaps;while(_g2<_g3){let j=_g2++;decodeState.readBits(8);m.submapFloor[j]=decodeState.readBits(8);m.submapResidue[j]=decodeState.readBits(8)}return m}}$hxClasses["kha.audio2.ogg.vorbis.data.Mapping"]=kha_audio2_ogg_vorbis_data_Mapping;kha_audio2_ogg_vorbis_data_Mapping.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_Mapping.prototype,{__class__:kha_audio2_ogg_vorbis_data_Mapping});class kha_audio2_ogg_vorbis_data_MappingChannel{constructor(){}}$hxClasses["kha.audio2.ogg.vorbis.data.MappingChannel"]=kha_audio2_ogg_vorbis_data_MappingChannel;kha_audio2_ogg_vorbis_data_MappingChannel.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_MappingChannel.prototype,{__class__:kha_audio2_ogg_vorbis_data_MappingChannel});class kha_audio2_ogg_vorbis_data_Mode{constructor(){}static read(decodeState){let m=new kha_audio2_ogg_vorbis_data_Mode;m.blockflag=decodeState.readBits(1)!=0;m.windowtype=decodeState.readBits(16);m.transformtype=decodeState.readBits(16);m.mapping=decodeState.readBits(8);if(m.windowtype!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}))}if(m.transformtype!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:25,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}))}return m}}$hxClasses["kha.audio2.ogg.vorbis.data.Mode"]=kha_audio2_ogg_vorbis_data_Mode;kha_audio2_ogg_vorbis_data_Mode.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_Mode.prototype,{__class__:kha_audio2_ogg_vorbis_data_Mode});class kha_audio2_ogg_vorbis_data_Page{constructor(){}clone(){let page=new kha_audio2_ogg_vorbis_data_Page;page.flag=this.flag;return page}start(decodeState){let tmp;let tmp1;let tmp2;decodeState.inputPosition+=1;if(decodeState.input.readByte()==79){decodeState.inputPosition+=1;tmp2=decodeState.input.readByte()!=103}else{tmp2=true}if(!tmp2){decodeState.inputPosition+=1;tmp1=decodeState.input.readByte()!=103}else{tmp1=true}if(!tmp1){decodeState.inputPosition+=1;tmp=decodeState.input.readByte()!=83}else{tmp=true}if(tmp){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}))}this.startWithoutCapturePattern(decodeState)}startWithoutCapturePattern(decodeState){decodeState.inputPosition+=1;let version=decodeState.input.readByte();if(version!=0){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM_STRUCTURE_VERSION,""+version,{fileName:"kha/audio2/ogg/vorbis/data/Page.hx",lineNumber:34,className:"kha.audio2.ogg.vorbis.data.Page",methodName:"startWithoutCapturePattern"}))}decodeState.inputPosition+=1;this.flag=decodeState.input.readByte();decodeState.inputPosition+=4;let loc0=decodeState.input.readInt32();decodeState.inputPosition+=4;let loc1=decodeState.input.readInt32();decodeState.inputPosition+=4;decodeState.input.readInt32();decodeState.inputPosition+=4;decodeState.input.readInt32();decodeState.inputPosition+=4;decodeState.input.readInt32();decodeState.setup(loc0,loc1)}}$hxClasses["kha.audio2.ogg.vorbis.data.Page"]=kha_audio2_ogg_vorbis_data_Page;kha_audio2_ogg_vorbis_data_Page.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_Page.prototype,{__class__:kha_audio2_ogg_vorbis_data_Page});class kha_audio2_ogg_vorbis_data_ProbedPage{constructor(){}}$hxClasses["kha.audio2.ogg.vorbis.data.ProbedPage"]=kha_audio2_ogg_vorbis_data_ProbedPage;kha_audio2_ogg_vorbis_data_ProbedPage.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_ProbedPage.prototype,{__class__:kha_audio2_ogg_vorbis_data_ProbedPage});class kha_audio2_ogg_vorbis_data_ReaderError{constructor(type,message,posInfos){if(message==null){message=""}this.type=type;this.message=message;this.posInfos=posInfos}}$hxClasses["kha.audio2.ogg.vorbis.data.ReaderError"]=kha_audio2_ogg_vorbis_data_ReaderError;kha_audio2_ogg_vorbis_data_ReaderError.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_ReaderError.prototype,{__class__:kha_audio2_ogg_vorbis_data_ReaderError});var kha_audio2_ogg_vorbis_data_ReaderErrorType=$hxEnums["kha.audio2.ogg.vorbis.data.ReaderErrorType"]={__ename__:true,__constructs__:null,NEED_MORE_DATA:{_hx_name:"NEED_MORE_DATA",_hx_index:0,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_API_MIXING:{_hx_name:"INVALID_API_MIXING",_hx_index:1,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},OUTOFMEM:{_hx_name:"OUTOFMEM",_hx_index:2,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},FEATURE_NOT_SUPPORTED:{_hx_name:"FEATURE_NOT_SUPPORTED",_hx_index:3,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},TOO_MANY_CHANNELS:{_hx_name:"TOO_MANY_CHANNELS",_hx_index:4,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},FILE_OPEN_FAILURE:{_hx_name:"FILE_OPEN_FAILURE",_hx_index:5,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_WITHOUT_LENGTH:{_hx_name:"SEEK_WITHOUT_LENGTH",_hx_index:6,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},UNEXPECTED_EOF:{_hx_name:"UNEXPECTED_EOF",_hx_index:7,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_INVALID:{_hx_name:"SEEK_INVALID",_hx_index:8,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_SETUP:{_hx_name:"INVALID_SETUP",_hx_index:9,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_STREAM:{_hx_name:"INVALID_STREAM",_hx_index:10,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},MISSING_CAPTURE_PATTERN:{_hx_name:"MISSING_CAPTURE_PATTERN",_hx_index:11,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_STREAM_STRUCTURE_VERSION:{_hx_name:"INVALID_STREAM_STRUCTURE_VERSION",_hx_index:12,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},CONTINUED_PACKET_FLAG_INVALID:{_hx_name:"CONTINUED_PACKET_FLAG_INVALID",_hx_index:13,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INCORRECT_STREAM_SERIAL_NUMBER:{_hx_name:"INCORRECT_STREAM_SERIAL_NUMBER",_hx_index:14,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},INVALID_FIRST_PAGE:{_hx_name:"INVALID_FIRST_PAGE",_hx_index:15,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},BAD_PACKET_TYPE:{_hx_name:"BAD_PACKET_TYPE",_hx_index:16,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},CANT_FIND_LAST_PAGE:{_hx_name:"CANT_FIND_LAST_PAGE",_hx_index:17,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},SEEK_FAILED:{_hx_name:"SEEK_FAILED",_hx_index:18,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr},OTHER:{_hx_name:"OTHER",_hx_index:19,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}};kha_audio2_ogg_vorbis_data_ReaderErrorType.__constructs__=[kha_audio2_ogg_vorbis_data_ReaderErrorType.NEED_MORE_DATA,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_API_MIXING,kha_audio2_ogg_vorbis_data_ReaderErrorType.OUTOFMEM,kha_audio2_ogg_vorbis_data_ReaderErrorType.FEATURE_NOT_SUPPORTED,kha_audio2_ogg_vorbis_data_ReaderErrorType.TOO_MANY_CHANNELS,kha_audio2_ogg_vorbis_data_ReaderErrorType.FILE_OPEN_FAILURE,kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_WITHOUT_LENGTH,kha_audio2_ogg_vorbis_data_ReaderErrorType.UNEXPECTED_EOF,kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_INVALID,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM_STRUCTURE_VERSION,kha_audio2_ogg_vorbis_data_ReaderErrorType.CONTINUED_PACKET_FLAG_INVALID,kha_audio2_ogg_vorbis_data_ReaderErrorType.INCORRECT_STREAM_SERIAL_NUMBER,kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,kha_audio2_ogg_vorbis_data_ReaderErrorType.BAD_PACKET_TYPE,kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,kha_audio2_ogg_vorbis_data_ReaderErrorType.OTHER];class kha_audio2_ogg_vorbis_data_Residue{constructor(){}decode(decodeState,header,residueBuffers,ch,n,doNotDecode,channelBuffers){let codebooks=header.codebooks;let classwords=codebooks[this.classbook].dimensions;let nRead=this.end-this.begin;let partSize=this.partSize;let partRead=UInt.toFloat(nRead)/UInt.toFloat(partSize)|0;let this1=new Array(header.channel*partRead+1);let classifications=this1;let _g=0;let _g1=ch;while(_g<_g1){let i=_g++;if(!doNotDecode[i]){let buffer=residueBuffers[i];let _g=0;let _g1=buffer.length;while(_g<_g1){let j=_g++;buffer[j]=0}}}if(this.type==2&&ch!=1){let _g=0;let _g1=ch;while(_g<_g1){let j=_g++;if(!doNotDecode[j]){break}else if(j==ch-1){return}}let _g2=0;while(_g2<8){let pass=_g2++;let pcount=0;let classSet=0;if(ch==2){while(pcount<partRead){let z=this.begin+pcount*partSize;let cInter=z&1;let pInter=z>>>1;if(pass==0){let c=codebooks[this.classbook];if(decodeState.validBits<10){decodeState.prepHuffman()}let i=c.fastHuffman[decodeState.acc&1023];let val;if(i>=0){let l=c.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(c)}if(c.sparse){val=c.sortedValues[val]}let q=val;if(q==-1){return}let i1=classwords;while(--i1>=0){classifications[i1+pcount]=q%this.classifications;q=q/this.classifications|0}}let _g=0;let _g1=classwords;while(_g<_g1){let i=_g++;if(pcount>=partRead){break}let z=this.begin+pcount*partSize;let c=classifications[pcount];let b=this.residueBooks[c][pass];if(b>=0){let book=codebooks[b];let result=book.decodeDeinterleaveRepeat(decodeState,residueBuffers,ch,cInter,pInter,n,partSize);if(result==null){return}else{cInter=result.cInter;pInter=result.pInter}}else{z=z+partSize;cInter=z&1;pInter=z>>>1}++pcount}}}else if(ch==1){while(pcount<partRead){let z=this.begin+pcount*partSize;let cInter=0;let pInter=z;if(pass==0){let c=codebooks[this.classbook];if(decodeState.validBits<10){decodeState.prepHuffman()}let i=c.fastHuffman[decodeState.acc&1023];let val;if(i>=0){let l=c.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(c)}if(c.sparse){val=c.sortedValues[val]}let q=val;if(q==-1){return}let i1=classwords;while(--i1>=0){classifications[i1+pcount]=q%this.classifications;q=q/this.classifications|0}}let _g=0;let _g1=classwords;while(_g<_g1){let i=_g++;if(pcount>=partRead){break}let z=this.begin+pcount*partSize;let b=this.residueBooks[classifications[pcount]][pass];if(b>=0){let book=codebooks[b];let result=book.decodeDeinterleaveRepeat(decodeState,residueBuffers,ch,cInter,pInter,n,partSize);if(result==null){return}else{cInter=result.cInter;pInter=result.pInter}}else{z=z+partSize;cInter=0;pInter=z}++pcount}}}else{while(pcount<partRead){let z=this.begin+pcount*partSize;let cInter=UInt.toFloat(z)%UInt.toFloat(ch)|0;let pInter=UInt.toFloat(z)/UInt.toFloat(ch)|0;if(pass==0){let c=codebooks[this.classbook];if(decodeState.validBits<10){decodeState.prepHuffman()}let i=c.fastHuffman[decodeState.acc&1023];let val;if(i>=0){let l=c.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(c)}if(c.sparse){val=c.sortedValues[val]}let q=val;if(q==-1){return}let i1=classwords;while(--i1>=0){classifications[i1+pcount]=q%this.classifications;q=q/this.classifications|0}}let _g=0;let _g1=classwords;while(_g<_g1){let i=_g++;if(pcount>=partRead){break}let z=this.begin+pcount*partSize;let b=this.residueBooks[classifications[pcount]][pass];if(b>=0){let book=codebooks[b];let result=book.decodeDeinterleaveRepeat(decodeState,residueBuffers,ch,cInter,pInter,n,partSize);if(result==null){return}else{cInter=result.cInter;pInter=result.pInter}}else{z=z+partSize;cInter=UInt.toFloat(z)%UInt.toFloat(ch)|0;pInter=UInt.toFloat(z)/UInt.toFloat(ch)|0}++pcount}}}}return}let _g2=0;while(_g2<8){let pass=_g2++;let pcount=0;let classSet=0;while(pcount<partRead){if(pass==0){let _g=0;let _g1=ch;while(_g<_g1){let j=_g++;if(!doNotDecode[j]){let c=codebooks[this.classbook];if(decodeState.validBits<10){decodeState.prepHuffman()}let i=c.fastHuffman[decodeState.acc&1023];let val;if(i>=0){let l=c.codewordLengths[i];decodeState.acc=decodeState.acc>>>l;decodeState.validBits-=l;if(decodeState.validBits<0){decodeState.validBits=0;val=-1}else{val=i}}else{val=decodeState.decodeScalarRaw(c)}if(c.sparse){val=c.sortedValues[val]}let temp=val;if(temp==-1){return}let i1=classwords;while(--i1>=0){classifications[j*partRead+i1+pcount]=temp%this.classifications;temp=temp/this.classifications|0}}}}let _g=0;let _g1=classwords;while(_g<_g1){let i=_g++;if(pcount>=partRead){break}let _g1=0;let _g2=ch;while(_g1<_g2){let j=_g1++;if(!doNotDecode[j]){let c=classifications[j*partRead+pcount];let b=this.residueBooks[c][pass];if(b>=0){let target=residueBuffers[j];let offset=this.begin+pcount*partSize;let n=partSize;let book=codebooks[b];if(!book.residueDecode(decodeState,target,offset,n,this.type)){return}}}}++pcount}}}}static read(decodeState,codebooks){let r=new kha_audio2_ogg_vorbis_data_Residue;r.type=decodeState.readBits(16);if(r.type>2){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:29,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}))}let this1=new Array(64);let residueCascade=this1;r.begin=decodeState.readBits(24);r.end=decodeState.readBits(24);r.partSize=decodeState.readBits(24)+1;let classifications=r.classifications=decodeState.readBits(6)+1;r.classbook=decodeState.readBits(8);let _g=0;let _g1=r.classifications;while(_g<_g1){let j=_g++;let highBits=0;let lowBits=decodeState.readBits(3);if(decodeState.readBits(1)!=0){highBits=decodeState.readBits(5)}residueCascade[j]=highBits*8+lowBits}let this2=new Array(r.classifications);r.residueBooks=this2;let _g2=0;let _g3=r.classifications;while(_g2<_g3){let j=_g2++;let this1=r.residueBooks;let this2=new Array(8);this1[j]=this2;let _g=0;while(_g<8){let k=_g++;if((residueCascade[j]&1<<k)!=0){r.residueBooks[j][k]=decodeState.readBits(8);if(r.residueBooks[j][k]>=codebooks.length){throw haxe_Exception.thrown(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:55,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}))}}else{r.residueBooks[j][k]=-1}}}let el=codebooks[r.classbook].entries;let classwords=codebooks[r.classbook].dimensions;let this3=new Array(el);r.classdata=this3;let _g4=0;let _g5=el;while(_g4<_g5){let j=_g4++;let temp=j;let k=classwords;let this1=r.classdata;let this2=new Array(classwords);let cd=this1[j]=this2;while(--k>=0){cd[k]=temp%classifications;temp=temp/classifications|0}}return r}}$hxClasses["kha.audio2.ogg.vorbis.data.Residue"]=kha_audio2_ogg_vorbis_data_Residue;kha_audio2_ogg_vorbis_data_Residue.__name__=true;Object.assign(kha_audio2_ogg_vorbis_data_Residue.prototype,{__class__:kha_audio2_ogg_vorbis_data_Residue});class kha_graphics1_Graphics{}$hxClasses["kha.graphics1.Graphics"]=kha_graphics1_Graphics;kha_graphics1_Graphics.__name__=true;kha_graphics1_Graphics.__isInterface__=true;class kha_graphics2_Graphics{constructor(){this.transformations=[new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1)];this.transformationIndex=0;this.opacities=[1];this.myFontSize=12;this.pipe=null}begin(clear,clearColor){if(clear==null){clear=true}}end(){}fillRect(x,y,width,height){}set_color(color){return-16777216}get_fontSize(){return this.myFontSize}get_opacity(){return this.opacities[this.opacities.length-1]}}$hxClasses["kha.graphics2.Graphics"]=kha_graphics2_Graphics;kha_graphics2_Graphics.__name__=true;Object.assign(kha_graphics2_Graphics.prototype,{__class__:kha_graphics2_Graphics,__properties__:{get_opacity:"get_opacity",get_fontSize:"get_fontSize",set_color:"set_color"}});class kha_graphics2_Graphics1{constructor(canvas){this.canvas=canvas}}$hxClasses["kha.graphics2.Graphics1"]=kha_graphics2_Graphics1;kha_graphics2_Graphics1.__name__=true;kha_graphics2_Graphics1.__interfaces__=[kha_graphics1_Graphics];Object.assign(kha_graphics2_Graphics1.prototype,{__class__:kha_graphics2_Graphics1});class kha_graphics4_ConstantLocation{}$hxClasses["kha.graphics4.ConstantLocation"]=kha_graphics4_ConstantLocation;kha_graphics4_ConstantLocation.__name__=true;kha_graphics4_ConstantLocation.__isInterface__=true;class kha_graphics4_CubeMap{constructor(texture){this.texture_=texture}get_width(){if(this.texture_==null){return this.renderTarget_.width}else{return this.texture_.width}}get_height(){if(this.texture_==null){return this.renderTarget_.height}else{return this.texture_.height}}get_g4(){if(this.graphics4==null){this.graphics4=new kha_krom_Graphics(this)}return this.graphics4}static getRenderTargetFormat(format){switch(format){case 0:return 0;case 2:return 3;case 3:return 4;case 4:return 1;default:return 0}}static getDepthBufferBits(depthAndStencil){switch(depthAndStencil){case 0:return-1;case 1:return 24;case 2:return 24;case 3:return 24;case 4:return 32;case 5:return 16}}static getStencilBufferBits(depthAndStencil){switch(depthAndStencil){case 0:return-1;case 1:return-1;case 2:return 8;case 3:return 8;case 4:return 8;case 5:return 0}}static createRenderTarget(size,format,depthStencil){if(depthStencil==null){depthStencil=0}if(format==null){format=0}let cubeMap=new kha_graphics4_CubeMap(null);cubeMap.format=format;cubeMap.renderTarget_=Krom.createRenderTargetCubeMap(size,kha_graphics4_CubeMap.getRenderTargetFormat(format),kha_graphics4_CubeMap.getDepthBufferBits(depthStencil),kha_graphics4_CubeMap.getStencilBufferBits(depthStencil));return cubeMap}}$hxClasses["kha.graphics4.CubeMap"]=kha_graphics4_CubeMap;kha_graphics4_CubeMap.__name__=true;kha_graphics4_CubeMap.__interfaces__=[kha_Resource,kha_Canvas];Object.assign(kha_graphics4_CubeMap.prototype,{__class__:kha_graphics4_CubeMap,__properties__:{get_g4:"get_g4",get_height:"get_height",get_width:"get_width"}});class kha_graphics4_FragmentShader{constructor(sources,names){if(sources!=null){this.shader=Krom.createFragmentShader(sources[0].bytes.b.bufferValue,names[0])}}static fromSource(source){let shader=new kha_graphics4_FragmentShader(null,null);shader.shader=Krom.createFragmentShaderFromSource(source);return shader}}$hxClasses["kha.graphics4.FragmentShader"]=kha_graphics4_FragmentShader;kha_graphics4_FragmentShader.__name__=true;Object.assign(kha_graphics4_FragmentShader.prototype,{__class__:kha_graphics4_FragmentShader});class kha_graphics4_GeometryShader{constructor(sources,names){this.shader=Krom.createGeometryShader(sources[0].bytes.b.bufferValue,names[0])}}$hxClasses["kha.graphics4.GeometryShader"]=kha_graphics4_GeometryShader;kha_graphics4_GeometryShader.__name__=true;Object.assign(kha_graphics4_GeometryShader.prototype,{__class__:kha_graphics4_GeometryShader});class kha_graphics4_Graphics{}$hxClasses["kha.graphics4.Graphics"]=kha_graphics4_Graphics;kha_graphics4_Graphics.__name__=true;kha_graphics4_Graphics.__isInterface__=true;Object.assign(kha_graphics4_Graphics.prototype,{__class__:kha_graphics4_Graphics});class kha_graphics4_InternalPipeline{constructor(pipeline,projectionLocation,textureLocation){this.pipeline=pipeline;this.projectionLocation=projectionLocation;this.textureLocation=textureLocation}}$hxClasses["kha.graphics4.InternalPipeline"]=kha_graphics4_InternalPipeline;kha_graphics4_InternalPipeline.__name__=true;Object.assign(kha_graphics4_InternalPipeline.prototype,{__class__:kha_graphics4_InternalPipeline});class kha_graphics4_PipelineCache{}$hxClasses["kha.graphics4.PipelineCache"]=kha_graphics4_PipelineCache;kha_graphics4_PipelineCache.__name__=true;kha_graphics4_PipelineCache.__isInterface__=true;Object.assign(kha_graphics4_PipelineCache.prototype,{__class__:kha_graphics4_PipelineCache});class kha_graphics4_PerFramebufferPipelineCache{constructor(pipeline,texture){this.pipelines=[];pipeline.compile();let projectionLocation=null;try{projectionLocation=pipeline.getConstantLocation("projectionMatrix")}catch(_g){let x=haxe_Exception.caught(_g).unwrap();haxe_Log.trace(x,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:90,className:"kha.graphics4.PerFramebufferPipelineCache",methodName:"new"})}let textureLocation=null;if(texture){try{textureLocation=pipeline.getTextureUnit("tex")}catch(_g){let x=haxe_Exception.caught(_g).unwrap();haxe_Log.trace(x,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:99,className:"kha.graphics4.PerFramebufferPipelineCache",methodName:"new"})}}this.pipelines.push(new kha_graphics4_InternalPipeline(pipeline,projectionLocation,textureLocation))}get(colorFormats,depthStencilFormat){return this.pipelines[this.hash(colorFormats,depthStencilFormat)]}hash(colorFormats,depthStencilFormat){return 0}}$hxClasses["kha.graphics4.PerFramebufferPipelineCache"]=kha_graphics4_PerFramebufferPipelineCache;kha_graphics4_PerFramebufferPipelineCache.__name__=true;kha_graphics4_PerFramebufferPipelineCache.__interfaces__=[kha_graphics4_PipelineCache];Object.assign(kha_graphics4_PerFramebufferPipelineCache.prototype,{__class__:kha_graphics4_PerFramebufferPipelineCache});class kha_graphics4_ImageShaderPainter{constructor(g4){this.myPipeline=null;this.bilinearMipmaps=false;this.bilinear=false;this.g=g4;kha_graphics4_ImageShaderPainter.bufferStart=0;kha_graphics4_ImageShaderPainter.bufferIndex=0;kha_graphics4_ImageShaderPainter.initShaders();this.myPipeline=kha_graphics4_ImageShaderPainter.standardImagePipeline;this.initBuffers()}setProjection(projectionMatrix){this.projectionMatrix=projectionMatrix}initBuffers(){if(kha_graphics4_ImageShaderPainter.rectVertexBuffer==null){kha_graphics4_ImageShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(6e3,kha_graphics4_ImageShaderPainter.structure,1);kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock();kha_graphics4_ImageShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(9e3,0);let indices=kha_graphics4_ImageShaderPainter.indexBuffer.lock();let _g=0;while(_g<1500){let i=_g++;let k=i*3*2;indices.setUint32(k*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=k*4;let k1=i*3*2+1;indices.setUint32(k1*4,i*4+1,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=k1*4;let k2=i*3*2+2;indices.setUint32(k2*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp2=k2*4;let k3=i*3*2+3;indices.setUint32(k3*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp3=k3*4;let k4=i*3*2+4;indices.setUint32(k4*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp4=k4*4;let k5=i*3*2+5;indices.setUint32(k5*4,i*4+3,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp5=k5*4}kha_graphics4_ImageShaderPainter.indexBuffer.unlock()}}drawBuffer(end){if(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart==0){return}kha_graphics4_ImageShaderPainter.rectVertexBuffer.unlock((kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*4);let pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_ImageShaderPainter.rectVertexBuffer);this.g.setIndexBuffer(kha_graphics4_ImageShaderPainter.indexBuffer);this.g.setTexture(pipeline.textureLocation,kha_graphics4_ImageShaderPainter.lastTexture);this.g.setTextureParameters(pipeline.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,this.bilinearMipmaps?2:0);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.drawIndexedVertices(kha_graphics4_ImageShaderPainter.bufferStart*2*3,(kha_graphics4_ImageShaderPainter.bufferIndex-kha_graphics4_ImageShaderPainter.bufferStart)*2*3);this.g.setTexture(pipeline.textureLocation,null);if(end||(kha_graphics4_ImageShaderPainter.bufferStart+kha_graphics4_ImageShaderPainter.bufferIndex+1)*4>=1500){kha_graphics4_ImageShaderPainter.bufferStart=0;kha_graphics4_ImageShaderPainter.bufferIndex=0;kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock(0)}else{kha_graphics4_ImageShaderPainter.bufferStart=kha_graphics4_ImageShaderPainter.bufferIndex;kha_graphics4_ImageShaderPainter.rectVertices=kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock(kha_graphics4_ImageShaderPainter.bufferStart*4)}}end(){if(kha_graphics4_ImageShaderPainter.bufferIndex>0){this.drawBuffer(true)}kha_graphics4_ImageShaderPainter.lastTexture=null}static initShaders(){if(kha_graphics4_ImageShaderPainter.structure==null){kha_graphics4_ImageShaderPainter.structure=kha_graphics4_Graphics2.createImageVertexStructure()}if(kha_graphics4_ImageShaderPainter.standardImagePipeline==null){let pipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_ImageShaderPainter.structure);kha_graphics4_ImageShaderPainter.standardImagePipeline=new kha_graphics4_PerFramebufferPipelineCache(pipeline,true)}}}$hxClasses["kha.graphics4.ImageShaderPainter"]=kha_graphics4_ImageShaderPainter;kha_graphics4_ImageShaderPainter.__name__=true;Object.assign(kha_graphics4_ImageShaderPainter.prototype,{__class__:kha_graphics4_ImageShaderPainter});class kha_graphics4_ColoredShaderPainter{constructor(g4){this.myPipeline=null;this.g=g4;kha_graphics4_ColoredShaderPainter.bufferIndex=0;kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0;kha_graphics4_ColoredShaderPainter.initShaders();this.myPipeline=kha_graphics4_ColoredShaderPainter.standardColorPipeline;this.initBuffers()}setProjection(projectionMatrix){this.projectionMatrix=projectionMatrix}initBuffers(){if(kha_graphics4_ColoredShaderPainter.rectVertexBuffer==null){kha_graphics4_ColoredShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(4e3,kha_graphics4_ColoredShaderPainter.structure,1);kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock();kha_graphics4_ColoredShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(6e3,0);let indices=kha_graphics4_ColoredShaderPainter.indexBuffer.lock();let _g=0;while(_g<1e3){let i=_g++;let k=i*3*2;indices.setUint32(k*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=k*4;let k1=i*3*2+1;indices.setUint32(k1*4,i*4+1,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=k1*4;let k2=i*3*2+2;indices.setUint32(k2*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp2=k2*4;let k3=i*3*2+3;indices.setUint32(k3*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp3=k3*4;let k4=i*3*2+4;indices.setUint32(k4*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp4=k4*4;let k5=i*3*2+5;indices.setUint32(k5*4,i*4+3,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp5=k5*4}kha_graphics4_ColoredShaderPainter.indexBuffer.unlock();kha_graphics4_ColoredShaderPainter.triangleVertexBuffer=new kha_graphics4_VertexBuffer(3e3,kha_graphics4_ColoredShaderPainter.structure,1);kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock();kha_graphics4_ColoredShaderPainter.triangleIndexBuffer=new kha_graphics4_IndexBuffer(3e3,0);let triIndices=kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.lock();let _g1=0;while(_g1<1e3){let i=_g1++;let k=i*3;triIndices.setUint32(k*4,i*3,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=k*4;let k1=i*3+1;triIndices.setUint32(k1*4,i*3+1,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=k1*4;let k2=i*3+2;triIndices.setUint32(k2*4,i*3+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp2=k2*4}kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.unlock()}}setRectVertices(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty){let baseIndex=kha_graphics4_ColoredShaderPainter.bufferIndex*4*4;kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32(baseIndex*4,bottomleftx,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+1)*4,bottomlefty,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+2)*4,-5,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+4)*4,topleftx,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+5)*4,toplefty,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+6)*4,-5,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+8)*4,toprightx,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+9)*4,toprighty,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+10)*4,-5,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+12)*4,bottomrightx,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+13)*4,bottomrighty,true);kha_graphics4_ColoredShaderPainter.rectVertices.setFloat32((baseIndex+14)*4,-5,true)}setRectColors(opacity,color){let baseIndex=kha_graphics4_ColoredShaderPainter.bufferIndex*4*4*4;let a=opacity*((color>>>24)*.00392156862745098);let r=a*(((color&16711680)>>>16)*.00392156862745098);let g=a*(((color&65280)>>>8)*.00392156862745098);let b=a*((color&255)*.00392156862745098);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+12,r*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+12+1,g*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+12+2,b*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+12+3,a*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+28,r*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+28+1,g*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+28+2,b*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+28+3,a*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+44,r*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+44+1,g*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+44+2,b*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+44+3,a*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+60,r*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+60+1,g*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+60+2,b*255|0);kha_graphics4_ColoredShaderPainter.rectVertices.setUint8(baseIndex+60+3,a*255|0)}drawBuffer(trisDone){if(kha_graphics4_ColoredShaderPainter.bufferIndex==0){return}if(!trisDone){if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){this.drawTriBuffer(true)}}kha_graphics4_ColoredShaderPainter.rectVertexBuffer.unlock(kha_graphics4_ColoredShaderPainter.bufferIndex*4);let pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.rectVertexBuffer);this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.indexBuffer);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.drawIndexedVertices(0,kha_graphics4_ColoredShaderPainter.bufferIndex*2*3);kha_graphics4_ColoredShaderPainter.bufferIndex=0;kha_graphics4_ColoredShaderPainter.rectVertices=kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock()}drawTriBuffer(rectsDone){if(!rectsDone){if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){this.drawBuffer(true)}}kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.unlock(kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3);let pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.triangleVertexBuffer);this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.triangleIndexBuffer);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.drawIndexedVertices(0,kha_graphics4_ColoredShaderPainter.triangleBufferIndex*3);kha_graphics4_ColoredShaderPainter.triangleBufferIndex=0;kha_graphics4_ColoredShaderPainter.triangleVertices=kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock()}fillRect(opacity,color,bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty){if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){this.drawTriBuffer(true)}if(kha_graphics4_ColoredShaderPainter.bufferIndex+1>=1e3){this.drawBuffer(false)}this.setRectColors(opacity,color);this.setRectVertices(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty);++kha_graphics4_ColoredShaderPainter.bufferIndex}static initShaders(){if(kha_graphics4_ColoredShaderPainter.structure==null){kha_graphics4_ColoredShaderPainter.structure=kha_graphics4_Graphics2.createColoredVertexStructure()}if(kha_graphics4_ColoredShaderPainter.standardColorPipeline==null){let pipeline=kha_graphics4_Graphics2.createColoredPipeline(kha_graphics4_ColoredShaderPainter.structure);kha_graphics4_ColoredShaderPainter.standardColorPipeline=new kha_graphics4_PerFramebufferPipelineCache(pipeline,false)}}}$hxClasses["kha.graphics4.ColoredShaderPainter"]=kha_graphics4_ColoredShaderPainter;kha_graphics4_ColoredShaderPainter.__name__=true;Object.assign(kha_graphics4_ColoredShaderPainter.prototype,{__class__:kha_graphics4_ColoredShaderPainter});class kha_graphics4_TextShaderPainter{constructor(g4){this.bilinear=false;this.myPipeline=null;this.g=g4;kha_graphics4_TextShaderPainter.bufferIndex=0;kha_graphics4_TextShaderPainter.initShaders();this.myPipeline=kha_graphics4_TextShaderPainter.standardTextPipeline;this.initBuffers()}setProjection(projectionMatrix){this.projectionMatrix=projectionMatrix}initBuffers(){if(kha_graphics4_TextShaderPainter.rectVertexBuffer==null){kha_graphics4_TextShaderPainter.rectVertexBuffer=new kha_graphics4_VertexBuffer(4e3,kha_graphics4_TextShaderPainter.structure,1);kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock();kha_graphics4_TextShaderPainter.indexBuffer=new kha_graphics4_IndexBuffer(6e3,0);let indices=kha_graphics4_TextShaderPainter.indexBuffer.lock();let _g=0;while(_g<1e3){let i=_g++;let k=i*3*2;indices.setUint32(k*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp=k*4;let k1=i*3*2+1;indices.setUint32(k1*4,i*4+1,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp1=k1*4;let k2=i*3*2+2;indices.setUint32(k2*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp2=k2*4;let k3=i*3*2+3;indices.setUint32(k3*4,i*4,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp3=k3*4;let k4=i*3*2+4;indices.setUint32(k4*4,i*4+2,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp4=k4*4;let k5=i*3*2+5;indices.setUint32(k5*4,i*4+3,kha_arrays_ByteArray.LITTLE_ENDIAN);let tmp5=k5*4}kha_graphics4_TextShaderPainter.indexBuffer.unlock()}}drawBuffer(){if(kha_graphics4_TextShaderPainter.bufferIndex==0){return}kha_graphics4_TextShaderPainter.rectVertexBuffer.unlock(kha_graphics4_TextShaderPainter.bufferIndex*4);let pipeline=this.myPipeline.get(null,3);this.g.setPipeline(pipeline.pipeline);this.g.setVertexBuffer(kha_graphics4_TextShaderPainter.rectVertexBuffer);this.g.setIndexBuffer(kha_graphics4_TextShaderPainter.indexBuffer);this.g.setMatrix(pipeline.projectionLocation,this.projectionMatrix);this.g.setTexture(pipeline.textureLocation,kha_graphics4_TextShaderPainter.lastTexture);this.g.setTextureParameters(pipeline.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,0);this.g.drawIndexedVertices(0,kha_graphics4_TextShaderPainter.bufferIndex*2*3);this.g.setTexture(pipeline.textureLocation,null);kha_graphics4_TextShaderPainter.bufferIndex=0;kha_graphics4_TextShaderPainter.rectVertices=kha_graphics4_TextShaderPainter.rectVertexBuffer.lock()}end(){if(kha_graphics4_TextShaderPainter.bufferIndex>0){this.drawBuffer()}kha_graphics4_TextShaderPainter.lastTexture=null}static initShaders(){if(kha_graphics4_TextShaderPainter.structure==null){kha_graphics4_TextShaderPainter.structure=kha_graphics4_Graphics2.createTextVertexStructure()}if(kha_graphics4_TextShaderPainter.standardTextPipeline==null){let pipeline=kha_graphics4_Graphics2.createTextPipeline(kha_graphics4_TextShaderPainter.structure);kha_graphics4_TextShaderPainter.standardTextPipeline=new kha_graphics4_PerFramebufferPipelineCache(pipeline,true)}}}$hxClasses["kha.graphics4.TextShaderPainter"]=kha_graphics4_TextShaderPainter;kha_graphics4_TextShaderPainter.__name__=true;Object.assign(kha_graphics4_TextShaderPainter.prototype,{__class__:kha_graphics4_TextShaderPainter});class kha_graphics4_Graphics2 extends kha_graphics2_Graphics{constructor(canvas){super();this.set_color(-1);this.canvas=canvas;this.g=canvas.get_g4();this.imagePainter=new kha_graphics4_ImageShaderPainter(this.g);this.coloredPainter=new kha_graphics4_ColoredShaderPainter(this.g);this.textPainter=new kha_graphics4_TextShaderPainter(this.g);this.textPainter.fontSize=this.get_fontSize();this.projectionMatrix=new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.setProjection();if(kha_graphics4_Graphics2.videoPipeline==null){kha_graphics4_Graphics2.videoPipeline=kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_Graphics2.createImageVertexStructure());kha_graphics4_Graphics2.videoPipeline.fragmentShader=kha_Shaders.painter_video_frag;kha_graphics4_Graphics2.videoPipeline.vertexShader=kha_Shaders.painter_video_vert;kha_graphics4_Graphics2.videoPipeline.compile()}}setProjection(){let width=this.canvas.get_width();let height=this.canvas.get_height();if(this.canvas instanceof kha_Framebuffer){let _this=this.projectionMatrix;let tx=-width/width;let ty=-height/(0-height);let tz=-1.0002000200020003;let m__00=2/width;let m__10=0;let m__20=0;let m__30=tx;let m__01=0;let m__11=2/(0-height);let m__21=0;let m__31=ty;let m__02=0;let m__12=0;let m__22=-.002000200020002;let m__32=tz;let m__03=0;let m__13=0;let m__23=0;let m__33=1;_this._00=m__00;_this._10=m__10;_this._20=m__20;_this._30=m__30;_this._01=m__01;_this._11=m__11;_this._21=m__21;_this._31=m__31;_this._02=m__02;_this._12=m__12;_this._22=m__22;_this._32=m__32;_this._03=m__03;_this._13=m__13;_this._23=m__23;_this._33=m__33}else{if(!kha_Image.get_nonPow2Supported()){width=kha_graphics4_Graphics2.upperPowerOfTwo(width);height=kha_graphics4_Graphics2.upperPowerOfTwo(height)}if(kha_Image.renderTargetsInvertedY()){let _this=this.projectionMatrix;let tx=-width/width;let ty=-height/height;let tz=-1.0002000200020003;let m__00=2/width;let m__10=0;let m__20=0;let m__30=tx;let m__01=0;let m__11=2/height;let m__21=0;let m__31=ty;let m__02=0;let m__12=0;let m__22=-.002000200020002;let m__32=tz;let m__03=0;let m__13=0;let m__23=0;let m__33=1;_this._00=m__00;_this._10=m__10;_this._20=m__20;_this._30=m__30;_this._01=m__01;_this._11=m__11;_this._21=m__21;_this._31=m__31;_this._02=m__02;_this._12=m__12;_this._22=m__22;_this._32=m__32;_this._03=m__03;_this._13=m__13;_this._23=m__23;_this._33=m__33}else{let _this=this.projectionMatrix;let tx=-width/width;let ty=-height/(0-height);let tz=-1.0002000200020003;let m__00=2/width;let m__10=0;let m__20=0;let m__30=tx;let m__01=0;let m__11=2/(0-height);let m__21=0;let m__31=ty;let m__02=0;let m__12=0;let m__22=-.002000200020002;let m__32=tz;let m__03=0;let m__13=0;let m__23=0;let m__33=1;_this._00=m__00;_this._10=m__10;_this._20=m__20;_this._30=m__30;_this._01=m__01;_this._11=m__11;_this._21=m__21;_this._31=m__31;_this._02=m__02;_this._12=m__12;_this._22=m__22;_this._32=m__32;_this._03=m__03;_this._13=m__13;_this._23=m__23;_this._33=m__33}}this.imagePainter.setProjection(this.projectionMatrix);this.coloredPainter.setProjection(this.projectionMatrix);this.textPainter.setProjection(this.projectionMatrix)}get_color(){return this.myColor}set_color(color){return this.myColor=color}fillRect(x,y,width,height){this.imagePainter.end();this.textPainter.end();let _this=this.transformations[this.transformationIndex];let x1=x;let y1=y+height;if(y1==null){y1=0}if(x1==null){x1=0}let value_x=x1;let value_y=y1;let w=_this._02*value_x+_this._12*value_y+_this._22;let x2=(_this._00*value_x+_this._10*value_y+_this._20)/w;let y2=(_this._01*value_x+_this._11*value_y+_this._21)/w;let x3=x2;let y3=y2;if(y3==null){y3=0}if(x3==null){x3=0}let p1_x=x3;let p1_y=y3;let _this1=this.transformations[this.transformationIndex];let x4=x;let y4=y;if(y4==null){y4=0}if(x4==null){x4=0}let value_x1=x4;let value_y1=y4;let w1=_this1._02*value_x1+_this1._12*value_y1+_this1._22;let x5=(_this1._00*value_x1+_this1._10*value_y1+_this1._20)/w1;let y5=(_this1._01*value_x1+_this1._11*value_y1+_this1._21)/w1;let x6=x5;let y6=y5;if(y6==null){y6=0}if(x6==null){x6=0}let p2_x=x6;let p2_y=y6;let _this2=this.transformations[this.transformationIndex];let x7=x+width;let y7=y;if(y7==null){y7=0}if(x7==null){x7=0}let value_x2=x7;let value_y2=y7;let w2=_this2._02*value_x2+_this2._12*value_y2+_this2._22;let x8=(_this2._00*value_x2+_this2._10*value_y2+_this2._20)/w2;let y8=(_this2._01*value_x2+_this2._11*value_y2+_this2._21)/w2;let x9=x8;let y9=y8;if(y9==null){y9=0}if(x9==null){x9=0}let p3_x=x9;let p3_y=y9;let _this3=this.transformations[this.transformationIndex];let x10=x+width;let y10=y+height;if(y10==null){y10=0}if(x10==null){x10=0}let value_x3=x10;let value_y3=y10;let w3=_this3._02*value_x3+_this3._12*value_y3+_this3._22;let x11=(_this3._00*value_x3+_this3._10*value_y3+_this3._20)/w3;let y11=(_this3._01*value_x3+_this3._11*value_y3+_this3._21)/w3;let x12=x11;let y12=y11;if(y12==null){y12=0}if(x12==null){x12=0}let p4_x=x12;let p4_y=y12;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y)}begin(clear,clearColor){if(clear==null){clear=true}if(kha_graphics4_Graphics2.current==null){kha_graphics4_Graphics2.current=this}else{throw haxe_Exception.thrown("End before you begin")}this.g.begin();if(clear){this.clear(clearColor)}this.setProjection()}clear(color){this.flush();this.g.clear(color==null?-16777216:color)}flush(){this.imagePainter.end();this.textPainter.end();let _this=this.coloredPainter;if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex>0){_this.drawTriBuffer(false)}if(kha_graphics4_ColoredShaderPainter.bufferIndex>0){_this.drawBuffer(false)}}end(){this.flush();this.g.end();if(kha_graphics4_Graphics2.current==this){kha_graphics4_Graphics2.current=null}else{throw haxe_Exception.thrown("Begin before you end")}}static upperPowerOfTwo(v){--v;v|=v>>>1;v|=v>>>2;v|=v>>>4;v|=v>>>8;v|=v>>>16;return++v}static createImageVertexStructure(){let structure=new kha_graphics4_VertexStructure;structure.add("vertexPosition",2);structure.add("vertexUV",1);structure.add("vertexColor",16);return structure}static createImagePipeline(structure){let shaderPipeline=new kha_graphics4_PipelineState;shaderPipeline.fragmentShader=kha_Shaders.painter_image_frag;shaderPipeline.vertexShader=kha_Shaders.painter_image_vert;shaderPipeline.inputLayout=[structure];shaderPipeline.blendSource=1;shaderPipeline.blendDestination=5;shaderPipeline.alphaBlendSource=1;shaderPipeline.alphaBlendDestination=5;return shaderPipeline}static createColoredVertexStructure(){let structure=new kha_graphics4_VertexStructure;structure.add("vertexPosition",2);structure.add("vertexColor",16);return structure}static createColoredPipeline(structure){let shaderPipeline=new kha_graphics4_PipelineState;shaderPipeline.fragmentShader=kha_Shaders.painter_colored_frag;shaderPipeline.vertexShader=kha_Shaders.painter_colored_vert;shaderPipeline.inputLayout=[structure];shaderPipeline.blendSource=1;shaderPipeline.blendDestination=5;shaderPipeline.alphaBlendSource=1;shaderPipeline.alphaBlendDestination=5;return shaderPipeline}static createTextVertexStructure(){let structure=new kha_graphics4_VertexStructure;structure.add("vertexPosition",2);structure.add("vertexUV",1);structure.add("vertexColor",3);return structure}static createTextPipeline(structure){let shaderPipeline=new kha_graphics4_PipelineState;shaderPipeline.fragmentShader=kha_Shaders.painter_text_frag;shaderPipeline.vertexShader=kha_Shaders.painter_text_vert;shaderPipeline.inputLayout=[structure];shaderPipeline.blendSource=3;shaderPipeline.blendDestination=5;shaderPipeline.alphaBlendSource=3;shaderPipeline.alphaBlendDestination=5;return shaderPipeline}}$hxClasses["kha.graphics4.Graphics2"]=kha_graphics4_Graphics2;kha_graphics4_Graphics2.__name__=true;kha_graphics4_Graphics2.__super__=kha_graphics2_Graphics;Object.assign(kha_graphics4_Graphics2.prototype,{__class__:kha_graphics4_Graphics2});class kha_graphics4_IndexBuffer{constructor(indexCount,usage,canRead){if(canRead==null){canRead=false}this.indexCount=indexCount;this.buffer=Krom.createIndexBuffer(indexCount)}lock(start,count){this._data=Krom.lockIndexBuffer(this.buffer);if(start==null){start=0}if(count==null){count=this.indexCount}let end=start+count;let start1=start*4;let end1=end!=null?end*4:null;return kha_arrays_ByteArray._new(this._data.buffer,start1,end1!=null?end1-start1:null)}unlock(count){Krom.unlockIndexBuffer(this.buffer)}set(){Krom.setIndexBuffer(this.buffer)}}$hxClasses["kha.graphics4.IndexBuffer"]=kha_graphics4_IndexBuffer;kha_graphics4_IndexBuffer.__name__=true;Object.assign(kha_graphics4_IndexBuffer.prototype,{__class__:kha_graphics4_IndexBuffer});class kha_graphics4_PipelineStateBase{constructor(){this.inputLayout=null;this.vertexShader=null;this.fragmentShader=null;this.geometryShader=null;this.tessellationControlShader=null;this.tessellationEvaluationShader=null;this.cullMode=2;this.depthWrite=false;this.depthMode=0;this.stencilFrontMode=0;this.stencilFrontBothPass=0;this.stencilFrontDepthFail=0;this.stencilFrontFail=0;this.stencilBackMode=0;this.stencilBackBothPass=0;this.stencilBackDepthFail=0;this.stencilBackFail=0;this.stencilReferenceValue=kha_graphics4_StencilValue.Static(0);this.stencilReadMask=255;this.stencilWriteMask=255;this.blendSource=1;this.blendDestination=2;this.blendOperation=0;this.alphaBlendSource=1;this.alphaBlendDestination=2;this.alphaBlendOperation=0;this.colorWriteMasksRed=[];this.colorWriteMasksGreen=[];this.colorWriteMasksBlue=[];this.colorWriteMasksAlpha=[];this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksRed.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksGreen.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksBlue.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorWriteMasksAlpha.push(true);this.colorAttachmentCount=1;this.colorAttachments=[];this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.colorAttachments.push(0);this.depthStencilAttachment=0;this.conservativeRasterization=false}}$hxClasses["kha.graphics4.PipelineStateBase"]=kha_graphics4_PipelineStateBase;kha_graphics4_PipelineStateBase.__name__=true;Object.assign(kha_graphics4_PipelineStateBase.prototype,{__class__:kha_graphics4_PipelineStateBase});class kha_graphics4_PipelineState extends kha_graphics4_PipelineStateBase{constructor(){super();this.pipeline=Krom.createPipeline()}delete(){Krom.deletePipeline(this.pipeline);this.pipeline=null}compile(){let structure0=this.inputLayout.length>0?this.inputLayout[0]:null;let structure1=this.inputLayout.length>1?this.inputLayout[1]:null;let structure2=this.inputLayout.length>2?this.inputLayout[2]:null;let structure3=this.inputLayout.length>3?this.inputLayout[3]:null;let gs=this.geometryShader!=null?this.geometryShader.shader:null;let tcs=this.tessellationControlShader!=null?this.tessellationControlShader.shader:null;let tes=this.tessellationEvaluationShader!=null?this.tessellationEvaluationShader.shader:null;let stencilReferenceValue=0;let _g=this.stencilReferenceValue;if(_g._hx_index==1){let value=_g.value;stencilReferenceValue=value}Krom.compilePipeline(this.pipeline,structure0,structure1,structure2,structure3,this.inputLayout.length,this.vertexShader.shader,this.fragmentShader.shader,gs,tcs,tes,{cullMode:this.cullMode,depthWrite:this.depthWrite,depthMode:this.depthMode,stencilMode:this.stencilFrontMode,stencilBothPass:this.stencilFrontBothPass,stencilDepthFail:this.stencilFrontDepthFail,stencilFail:this.stencilFrontFail,stencilReferenceValue:stencilReferenceValue,stencilReadMask:this.stencilReadMask,stencilWriteMask:this.stencilWriteMask,blendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.blendSource),blendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.blendDestination),alphaBlendSource:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendSource),alphaBlendDestination:kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendDestination),colorWriteMaskRed:this.colorWriteMasksRed,colorWriteMaskGreen:this.colorWriteMasksGreen,colorWriteMaskBlue:this.colorWriteMasksBlue,colorWriteMaskAlpha:this.colorWriteMasksAlpha,conservativeRasterization:this.conservativeRasterization})}set(){Krom.setPipeline(this.pipeline)}getConstantLocation(name){return Krom.getConstantLocation(this.pipeline,name)}getTextureUnit(name){return Krom.getTextureUnit(this.pipeline,name)}static convertBlendingFactor(factor){switch(factor){case 0:case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 9:return 8;case 10:return 9}}}$hxClasses["kha.graphics4.PipelineState"]=kha_graphics4_PipelineState;kha_graphics4_PipelineState.__name__=true;kha_graphics4_PipelineState.__super__=kha_graphics4_PipelineStateBase;Object.assign(kha_graphics4_PipelineState.prototype,{__class__:kha_graphics4_PipelineState});var kha_graphics4_StencilValue=$hxEnums["kha.graphics4.StencilValue"]={__ename__:true,__constructs__:null,Dynamic:{_hx_name:"Dynamic",_hx_index:0,__enum__:"kha.graphics4.StencilValue",toString:$estr},Static:($_=function(value){return{_hx_index:1,value:value,__enum__:"kha.graphics4.StencilValue",toString:$estr}},$_._hx_name="Static",$_.__params__=["value"],$_)};kha_graphics4_StencilValue.__constructs__=[kha_graphics4_StencilValue.Dynamic,kha_graphics4_StencilValue.Static];class kha_graphics4_TessellationControlShader{constructor(sources,names){this.shader=Krom.createTessellationControlShader(sources[0].bytes.b.bufferValue,names[0])}}$hxClasses["kha.graphics4.TessellationControlShader"]=kha_graphics4_TessellationControlShader;kha_graphics4_TessellationControlShader.__name__=true;Object.assign(kha_graphics4_TessellationControlShader.prototype,{__class__:kha_graphics4_TessellationControlShader});class kha_graphics4_TessellationEvaluationShader{constructor(sources,names){this.shader=Krom.createTessellationEvaluationShader(sources[0].bytes.b.bufferValue,names[0])}}$hxClasses["kha.graphics4.TessellationEvaluationShader"]=kha_graphics4_TessellationEvaluationShader;kha_graphics4_TessellationEvaluationShader.__name__=true;Object.assign(kha_graphics4_TessellationEvaluationShader.prototype,{__class__:kha_graphics4_TessellationEvaluationShader});class kha_graphics4_TextureUnit{}$hxClasses["kha.graphics4.TextureUnit"]=kha_graphics4_TextureUnit;kha_graphics4_TextureUnit.__name__=true;kha_graphics4_TextureUnit.__isInterface__=true;class kha_graphics4_VertexBuffer{constructor(vertexCount,structure,usage,instanceDataStepRate,canRead){if(canRead==null){canRead=false}if(instanceDataStepRate==null){instanceDataStepRate=0}this.lockEnd=0;this.lockStart=0;this.vertexCount=vertexCount;this.structure=structure;this.mySize=vertexCount;this.buffer=Krom.createVertexBuffer(vertexCount,structure.elements,usage,instanceDataStepRate)}lock(start,count){this.lockStart=start!=null?start:0;this.lockEnd=count!=null?start+count:this.mySize;this._data=kha_arrays_ByteArray._new(Krom.lockVertexBuffer(this.buffer,this.lockStart,this.lockEnd));return this._data}unlock(count){if(count!=null){this.lockEnd=this.lockStart+count}Krom.unlockVertexBuffer(this.buffer,this.lockEnd)}set(offset){Krom.setVertexBuffer(this.buffer);return 0}}$hxClasses["kha.graphics4.VertexBuffer"]=kha_graphics4_VertexBuffer;kha_graphics4_VertexBuffer.__name__=true;Object.assign(kha_graphics4_VertexBuffer.prototype,{__class__:kha_graphics4_VertexBuffer});class kha_graphics4_VertexElement{constructor(name,data){this.name=name;this.data=data}}$hxClasses["kha.graphics4.VertexElement"]=kha_graphics4_VertexElement;kha_graphics4_VertexElement.__name__=true;Object.assign(kha_graphics4_VertexElement.prototype,{__class__:kha_graphics4_VertexElement});class kha_graphics4_VertexShader{constructor(sources,names){if(sources!=null){this.shader=Krom.createVertexShader(sources[0].bytes.b.bufferValue,names[0])}}static fromSource(source){let shader=new kha_graphics4_VertexShader(null,null);shader.shader=Krom.createVertexShaderFromSource(source);return shader}}$hxClasses["kha.graphics4.VertexShader"]=kha_graphics4_VertexShader;kha_graphics4_VertexShader.__name__=true;Object.assign(kha_graphics4_VertexShader.prototype,{__class__:kha_graphics4_VertexShader});class kha_graphics4_VertexStructure{constructor(){this.elements=[];this.instanced=false}add(name,data){this.elements.push(new kha_graphics4_VertexElement(name,data))}size(){return this.elements.length}byteSize(){let byteSize=0;let _g=0;let _g1=this.elements.length;while(_g<_g1){let i=_g++;byteSize+=kha_graphics4_VertexStructure.dataByteSize(this.elements[i].data)}return byteSize}get(index){return this.elements[index]}static dataByteSize(data){switch(data){case 0:return 4;case 1:return 8;case 2:return 12;case 3:return 16;case 4:return 64;case 5:case 6:case 7:case 8:return 1;case 9:case 10:case 11:case 12:return 2;case 13:case 14:case 15:case 16:return 4;case 17:case 18:case 19:case 20:return 2;case 21:case 22:case 23:case 24:return 4;case 25:case 26:case 27:case 28:return 8;case 29:case 30:return 4;case 31:case 32:return 8;case 33:case 34:return 12;case 35:case 36:return 16}}}$hxClasses["kha.graphics4.VertexStructure"]=kha_graphics4_VertexStructure;kha_graphics4_VertexStructure.__name__=true;Object.assign(kha_graphics4_VertexStructure.prototype,{__class__:kha_graphics4_VertexStructure});class kha_input_Gamepad{constructor(index,id){if(id==null){id="unknown"}if(index==null){index=0}this.connected=false;this.index=index;this.axisListeners=[];this.buttonListeners=[];kha_input_Gamepad.instances[index]=this}notify(axisListener,buttonListener){if(axisListener!=null){this.axisListeners.push(axisListener)}if(buttonListener!=null){this.buttonListeners.push(buttonListener)}}remove(axisListener,buttonListener){if(axisListener!=null){HxOverrides.remove(this.axisListeners,axisListener)}if(buttonListener!=null){HxOverrides.remove(this.buttonListeners,buttonListener)}}rumble(leftAmount,rightAmount){kha_SystemImpl.setGamepadRumble(this.index,leftAmount,rightAmount)}get_id(){return kha_SystemImpl.getGamepadId(this.index)}get_vendor(){return kha_SystemImpl.getGamepadVendor(this.index)}sendAxisEvent(axis,value){let _g=0;let _g1=this.axisListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(axis,value)}}sendButtonEvent(button,value){let _g=0;let _g1=this.buttonListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(button,value)}}static get(index){if(index==null){index=0}if(index>=kha_input_Gamepad.instances.length){return null}return kha_input_Gamepad.instances[index]}static notifyOnConnect(connectListener,disconnectListener){if(connectListener!=null){kha_input_Gamepad.connectListeners.push(connectListener)}if(disconnectListener!=null){kha_input_Gamepad.disconnectListeners.push(disconnectListener)}}static removeConnect(connectListener,disconnectListener){if(connectListener!=null){HxOverrides.remove(kha_input_Gamepad.connectListeners,connectListener)}if(disconnectListener!=null){HxOverrides.remove(kha_input_Gamepad.disconnectListeners,disconnectListener)}}static sendConnectEvent(index){kha_input_Gamepad.instances[index].connected=true;let _g=0;let _g1=kha_input_Gamepad.connectListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(index)}}static sendDisconnectEvent(index){kha_input_Gamepad.instances[index].connected=false;let _g=0;let _g1=kha_input_Gamepad.disconnectListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(index)}}}$hxClasses["kha.input.Gamepad"]=$hx_exports["kha"]["input"]["Gamepad"]=kha_input_Gamepad;kha_input_Gamepad.__name__=true;Object.assign(kha_input_Gamepad.prototype,{__class__:kha_input_Gamepad,__properties__:{get_vendor:"get_vendor",get_id:"get_id"}});var kha_input_BlockInterventions=$hxEnums["kha.input.BlockInterventions"]={__ename__:true,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"kha.input.BlockInterventions",toString:$estr},Full:{_hx_name:"Full",_hx_index:1,__enum__:"kha.input.BlockInterventions",toString:$estr},None:{_hx_name:"None",_hx_index:2,__enum__:"kha.input.BlockInterventions",toString:$estr},Custom:($_=function(func){return{_hx_index:3,func:func,__enum__:"kha.input.BlockInterventions",toString:$estr}},$_._hx_name="Custom",$_.__params__=["func"],$_)};kha_input_BlockInterventions.__constructs__=[kha_input_BlockInterventions.Default,kha_input_BlockInterventions.Full,kha_input_BlockInterventions.None,kha_input_BlockInterventions.Custom];class kha_netsync_Controller{constructor(){this.__id=kha_netsync_ControllerBuilder.nextId++;this._inputBuffer=new haxe_io_Bytes(new ArrayBuffer(1))}}$hxClasses["kha.netsync.Controller"]=kha_netsync_Controller;kha_netsync_Controller.__name__=true;Object.assign(kha_netsync_Controller.prototype,{__class__:kha_netsync_Controller});class kha_input_Keyboard extends kha_netsync_Controller{constructor(){super();this.downListeners=[];this.upListeners=[];this.pressListeners=[];kha_input_Keyboard.instance=this}notify(downListener,upListener,pressListener){if(downListener!=null){this.downListeners.push(downListener)}if(upListener!=null){this.upListeners.push(upListener)}if(pressListener!=null){this.pressListeners.push(pressListener)}}remove(downListener,upListener,pressListener){if(downListener!=null){HxOverrides.remove(this.downListeners,downListener)}if(upListener!=null){HxOverrides.remove(this.upListeners,upListener)}if(pressListener!=null){HxOverrides.remove(this.pressListeners,pressListener)}}show(){}hide(){}sendDownEvent(code){let _g=0;let _g1=this.downListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(code)}}sendUpEvent(code){let _g=0;let _g1=this.upListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(code)}}sendPressEvent(char){let _g=0;let _g1=this.pressListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(char)}}_receive(bytes){}static get(num){if(num==null){num=0}return kha_SystemImpl.getKeyboard(num)}static disableSystemInterventions(behavior){kha_input_Keyboard.keyBehavior=behavior}}$hxClasses["kha.input.Keyboard"]=$hx_exports["kha"]["input"]["Keyboard"]=kha_input_Keyboard;kha_input_Keyboard.__name__=true;kha_input_Keyboard.__super__=kha_netsync_Controller;Object.assign(kha_input_Keyboard.prototype,{__class__:kha_input_Keyboard});var kha_input_MouseEventBlockBehavior=$hxEnums["kha.input.MouseEventBlockBehavior"]={__ename__:true,__constructs__:null,Full:{_hx_name:"Full",_hx_index:0,__enum__:"kha.input.MouseEventBlockBehavior",toString:$estr},None:{_hx_name:"None",_hx_index:1,__enum__:"kha.input.MouseEventBlockBehavior",toString:$estr},Custom:($_=function(func){return{_hx_index:2,func:func,__enum__:"kha.input.MouseEventBlockBehavior",toString:$estr}},$_._hx_name="Custom",$_.__params__=["func"],$_)};kha_input_MouseEventBlockBehavior.__constructs__=[kha_input_MouseEventBlockBehavior.Full,kha_input_MouseEventBlockBehavior.None,kha_input_MouseEventBlockBehavior.Custom];var kha_input_MouseCursor=$hxEnums["kha.input.MouseCursor"]={__ename__:true,__constructs__:null,Default:{_hx_name:"Default",_hx_index:0,__enum__:"kha.input.MouseCursor",toString:$estr},Pointer:{_hx_name:"Pointer",_hx_index:1,__enum__:"kha.input.MouseCursor",toString:$estr},Text:{_hx_name:"Text",_hx_index:2,__enum__:"kha.input.MouseCursor",toString:$estr},EastWestResize:{_hx_name:"EastWestResize",_hx_index:3,__enum__:"kha.input.MouseCursor",toString:$estr},NorthSouthResize:{_hx_name:"NorthSouthResize",_hx_index:4,__enum__:"kha.input.MouseCursor",toString:$estr},NorthEastResize:{_hx_name:"NorthEastResize",_hx_index:5,__enum__:"kha.input.MouseCursor",toString:$estr},SouthEastResize:{_hx_name:"SouthEastResize",_hx_index:6,__enum__:"kha.input.MouseCursor",toString:$estr},NorthWestResize:{_hx_name:"NorthWestResize",_hx_index:7,__enum__:"kha.input.MouseCursor",toString:$estr},SouthWestResize:{_hx_name:"SouthWestResize",_hx_index:8,__enum__:"kha.input.MouseCursor",toString:$estr},Grab:{_hx_name:"Grab",_hx_index:9,__enum__:"kha.input.MouseCursor",toString:$estr},Grabbing:{_hx_name:"Grabbing",_hx_index:10,__enum__:"kha.input.MouseCursor",toString:$estr},NotAllowed:{_hx_name:"NotAllowed",_hx_index:11,__enum__:"kha.input.MouseCursor",toString:$estr},Wait:{_hx_name:"Wait",_hx_index:12,__enum__:"kha.input.MouseCursor",toString:$estr},Crosshair:{_hx_name:"Crosshair",_hx_index:13,__enum__:"kha.input.MouseCursor",toString:$estr},Custom:($_=function(image){return{_hx_index:14,image:image,__enum__:"kha.input.MouseCursor",toString:$estr}},$_._hx_name="Custom",$_.__params__=["image"],$_)};kha_input_MouseCursor.__constructs__=[kha_input_MouseCursor.Default,kha_input_MouseCursor.Pointer,kha_input_MouseCursor.Text,kha_input_MouseCursor.EastWestResize,kha_input_MouseCursor.NorthSouthResize,kha_input_MouseCursor.NorthEastResize,kha_input_MouseCursor.SouthEastResize,kha_input_MouseCursor.NorthWestResize,kha_input_MouseCursor.SouthWestResize,kha_input_MouseCursor.Grab,kha_input_MouseCursor.Grabbing,kha_input_MouseCursor.NotAllowed,kha_input_MouseCursor.Wait,kha_input_MouseCursor.Crosshair,kha_input_MouseCursor.Custom];class kha_input_Mouse extends kha_netsync_Controller{constructor(){super();kha_input_Mouse.instance=this}notify(downListener,upListener,moveListener,wheelListener,leaveListener){this.notifyWindowed(0,downListener,upListener,moveListener,wheelListener,leaveListener)}remove(downListener,upListener,moveListener,wheelListener,leaveListener){this.removeWindowed(0,downListener,upListener,moveListener,wheelListener,leaveListener)}notifyWindowed(windowId,downListener,upListener,moveListener,wheelListener,leaveListener){if(downListener!=null){if(this.windowDownListeners==null){this.windowDownListeners=[]}while(this.windowDownListeners.length<=windowId)this.windowDownListeners.push([]);this.windowDownListeners[windowId].push(downListener)}if(upListener!=null){if(this.windowUpListeners==null){this.windowUpListeners=[]}while(this.windowUpListeners.length<=windowId)this.windowUpListeners.push([]);this.windowUpListeners[windowId].push(upListener)}if(moveListener!=null){if(this.windowMoveListeners==null){this.windowMoveListeners=[]}while(this.windowMoveListeners.length<=windowId)this.windowMoveListeners.push([]);this.windowMoveListeners[windowId].push(moveListener)}if(wheelListener!=null){if(this.windowWheelListeners==null){this.windowWheelListeners=[]}while(this.windowWheelListeners.length<=windowId)this.windowWheelListeners.push([]);this.windowWheelListeners[windowId].push(wheelListener)}if(leaveListener!=null){if(this.windowLeaveListeners==null){this.windowLeaveListeners=[]}while(this.windowLeaveListeners.length<=windowId)this.windowLeaveListeners.push([]);this.windowLeaveListeners[windowId].push(leaveListener)}}removeWindowed(windowId,downListener,upListener,moveListener,wheelListener,leaveListener){if(downListener!=null){if(this.windowDownListeners!=null){if(windowId<this.windowDownListeners.length){HxOverrides.remove(this.windowDownListeners[windowId],downListener)}else{haxe_Log.trace('no downListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:152,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no downListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:156,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(upListener!=null){if(this.windowUpListeners!=null){if(windowId<this.windowUpListeners.length){HxOverrides.remove(this.windowUpListeners[windowId],upListener)}else{haxe_Log.trace('no upListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:166,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no upListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:170,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(moveListener!=null){if(this.windowMoveListeners!=null){if(windowId<this.windowMoveListeners.length){HxOverrides.remove(this.windowMoveListeners[windowId],moveListener)}else{haxe_Log.trace('no moveListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:180,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no moveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:184,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(wheelListener!=null){if(this.windowWheelListeners!=null){if(windowId<this.windowWheelListeners.length){HxOverrides.remove(this.windowWheelListeners[windowId],wheelListener)}else{haxe_Log.trace('no wheelListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:194,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no wheelListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:198,className:"kha.input.Mouse",methodName:"removeWindowed"})}}if(leaveListener!=null){if(this.windowLeaveListeners!=null){if(windowId<this.windowLeaveListeners.length){HxOverrides.remove(this.windowLeaveListeners[windowId],leaveListener)}else{haxe_Log.trace('no leaveListeners for window "'+windowId+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:208,className:"kha.input.Mouse",methodName:"removeWindowed"})}}else{haxe_Log.trace("no leaveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:212,className:"kha.input.Mouse",methodName:"removeWindowed"})}}}lock(){}unlock(){}canLock(){return false}isLocked(){return false}notifyOnLockChange(change,error){}removeFromLockChange(change,error){}hideSystemCursor(){}showSystemCursor(){}setSystemCursor(cursor){}sendLeaveEvent(windowId){if(this.windowLeaveListeners!=null){let _g=0;let _g1=this.windowLeaveListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener()}}}sendDownEvent(windowId,button,x,y){if(this.windowDownListeners!=null){let _g=0;let _g1=this.windowDownListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(button,x,y)}}}sendUpEvent(windowId,button,x,y){if(this.windowUpListeners!=null){let _g=0;let _g1=this.windowUpListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(button,x,y)}}}sendMoveEvent(windowId,x,y,movementX,movementY){if(this.windowMoveListeners!=null){let _g=0;let _g1=this.windowMoveListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(x,y,movementX,movementY)}}}sendWheelEvent(windowId,delta){if(this.windowWheelListeners!=null){let _g=0;let _g1=this.windowWheelListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(delta)}}}_receive(bytes){}static get(num){if(num==null){num=0}return kha_SystemImpl.getMouse(num)}static setWheelEventBlockBehavior(behavior){kha_input_Mouse.wheelEventBlockBehavior=behavior}}$hxClasses["kha.input.Mouse"]=$hx_exports["kha"]["input"]["Mouse"]=kha_input_Mouse;kha_input_Mouse.__name__=true;kha_input_Mouse.__super__=kha_netsync_Controller;Object.assign(kha_input_Mouse.prototype,{__class__:kha_input_Mouse});class kha_input_MouseImpl extends kha_input_Mouse{constructor(){super()}lock(){kha_SystemImpl.lockMouse()}unlock(){kha_SystemImpl.unlockMouse()}canLock(){return kha_SystemImpl.canLockMouse()}isLocked(){return kha_SystemImpl.isMouseLocked()}notifyOnLockChange(func,error){kha_SystemImpl.notifyOfMouseLockChange(func,error)}removeFromLockChange(func,error){kha_SystemImpl.removeFromMouseLockChange(func,error)}hideSystemCursor(){kha_SystemImpl.hideSystemCursor()}showSystemCursor(){kha_SystemImpl.showSystemCursor()}_receive(bytes){}}$hxClasses["kha.input.MouseImpl"]=kha_input_MouseImpl;kha_input_MouseImpl.__name__=true;kha_input_MouseImpl.__super__=kha_input_Mouse;Object.assign(kha_input_MouseImpl.prototype,{__class__:kha_input_MouseImpl});class kha_input_Pen{constructor(){kha_input_Pen.instance=this}notify(downListener,upListener,moveListener){this.notifyWindowed(0,downListener,upListener,moveListener)}notifyWindowed(windowId,downListener,upListener,moveListener){if(downListener!=null){if(this.windowDownListeners==null){this.windowDownListeners=[]}while(this.windowDownListeners.length<=windowId)this.windowDownListeners.push([]);this.windowDownListeners[windowId].push(downListener)}if(upListener!=null){if(this.windowUpListeners==null){this.windowUpListeners=[]}while(this.windowUpListeners.length<=windowId)this.windowUpListeners.push([]);this.windowUpListeners[windowId].push(upListener)}if(moveListener!=null){if(this.windowMoveListeners==null){this.windowMoveListeners=[]}while(this.windowMoveListeners.length<=windowId)this.windowMoveListeners.push([]);this.windowMoveListeners[windowId].push(moveListener)}}sendDownEvent(windowId,x,y,pressure){if(this.windowDownListeners!=null){let _g=0;let _g1=this.windowDownListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(x,y,pressure)}}}sendUpEvent(windowId,x,y,pressure){if(this.windowUpListeners!=null){let _g=0;let _g1=this.windowUpListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(x,y,pressure)}}}sendMoveEvent(windowId,x,y,pressure){if(this.windowMoveListeners!=null){let _g=0;let _g1=this.windowMoveListeners[windowId];while(_g<_g1.length){let listener=_g1[_g];++_g;listener(x,y,pressure)}}}static get(num){if(num==null){num=0}return kha_SystemImpl.getPen(num)}}$hxClasses["kha.input.Pen"]=kha_input_Pen;kha_input_Pen.__name__=true;Object.assign(kha_input_Pen.prototype,{__class__:kha_input_Pen});var kha_input_TouchDownEventBlockBehavior=$hxEnums["kha.input.TouchDownEventBlockBehavior"]={__ename__:true,__constructs__:null,Full:{_hx_name:"Full",_hx_index:0,__enum__:"kha.input.TouchDownEventBlockBehavior",toString:$estr},None:{_hx_name:"None",_hx_index:1,__enum__:"kha.input.TouchDownEventBlockBehavior",toString:$estr},Custom:($_=function(func){return{_hx_index:2,func:func,__enum__:"kha.input.TouchDownEventBlockBehavior",toString:$estr}},$_._hx_name="Custom",$_.__params__=["func"],$_)};kha_input_TouchDownEventBlockBehavior.__constructs__=[kha_input_TouchDownEventBlockBehavior.Full,kha_input_TouchDownEventBlockBehavior.None,kha_input_TouchDownEventBlockBehavior.Custom];class kha_input_Surface{constructor(){this.touchStartListeners=[];this.touchEndListeners=[];this.moveListeners=[];kha_input_Surface.instance=this}notify(touchStartListener,touchEndListener,moveListener){if(touchStartListener!=null){this.touchStartListeners.push(touchStartListener)}if(touchEndListener!=null){this.touchEndListeners.push(touchEndListener)}if(moveListener!=null){this.moveListeners.push(moveListener)}}remove(touchStartListener,touchEndListener,moveListener){if(touchStartListener!=null){HxOverrides.remove(this.touchStartListeners,touchStartListener)}if(touchEndListener!=null){HxOverrides.remove(this.touchEndListeners,touchEndListener)}if(moveListener!=null){HxOverrides.remove(this.moveListeners,moveListener)}}sendTouchStartEvent(index,x,y){let _g=0;let _g1=this.touchStartListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(index,x,y)}}sendTouchEndEvent(index,x,y){let _g=0;let _g1=this.touchEndListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(index,x,y)}}sendMoveEvent(index,x,y){let _g=0;let _g1=this.moveListeners;while(_g<_g1.length){let listener=_g1[_g];++_g;listener(index,x,y)}}static get(num){if(num==null){num=0}if(num!=0){return null}return kha_input_Surface.instance}static setTouchDownEventBlockBehavior(behavior){kha_input_Surface.touchDownEventBlockBehavior=behavior}}$hxClasses["kha.input.Surface"]=$hx_exports["kha"]["input"]["Surface"]=kha_input_Surface;kha_input_Surface.__name__=true;Object.assign(kha_input_Surface.prototype,{__class__:kha_input_Surface});class kha_internal_BytesBlob{constructor(bytes){this.bytes=bytes}get_length(){return this.bytes.length}toString(){return this.bytes.toString()}toBytes(){return this.bytes}static fromBytes(bytes){return new kha_internal_BytesBlob(bytes)}}$hxClasses["kha.internal.BytesBlob"]=kha_internal_BytesBlob;kha_internal_BytesBlob.__name__=true;kha_internal_BytesBlob.__interfaces__=[kha_Resource];Object.assign(kha_internal_BytesBlob.prototype,{__class__:kha_internal_BytesBlob,__properties__:{get_length:"get_length"}});class kha_krom_Graphics{constructor(renderTarget){this.renderTarget=renderTarget}begin(additionalRenderTargets){Krom.begin(this.renderTarget,additionalRenderTargets)}beginFace(face){Krom.beginFace(this.renderTarget,face)}end(){Krom.end()}clear(color,depth,stencil){let flags=0;if(color!=null){flags|=1}if(depth!=null){flags|=2}if(stencil!=null){flags|=4}Krom.clear(flags,color==null?0:color,depth,stencil)}viewport(x,y,width,height){Krom.viewport(x,y,width,height)}setVertexBuffer(vertexBuffer){vertexBuffer.set(0)}setVertexBuffers(vertexBuffers){Krom.setVertexBuffers(vertexBuffers)}setIndexBuffer(indexBuffer){indexBuffer.set()}setCubeMap(unit,cubeMap){if(cubeMap==null){return}if(cubeMap.texture_!=null){Krom.setTexture(unit,cubeMap.texture_)}else{Krom.setRenderTarget(unit,cubeMap.renderTarget_)}}setCubeMapDepth(unit,cubeMap){if(cubeMap==null){return}Krom.setTextureDepth(unit,cubeMap.renderTarget_)}setTexture(unit,texture){if(texture==null){return}if(texture.texture_!=null){Krom.setTexture(unit,texture.texture_)}else{Krom.setRenderTarget(unit,texture.renderTarget_)}}setTextureDepth(unit,texture){if(texture==null){return}Krom.setTextureDepth(unit,texture.renderTarget_)}setImageTexture(unit,texture){if(texture==null){return}Krom.setImageTexture(unit,texture.texture_)}setTextureParameters(texunit,uAddressing,vAddressing,minificationFilter,magnificationFilter,mipmapFilter){Krom.setTextureParameters(texunit,uAddressing,vAddressing,minificationFilter,magnificationFilter,mipmapFilter)}setTexture3DParameters(texunit,uAddressing,vAddressing,wAddressing,minificationFilter,magnificationFilter,mipmapFilter){Krom.setTexture3DParameters(texunit,uAddressing,vAddressing,wAddressing,minificationFilter,magnificationFilter,mipmapFilter)}setTextureCompareMode(texunit,enabled){Krom.setTextureCompareMode(texunit,enabled)}setCubeMapCompareMode(texunit,enabled){Krom.setCubeMapCompareMode(texunit,enabled)}setPipeline(pipeline){pipeline.set()}setBool(location,value){Krom.setBool(location,value)}setInt(location,value){Krom.setInt(location,value)}setFloat(location,value){Krom.setFloat(location,value)}setFloat2(location,value1,value2){Krom.setFloat2(location,value1,value2)}setFloat3(location,value1,value2,value3){Krom.setFloat3(location,value1,value2,value3)}setFloat4(location,value1,value2,value3,value4){Krom.setFloat4(location,value1,value2,value3,value4)}setFloats(location,values){Krom.setFloats(location,values.buffer)}setMatrix(location,matrix){let v=matrix._00;kha_krom_Graphics.mat.setFloat32(0,v,true);let v1=matrix._01;kha_krom_Graphics.mat.setFloat32(4,v1,true);let v2=matrix._02;kha_krom_Graphics.mat.setFloat32(8,v2,true);let v3=matrix._03;kha_krom_Graphics.mat.setFloat32(12,v3,true);let v4=matrix._10;kha_krom_Graphics.mat.setFloat32(16,v4,true);let v5=matrix._11;kha_krom_Graphics.mat.setFloat32(20,v5,true);let v6=matrix._12;kha_krom_Graphics.mat.setFloat32(24,v6,true);let v7=matrix._13;kha_krom_Graphics.mat.setFloat32(28,v7,true);let v8=matrix._20;kha_krom_Graphics.mat.setFloat32(32,v8,true);let v9=matrix._21;kha_krom_Graphics.mat.setFloat32(36,v9,true);let v10=matrix._22;kha_krom_Graphics.mat.setFloat32(40,v10,true);let v11=matrix._23;kha_krom_Graphics.mat.setFloat32(44,v11,true);let v12=matrix._30;kha_krom_Graphics.mat.setFloat32(48,v12,true);let v13=matrix._31;kha_krom_Graphics.mat.setFloat32(52,v13,true);let v14=matrix._32;kha_krom_Graphics.mat.setFloat32(56,v14,true);let v15=matrix._33;kha_krom_Graphics.mat.setFloat32(60,v15,true);Krom.setMatrix(location,kha_krom_Graphics.mat.buffer)}setMatrix3(location,matrix){let v=matrix._00;kha_krom_Graphics.mat.setFloat32(0,v,true);let v1=matrix._01;kha_krom_Graphics.mat.setFloat32(4,v1,true);let v2=matrix._02;kha_krom_Graphics.mat.setFloat32(8,v2,true);let v3=matrix._10;kha_krom_Graphics.mat.setFloat32(12,v3,true);let v4=matrix._11;kha_krom_Graphics.mat.setFloat32(16,v4,true);let v5=matrix._12;kha_krom_Graphics.mat.setFloat32(20,v5,true);let v6=matrix._20;kha_krom_Graphics.mat.setFloat32(24,v6,true);let v7=matrix._21;kha_krom_Graphics.mat.setFloat32(28,v7,true);let v8=matrix._22;kha_krom_Graphics.mat.setFloat32(32,v8,true);Krom.setMatrix3(location,kha_krom_Graphics.mat.buffer)}drawIndexedVertices(start,count){if(count==null){count=-1}if(start==null){start=0}Krom.drawIndexedVertices(start,count)}drawIndexedVerticesInstanced(instanceCount,start,count){if(count==null){count=-1}if(start==null){start=0}Krom.drawIndexedVerticesInstanced(instanceCount,start,count)}scissor(x,y,width,height){Krom.scissor(x,y,width,height)}disableScissor(){Krom.disableScissor()}}$hxClasses["kha.krom.Graphics"]=kha_krom_Graphics;kha_krom_Graphics.__name__=true;kha_krom_Graphics.__interfaces__=[kha_graphics4_Graphics];Object.assign(kha_krom_Graphics.prototype,{__class__:kha_krom_Graphics});class kha_krom_Sound extends kha_Sound{constructor(bytes){super();this.sampleRate=44100;let count=bytes.length/4|0;this.uncompressedData=kha_arrays_Float32Array._new(count);let _g=0;let _g1=count;while(_g<_g1){let i=_g++;let this1=this.uncompressedData;let v=bytes.getFloat(i*4);this1.setFloat32(i*4,v,true)}this.compressedData=null}uncompress(done){done()}}$hxClasses["kha.krom.Sound"]=kha_krom_Sound;kha_krom_Sound.__name__=true;kha_krom_Sound.__super__=kha_Sound;Object.assign(kha_krom_Sound.prototype,{__class__:kha_krom_Sound});class kha_netsync_ControllerBuilder{}$hxClasses["kha.netsync.ControllerBuilder"]=kha_netsync_ControllerBuilder;kha_netsync_ControllerBuilder.__name__=true;class kha_netsync_Session{static the(){return kha_netsync_Session.instance}}$hxClasses["kha.netsync.Session"]=kha_netsync_Session;kha_netsync_Session.__name__=true;function $bind(o,m){if(m==null)return null;if(m.__id__==null)m.__id__=$global.$haxeUID++;var f;if(o.hx__closures__==null)o.hx__closures__={};else f=o.hx__closures__[m.__id__];if(f==null){f=m.bind(o);o.hx__closures__[m.__id__]=f}return f}$global.$haxeUID|=0;if(typeof performance!="undefined"?typeof performance.now=="function":false){HxOverrides.now=performance.now.bind(performance)}$hxClasses["Math"]=Math;if(String.fromCodePoint==null)String.fromCodePoint=function(c){return c<65536?String.fromCharCode(c):String.fromCharCode((c>>10)+55232)+String.fromCharCode((c&1023)+56320)};{String.prototype.__class__=$hxClasses["String"]=String;String.__name__=true;$hxClasses["Array"]=Array;Array.__name__=true;Date.prototype.__class__=$hxClasses["Date"]=Date;Date.__name__="Date";var Int={};var Dynamic={};var Float=Number;var Bool=Boolean;var Class={};var Enum={}}haxe_ds_ObjectMap.count=0;js_Boot.__toStr={}.toString;iron_Trait._hx_skip_constructor=false;armory_logicnode_LogicNode._hx_skip_constructor=false;armory_renderpath_Inc.superSample=1;armory_renderpath_Inc.pointIndex=0;armory_renderpath_Inc.spotIndex=0;armory_renderpath_NishitaData.lutHeightSteps=128;armory_renderpath_NishitaData.lutAngleSteps=128;armory_renderpath_NishitaData.jSteps=8;armory_renderpath_NishitaData.radiusAtmo=6420;armory_renderpath_NishitaData.radiusPlanet=6360;armory_renderpath_NishitaData.rayleighCoeff=new iron_math_Vec3(55e-7,13e-6,224e-7);armory_renderpath_NishitaData.rayleighScale=8e3;armory_renderpath_NishitaData.mieCoeff=2e-5;armory_renderpath_NishitaData.mieScale=1200;armory_renderpath_NishitaData.ozoneCoeff=new iron_math_Vec3(159051840791988e-20,9.670704118097e-7,7.309568762914e-8);armory_renderpath_RenderPathCreator.setTargetMeshes=armory_renderpath_RenderPathDeferred.setTargetMeshes;armory_renderpath_RenderPathCreator.drawMeshes=armory_renderpath_RenderPathDeferred.drawMeshes;armory_trait_internal_UniformsManager.floatsRegistered=false;armory_trait_internal_UniformsManager.floatsMap=new haxe_ds_ObjectMap;armory_trait_internal_UniformsManager.vectorsRegistered=false;armory_trait_internal_UniformsManager.vectorsMap=new haxe_ds_ObjectMap;armory_trait_internal_UniformsManager.texturesRegistered=false;armory_trait_internal_UniformsManager.texturesMap=new haxe_ds_ObjectMap;armory_trait_internal_UniformsManager.sceneRemoveInitalized=false;haxe_Unserializer.DEFAULT_RESOLVER=new haxe__$Unserializer_DefaultResolver;haxe_Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";haxe_io_FPHelper.helper=new DataView(new ArrayBuffer(8));iron_App.traitInits=[];iron_App.traitUpdates=[];iron_App.traitLateUpdates=[];iron_App.traitRenders=[];iron_App.traitRenders2D=[];iron_App.pauseUpdates=false;iron_App.lastw=-1;iron_App.lasth=-1;iron_Scene.uidCounter=0;iron_Scene.framePassed=true;iron_data_ConstData.skydomeIndices=[261,8,7,258,5,4,265,12,11,257,2,156,262,9,8,259,6,5,179,12,265,0,3,2,263,10,9,260,7,6,1,4,3,264,11,10,6,17,16,179,23,12,3,14,13,10,21,20,7,18,17,4,15,14,11,22,21,8,19,18,5,16,15,12,23,22,2,13,156,9,20,19,16,27,26,23,34,33,13,24,156,20,31,30,17,28,27,179,34,23,14,25,24,21,32,31,18,29,28,15,26,25,22,33,32,19,30,29,29,40,39,26,37,36,33,44,43,30,41,40,27,38,37,34,45,44,24,35,156,31,42,41,28,39,38,179,45,34,25,36,35,32,43,42,39,50,49,179,56,45,36,47,46,43,54,53,40,51,50,37,48,47,44,55,54,41,52,51,38,49,48,45,56,55,35,46,156,42,53,52,52,63,62,49,60,59,56,67,66,46,57,156,53,64,63,50,61,60,179,67,56,47,58,57,54,65,64,51,62,61,48,59,58,55,66,65,62,73,72,59,70,69,66,77,76,63,74,73,60,71,70,67,78,77,57,68,156,64,75,74,61,72,71,179,78,67,58,69,68,65,76,75,75,86,85,72,83,82,179,89,78,69,80,79,76,87,86,73,84,83,70,81,80,77,88,87,74,85,84,71,82,81,78,89,88,68,79,156,85,96,95,82,93,92,89,100,99,79,90,156,86,97,96,83,94,93,179,100,89,80,91,90,87,98,97,84,95,94,81,92,91,88,99,98,98,109,108,95,106,105,92,103,102,99,110,109,96,107,106,93,104,103,100,111,110,90,101,156,97,108,107,94,105,104,179,111,100,91,102,101,101,112,156,108,119,118,105,116,115,179,122,111,102,113,112,109,120,119,106,117,116,103,114,113,110,121,120,107,118,117,104,115,114,111,122,121,121,132,131,118,129,128,115,126,125,122,133,132,112,123,156,119,130,129,116,127,126,179,133,122,113,124,123,120,131,130,117,128,127,114,125,124,124,135,134,131,142,141,128,139,138,125,136,135,132,143,142,129,140,139,126,137,136,133,144,143,123,134,156,130,141,140,127,138,137,179,144,133,144,155,154,134,145,156,141,152,151,138,149,148,179,155,144,135,146,145,142,153,152,139,150,149,136,147,146,143,154,153,140,151,150,137,148,147,147,159,158,154,166,165,151,163,162,148,160,159,155,167,166,145,157,156,152,164,163,149,161,160,179,167,155,146,158,157,153,165,164,150,162,161,179,178,167,158,169,168,165,176,175,162,173,172,159,170,169,166,177,176,163,174,173,160,171,170,167,178,177,157,168,156,164,175,174,161,172,171,171,183,182,178,190,189,168,180,156,175,187,186,172,184,183,179,190,178,169,181,180,176,188,187,173,185,184,170,182,181,177,189,188,174,186,185,182,193,192,189,200,199,186,197,196,183,194,193,190,201,200,180,191,156,187,198,197,184,195,194,179,201,190,181,192,191,188,199,198,185,196,195,195,206,205,179,212,201,192,203,202,199,210,209,196,207,206,193,204,203,200,211,210,197,208,207,194,205,204,201,212,211,191,202,156,198,209,208,205,216,215,212,223,222,202,213,156,209,220,219,206,217,216,179,223,212,203,214,213,210,221,220,207,218,217,204,215,214,211,222,221,208,219,218,218,229,228,215,226,225,222,233,232,219,230,229,216,227,226,223,234,233,213,224,156,220,231,230,217,228,227,179,234,223,214,225,224,221,232,231,228,239,238,179,245,234,225,236,235,232,243,242,229,240,239,226,237,236,233,244,243,230,241,240,227,238,237,234,245,244,224,235,156,231,242,241,241,252,251,238,249,248,245,256,255,235,246,156,242,253,252,239,250,249,179,256,245,236,247,246,243,254,253,240,251,250,237,248,247,244,255,254,251,260,259,248,1,0,255,264,263,252,261,260,249,258,1,256,265,264,246,257,156,253,262,261,250,259,258,179,265,256,247,0,257,254,263,262,261,7,260,258,4,1,265,11,264,262,8,261,259,5,258,0,2,257,263,9,262,260,6,259,1,3,0,264,10,263,6,16,5,3,13,2,10,20,9,7,17,6,4,14,3,11,21,10,8,18,7,5,15,4,12,22,11,9,19,8,16,26,15,23,33,22,20,30,19,17,27,16,14,24,13,21,31,20,18,28,17,15,25,14,22,32,21,19,29,18,29,39,28,26,36,25,33,43,32,30,40,29,27,37,26,34,44,33,31,41,30,28,38,27,25,35,24,32,42,31,39,49,38,36,46,35,43,53,42,40,50,39,37,47,36,44,54,43,41,51,40,38,48,37,45,55,44,42,52,41,52,62,51,49,59,48,56,66,55,53,63,52,50,60,49,47,57,46,54,64,53,51,61,50,48,58,47,55,65,54,62,72,61,59,69,58,66,76,65,63,73,62,60,70,59,67,77,66,64,74,63,61,71,60,58,68,57,65,75,64,75,85,74,72,82,71,69,79,68,76,86,75,73,83,72,70,80,69,77,87,76,74,84,73,71,81,70,78,88,77,85,95,84,82,92,81,89,99,88,86,96,85,83,93,82,80,90,79,87,97,86,84,94,83,81,91,80,88,98,87,98,108,97,95,105,94,92,102,91,99,109,98,96,106,95,93,103,92,100,110,99,97,107,96,94,104,93,91,101,90,108,118,107,105,115,104,102,112,101,109,119,108,106,116,105,103,113,102,110,120,109,107,117,106,104,114,103,111,121,110,121,131,120,118,128,117,115,125,114,122,132,121,119,129,118,116,126,115,113,123,112,120,130,119,117,127,116,114,124,113,124,134,123,131,141,130,128,138,127,125,135,124,132,142,131,129,139,128,126,136,125,133,143,132,130,140,129,127,137,126,144,154,143,141,151,140,138,148,137,135,145,134,142,152,141,139,149,138,136,146,135,143,153,142,140,150,139,137,147,136,147,158,146,154,165,153,151,162,150,148,159,147,155,166,154,152,163,151,149,160,148,146,157,145,153,164,152,150,161,149,158,168,157,165,175,164,162,172,161,159,169,158,166,176,165,163,173,162,160,170,159,167,177,166,164,174,163,161,171,160,171,182,170,178,189,177,175,186,174,172,183,171,169,180,168,176,187,175,173,184,172,170,181,169,177,188,176,174,185,173,182,192,181,189,199,188,186,196,185,183,193,182,190,200,189,187,197,186,184,194,183,181,191,180,188,198,187,185,195,184,195,205,194,192,202,191,199,209,198,196,206,195,193,203,192,200,210,199,197,207,196,194,204,193,201,211,200,198,208,197,205,215,204,212,222,211,209,219,208,206,216,205,203,213,202,210,220,209,207,217,206,204,214,203,211,221,210,208,218,207,218,228,217,215,225,214,222,232,221,219,229,218,216,226,215,223,233,222,220,230,219,217,227,216,214,224,213,221,231,220,228,238,227,225,235,224,232,242,231,229,239,228,226,236,225,233,243,232,230,240,229,227,237,226,234,244,233,231,241,230,241,251,240,238,248,237,245,255,244,242,252,241,239,249,238,236,246,235,243,253,242,240,250,239,237,247,236,244,254,243,251,259,250,248,0,247,255,263,254,252,260,251,249,1,248,256,264,255,253,261,252,250,258,249,247,257,246,254,262,253];iron_data_ConstData.skydomePos=[0,.5,.86603,0,.70711,.70711,.06699,.25,.96593,.12941,.48296,.86603,.18301,.68301,.70711,.22414,.83652,.5,.25,.93301,.25882,.25882,.96593,-0,.25,.93301,-.25882,.22414,.83652,-.5,.18301,.68301,-.70711,.12941,.48296,-.86603,.06699,.25,-.96593,.12941,.22414,.96593,.25,.43301,.86603,.35355,.61237,.70711,.43301,.75,.5,.48296,.83652,.25882,.5,.86603,-0,.48296,.83652,-.25882,.43301,.75,-.5,.35355,.61237,-.70711,.25,.43301,-.86603,.12941,.22414,-.96593,.18301,.18301,.96593,.35355,.35355,.86603,.5,.5,.70711,.61237,.61237,.5,.68301,.68301,.25882,.70711,.70711,-0,.68301,.68301,-.25882,.61237,.61237,-.5,.5,.5,-.70711,.35355,.35355,-.86603,.18301,.18301,-.96593,.22414,.12941,.96593,.43301,.25,.86603,.61237,.35355,.70711,.75,.43301,.5,.83652,.48296,.25882,.86603,.5,-0,.83652,.48296,-.25882,.75,.43301,-.5,.61237,.35355,-.70711,.43301,.25,-.86603,.22414,.12941,-.96593,.25,.06699,.96593,.48296,.12941,.86603,.68301,.18301,.70711,.83652,.22414,.5,.93301,.25,.25882,.96593,.25882,-0,.93301,.25,-.25882,.83652,.22414,-.5,.68301,.18301,-.70711,.48296,.12941,-.86603,.25,.06699,-.96593,.25882,-0,.96593,.5,-0,.86603,.70711,-0,.70711,.86603,0,.5,.96593,-0,.25882,1,-0,-0,.96593,-0,-.25882,.86603,-0,-.5,.70711,-0,-.70711,.5,-0,-.86603,.25882,-0,-.96593,.25,-.06699,.96593,.48296,-.12941,.86603,.68301,-.18301,.70711,.83652,-.22414,.5,.93301,-.25,.25882,.96593,-.25882,-0,.93301,-.25,-.25882,.83652,-.22414,-.5,.68301,-.18301,-.70711,.48296,-.12941,-.86603,.25,-.06699,-.96593,.22414,-.12941,.96593,.43301,-.25,.86603,.61237,-.35355,.70711,.75,-.43301,.5,.83652,-.48296,.25882,.86603,-.5,-0,.83652,-.48296,-.25882,.75,-.43301,-.5,.61237,-.35355,-.70711,.43301,-.25,-.86603,.22414,-.12941,-.96593,.18301,-.18301,.96593,.35355,-.35355,.86603,.5,-.5,.70711,.61237,-.61237,.5,.68301,-.68301,.25882,.70711,-.70711,-0,.68301,-.68301,-.25882,.61237,-.61237,-.5,.5,-.5,-.70711,.35355,-.35355,-.86603,.18301,-.18301,-.96593,.12941,-.22414,.96593,.25,-.43301,.86603,.35355,-.61237,.70711,.43301,-.75,.5,.48296,-.83652,.25882,.5,-.86603,-0,.48296,-.83652,-.25882,.43301,-.75,-.5,.35355,-.61237,-.70711,.25,-.43301,-.86603,.12941,-.22414,-.96593,.06699,-.25,.96593,.12941,-.48296,.86603,.18301,-.68301,.70711,.22414,-.83652,.5,.25,-.93301,.25882,.25882,-.96593,-0,.25,-.93301,-.25882,.22414,-.83652,-.5,.18301,-.68301,-.70711,.12941,-.48296,-.86603,.06699,-.25,-.96593,0,-.25882,.96593,-0,-.5,.86603,0,-.70711,.70711,0,-.86603,.5,0,-.96593,.25882,-0,-1,-0,0,-.96593,-.25882,0,-.86603,-.5,0,-.70711,-.70711,0,-.5,-.86603,0,-.25882,-.96593,-.06699,-.25,.96593,-.12941,-.48296,.86603,-.18301,-.68301,.70711,-.22414,-.83652,.5,-.25,-.93301,.25882,-.25882,-.96593,-0,-.25,-.93301,-.25882,-.22414,-.83652,-.5,-.18301,-.68301,-.70711,-.12941,-.48296,-.86603,-.06699,-.25,-.96593,-.12941,-.22414,.96593,-.25,-.43301,.86603,-.35355,-.61237,.70711,-.43301,-.75,.5,-.48296,-.83652,.25882,-.5,-.86603,-0,-.48296,-.83652,-.25882,-.43301,-.75,-.5,-.35355,-.61237,-.70711,-.25,-.43301,-.86603,-.12941,-.22414,-.96593,-0,-0,1,-.18301,-.18301,.96593,-.35355,-.35355,.86603,-.5,-.5,.70711,-.61237,-.61237,.5,-.68301,-.68301,.25882,-.70711,-.70711,-0,-.68301,-.68301,-.25882,-.61237,-.61237,-.5,-.5,-.5,-.70711,-.35355,-.35355,-.86603,-.18301,-.18301,-.96593,-.22414,-.12941,.96593,-.43301,-.25,.86603,-.61237,-.35355,.70711,-.75,-.43301,.5,-.83652,-.48296,.25882,-.86602,-.5,-0,-.83652,-.48296,-.25882,-.75,-.43301,-.5,-.61237,-.35355,-.70711,-.43301,-.25,-.86603,-.22414,-.12941,-.96593,0,-0,-1,-.25,-.06699,.96593,-.48296,-.12941,.86603,-.68301,-.18301,.70711,-.83652,-.22414,.5,-.93301,-.25,.25882,-.96593,-.25882,-0,-.93301,-.25,-.25882,-.83652,-.22414,-.5,-.68301,-.18301,-.70711,-.48296,-.12941,-.86603,-.25,-.06699,-.96593,-.25882,-0,.96593,-.5,-0,.86603,-.70711,-0,.70711,-.86603,-0,.5,-.96593,-0,.25882,-1,-0,-0,-.96593,-0,-.25882,-.86603,-0,-.5,-.70711,-0,-.70711,-.5,-0,-.86603,-.25882,-0,-.96593,-.25,.06699,.96593,-.48296,.12941,.86603,-.68301,.18301,.70711,-.83652,.22414,.5,-.93301,.25,.25882,-.96593,.25882,-0,-.93301,.25,-.25882,-.83652,.22414,-.5,-.68301,.18301,-.70711,-.48296,.12941,-.86603,-.25,.06699,-.96593,-.22414,.12941,.96593,-.43301,.25,.86603,-.61237,.35355,.70711,-.75,.43301,.5,-.83652,.48296,.25882,-.86602,.5,-0,-.83652,.48296,-.25882,-.75,.43301,-.5,-.61237,.35355,-.70711,-.43301,.25,-.86603,-.22414,.12941,-.96593,-.18301,.18301,.96593,-.35355,.35355,.86603,-.5,.5,.70711,-.61237,.61237,.5,-.68301,.68301,.25882,-.70711,.70711,-0,-.68301,.68301,-.25882,-.61237,.61237,-.5,-.5,.5,-.70711,-.35355,.35355,-.86603,-.18301,.18301,-.96593,-.12941,.22414,.96593,-.25,.43301,.86603,-.35355,.61237,.70711,-.43301,.75,.5,-.48296,.83652,.25882,-.5,.86602,-0,-.48296,.83652,-.25882,-.43301,.75,-.5,-.35355,.61237,-.70711,-.25,.43301,-.86603,-.12941,.22414,-.96593,-.06699,.25,.96593,-.12941,.48296,.86603,-.18301,.68301,.70711,-.22414,.83652,.5,-.25,.93301,.25882,-.25882,.96593,-0,-.25,.93301,-.25882,-.22414,.83652,-.5,-.18301,.68301,-.70711,-.12941,.48296,-.86603,-.06699,.25,-.96593,-0,.25882,.96593,-0,.86603,.5,-0,.96593,.25882,0,1,-0,-0,.96593,-.25882,-0,.86603,-.5,0,.70711,-.70711,0,.5,-.86603,-0,.25882,-.96593];iron_data_ConstData.skydomeNor=[0,-.50807,-.86132,0,-.71246,-.70172,-.0696,-.25975,-.96317,-.1315,-.49075,-.86132,-.1844,-.68818,-.70172,-.22483,-.83909,-.49536,-.25018,-.9337,-.25615,-.25882,-.96593,-0,-.25018,-.9337,.25615,-.22483,-.83909,.49536,-.1844,-.68818,.70172,-.1315,-.49075,.86132,-.0696,-.25975,.96317,-.13445,-.23288,-.96317,-.25403,-.44,-.86132,-.35623,-.61701,-.70172,-.43434,-.75231,-.49536,-.48332,-.83713,-.25615,-.5,-.86603,0,-.48332,-.83713,.25615,-.43434,-.75231,.49536,-.35623,-.61701,.70172,-.25403,-.44,.86132,-.13445,-.23288,.96317,-.19015,-.19015,-.96317,-.35926,-.35926,-.86132,-.50378,-.50378,-.70172,-.61426,-.61426,-.49536,-.68352,-.68352,-.25615,-.70711,-.70711,0,-.68352,-.68352,.25615,-.61426,-.61426,.49536,-.50378,-.50378,.70172,-.35926,-.35926,.86132,-.19015,-.19015,.96317,-.23288,-.13445,-.96317,-.44,-.25403,-.86132,-.61701,-.35623,-.70172,-.75231,-.43434,-.49536,-.83713,-.48332,-.25615,-.86603,-.5,0,-.83713,-.48332,.25615,-.75231,-.43434,.49536,-.61701,-.35623,.70172,-.44,-.25403,.86132,-.23288,-.13445,.96317,-.25975,-.0696,-.96317,-.49075,-.1315,-.86132,-.68818,-.1844,-.70172,-.83909,-.22483,-.49536,-.9337,-.25018,-.25615,-.96593,-.25882,0,-.9337,-.25018,.25615,-.83909,-.22483,.49536,-.68818,-.1844,.70172,-.49075,-.1315,.86132,-.25975,-.0696,.96317,-.26891,-0,-.96317,-.50807,0,-.86132,-.71246,0,-.70172,-.86869,-0,-.49536,-.96664,0,-.25615,-1,0,0,-.96664,0,.25615,-.86869,0,.49536,-.71246,0,.70172,-.50807,0,.86132,-.26891,-0,.96317,-.25975,.0696,-.96317,-.49075,.1315,-.86132,-.68818,.1844,-.70172,-.83909,.22483,-.49536,-.9337,.25018,-.25615,-.96593,.25882,0,-.9337,.25018,.25615,-.83909,.22483,.49536,-.68818,.1844,.70172,-.49075,.1315,.86132,-.25975,.0696,.96317,-.23288,.13445,-.96317,-.44,.25403,-.86132,-.61701,.35623,-.70172,-.75231,.43434,-.49536,-.83713,.48332,-.25615,-.86603,.5,0,-.83713,.48332,.25615,-.75231,.43434,.49536,-.61701,.35623,.70172,-.44,.25403,.86132,-.23288,.13445,.96317,-.19015,.19015,-.96317,-.35926,.35926,-.86132,-.50378,.50378,-.70172,-.61426,.61426,-.49536,-.68352,.68352,-.25615,-.70711,.70711,0,-.68352,.68352,.25615,-.61426,.61426,.49536,-.50378,.50378,.70172,-.35926,.35926,.86132,-.19015,.19015,.96317,-.13445,.23288,-.96317,-.25403,.44,-.86132,-.35623,.61701,-.70172,-.43434,.75231,-.49536,-.48332,.83713,-.25615,-.5,.86603,0,-.48332,.83713,.25615,-.43434,.75231,.49536,-.35623,.61701,.70172,-.25403,.44,.86132,-.13445,.23288,.96317,-.0696,.25975,-.96317,-.1315,.49075,-.86132,-.1844,.68818,-.70172,-.22483,.83909,-.49536,-.25018,.9337,-.25615,-.25882,.96593,0,-.25018,.9337,.25615,-.22483,.83909,.49536,-.1844,.68818,.70172,-.1315,.49075,.86132,-.0696,.25975,.96317,-0,.26891,-.96317,0,.50807,-.86132,0,.71246,-.70172,-0,.86869,-.49536,0,.96664,-.25615,0,1,0,-0,.96664,.25615,0,.86869,.49536,0,.71246,.70172,0,.50807,.86132,0,.26891,.96317,.0696,.25975,-.96317,.1315,.49075,-.86132,.1844,.68818,-.70172,.22483,.83909,-.49536,.25018,.9337,-.25615,.25882,.96593,0,.25018,.9337,.25615,.22483,.83909,.49536,.1844,.68818,.70172,.1315,.49075,.86132,.0696,.25975,.96317,.13445,.23288,-.96317,.25403,.44,-.86132,.35623,.61701,-.70172,.43434,.75231,-.49536,.48332,.83713,-.25615,.5,.86603,0,.48332,.83713,.25615,.43434,.75231,.49536,.35623,.61701,.70172,.25403,.44,.86132,.13445,.23288,.96317,0,0,-1,.19015,.19015,-.96317,.35926,.35926,-.86132,.50378,.50378,-.70172,.61426,.61426,-.49536,.68352,.68352,-.25615,.70711,.70711,0,.68352,.68352,.25615,.61426,.61426,.49536,.50378,.50378,.70172,.35926,.35926,.86132,.19015,.19015,.96317,.23288,.13445,-.96317,.44,.25403,-.86132,.61701,.35623,-.70172,.75231,.43434,-.49536,.83713,.48332,-.25615,.86603,.5,0,.83713,.48332,.25615,.75231,.43434,.49536,.61701,.35623,.70172,.44,.25403,.86132,.23288,.13445,.96317,0,-0,1,.25975,.0696,-.96317,.49075,.1315,-.86132,.68818,.1844,-.70172,.83909,.22483,-.49536,.9337,.25018,-.25615,.96593,.25882,0,.9337,.25018,.25615,.83909,.22483,.49536,.68818,.1844,.70172,.49075,.1315,.86132,.25975,.0696,.96317,.26891,-0,-.96317,.50807,-0,-.86132,.71246,0,-.70172,.86869,0,-.49536,.96664,-0,-.25615,1,-0,0,.96664,0,.25615,.86869,0,.49536,.71246,-0,.70172,.50807,0,.86132,.26891,-0,.96317,.25975,-.0696,-.96317,.49075,-.1315,-.86132,.68818,-.1844,-.70172,.83909,-.22483,-.49536,.9337,-.25018,-.25615,.96593,-.25882,0,.9337,-.25018,.25615,.83909,-.22483,.49536,.68818,-.1844,.70172,.49075,-.1315,.86132,.25975,-.0696,.96317,.23288,-.13445,-.96317,.44,-.25403,-.86132,.61701,-.35623,-.70172,.75231,-.43434,-.49536,.83713,-.48332,-.25615,.86603,-.5,0,.83713,-.48332,.25615,.75231,-.43434,.49536,.617,-.35623,.70172,.44,-.25403,.86132,.23288,-.13445,.96317,.19015,-.19015,-.96317,.35926,-.35926,-.86132,.50378,-.50378,-.70172,.61426,-.61426,-.49536,.68352,-.68352,-.25615,.70711,-.70711,-0,.68352,-.68352,.25615,.61426,-.61426,.49536,.50378,-.50378,.70172,.35926,-.35926,.86132,.19015,-.19015,.96317,.13445,-.23288,-.96317,.25403,-.44,-.86132,.35623,-.61701,-.70172,.43434,-.75231,-.49536,.48332,-.83713,-.25615,.5,-.86603,0,.48332,-.83713,.25615,.43434,-.75231,.49536,.35623,-.617,.70172,.25403,-.44,.86132,.13445,-.23288,.96317,.0696,-.25975,-.96317,.1315,-.49075,-.86132,.1844,-.68818,-.70172,.22483,-.83909,-.49536,.25018,-.9337,-.25615,.25882,-.96593,0,.25018,-.9337,.25615,.22483,-.83909,.49536,.1844,-.68818,.70172,.1315,-.49075,.86132,.0696,-.25975,.96317,0,-.26891,-.96317,0,-.86869,-.49536,0,-.96664,-.25615,0,-1,-0,0,-.96664,.25615,0,-.86869,.49536,0,-.71246,.70172,0,-.50807,.86132,0,-.26891,.96317];iron_data_Data.cachedSceneRaws=new haxe_ds_StringMap;iron_data_Data.cachedMeshes=new haxe_ds_StringMap;iron_data_Data.cachedLights=new haxe_ds_StringMap;iron_data_Data.cachedCameras=new haxe_ds_StringMap;iron_data_Data.cachedMaterials=new haxe_ds_StringMap;iron_data_Data.cachedParticles=new haxe_ds_StringMap;iron_data_Data.cachedWorlds=new haxe_ds_StringMap;iron_data_Data.cachedShaders=new haxe_ds_StringMap;iron_data_Data.cachedBlobs=new haxe_ds_StringMap;iron_data_Data.cachedImages=new haxe_ds_StringMap;iron_data_Data.cachedSounds=new haxe_ds_StringMap;iron_data_Data.assetsLoaded=0;iron_data_Data.loadingMeshes=new haxe_ds_StringMap;iron_data_Data.loadingLights=new haxe_ds_StringMap;iron_data_Data.loadingCameras=new haxe_ds_StringMap;iron_data_Data.loadingMaterials=new haxe_ds_StringMap;iron_data_Data.loadingParticles=new haxe_ds_StringMap;iron_data_Data.loadingWorlds=new haxe_ds_StringMap;iron_data_Data.loadingShaders=new haxe_ds_StringMap;iron_data_Data.loadingSceneRaws=new haxe_ds_StringMap;iron_data_Data.loadingBlobs=new haxe_ds_StringMap;iron_data_Data.loadingImages=new haxe_ds_StringMap;iron_data_Data.loadingSounds=new haxe_ds_StringMap;iron_data_Data.dataPath="."+"/"+"data"+"/";iron_data_MaterialData.uidCounter=0;iron_data_MaterialContext.num=0;iron_math_Mat4.helpVec=new iron_math_Vec4;iron_math_Mat4.helpMat=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Animation._hx_skip_constructor=false;iron_object_Animation.m1=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Animation.m2=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Animation.vpos=new iron_math_Vec4;iron_object_Animation.vpos2=new iron_math_Vec4;iron_object_Animation.vscl=new iron_math_Vec4;iron_object_Animation.vscl2=new iron_math_Vec4;iron_object_Animation.q1=new iron_math_Quat;iron_object_Animation.q2=new iron_math_Quat;iron_object_Animation.q3=new iron_math_Quat;iron_object_Animation.vp=new iron_math_Vec4;iron_object_Animation.vs=new iron_math_Vec4;iron_object_BoneAnimation.skinMaxBones=128;iron_object_BoneAnimation.m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_BoneAnimation.m1=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_BoneAnimation.m2=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_BoneAnimation.vpos=new iron_math_Vec4;iron_object_BoneAnimation.vscl=new iron_math_Vec4;iron_object_BoneAnimation.q1=new iron_math_Quat;iron_object_BoneAnimation.q2=new iron_math_Quat;iron_object_BoneAnimation.q3=new iron_math_Quat;iron_object_BoneAnimation.vpos2=new iron_math_Vec4;iron_object_BoneAnimation.vscl2=new iron_math_Vec4;iron_object_BoneAnimation.v1=new iron_math_Vec4;iron_object_BoneAnimation.v2=new iron_math_Vec4;iron_object_Object._hx_skip_constructor=false;iron_object_Object.uidCounter=0;iron_object_Object.seed=1;iron_object_CameraObject.temp=new iron_math_Vec4;iron_object_CameraObject.sphereCenter=new iron_math_Vec4;iron_object_CameraObject.vcenter=new iron_math_Vec4;iron_object_CameraObject.vup=new iron_math_Vec4;iron_object_LightObject.cascadeCount=1;iron_object_LightObject.cascadeSplitFactor=.8;iron_object_LightObject.cascadeBounds=1;iron_object_LightObject.m=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_LightObject.eye=new iron_math_Vec4;iron_object_Transform.temp=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Transform.q=new iron_math_Quat;iron_object_Uniforms.biasMat=new iron_math_Mat4(.5,0,0,.5,0,-.5,0,.5,0,0,.5,.5,0,0,0,1);iron_object_Uniforms.helpMat=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Uniforms.helpMat2=new iron_math_Mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);iron_object_Uniforms.helpMat3=new iron_math_Mat3(1,0,0,0,1,0,0,0,1);iron_object_Uniforms.helpVec=new iron_math_Vec4;iron_object_Uniforms.helpVec2=new iron_math_Vec4;iron_object_Uniforms.helpQuat=new iron_math_Quat;iron_object_Uniforms.defaultFilter=1;iron_system_Input.occupied=false;iron_system_Input.gamepads=[];iron_system_Input.registered=false;iron_system_VirtualInput._hx_skip_constructor=false;iron_system_Mouse.buttons=["left","right","middle","side1","side2"];iron_system_Keyboard.keys=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","space","backspace","tab","enter","shift","control","alt","capslock","win","escape","delete","up","down","left","right","back",",",".",":",";","<","=",">","?","!",'"',"#","$","%","&","_","(",")","*","|","{","}","[","]","~","`","/","\\","@","+","-","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12"];iron_system_Gamepad.buttonsPS=["cross","circle","square","triangle","l1","r1","l2","r2","share","options","l3","r3","up","down","left","right","home","touchpad"];iron_system_Gamepad.buttons=iron_system_Gamepad.buttonsPS;iron_system_Time.scale=1;iron_system_Time.last=0;iron_system_Time.realDelta=0;kha_Scheduler.DIF_COUNT=3;kha_Scheduler.maxframetime=.5;kha_Scheduler.startTime=0;kha_Shaders.Default_Material_mesh_fragData0="s1188:AAAARFhCQ7419YOJXFvXnIHhnR9zdPYBAAAAeAMAAAUAAAA0AAAAgAAAALQAAAAAAQAA:AIAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAHBwAAVEVYQ09PUkQAq6urT1NHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADwAAADgAAAABAAAAAAAAAAMAAAABAAAADwAAAFNWX1RhcmdldACrq1NIRFL0AQAAQAAAAH0AAABiEAADchAQAAAAAABlAAAD8iAQAAAAAABlAAAD8iAQAAEAAABoAAACAwAAABAAAAcSABAAAAAAAEYSEAAAAAAARhIQAAAAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAAAAAAYAEAAAAAAAJhkQAAAAAAAAAAAJggAQAAAAAAAqABCAgQAAAAAAAAAaABCAgQAAAAAAAAAAAAAIggAQAAAAAAAKABCAgQAAAAAAAAA6ABAAAAAAAA4AAAdyABAAAAAAAEYCEAAAAAAA9g8QAAAAAAAAAAALMgAQAAEAAABmChCAwQAAAAAAAAACQAAAAACAPwAAgD8AAAAAAAAAAB0AAApyABAAAgAAAEYCEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAPkgAQAAAAAABWCRAAAgAAAAJAAAAAAIA:AAAAAAAAAAAAAIA:AkAAAAAAgL8AAAAAAAAAAAAAgL84AAAHkgAQAAAAAAAGDBAAAAAAAAYEEAABAAAANwAACTIgEAAAAAAABgAQAAIAAACWBRAAAAAAAMYAEAAAAAAANgAACMIgEAAAAAAAAkAAAAAAAAAAAAAAaYMNPwAAAAA2AAAI8iAQAAEAAAACQAAAAAAAPwAAAD8AAAA:AIB:Qz4AAAFTVEFUdAAAAA4AAAADAAAAAAAAAAMAAAAJAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.Default_Material_mesh_vertData0="s1564:Am5vcgAAcG9zAAEBJEdsb2JhbHMAAAJOAAAAAAAsAAAAAwNXVlAAMAAAAEAAAAAEBERYQkM1naQKmv7Vzgxtb0zlUpSsAQAAAGQEAAAFAAAANAAAABwBAABoAQAAwAEAAOgDAABSREVG4AAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAALgAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAACAAAAYAAAAHAAAAAAAAAAAAAAAJAAAAAAAAAALAAAAAIAAACUAAAAAAAAAKQAAAAwAAAAQAAAAAIAAACoAAAAAAAAAE4Aq6sDAAMAAwADAAAAAAAAAAAAV1ZQAAMAAwAEAAQAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAAAwMAADgAAAABAAAAAAAAAAMAAAABAAAADw8AAFRFWENPT1JEAKurq09TR05QAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAAcIAABBAAAAAAAAAAEAAAADAAAAAQAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSIAIAAEAAAQCIAAAAWQAABEaOIAAAAAAABwAAAF8AAAMyEBAAAAAAAF8AAAPyEBAAAQAAAGUAAANyIBAAAAAAAGcAAATyIBAAAQAAAAEAAABoAAACAgAAADYAAAUyABAAAAAAAEYQEAAAAAAANgAABUIAEAAAAAAAOhAQAAEAAAAQAAAIEgAQAAEAAABGAhAAAAAAAEaCIAAAAAAAAAAAABAAAAgiABAAAQAAAEYCEAAAAAAARoIgAAAAAAABAAAAEAAACEIAEAABAAAARgIQAAAAAABGgiAAAAAAAAIAAAAQAAAHEgAQAAAAAABGAhAAAQAAAEYCEAABAAAARAAABRIAEAAAAAAACgAQAAAAAAA4AAAHciAQAAAAAAAGABAAAAAAAEYCEAABAAAANgAABXIAEAAAAAAARhIQAAEAAAA2AAAFggAQAAAAAAABQAAAAACAPxEAAAgSABAAAQAAAEYOEAAAAAAARo4gAAAAAAAFAAAAEQAACCIAEAABAAAARg4QAAAAAABGjiAAAAAAAAYAAAAAAAAHEgAQAAEAAAAaABAAAQAAAAoAEAABAAAANgAABYIgEAABAAAAGgAQAAEAAAA4AAAHQiAQAAEAAAAKABAAAQAAAAFAAAAAAAA:EQAACBIgEAABAAAARg4QAAAAAABGjiAAAAAAAAMAAAARAAAIIiAQAAEAAABGDhAAAAAAAEaOIAAAAAAABAAAAD4AAAFTVEFUdAAAABIAAAACAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.Default_Material_shadowmap_fragData0="s410:AAAARFhCQ3%xd:YuyuL2W1XcJlZCEbQBAAAAMAEAAAUAAAA0AAAAgAAAAJAAAACgAAAAtAAAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOCAAAAAAAAAAIAAAAT1NHTggAAAAAAAAACAAAAFNIRFIMAAAAQAAAAAMAAAA%AAABU1RBVHQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.Default_Material_shadowmap_vertData0="s1095:AXBvcwAAASRHbG9iYWxzAAABTFdWUAAAAAAAQAAAAAQERFhCQwpk4Gh9R86Sox3W%tlktaoBAAAAFAMAAAUAAAA0AAAA9AAAACgBAABcAQAAmAIAAFJERUa4AAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAkAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAQAAAAAAAAAAAAAAAeAAAAAAAAABAAAAAAgAAAIAAAAAAAAAATFdWUACrq6sDAAMABAAEAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8HAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAABAAAAAwAAAAAAAAAPAAAAU1ZfUG9zaXRpb24AU0hEUjQBAABAAAEATQAAAFkAAARGjiAAAAAAAAQAAABfAAADchAQAAAAAABnAAAE8iAQAAAAAAABAAAAaAAAAgIAAAA2AAAFcgAQAAAAAABGEhAAAAAAADYAAAWCABAAAAAAAAFAAAAAAIA:EQAACBIAEAABAAAARg4QAAAAAABGjiAAAAAAAAIAAAARAAAIIgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAwAAAAAAAAcSABAAAQAAABoAEAABAAAACgAQAAEAAAA2AAAFgiAQAAAAAAAaABAAAQAAADgAAAdCIBAAAAAAAAoAEAABAAAAAUAAAAAAAD8RAAAIEiAQAAAAAABGDhAAAAAAAEaOIAAAAAAAAAAAABEAAAgiIBAAAAAAAEYOEAAAAAAARo4gAAAAAAABAAAAPgAAAVNUQVR0AAAACgAAAAIAAAAAAAAAAgAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.World_World_fragData0="s564:AAAARFhCQ2Qtm6U8N1I4gn:Knl0eH1EBAAAApAEAAAUAAAA0AAAAgAAAALQAAADoAAAAKAEAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAHAAAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFI4AAAAQAAAAA4AAABlAAAD8iAQAAAAAAA2AAAI8iAQAAAAAAACQAAAcmNQPXJjUD1yY1A9AAAAAD4AAAFTVEFUdAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.World_World_vertData0="s1240:Am5vcgAAcG9zAAEBJEdsb2JhbHMAAAFTTVZQAAAAAABAAAAABAREWEJDAWvUj:hTvlSpp43Hljh:kAEAAAB8AwAABQAAADQAAAD0AAAAQAEAAJgBAAAAAwAAUkRFRrgAAAABAAAASAAAAAEAAAAcAAAAAAT%:wABAACQAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAkR2xvYmFscwCrq6s8AAAAAQAAAGAAAABAAAAAAAAAAAAAAAB4AAAAAAAAAEAAAAACAAAAgAAAAAAAAABTTVZQAKurqwMAAwAEAAQAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAABwcAADgAAAABAAAAAAAAAAMAAAABAAAABwcAAFRFWENPT1JEAKurq09TR05QAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAAcIAABBAAAAAAAAAAEAAAADAAAAAQAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSYAEAAEAAAQBYAAAAWQAABEaOIAAAAAAABAAAAF8AAANyEBAAAAAAAF8AAANyEBAAAQAAAGUAAANyIBAAAAAAAGcAAATyIBAAAQAAAAEAAABoAAACAgAAADYAAAVyIBAAAAAAAEYSEAAAAAAANgAABXIAEAAAAAAARhIQAAEAAAA2AAAFggAQAAAAAAABQAAAAACAPxEAAAgSABAAAQAAAEYOEAAAAAAARo4gAAAAAAACAAAAEQAACCIAEAABAAAARg4QAAAAAABGjiAAAAAAAAMAAAAAAAAHEgAQAAEAAAAaABAAAQAAAAoAEAABAAAANgAABYIgEAABAAAAGgAQAAEAAAA4AAAHQiAQAAEAAAAKABAAAQAAAAFAAAAAAAA:EQAACBIgEAABAAAARg4QAAAAAABGjiAAAAAAAAAAAAARAAAIIiAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAQAAAD4AAAFTVEFUdAAAAAsAAAACAAAAAAAAAAQAAAAGAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.blur_edge_pass_fragData0="s3976:AAVfZ2J1ZmZlcjBfc2FtcGxlcgAAX3RleF9zYW1wbGVyAAFnYnVmZmVyMAAAdGV4AAEkR2xvYmFscwAAAWRpckludgAAAAAACAAAAAIBRFhCQ0xqlwn7DEcTh2cykaQu8nABAAAAWAsAAAUAAAA0AAAAoAEAANQBAAAIAgAA3AoAAFJERUZkAQAAAQAAAPQAAAAFAAAAHAAAAAAE::8AAQAAPAEAALwAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAzgAAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAADbAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAOQAAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAA6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABfZ2J1ZmZlcjBfc2FtcGxlcgBfdGV4X3NhbXBsZXIAZ2J1ZmZlcjAAdGV4ACRHbG9iYWxzAKurq%gAAAABAAAADAEAABAAAAAAAAAAAAAAACQBAAAAAAAACAAAAAIAAAAsAQAAAAAAAGRpckludgCrAQADAAEAAgAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAQ4AAFNWX1RhcmdldACrq1NIRFLMCAAAQAAAADMCAAA1GAAAKgAAAPTABz4AAAAAAAAAAAAAAAC7ewA%AAAAAAAAAAAAAAAAFtrZPQAAAAAAAAAAAAAAAPxvpT0AAAAAAAAAAAAAAABAE2E9AAAAAAAAAAAAAAAAbCQJPQAAAAAAAAAAAAAAAHS1lTwAAAAAAAAAAAAAAADpXxI8AAAAAAAAAAAAAAAAPDCAOwAAAAAAAAAAAAAAAA4yyToAAAAAAAAAAAAAAABZAAAERo4gAAAAAAABAAAAWgAAAwBgEAAAAAAAWgAAAwBgEAABAAAAWBgABABwEAAAAAAAVVUAAFgYAAQAcBAAAQAAAFVVAABiEAADMhAQAAAAAABlAAADEiAQAAAAAABoAAACBgAAAEgAAAvyABAAAAAAAEYQEAAAAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAAAAAC3IAEAABAAAARgAQgMEAAAAAAAAAAkAAAAAAgD8AAIA:AACAPwAAAAAAAAAIQgAQAAIAAAAaABCAwQAAAAAAAAAKABAAAQAAAB0AAAdCABAAAAAAACoAEAACAAAAAUAAAAAAAAAdAAAKkgAQAAEAAAAGBBAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAANwAAD5IAEAABAAAABgwQAAEAAAACQAAAAACAPwAAAAAAAAAAAACAPwJAAAAAAIC:AAAAAAAAAAAAAIC:OAAABzIAEAABAAAAxgAQAAEAAACWBRAAAQAAADcAAAkyABAAAgAAAKYKEAAAAAAARgAQAAAAAABGABAAAQAAABAAAAcSABAAAAAAAEYCEAACAAAARgIQAAIAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAAAAAAYAEAAAAAAARgIQAAIAAABIAAAL8gAQAAEAAABGEBAAAAAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAADgAAAeCABAAAAAAAAoAEAABAAAAAUAAAPTABz42AAAFEgAQAAEAAAA6ABAAAAAAADYAAAhiABAAAQAAAAJAAAAAAAAA9MAHPgEAAAAAAAAAMAAAASEAAAeCABAAAQAAACoAEAABAAAAAUAAAAgAAAADAAQDOgAQAAEAAAArAAAFggAQAAEAAAAqABAAAQAAADIAAAoyABAAAgAAAEaAIAAAAAAAAAAAAPYPEAABAAAARhAQAAAAAABIAAAL8gAQAAMAAABGABAAAgAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAAAAAAtyABAABAAAAEYAEIDBAAAAAwAAAAJAAAAAAIA:AACAPwAAgD8AAAAAAAAACEIAEAAFAAAAGgAQgMEAAAADAAAACgAQAAQAAAAdAAAHQgAQAAIAAAAqABAABQAAAAFAAAAAAAAAHQAACsIAEAADAAAABgQQAAMAAAACQAAAAAAAAAAAAAAAAAAAAAAAADcAAA:CABAAAwAAAKYOEAADAAAAAkAAAAAAAAAAAAAAAACAPwAAgD8CQAAAAAAAAAAAAAAAAIC:AACAvzgAAAfCABAAAwAAAKYOEAADAAAAVgkQAAQAAAA3AAAJMgAQAAUAAACmChAAAgAAAEYAEAADAAAA5goQAAMAAAAQAAAHQgAQAAIAAABGAhAABQAAAEYCEAAFAAAARAAABUIAEAACAAAAKgAQAAIAAAA4AAAHcgAQAAMAAACmChAAAgAAAEYCEAAFAAAAEAAAB0IAEAACAAAARgIQAAMAAABGAhAAAAAAAB0AAAdCABAAAgAAACoAEAACAAAAAUAAADMzcz8BAAAHQgAQAAIAAAAqABAAAgAAAAFAAAAAAIA:SAAAC:IAEAADAAAARgAQAAIAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAA4AAAIEgAQAAIAAAAqABAAAgAAAAqQkAAqABAAAQAAADIAAAkSABAAAgAAAAoAEAADAAAACgAQAAIAAAAKABAAAQAAADIAAAoiABAAAgAAAAqQkAAqABAAAQAAACoAEAACAAAAGgAQAAEAAAAyAAALwgAQAAIAAAAGhCCAQQAAAAAAAAAAAAAA9g8QAAEAAAAGFBAAAAAAAEgAAAvyABAAAwAAAOYKEAACAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAAAAAC3IAEAAEAAAARgAQgMEAAAADAAAAAkAAAAAAgD8AAIA:AACAPwAAAAAAAAAIQgAQAAUAAAAaABCAwQAAAAMAAAAKABAABAAAAB0AAAeCABAAAQAAACoAEAAFAAAAAUAAAAAAAAAdAAAKwgAQAAMAAAAGBBAAAwAAAAJAAAAAAAAAAAAAAAAAAAAAAAAANwAAD8IAEAADAAAApg4QAAMAAAACQAAAAAAAAAAAAAAAAIA:AACAPwJAAAAAAAAAAAAAAAAAgL8AAIC:OAAAB8IAEAADAAAApg4QAAMAAABWCRAABAAAADcAAAkyABAABQAAAPYPEAABAAAARgAQAAMAAADmChAAAwAAABAAAAeCABAAAQAAAEYCEAAFAAAARgIQAAUAAABEAAAFggAQAAEAAAA6ABAAAQAAADgAAAdyABAAAwAAAPYPEAABAAAARgIQAAUAAAAQAAAHggAQAAEAAABGAhAAAwAAAEYCEAAAAAAAHQAAB4IAEAABAAAAOgAQAAEAAAABQAAAMzNzPwEAAAeCABAAAQAAADoAEAABAAAAAUAAAAAAgD9IAAAL8gAQAAMAAADmChAAAgAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAADgAAAhCABAAAgAAADoAEAABAAAACpCQACoAEAABAAAAMgAACRIAEAABAAAACgAQAAMAAAAqABAAAgAAAAoAEAACAAAAMgAACiIAEAABAAAACpCQACoAEAABAAAAOgAQAAEAAAAaABAAAgAAAB4AAAdCABAAAQAAACoAEAABAAAAAUAAAAEAAAAWAAABDgAABxIgEAAAAAAACgAQAAEAAAAaABAAAQAAAD4AAAFTVEFUdAAAAD0AAAAGAAAACgAAAAIAAAAmAAAAAgAAAAIAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAACAAAABgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.compositor_pass_fragData0="s1267:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkPn3cdpLWbk399KZBMjuHcJAQAAAKADAAAFAAAANAAAANQAAAAIAQAAPAEAACQDAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERS4AEAAEAAAAB4AAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGgAAAIDAAAASAAAC:IAEAAAAAAARhAQAAAAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAzAAAKcgAQAAAAAABGAhAAAAAAAAJAAAAA4P9GAOD:RgDg:0YAAAAANgAABYIgEAAAAAAAOgAQAAAAAAAAAAAKcgAQAAAAAABGAhAAAAAAAAJAAABvEoO7bxKDu28Sg7sAAAAANAAACnIAEAAAAAAARgIQAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAADIAAA9yABAAAQAAAEYCEAAAAAAAAkAAAGZmxkBmZsZAZmbGQAAAAAACQAAAAAAAPwAAAD8AAAA:AAAAADgAAAdyABAAAQAAAEYCEAAAAAAARgIQAAEAAAAyAAAPcgAQAAIAAABGAhAAAAAAAAJAAABmZsZAZmbGQGZmxkAAAAAAAkAAAJqZ2T%amdk:mpnZPwAAAAAyAAAMcgAQAAAAAABGAhAAAAAAAEYCEAACAAAAAkAAAI:CdT2PwnU9j8J1PQAAAAAOAAAHciAQAAAAAABGAhAAAQAAAEYCEAAAAAAAPgAAAVNUQVR0AAAACwAAAAMAAAAAAAAAAgAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.compositor_pass_vertData0="s763:AXBvcwAAAABEWEJDtpmVVJ2wtBYIEKtdn7IyBgEAAAA0AgAABQAAADQAAACAAAAAtAAAAAwBAAC4AQAAUkRFRkQAAAAAAAAAAAAAAAAAAAAcAAAAAAT%:wABAAAcAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAMDAABURVhDT09SRACrq6tPU0dOUAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAADDAAAQQAAAAAAAAABAAAAAwAAAAEAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUqQAAABAAAEAKQAAAF8AAAMyEBAAAAAAAGUAAAMyIBAAAAAAAGcAAATyIBAAAQAAAAEAAAAyAAAPMiAQAAAAAABGEBAAAAAAAAJAAAAAAAA:AAAAvwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAjCIBAAAQAAAAJAAAAAAAAAAAAAAAAAAD8AAIA:PgAAAVNUQVR0AAAABAAAAAAAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.deferred_light_fragData0="s12071:AA5fc2hhZG93TWFwUG9pbnRfc2FtcGxlcgAAX2didWZmZXIwX3NhbXBsZXIAAV9nYnVmZmVyMV9zYW1wbGVyAAJfZ2J1ZmZlckRfc2FtcGxlcgADX3NlbnZtYXBSYWRpYW5jZV9zYW1wbGVyAAVfc3Nhb3RleF9zYW1wbGVyAAZzaGFkb3dNYXBQb2ludAAAZ2J1ZmZlcjAAAWdidWZmZXIxAAJnYnVmZmVyRAADc2Vudm1hcEJyZGYABHNlbnZtYXBSYWRpYW5jZQAFc3Nhb3RleAAGJEdsb2JhbHMAAAtsaWdodFByb2oAAAAAAAgAAAACAWV5ZQAQAAAADAAAAAMBZXllTG9vawAgAAAADAAAAAMBY2FtZXJhUHJvagAwAAAACAAAAAIBc2hpcnIAQAAAAHAAAAAEAWVudm1hcE51bU1pcG1hcHMAsAAAAAQAAAABAWVudm1hcFN0cmVuZ3RoALQAAAAEAAAAAQFwb2ludFBvcwDAAAAADAAAAAMBcG9pbnRDb2wA0AAAAAwAAAADAXBvaW50QmlhcwDcAAAABAAAAAEBY2FzRGF0YQDgAAAAQAEAAAQBRFhCQxrXAhdP4mIp2iSPpZ7daVIBAAAApCEAAAUAAAA0AAAABAUAAFAFAACEBQAAKCEAAFJERUbIBAAAAQAAAKwCAAAOAAAAHAAAAAAE::8AAQAAoAQAANwBAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAA9AEAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAGAgAAAwAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAQAAABgCAAADAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAKgIAAAMAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAEAAABDAgAAAwAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAQAAAFQCAAACAAAABQAAAAkAAAD:::::AAAAAAEAAAANAAAAYwIAAAIAAAAFAAAABAAAAP::::8BAAAAAQAAAA0AAABsAgAAAgAAAAUAAAAEAAAA:::::wIAAAABAAAADQAAAHUCAAACAAAABQAAAAQAAAD:::::AwAAAAEAAAANAAAAfgIAAAIAAAAFAAAABAAAAP::::8EAAAAAQAAAA0AAACKAgAAAgAAAAUAAAAEAAAA:::::wUAAAABAAAADQAAAJoCAAACAAAABQAAAAQAAAD:::::BgAAAAEAAAANAAAAogIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABfc2hhZG93TWFwUG9pbnRfc2FtcGxlcgBfZ2J1ZmZlcjBfc2FtcGxlcgBfZ2J1ZmZlcjFfc2FtcGxlcgBfZ2J1ZmZlckRfc2FtcGxlcgBfc2Vudm1hcFJhZGlhbmNlX3NhbXBsZXIAX3NzYW90ZXhfc2FtcGxlcgBzaGFkb3dNYXBQb2ludABnYnVmZmVyMABnYnVmZmVyMQBnYnVmZmVyRABzZW52bWFwQnJkZgBzZW52bWFwUmFkaWFuY2UAc3Nhb3RleAAkR2xvYmFscwCrogIAAAsAAADEAgAAIAIAAAAAAAAAAAAAzAMAAAAAAAAIAAAAAgAAANgDAAAAAAAA6AMAABAAAAAMAAAAAgAAAOwDAAAAAAAA:AMAACAAAAAMAAAAAgAAAOwDAAAAAAAABAQAADAAAAAIAAAAAgAAANgDAAAAAAAADwQAAEAAAABwAAAAAgAAABgEAAAAAAAAKAQAALAAAAAEAAAAAgAAADwEAAAAAAAATAQAALQAAAAEAAAAAgAAAFwEAAAAAAAAbAQAAMAAAAAMAAAAAgAAAOwDAAAAAAAAdQQAANAAAAAMAAAAAgAAAOwDAAAAAAAAfgQAANwAAAAEAAAAAgAAAFwEAAAAAAAAiAQAAOAAAABAAQAAAAAAAJAEAAAAAAAAbGlnaHRQcm9qAKurAQADAAEAAgAAAAAAAAAAAGV5ZQABAAMAAQADAAAAAAAAAAAAZXllTG9vawBjYW1lcmFQcm9qAHNoaXJyAKurqwEAAwABAAQABwAAAAAAAABlbnZtYXBOdW1NaXBtYXBzAKurqwAAAgABAAEAAAAAAAAAAABlbnZtYXBTdHJlbmd0aACrAAADAAEAAQAAAAAAAAAAAHBvaW50UG9zAHBvaW50Q29sAHBvaW50QmlhcwBjYXNEYXRhAAEAAwABAAQAFAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAAAwMAADgAAAABAAAAAAAAAAMAAAABAAAABwcAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSnBsAAEAAAADnBgAAWQAABEaOIAAAAAAADgAAAFoIAAMAYBAAAAAAAFoAAAMAYBAAAQAAAFoAAAMAYBAAAgAAAFoAAAMAYBAAAwAAAFoAAAMAYBAABQAAAFoAAAMAYBAABgAAAFgwAAQAcBAAAAAAAFVVAABYGAAEAHAQAAEAAABVVQAAWBgABABwEAACAAAAVVUAAFgYAAQAcBAAAwAAAFVVAABYGAAEAHAQAAQAAABVVQAAWBgABABwEAAFAAAAVVUAAFgYAAQAcBAABgAAAFVVAABiEAADMhAQAAAAAABiEAADchAQAAEAAABlAAAD8iAQAAAAAABoAAACCwAAADYAAAYyABAAAAAAAOaKIAAAAAAACAAAADYAAAZCABAAAAAAAAqAIAAAAAAACQAAADgAAAtyABAAAQAAAEaCIAAAAAAACgAAAAJAAACGq9s%hqvbPoar2z4AAAAASAAAC:IAEAACAAAARhAQAAAAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAAdAAAKMgAQAAMAAABGABAAAgAAAAJAAAAAAAAAAAAAAAAAAAAAAAAANwAADzIAEAADAAAARgAQAAMAAAACQAAAAACAPwAAgD8AAAAAAAAAAAJAAAAAAIC:AACAvwAAAAAAAAAAAAAAC3IAEAAEAAAARgAQgMEAAAACAAAAAkAAAAAAgD8AAIA:AACAPwAAAAA4AAAHMgAQAAMAAABGABAAAwAAAJYFEAAEAAAAAAAACEIAEAAEAAAAGgAQgMEAAAACAAAACgAQAAQAAAAdAAAHggAQAAAAAAAqABAABAAAAAFAAAAAAAAANwAACTIAEAAEAAAA9g8QAAAAAABGABAAAgAAAEYAEAADAAAAEAAAB4IAEAAAAAAARgIQAAQAAABGAhAABAAAAEQAAAWCABAAAAAAADoAEAAAAAAAOAAAB3IAEAADAAAA9g8QAAAAAABGAhAABAAAADgAAAcyABAAAgAAACYKEAADAAAAJgoQAAMAAAA4AAAHcgAQAAQAAABGAhAAAAAAAFYFEAACAAAAMgAACoIAEAAAAAAAGgAQAAMAAAAaABAAAwAAAAoAEIBBAAAAAgAAADgAAApyABAABAAAAEYCEAAEAAAAAkAAAHE9Pj9xPT4:cT0%PwAAAAAyAAAJcgAQAAEAAABGAhAAAQAAAPYPEAAAAAAARgIQAAQAAAAyAAANcgAQAAEAAABGgiAAAAAAAAQAAAACQAAAxt9iP8bfYj:G32I:AAAAAEYCEAABAAAAMgAADXIAEAAAAAAARgIQgEEAAAAAAAAAAkAAACqnfT4qp30%Kqd9PgAAAABGAhAAAQAAADgAAAhyABAAAQAAAFYFEAADAAAARoIgAAAAAAAHAAAAOAAACnIAEAABAAAARgIQAAEAAAACQAAAhqtbP4arWz%Gq1s:AAAAADIAAApyABAAAAAAAEYCEAABAAAApgoQgEEAAAADAAAARgIQAAAAAAA4AAAIcgAQAAEAAABWBRAAAwAAAJaHIAAAAAAACQAAADgAAAdyABAAAQAAAAYAEAADAAAARgIQAAEAAAAyAAAMcgAQAAAAAABGAhAAAQAAAAJAAACGq1s:hqtbP4arWz8AAAAARgIQAAAAAAA4AAAJEgAQAAEAAAAqABCAQQAAAAMAAAA6gCAAAAAAAAcAAAA4AAAJYgAQAAEAAACmChCAQQAAAAMAAAAGgSAAAAAAAAgAAAA4AAAHcgAQAAEAAAAGABAAAwAAAEYCEAABAAAAMgAADHIAEAAAAAAARgIQAAEAAAACQAAAhqtbP4arWz%Gq1s:AAAAAEYCEAAAAAAAOAAACHIAEAABAAAAVgUQAAMAAACWhyAAAAAAAAYAAAAyAAAMcgAQAAAAAABGAhAAAQAAAAJAAABp:II:afyCP2n8gj8AAAAARgIQAAAAAAA4AAAJEgAQAAEAAAAqABCAQQAAAAMAAAA6gCAAAAAAAAQAAAA4AAAJYgAQAAEAAACmChCAQQAAAAMAAAAGgSAAAAAAAAUAAAAyAAAMcgAQAAAAAABGAhAAAQAAAAJAAABp:II:afyCP2n8gj8AAAAARgIQAAAAAAA4AAAIMgAQAAEAAAAGABAAAwAAAOaKIAAAAAAABQAAADgAAAhCABAAAQAAAAoAEAADAAAACoAgAAAAAAAGAAAAMgAADHIAEAAAAAAARgIQAAEAAAACQAAAafyCP2n8gj9p:II:AAAAAEYCEAAAAAAAHAAABYIAEAAAAAAAOgAQAAIAAAABAAAHggAQAAAAAAA6ABAAAAAAAAFAAAD:D:::VgAABYIAEAAAAAAAOgAQAAAAAAA4AAAHggAQAAAAAAA6ABAAAAAAAAFAAAABCIA5SAAAC:IAEAABAAAARhAQAAAAAABGfhAAAgAAAABgEAACAAAAAUAAAAAAAAAyAAAKsgAQAAIAAAD2DxAAAAAAAEYIEIBBAAAAAQAAAEYIEAABAAAAOAAAB3IAEAAAAAAARgIQAAAAAABGAxAAAgAAAEgAAAvyABAABAAAAEYQEAAAAAAARn4QAAMAAAAAYBAAAwAAAAFAAAAAAAAAMgAACYIAEAADAAAACgAQAAQAAAABQAAAAAAAQAFAAAAAAIC:MgAACYIAEAADAAAAOgAQAAMAAAABQAAAAAAAPwFAAAAAAAA:AAAACYIAEAADAAAAOgAQAAMAAAAKgCCAQQAAAAAAAAADAAAADgAACIIAEAADAAAAGoAgAAAAAAADAAAAOgAQAAMAAAAQAAAHEgAQAAQAAABGEhAAAQAAAEYSEAABAAAARAAABRIAEAAEAAAACgAQAAQAAAA4AAAHcgAQAAQAAAAGABAABAAAAEYSEAABAAAAEAAACIIAEAAEAAAARoIgAAAAAAACAAAARgIQAAQAAAAOAAAHggAQAAMAAAA6ABAAAwAAADoAEAAEAAAAMgAACnIAEAAEAAAARgIQAAQAAAD2DxAAAwAAAEaCIAAAAAAAAQAAAAAAAAlyABAABQAAAEYCEIBBAAAABAAAAEaCIAAAAAAAAQAAABAAAAeCABAAAwAAAEYCEAAFAAAARgIQAAUAAABEAAAFggAQAAMAAAA6ABAAAwAAADgAAAdyABAABgAAAPYPEAADAAAARgIQAAUAAAAQAAAIggAQAAQAAABGAhCAQQAAAAYAAABGAhAAAwAAAAAAAAeCABAABAAAADoAEAAEAAAAOgAQAAQAAAAyAAALcgAQAAcAAABmCBAAAwAAAPYPEIBBAAAABAAAAGYIEIBBAAAABgAAADQAAAmCABAABAAAACoAEICBAAAABwAAABoAEICBAAAABwAAAA4AAAqCABAABAAAAAJAAAAAAIA:AACAPwAAgD8AAIA:OgAQAAQAAAAzAAAJggAQAAUAAAAqABCAgQAAAAcAAAAaABCAgQAAAAcAAAA4AAAHggAQAAQAAAA6ABAABAAAADoAEAAFAAAAOAAAB4IAEAAFAAAAOgAQAAQAAAA6ABAABAAAADIAAAmCABAABgAAADoAEAAFAAAAAUAAAF%uqjwBQAAANlquvTIAAAmCABAABgAAADoAEAAFAAAAOgAQAAYAAAABQAAA4nY4PjIAAAmCABAABgAAADoAEAAFAAAAOgAQAAYAAAABQAAABB2pvjIAAAmCABAABQAAADoAEAAFAAAAOgAQAAYAAAABQAAAOPd:PzgAAAeCABAABgAAADoAEAAEAAAAOgAQAAUAAAAyAAAJggAQAAYAAAA6ABAABgAAAAFAAAAAAADAAUAAANsPyT8xAAAJggAQAAcAAAAqABCAgQAAAAcAAAAaABCAgQAAAAcAAAABAAAHggAQAAYAAAA6ABAABgAAADoAEAAHAAAAMgAACYIAEAAEAAAAOgAQAAQAAAA6ABAABQAAADoAEAAGAAAAMQAACDIAEAAIAAAAhgAQAAcAAACGABCAQQAAAAcAAAABAAAHggAQAAUAAAAaABAACAAAAAFAAADbD0nAAAAAB4IAEAAEAAAAOgAQAAQAAAA6ABAABQAAADMAAAiCABAABQAAACoAEAAHAAAAGgAQgEEAAAAHAAAAMQAACIIAEAAFAAAAOgAQAAUAAAA6ABCAQQAAAAUAAAA0AAAIggAQAAYAAAAqABAABwAAABoAEIBBAAAABwAAAB0AAAiCABAABgAAADoAEAAGAAAAOgAQgEEAAAAGAAAAAQAAB4IAEAAFAAAAOgAQAAUAAAA6ABAABgAAADcAAAqCABAABAAAADoAEAAFAAAAOgAQgEEAAAAEAAAAOgAQAAQAAAAAAAAHggAQAAQAAAA6ABAABAAAAAFAAADbD0lAOAAABxIAEAAJAAAAOgAQAAQAAAABQAAAg:kiPjIAAAqCABAABAAAAAoAEICBAAAABwAAAAFAAAAwbpm8AUAAACcWmD0yAAAKggAQAAQAAAA6ABAABAAAAAoAEICBAAAABwAAAAFAAACENFm%MgAACoIAEAAEAAAAOgAQAAQAAAAKABCAgQAAAAcAAAABQAAApA3JPwAAAAiCABAABQAAAAoAEIDBAAAABwAAAAFAAAAAAIA:SwAABYIAEAAFAAAAOgAQAAUAAAA4AAAHggAQAAYAAAA6ABAABAAAADoAEAAFAAAAMgAACYIAEAAGAAAAOgAQAAYAAAABQAAAAAAAwAFAAADbD0lAAQAAB4IAEAAGAAAACgAQAAgAAAA6ABAABgAAADIAAAmCABAABAAAADoAEAAEAAAAOgAQAAUAAAA6ABAABgAAADgAAAciABAACQAAADoAEAAEAAAAAUAAAIP5oj4rAAAGggAQAAQAAAAKgCAAAAAAAAsAAAA4AAAHggAQAAQAAAAqABAAAgAAADoAEAAEAAAASAAAC:IAEAAHAAAARgAQAAkAAABGfhAABQAAAABgEAAFAAAAOgAQAAQAAAAQAAAHggAQAAQAAABGAhAAAwAAAEYCEAAGAAAANAAAByIAEAAIAAAAOgAQAAQAAAABQAAAAAAAAAAAAAhCABAACAAAACoAEIBBAAAAAgAAAAFAAAAAAIA:OAAACnIAEAAJAAAAlgUQAAgAAAACQAAAAACAQwAAgEMAAIBAAAAAABsAAAUyABAACgAAAEYAEAAJAAAANAAAB4IAEAAEAAAAKgAQAAkAAAABQAAArMUnNzYAAAjCABAACgAAAAJAAAAAAAAAAAAAAAAAAAAAAAAALQAAB:IAEAAJAAAARg4QAAoAAABGfhAABAAAAAAAAApyABAAAQAAAEYCEAABAAAAAkAAAArXI70K1yO9CtcjvQAAAAAyAAAMcgAQAAEAAAD2DxAAAAAAAEYCEAABAAAAAkAAAArXIz0K1yM9CtcjPQAAAAAyAAAJcgAQAAkAAABGAhAAAQAAAAYAEAAJAAAAVgUQAAkAAAA4AAAHcgAQAAcAAABGAhAABwAAAEYCEAAJAAAAAAAAC3IAEAAJAAAARgIQgEEAAAAJAAAAAkAAAAAAgD8AAIA:AACAPwAAAAAyAAAJcgAQAAAAAABGAhAAAAAAAEYCEAAJAAAARgIQAAcAAABBAAAFggAQAAAAAAA6ABAAAQAAABoAAAWCABAAAQAAADoAEAABAAAAOAAACIIAEAAAAAAAOgAQAAAAAAAagCAAAAAAAAsAAAA4AAAHggAQAAAAAAA6ABAAAAAAAAFAAACBgIA7OAAAB3IAEAAAAAAA9g8QAAAAAABGAhAAAAAAAAAAAAlyABAABwAAAEYCEIBBAAAABAAAAEaCIAAAAAAADAAAAAAAAAlyABAABAAAAEYCEAAEAAAARoIggEEAAAAAAAAADAAAABAAAAeCABAAAAAAAEYCEAAEAAAARgIQAAQAAAAOAAAKggAQAAAAAAACQAAAAACAPwAAgD8AAIA:AACAPzoAEAAAAAAAEAAABxIAEAAEAAAARgIQAAcAAABGAhAABwAAAEQAAAUSABAABAAAAAoAEAAEAAAAOAAAB3IAEAAEAAAABgAQAAQAAABGAhAABwAAADIAAAlyABAABQAAAEYCEAAFAAAA9g8QAAMAAABGAhAABAAAABAAAAeCABAAAwAAAEYCEAAFAAAARgIQAAUAAABEAAAFggAQAAMAAAA6ABAAAwAAADgAAAdyABAABQAAAPYPEAADAAAARgIQAAUAAAAQAAAHggAQAAMAAABGAhAAAwAAAEYCEAAFAAAAEAAABxIAEAAFAAAARgIQAAYAAABGAhAABQAAADQAAAcSABAABQAAAAoAEAAFAAAAAUAAAAAAAAA0AAAHggAQAAMAAAA6ABAAAwAAAAFAAAAAAAAAOAAAB4IAEAADAAAAOgAQAAMAAAA6ABAAAwAAADgAAAciABAABQAAACoAEAACAAAAKgAQAAIAAAAyAAAKQgAQAAIAAAAqABCAQQAAAAIAAAAqABAAAgAAAAFAAAAAAABAMgAACUIAEAAFAAAAGgAQAAUAAAAaABAABQAAAAFAAAAAAIC:MgAACYIAEAADAAAAOgAQAAMAAAAqABAABQAAAAFAAAAAAIA:OAAAB4IAEAADAAAAOgAQAAMAAAA6ABAAAwAAADgAAAdCABAABQAAABoAEAAFAAAAGgAQAAUAAAA4AAAHQgAQAAUAAAAqABAABQAAAAFAAACD%aI%DgAAB4IAEAADAAAAKgAQAAUAAAA6ABAAAwAAABAAAAdCABAABQAAAEYCEAADAAAARgIQAAQAAAA4AAAIcgAQAAMAAABGAhAAAwAAAPaPIAAAAAAADQAAADIAAA1yABAABgAAAEYCEAADAAAAAkAAAAAAoEEAAKBBAACgQQAAAABGAhCAQQAAAAQAAAA0AAAHEgAQAAgAAAAqABAABQAAAAFAAAAAAAAAMgAACTIAEAADAAAARgAQAAgAAACmChAAAgAAAFYFEAAFAAAAAAAABzIAEAAEAAAARgAQAAgAAABGABAACAAAAA4AAAoyABAAAwAAAAJAAAAAAIA:AACAPwAAgD8AAIA:RgAQAAMAAAA4AAAHMgAQAAMAAABGABAAAwAAAEYAEAAEAAAAOAAAB0IAEAACAAAAGgAQAAMAAAAKABAAAwAAADQAAAdCABAAAgAAACoAEAACAAAAAUAAAAAAAAA4AAAHQgAQAAIAAAAqABAAAgAAADoAEAADAAAAMgAACRIAEAADAAAACgAQAAUAAAABQAAAWcCxwAFAAAAMdt:AOAAABxIAEAADAAAACgAQAAUAAAAKABAAAwAAABkAAAUSABAAAwAAAAoAEAADAAAAAAAAC%IAEAADAAAABgkQgEEAAAABAAAAAkAAAAAAAAAAAIA:AACAPwAAgD8yAAAJcgAQAAEAAACWBxAAAwAAAAYAEAADAAAARgIQAAEAAAA4AAAHcgAQAAEAAACmChAAAgAAAEYCEAABAAAADgAAB3IAEAABAAAARgIQAAEAAAD2DxAABAAAADgAAAdyABAAAQAAAPYPEAABAAAARgIQAAEAAAAyAAAJcgAQAAEAAABGAxAAAgAAAAYAEAAIAAAARgIQAAEAAAA4AAAHcgAQAAEAAAD2DxAAAAAAAEYCEAABAAAAOAAACHIAEAABAAAARgIQAAEAAABGgiAAAAAAAA0AAAA0AAAJggAQAAAAAAAqABCAgQAAAAcAAAAaABCAgQAAAAcAAAA0AAAIggAQAAAAAAA6ABAAAAAAAAoAEICBAAAABwAAAA4AAAiCABAAAAAAABqAIAAAAAAAAAAAADoAEAAAAAAAAAAACYIAEAAAAAAAOgAQgEEAAAAAAAAACoAgAAAAAAAAAAAAMgAACYIAEAAAAAAAOgAQAAAAAAABQAAAAAAAPwFAAAAAAAA:MgAAC4IAEAAAAAAAOoAggEEAAAAAAAAADQAAAAFAAAAAAMA:OgAQAAAAAAA2AAAGggAQAAYAAAAaABCAQQAAAAYAAAAAAAAKcgAQAAIAAADGAhAABgAAAAJAAABvEoM6bxKDOm8SgzoAAAAARgAAC4IAEAABAAAARgIQAAIAAAAGcBAAAAAAAABgEAAAAAAAOgAQAAAAAABGAAALEgAQAAIAAADGAhAABgAAAAZwEAAAAAAAAGAQAAAAAAA6ABAAAAAAAAAAAAeCABAAAQAAADoAEAABAAAACgAQAAIAAAAAAAAKcgAQAAIAAADGAhAABgAAAAJAAABvEoO6bxKDOm8SgzoAAAAARgAACxIAEAACAAAARgIQAAIAAAAGcBAAAAAAAABgEAAAAAAAOgAQAAAAAAAAAAAHggAQAAEAAAA6ABAAAQAAAAoAEAACAAAAAAAACnIAEAACAAAAxgIQAAYAAAACQAAAbxKDOm8Sg7pvEoM6AAAAAEYAAAsSABAAAgAAAEYCEAACAAAABnAQAAAAAAAAYBAAAAAAADoAEAAAAAAAAAAAB4IAEAABAAAAOgAQAAEAAAAKABAAAgAAAAAAAApyABAAAgAAAMYCEAAGAAAAAkAAAG8SgzpvEoM6bxKDugAAAABGAAALEgAQAAIAAABGAhAAAgAAAAZwEAAAAAAAAGAQAAAAAAA6ABAAAAAAAAAAAAeCABAAAQAAADoAEAABAAAACgAQAAIAAAAAAAAKcgAQAAIAAADGAhAABgAAAAJAAABvEoO6bxKDum8SgzoAAAAARgAACxIAEAACAAAARgIQAAIAAAAGcBAAAAAAAABgEAAAAAAAOgAQAAAAAAAAAAAHggAQAAEAAAA6ABAAAQAAAAoAEAACAAAAAAAACnIAEAACAAAAxgIQAAYAAAACQAAAbxKDOm8Sg7pvEoO6AAAAAEYAAAsSABAAAgAAAEYCEAACAAAABnAQAAAAAAAAYBAAAAAAADoAEAAAAAAAAAAAB4IAEAABAAAAOgAQAAEAAAAKABAAAgAAAAAAAApyABAAAgAAAMYCEAAGAAAAAkAAAG8Sg7pvEoM6bxKDugAAAAAAAAAKcgAQAAMAAADGAhAABgAAAAJAAABvEoO6bxKDum8Sg7oAAAAARgAAC4IAEAACAAAARgIQAAMAAAAGcBAAAAAAAABgEAAAAAAAOgAQAAAAAABGAAALggAQAAAAAABGAhAAAgAAAAZwEAAAAAAAAGAQAAAAAAA6ABAAAAAAAAAAAAeCABAAAAAAADoAEAAAAAAAOgAQAAEAAAAAAAAHggAQAAAAAAA6ABAAAgAAADoAEAAAAAAAOAAAB4IAEAAAAAAAOgAQAAAAAAABQAAAOY7jPTgAAAdyABAAAQAAAPYPEAAAAAAARgIQAAEAAABIAAAL8gAQAAIAAABGEBAAAAAAAEZ%EAAGAAAAAGAQAAYAAAABQAAAAAAAADIAAAlyIBAAAAAAAEYCEAAAAAAABgAQAAIAAABGAhAAAQAAADYAAAWCIBAAAAAAAAFAAAAAAIA:PgAAAVNUQVR0AAAAzQAAAAsAAAAAAAAAAwAAAK0AAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAkAAAAAAAAAAAAAAAQAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.lambert1_mesh_fragData0="s1188:AAAARFhCQ7419YOJXFvXnIHhnR9zdPYBAAAAeAMAAAUAAAA0AAAAgAAAALQAAAAAAQAA:AIAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAHBwAAVEVYQ09PUkQAq6urT1NHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADwAAADgAAAABAAAAAAAAAAMAAAABAAAADwAAAFNWX1RhcmdldACrq1NIRFL0AQAAQAAAAH0AAABiEAADchAQAAAAAABlAAAD8iAQAAAAAABlAAAD8iAQAAEAAABoAAACAwAAABAAAAcSABAAAAAAAEYSEAAAAAAARhIQAAAAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAAAAAAYAEAAAAAAAJhkQAAAAAAAAAAAJggAQAAAAAAAqABCAgQAAAAAAAAAaABCAgQAAAAAAAAAAAAAIggAQAAAAAAAKABCAgQAAAAAAAAA6ABAAAAAAAA4AAAdyABAAAAAAAEYCEAAAAAAA9g8QAAAAAAAAAAALMgAQAAEAAABmChCAwQAAAAAAAAACQAAAAACAPwAAgD8AAAAAAAAAAB0AAApyABAAAgAAAEYCEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAPkgAQAAAAAABWCRAAAgAAAAJAAAAAAIA:AAAAAAAAAAAAAIA:AkAAAAAAgL8AAAAAAAAAAAAAgL84AAAHkgAQAAAAAAAGDBAAAAAAAAYEEAABAAAANwAACTIgEAAAAAAABgAQAAIAAACWBRAAAAAAAMYAEAAAAAAANgAACMIgEAAAAAAAAkAAAAAAAAAAAAAAaYMNPwAAAAA2AAAI8iAQAAEAAAACQAAAAAAAPwAAAD8AAAA:AIB:Qz4AAAFTVEFUdAAAAA4AAAADAAAAAAAAAAMAAAAJAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.lambert3_001_mesh_fragData0="s1188:AAAARFhCQ7419YOJXFvXnIHhnR9zdPYBAAAAeAMAAAUAAAA0AAAAgAAAALQAAAAAAQAA:AIAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAHBwAAVEVYQ09PUkQAq6urT1NHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADwAAADgAAAABAAAAAAAAAAMAAAABAAAADwAAAFNWX1RhcmdldACrq1NIRFL0AQAAQAAAAH0AAABiEAADchAQAAAAAABlAAAD8iAQAAAAAABlAAAD8iAQAAEAAABoAAACAwAAABAAAAcSABAAAAAAAEYSEAAAAAAARhIQAAAAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAAAAAAYAEAAAAAAAJhkQAAAAAAAAAAAJggAQAAAAAAAqABCAgQAAAAAAAAAaABCAgQAAAAAAAAAAAAAIggAQAAAAAAAKABCAgQAAAAAAAAA6ABAAAAAAAA4AAAdyABAAAAAAAEYCEAAAAAAA9g8QAAAAAAAAAAALMgAQAAEAAABmChCAwQAAAAAAAAACQAAAAACAPwAAgD8AAAAAAAAAAB0AAApyABAAAgAAAEYCEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAPkgAQAAAAAABWCRAAAgAAAAJAAAAAAIA:AAAAAAAAAAAAAIA:AkAAAAAAgL8AAAAAAAAAAAAAgL84AAAHkgAQAAAAAAAGDBAAAAAAAAYEEAABAAAANwAACTIgEAAAAAAABgAQAAIAAACWBRAAAAAAAMYAEAAAAAAANgAACMIgEAAAAAAAAkAAAAAAAAAAAAAAaYMNPwAAAAA2AAAI8iAQAAEAAAACQAAAAAAAPwAAAD8AAAA:AIB:Qz4AAAFTVEFUdAAAAA4AAAADAAAAAAAAAAMAAAAJAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_colored_fragData0="s564:AAAARFhCQ10%09VOlitqlcwulnj3BPYBAAAApAEAAAUAAAA0AAAAgAAAALQAAADoAAAAKAEAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFI4AAAAQAAAAA4AAABiEAAD8hAQAAAAAABlAAAD8iAQAAAAAAA2AAAF8iAQAAAAAABGHhAAAAAAAD4AAAFTVEFUdAAAAAIAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_colored_vertData0="s1298:AnZlcnRleENvbG9yAAB2ZXJ0ZXhQb3NpdGlvbgABASRHbG9iYWxzAAABcHJvamVjdGlvbk1hdHJpeAAAAAAAQAAAAAQERFhCQ4DtgybrA7ZLkEX80:H0lx8BAAAAiAMAAAUAAAA0AAAAAAEAAEwBAACkAQAADAMAAFJERUbEAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAnAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAQAAAAAAAAAAAAAAAeAAAAAAAAABAAAAAAgAAAIwAAAAAAAAAcHJvamVjdGlvbk1hdHJpeACrq6sDAAMABAAEAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR05EAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAA8PAAA4AAAAAQAAAAAAAAADAAAAAQAAAAcHAABURVhDT09SRACrq6tPU0dOUAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAQQAAAAAAAAABAAAAAwAAAAEAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUmABAABAAAEAWAAAAFkAAARGjiAAAAAAAAQAAABfAAAD8hAQAAAAAABfAAADchAQAAEAAABlAAAD8iAQAAAAAABnAAAE8iAQAAEAAAABAAAAaAAAAgIAAAA2AAAF8iAQAAAAAABGHhAAAAAAADYAAAVyABAAAAAAAEYSEAABAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAQAAABoAEAABAAAAOAAAB0IgEAABAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAQAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAABAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAALAAAAAgAAAAAAAAAEAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_image_fragData0="s920:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkNyheiuU7t5mFNPbkIv8yIwAQAAAJwCAAAFAAAANAAAANQAAAAgAQAAVAEAACACAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSxAAAAEAAAAAxAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAARQAACfIAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAOAAAB:IAEAAAAAAARg4QAAAAAABGHhAAAAAAADgAAAdyIBAAAAAAAEYCEAAAAAAA9h8QAAAAAAA2AAAFgiAQAAAAAAA6ABAAAAAAAD4AAAFTVEFUdAAAAAUAAAABAAAAAAAAAAMAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_image_vertData0="s1434:A3ZlcnRleENvbG9yAAB2ZXJ0ZXhQb3NpdGlvbgABdmVydGV4VVYAAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMf0MJF8mGyMGQsWh58MisDAQAAAOQDAAAFAAAANAAAAAABAABkAQAA1AEAAGgDAABSREVGxAAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAHBwAAUAAAAAIAAAAAAAAAAwAAAAIAAAADAwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAA:IQEAAAAAAAXwAAA3IQEAABAAAAXwAAAzIQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAAAAAA2AAAFMiAQAAEAAABGEBAAAgAAADYAAAVyABAAAAAAAEYSEAABAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_text_fragData0="s883:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkPq8S:xutfukNTooEJ3yp0AAQAAAIACAAAFAAAANAAAANQAAAAgAQAAVAEAAAQCAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSqAAAAEAAAAAqAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAARQAACfIAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAOAAAB4IgEAAAAAAACgAQAAAAAAA6EBAAAAAAADYAAAVyIBAAAAAAAEYSEAAAAAAAPgAAAVNUQVR0AAAABAAAAAEAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_text_vertData0="s1434:A3ZlcnRleENvbG9yAAB2ZXJ0ZXhQb3NpdGlvbgABdmVydGV4VVYAAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMf0MJF8mGyMGQsWh58MisDAQAAAOQDAAAFAAAANAAAAAABAABkAQAA1AEAAGgDAABSREVGxAAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAHBwAAUAAAAAIAAAAAAAAAAwAAAAIAAAADAwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAA:IQEAAAAAAAXwAAA3IQEAABAAAAXwAAAzIQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAAAAAA2AAAFMiAQAAEAAABGEBAAAgAAADYAAAVyABAAAAAAAEYSEAABAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_video_fragData0="s920:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkNyheiuU7t5mFNPbkIv8yIwAQAAAJwCAAAFAAAANAAAANQAAAAgAQAAVAEAACACAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSxAAAAEAAAAAxAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAARQAACfIAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAOAAAB:IAEAAAAAAARg4QAAAAAABGHhAAAAAAADgAAAdyIBAAAAAAAEYCEAAAAAAA9h8QAAAAAAA2AAAFgiAQAAAAAAA6ABAAAAAAAD4AAAFTVEFUdAAAAAUAAAABAAAAAAAAAAMAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.painter_video_vertData0="s1434:A3ZlcnRleENvbG9yAAB2ZXJ0ZXhQb3NpdGlvbgABdmVydGV4VVYAAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMf0MJF8mGyMGQsWh58MisDAQAAAOQDAAAFAAAANAAAAAABAABkAQAA1AEAAGgDAABSREVGxAAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAHBwAAUAAAAAIAAAAAAAAAAwAAAAIAAAADAwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAA:IQEAAAAAAAXwAAA3IQEAABAAAAXwAAAzIQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAAAAAA2AAAFMiAQAAEAAABGEBAAAgAAADYAAAVyABAAAAAAAEYSEAABAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.pass_copy_fragData0="s771:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkNEWeP8b5BN%RvMTBdE:hRwAQAAACwCAAAFAAAANAAAANQAAAAIAQAAPAEAALABAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSbAAAAEAAAAAbAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAMyEBAAAAAAAGUAAAPyIBAAAAAAAEgAAAvyIBAAAAAAAEYQEAAAAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAPgAAAVNUQVR0AAAAAgAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.pass_vertData0="s763:AXBvcwAAAABEWEJDtpmVVJ2wtBYIEKtdn7IyBgEAAAA0AgAABQAAADQAAACAAAAAtAAAAAwBAAC4AQAAUkRFRkQAAAAAAAAAAAAAAAAAAAAcAAAAAAT%:wABAAAcAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAMDAABURVhDT09SRACrq6tPU0dOUAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAADDAAAQQAAAAAAAAABAAAAAwAAAAEAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUqQAAABAAAEAKQAAAF8AAAMyEBAAAAAAAGUAAAMyIBAAAAAAAGcAAATyIBAAAQAAAAEAAAAyAAAPMiAQAAAAAABGEBAAAAAAAAJAAAAAAAA:AAAAvwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAjCIBAAAQAAAAJAAAAAAAAAAAAAAAAAAD8AAIA:PgAAAVNUQVR0AAAABAAAAAAAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.pass_viewray_vertData0="s1435:AXBvcwAAASRHbG9iYWxzAAACaW52VlAAAAAAAEAAAAAEBGV5ZQBAAAAADAAAAAMBRFhCQ6vyu6KH0pZNNy%JPQseyEgBAAAABAQAAAUAAAA0AAAAIAEAAFQBAADEAQAAiAMAAFJERUbkAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAvAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAIAAABgAAAAUAAAAAAAAAAAAAAAkAAAAAAAAABAAAAAAgAAAJgAAAAAAAAAqAAAAEAAAAAMAAAAAgAAAKwAAAAAAAAAaW52VlAAq6sDAAMABAAEAAAAAAAAAAAAZXllAAEAAwABAAMAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR05oAAAAAwAAAAgAAABQAAAAAAAAAAAAAAADAAAAAAAAAAMMAABQAAAAAQAAAAAAAAADAAAAAQAAAAcIAABZAAAAAAAAAAEAAAADAAAAAgAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSvAEAAEAAAQBvAAAAWQAABEaOIAAAAAAABQAAAF8AAAMyEBAAAAAAAGUAAAMyIBAAAAAAAGUAAANyIBAAAQAAAGcAAATyIBAAAgAAAAEAAABoAAACAgAAADIAAA8yIBAAAAAAAEYQEAAAAAAAAkAAAAAAAD8AAAC:AAAAAAAAAAACQAAAAAAAPwAAAD8AAAAAAAAAADYAAAUyABAAAAAAAEYQEAAAAAAANgAACMIAEAAAAAAAAkAAAAAAAAAAAAAAAACAPwAAgD8RAAAIEgAQAAEAAABGDxAAAAAAAEaOIAAAAAAAAAAAABEAAAgiABAAAQAAAEYPEAAAAAAARo4gAAAAAAABAAAAEQAACEIAEAABAAAARg8QAAAAAABGjiAAAAAAAAIAAAARAAAIEgAQAAAAAABGDhAAAAAAAEaOIAAAAAAAAwAAAA4AAAdyABAAAAAAAEYCEAABAAAABgAQAAAAAAAAAAAJciAQAAEAAABGAhAAAAAAAEaCIIBBAAAAAAAAAAQAAAA2AAAFMiAQAAIAAABGEBAAAAAAADYAAAjCIBAAAgAAAAJAAAAAAAAAAAAAAAAAAD8AAIA:PgAAAVNUQVR0AAAADAAAAAIAAAAAAAAABAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.smaa_blend_weight_fragData0="s14924:AAdfZWRnZXNUZXhfc2FtcGxlcgAAX2FyZWFUZXhfc2FtcGxlcgABX3NlYXJjaFRleF9zYW1wbGVyAAJlZGdlc1RleAAAYXJlYVRleAABc2VhcmNoVGV4AAIkR2xvYmFscwAAAnNjcmVlblNpemVJbnYAAAAAAAgAAAACAXNjcmVlblNpemUACAAAAAgAAAACAURYQkMdeZhSRd3LQhLRKKln7eIEAQAAACgrAAAFAAAANAAAADACAADEAgAA%AIAAKwqAABSREVG9AEAAAEAAABYAQAABwAAABwAAAAABP::AAEAAMsBAAD8AAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAA4BAAADAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAHwEAAAMAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAyAQAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAADsBAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAAQwEAAAIAAAAFAAAABAAAAP::::8CAAAAAQAAAA0AAABNAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAF9lZGdlc1RleF9zYW1wbGVyAF9hcmVhVGV4X3NhbXBsZXIAX3NlYXJjaFRleF9zYW1wbGVyAGVkZ2VzVGV4AGFyZWFUZXgAc2VhcmNoVGV4ACRHbG9iYWxzAKurTQEAAAIAAABwAQAAEAAAAAAAAAAAAAAAoAEAAAAAAAAIAAAAAgAAALABAAAAAAAAwAEAAAgAAAAIAAAAAgAAALABAAAAAAAAc2NyZWVuU2l6ZUludgCrqwEAAwABAAIAAAAAAAAAAABzY3JlZW5TaXplAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQCrSVNHTowAAAAFAAAACAAAAIAAAAAAAAAAAAAAAAMAAAAAAAAADw8AAIAAAAABAAAAAAAAAAMAAAABAAAADw8AAIAAAAACAAAAAAAAAAMAAAACAAAADw8AAIAAAAADAAAAAAAAAAMAAAADAAAAAwMAAIAAAAAEAAAAAAAAAAMAAAADAAAADAwAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSrCcAAEAAAADrCQAAWQAABEaOIAAAAAAAAQAAAFoAAAMAYBAAAAAAAFoAAAMAYBAAAQAAAFoAAAMAYBAAAgAAAFgYAAQAcBAAAAAAAFVVAABYGAAEAHAQAAEAAABVVQAAWBgABABwEAACAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAPyEBAAAQAAAGIQAAPyEBAAAgAAAGIQAAMyEBAAAwAAAGIQAAPCEBAAAwAAAGUAAAPyIBAAAAAAAGgAAAIHAAAAMgAADzIAEAAAAAAA5hoQAAMAAAACQAAAAACAPwAAgL8AAAAAAAAAAAJAAAAAAAAAAACAPwAAAAAAAAAASAAAC:IAEAAAAAAARgAQAAAAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAxAAAHIgAQAAAAAAABQAAAAAAAABoAEAAAAAAAHwAEAxoAEAAAAAAAMQAAByIAEAAAAAAAAUAAAAAAAAAKABAAAAAAAB8ABAMaABAAAAAAADgAAAsyABAAAQAAAEaAIAAAAAAAAAAAAAJAAAAAAIC:AACAPwAAAAAAAAAANgAABUIAEAABAAAAAUAAAAAAgD82AAAFMgAQAAIAAADmGhAAAwAAADYAAAUSABAAAwAAAAFAAAAAAAAANgAABUIAEAACAAAAAUAAAAAAgL82AAAFIgAQAAAAAAABQAAAAACAPzAAAAExAAAHQgAQAAAAAAAqABAAAgAAAAFAAAAAAOBAMQAAB4IAEAAAAAAAAUAAAGZmZj8aABAAAAAAAAEAAAdCABAAAAAAADoAEAAAAAAAKgAQAAAAAAADAAADKgAQAAAAAAAAAAAHcgAQAAIAAABGAhAAAQAAAEYCEAACAAAAAAAACIIAEAACAAAAGgAQgEEAAAACAAAAAUAAAAAAgD9IAAAL8gAQAAMAAADGABAAAgAAABZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAA8AAAoiABAAAAAAABYFEAADAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAAWAAABMQAAB0IAEAAAAAAAAUAAAGZmZj8KABAAAwAAAAEAAAdCABAAAAAAACoAEAAAAAAAAUAAAAAAgD8AAAAHEgAQAAEAAAAqABAAAAAAACoAEAACAAAAEgAAATYAAAUSABAAAQAAAAFAAAAAAAAANgAABSIAEAAAAAAAAUAAAAAAAAA2AAAFEgAQAAMAAAABQAAAAAAAABUAAAE4AAALYgAQAAIAAAAGgSAAAAAAAAAAAAACQAAAAAAAAAAAgD8AAIC:AAAAADYAAAWCABAAAgAAAAFAAAAAAIA:NgAABTIAEAAEAAAA5hoQAAMAAAA2AAAFEgAQAAUAAAAKABAAAwAAADYAAAVCABAABAAAAAFAAAAAAIC:NgAABUIAEAAAAAAAAUAAAAAAgD8wAAABMQAAB4IAEAAAAAAAKgAQAAQAAAABQAAAAADgQDEAAAcSABAAAgAAAAFAAABmZmY:KgAQAAAAAAABAAAHggAQAAAAAAA6ABAAAAAAAAoAEAACAAAAAwAAAzoAEAAAAAAAAAAAB3IAEAAEAAAAlgcQAAIAAABGAhAABAAAAAAAAAiCABAABAAAABoAEIBBAAAABAAAAAFAAAAAAIA:SAAAC:IAEAAFAAAAxgAQAAQAAAAWfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAPAAAKQgAQAAAAAAAWBRAABQAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAFgAAAQAAAAeCABAAAAAAAAoAEAABAAAAKgAQAAQAAAAxAAAHggAQAAAAAAABQAAAAAAAQDoAEAAAAAAAHwAEAzoAEAAAAAAAAAAACCIAEAABAAAACgAQgEEAAAABAAAAAUAAAAAAgD4yAAAPwgAQAAEAAACmChAABAAAAAJAAAAAAAAAAAAAAAAAgD8AAIC:AkAAAAAAAAAAAAAAAAAAAAAAgL4yAAAK8gAQAAIAAAAWDhAAAQAAAEaEIAAAAAAAAAAAAOYeEAADAAAAMgAADfIAEAACAAAARoQgAAAAAAAAAAAAAkAAAAAAgL8AAAAAAACAPwAAAABGDhAAAgAAADIAAA:yABAAAgAAAEYOEAACAAAAAkAAAAAAgD8AAIC:AACAPwAAgL8CQAAAAAAAAAAAgD8AAAAAAACAP0gAAAvyABAAAwAAAEYAEAACAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAASAAAC:IAEAACAAAA5goQAAIAAACGdxAAAAAAAABgEAAAAAAAAUAAAAAAAAA2AAAFQgAQAAMAAAAKABAAAgAAADIAAA%iABAAAQAAAAYIEAADAAAAAkAAAAAAAAAAAKBAAAAAAAAAoEACQAAAAAAAAAAAcMAAAAAAAABwwDgAAAhSABAAAgAAAFYHEICBAAAAAQAAAAYCEAADAAAANgAABSIAEAACAAAAGgAQAAMAAAAAAAAK8gAQAAIAAABGDhAAAgAAAAJAAAAAAAA:AAAAPwAAAD8AAAA:QQAABfIAEAACAAAARg4QAAIAAAAyAAAMogAQAAEAAABWDRAAAgAAAAJAAAAAAAAAAAAAQAAAAAAAAABABggQAAIAAAAdAAAKYgAQAAAAAABWBhAAAAAAAAJAAAAAAAAAZmZmP2ZmZj8AAAAANwAADDIAEAACAAAAlgUQAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAANYFEAABAAAAMgAADGIAEAAAAAAABgEQAAIAAAACQAAAAAAAAAAAoEEAAKBBAAAAAAYCEAABAAAAMgAAD2IAEAAAAAAAVgYQAAAAAAACQAAAAAAAAM3MzDuhDuo6AAAAAAJAAAAAAAAAzcwAP6EOajoAAAAASAAAC:IAEAABAAAAlgUQAAAAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAASAAABNgAACDIAEAABAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAVAAABMgAACiIAEAAAAAAACoAgAAAAAAAAAAAAAUAAAAAAgD4qEBAAAwAAADYAAAcyABAAAgAAAEaAIIBBAAAAAAAAAAAAAAA2AAAFQgAQAAIAAAABQAAAAACAPzYAAAUSABAAAwAAABoAEAAAAAAANgAABSIAEAADAAAAOhAQAAMAAAA2AAAFQgAQAAAAAAAKABAABQAAADYAAAVCABAAAwAAAAFAAAAAAIC:NgAABUIAEAABAAAAAUAAAAAAgD8wAAABMQAAB4IAEAABAAAAKgAQAAMAAAABQAAAAADgQDEAAAeCABAAAgAAAAFAAABmZmY:KgAQAAEAAAABAAAHggAQAAEAAAA6ABAAAQAAADoAEAACAAAAAwAAAzoAEAABAAAAAAAAB3IAEAADAAAARgIQAAIAAABGAhAAAwAAAAAAAAiCABAAAwAAABoAEIBBAAAAAwAAAAFAAAAAAIA:SAAAC:IAEAAEAAAAxgAQAAMAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAAJggAQAAEAAAAKABAABAAAAAFAAAAAAKBAAUAAAAAAcMA4AAAIEgAQAAQAAAA6ABCAgQAAAAEAAAAKABAABAAAAAAAAAoyABAABAAAAEYAEAAEAAAAAkAAAAAAAD8AAAA:AAAAAAAAAABBAAAFwgAQAAAAAABWARAABAAAAA8AAApCABAAAQAAALYPEAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAAWAAABMgAADTIAEAACAAAARoAgAAAAAAAAAAAAAkAAAAAAgD8AAAAAAAAAAAAAAADmGhAAAwAAAAAAAAhCABAAAgAAABoAEIBBAAAAAgAAAAFAAAAAAIA:SAAAC:IAEAACAAAAhgAQAAIAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAxAAAHggAQAAAAAAABQAAAAAAAAAoAEAACAAAAHwAEAzoAEAAAAAAANgAABjIAEAACAAAARoAgAAAAAAAAAAAANgAABUIAEAACAAAAAUAAAAAAgD82AAAFEgAQAAQAAAAaABAAAAAAADYAAAUiABAABAAAADoQEAADAAAANgAABRIAEAAFAAAAKgAQAAAAAAA2AAAFQgAQAAQAAAABQAAAAACAvzYAAAWCABAAAAAAAAFAAAAAAIA:MAAAATEAAAeCABAAAQAAACoAEAAEAAAAAUAAAAAA4EAxAAAHggAQAAIAAAABQAAAZmZmPzoAEAAAAAAAAQAAB4IAEAABAAAAOgAQAAEAAAA6ABAAAgAAAAMAAAM6ABAAAQAAAAAAAAdyABAABAAAAEYCEAACAAAARgIQAAQAAAAAAAAIggAQAAQAAAAaABCAQQAAAAQAAAABQAAAAACAP0gAAAvyABAABgAAAMYAEAAEAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAACYIAEAABAAAACgAQAAYAAAABQAAAAACgQAFAAAAAAHDAOAAACBIAEAAGAAAAOgAQgIEAAAABAAAACgAQAAYAAAAAAAAKwgAQAAUAAAAGBBAABgAAAAJAAAAAAAAAAAAAAAAAAD8AAAA:QQAABTIAEAAFAAAAtg8QAAUAAAAPAAAKggAQAAAAAAAWBRAABQAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAFgAAATEAAAciABAAAAAAAAFAAABmZmY:CgAQAAUAAAABAAAHIgAQAAAAAAAaABAAAAAAAAFAAAAAAIA:AAAAByIAEAADAAAAGgAQAAAAAAAqABAABAAAABIAAAE2AAAFIgAQAAMAAAABQAAAAAAAADYAAAWCABAAAAAAAAFAAAAAAAAAFQAAAQAAAAciABAAAAAAABoAEAADAAAAKgAQAAMAAAAxAAAHIgAQAAAAAAABQAAAAAAAQBoAEAAAAAAAHwAEAxoAEAAAAAAANgAABhIAEAADAAAAKgAQgEEAAAADAAAAMgAACvIAEAACAAAABgUQAAMAAABGhCAAAAAAAAAAAADmHhAAAwAAADIAAA3yABAABAAAAEaEIAAAAAAAAAAAAAJAAAAAAIC:AAAAAAAAAAAAAIC:RgQQAAIAAAAyAAAP8gAQAAQAAABGDhAABAAAAAJAAAAAAIA:AACAvwAAgD8AAIC:AkAAAAAAAAAAAIA:AAAAAAAAgD9IAAAL8gAQAAUAAABGABAABAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAEgAAAvyABAABAAAAOYKEAAEAAAAlnwQAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAADTIAEAACAAAARoAgAAAAAAAAAAAAAkAAAAAAgD8AAAAAAAAAAAAAAADmChAAAgAAAAAAAAhCABAAAgAAABoAEIBBAAAAAgAAAAFAAAAAAIA:SAAAC:IAEAACAAAAhgAQAAIAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAA2AAAFEgAQAAQAAAAaABAABQAAADYAAAWiABAABAAAAFYBEAACAAAAMgAADGIAEAAAAAAABgEQAAQAAAACQAAAAAAAAAAAAEAAAABAAAAAAKYLEAAEAAAAHQAAB0IAEAABAAAAKgAQAAEAAAABQAAAZmZmPx0AAAeCABAAAAAAADoAEAAAAAAAAUAAAGZmZj83AAAJEgAQAAIAAAAqABAAAQAAAAFAAAAAAAAAGgAQAAAAAAA3AAAJIgAQAAIAAAA6ABAAAAAAAAFAAAAAAAAAKgAQAAAAAAAyAAAMYgAQAAAAAAAGARAAAgAAAAJAAAAAAAAAAACgQQAAoEEAAAAApgkQAAMAAAAyAAAPYgAQAAAAAABWBhAAAAAAAAJAAAAAAAAAzczMO6EO6joAAAAAAkAAAAAAAADNzAA:oQ5qOgAAAABIAAAL8gAQAAIAAACWBRAAAAAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAAAAAAAcyABAAAQAAAEYAEAABAAAAFgUQAAIAAAAVAAABGAAACCIAEAAAAAAAGgAQgEEAAAABAAAACgAQAAEAAAAfAAQDGgAQAAAAAAA2AAAFogAQAAAAAAAGFBAAAAAAADYAAAVCABAAAAAAAAFAAAAAAIA:NgAABRIAEAACAAAAAUAAAAAAAAAwAAABMQAAB0IAEAABAAAAChAQAAIAAAAaABAAAAAAADEAAAeCABAAAQAAAAFAAABd:lM:KgAQAAAAAAABAAAHQgAQAAEAAAA6ABAAAQAAACoAEAABAAAAGAAAB4IAEAABAAAACgAQAAIAAAABQAAAAAAAAAEAAAdCABAAAQAAADoAEAABAAAAKgAQAAEAAAAfAAQDKgAQAAEAAAAyAAAPwgAQAAEAAABWDRAAAAAAAAJAAAAAAAAAAAAAAAAAgD8AAIC:AkAAAAAAAAAAAAAAAAAAAAAAgD9IAAAL8gAQAAIAAADmChAAAQAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAA0yABAAAwAAAEaAIAAAAAAAAAAAAAJAAAAAAADAAAAAgAAAAAAAAAAA1gUQAAAAAAA2AAAFQgAQAAMAAAAaABAAAgAAADYAAAXiABAAAAAAAAYGEAADAAAABwAAARIAAAECAAABFQAAARYAAAE2AAAFwgAQAAAAAACmBhAAAAAAADYAAAUiABAAAAAAAAoAEAACAAAAMgAAD2IAEAAAAAAAVgYQAAAAAAACQAAAAAAAAAAAAD8AAADAAAAAAAJAAAAAAAAAAAAAPAAAAkAAAAAASAAAC:IAEAACAAAAlgUQAAAAAABGfhAAAgAAAABgEAACAAAAAUAAAAAAAAAyAAAJIgAQAAAAAAAKABAAAgAAAAFAAAACgQDAAUAAAAAAUEAyAAAKEgAQAAIAAAAKgCAAAAAAAAAAAAAaABAAAAAAADoAEAAAAAAAAAAACCIAEAACAAAAGhAQgEEAAAABAAAAAUAAAAAAgD9IAAAL8gAQAAMAAABGABAAAgAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADYAAAWiABAAAAAAAKYeEAAAAAAANgAABUIAEAAAAAAAAUAAAAAAgD82AAAFEgAQAAQAAAABQAAAAAAAADAAAAExAAAHQgAQAAEAAAAaABAAAAAAABoQEAACAAAAMQAAB4IAEAABAAAAAUAAAF3%Uz8qABAAAAAAAAEAAAdCABAAAQAAADoAEAABAAAAKgAQAAEAAAAYAAAHggAQAAEAAAAKABAABAAAAAFAAAAAAAAAAQAAB0IAEAABAAAAOgAQAAEAAAAqABAAAQAAAB8ABAMqABAAAQAAADIAAA:CABAAAQAAAFYNEAAAAAAAAkAAAAAAAAAAAAAAAACAPwAAgL8CQAAAAAAAAAAAAAAAAAAAAACAP0gAAAvyABAABAAAAOYKEAABAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAADTIAEAAFAAAARoAgAAAAAAAAAAAAAkAAAAAAAEAAAAAAAAAAAAAAAADWBRAAAAAAADYAAAVCABAABQAAABoAEAAEAAAANgAABeIAEAAAAAAABgYQAAUAAAAHAAABEgAAAQIAAAEVAAABFgAAATYAAAXCABAAAAAAAKYGEAAAAAAANgAABSIAEAAAAAAACgAQAAQAAAAyAAAPYgAQAAAAAABWBhAAAAAAAAJAAAAAAAAAAAAAPwAAAMAAAAAAAkAAAAAAAAAAAAY:AAACQAAAAABIAAAL8gAQAAQAAACWBRAAAAAAAEZ%EAACAAAAAGAQAAIAAAABQAAAAAAAADIAAAkiABAAAAAAAAoAEAAEAAAAAUAAAAKBAMABQAAAAABQQDIAAAtCABAAAgAAAAqAIIBBAAAAAAAAAAAAAAAaABAAAAAAADoAEAAAAAAAMgAAC:IAEAAEAAAApoogAAAAAAAAAAAAJgIQAAIAAAAGEBCAQQAAAAMAAAAAAAAK8gAQAAQAAABGDhAABAAAAAJAAAAAAAA:AAAAPwAAAD8AAAA:QQAABfIAEAAEAAAARg4QAAQAAABLAAAGYgAQAAAAAAD2DhCAgQAAAAQAAAA2AAAFggAQAAIAAAAaEBAAAQAAADIAAA0yABAABQAAAEaAIAAAAAAAAAAAAAJAAAAAAIA:AAAAAAAAAAAAAAAA5goQAAIAAAAAAAAIQgAQAAUAAAAaABCAQQAAAAUAAAABQAAAAACAP0gAAAvyABAABQAAAIYAEAAFAAAAFn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAANgAABRIAEAAFAAAACgAQAAMAAAAyAAAPwgAQAAEAAAAGBBAABQAAAAJAAAAAAAAAAAAAAAAAgEAAAIBAAkAAAAAAAAAAAAAAAAAAPwAAAD9BAAAFwgAQAAEAAACmDhAAAQAAADIAAAxiABAAAAAAAKYLEAABAAAAAkAAAAAAAAAAAIBBAACAQQAAAABWBhAAAAAAADIAAA9iABAAAAAAAFYGEAAAAAAAAkAAAAAAAADNzMw7oQ7qOgAAAAACQAAAAAAAAM3MTDuhDmo6AAAAAEgAAAvyABAAAwAAAJYFEAAAAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAHQAACfIAEAAEAAAARg4QgIEAAAAEAAAAtgsQgIEAAAAEAAAAAQAACvIAEAAEAAAARg4QAAQAAAACQAAAAACAPwAAgD8AAEA:AABAPwAAAAciABAAAAAAABoAEAAEAAAACgAQAAQAAAAOAAAHYgAQAAAAAACmCxAABAAAAFYFEAAAAAAANgAABaIAEAACAAAA9h8QAAMAAAAyAAANMgAQAAQAAABGgCAAAAAAAAAAAAACQAAAAAAAAAAAgD8AAAAAAAAAAEYAEAACAAAAAAAACEIAEAAEAAAAGgAQgEEAAAAEAAAAAUAAAAAAgD9IAAAL8gAQAAQAAACGABAABAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAAqCABAAAAAAABoAEIBBAAAAAAAAAAoAEAAEAAAAAUAAAAAAgD8AAAAIMgAQAAQAAADmChAAAgAAAEaAIAAAAAAAAAAAAAAAAAhCABAABAAAABoAEIBBAAAABAAAAAFAAAAAAIA:SAAAC:IAEAAEAAAAhgAQAAQAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyIAAKEgAQAAQAAAAqABCAQQAAAAAAAAAKABAABAAAADoAEAAAAAAAMgAADTIAEAAFAAAARoAgAAAAAAAAAAAAAkAAAAAAAAAAAADAAAAAAAAAAABGABAAAgAAAAAAAAhCABAABQAAABoAEIBBAAAABQAAAAFAAAAAAIA:SAAAC:IAEAAFAAAAhgAQAAUAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAAKIgAQAAAAAAAaABCAQQAAAAAAAAAKABAABQAAAAFAAAAAAIA:MgAADTIAEAACAAAARoAgAAAAAAAAAAAAAkAAAAAAgD8AAADAAAAAAAAAAADmChAAAgAAAAAAAAhCABAAAgAAABoAEIBBAAAAAgAAAAFAAAAAAIA:SAAAC:IAEAACAAAAhgAQAAIAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyIAAKIgAQAAQAAAAqABCAQQAAAAAAAAAKABAAAgAAABoAEAAAAAAAOAAABzIgEAAAAAAARgAQAAMAAABGABAABAAAABIAAAE2AAAFMiAQAAAAAABGABAAAQAAADYAAAUSABAAAAAAAAFAAAAAAAAAFQAAARIAAAE2AAAIMiAQAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAABUAAAExAAAHEgAQAAAAAAABQAAAAAAAAAoAEAAAAAAAHwAEAwoAEAAAAAAANgAABTIAEAAAAAAAFhUQAAEAAAA2AAAFQgAQAAAAAAABQAAAAACAPzYAAAUSABAAAQAAAAFAAAAAAAAAMAAAATEAAAeCABAAAAAAACoQEAACAAAACgAQAAAAAAAxAAAHEgAQAAIAAAABQAAAXf5TPyoAEAAAAAAAAQAAB4IAEAAAAAAAOgAQAAAAAAAKABAAAgAAABgAAAcSABAAAgAAAAoAEAABAAAAAUAAAAAAAAABAAAHggAQAAAAAAA6ABAAAAAAAAoAEAACAAAAHwAEAzoAEAAAAAAAMgAADzIAEAACAAAAFgUQAAAAAAACQAAAAACAPwAAgL8AAAAAAAAAAAJAAAAAAAAAAACAPwAAAAAAAAAASAAAC:IAEAABAAAARgAQAAIAAAAWfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAANMgAQAAIAAABGgCAAAAAAAAAAAAACQAAAAAAAgAAAAMAAAAAAAAAAABYFEAAAAAAANgAABUIAEAACAAAAGgAQAAEAAAA2AAAFcgAQAAAAAAAWBhAAAgAAAAcAAAESAAABAgAAARUAAAEWAAABNgAABSIAEAABAAAAKgAQAAAAAAAyAAAPYgAQAAAAAAAGARAAAQAAAAJAAAAAAAAAAAAAPwAAAMAAAAAAAkAAAAAAAAAAAAA8AAACQAAAAABIAAAL8gAQAAEAAACWBRAAAAAAAEZ%EAACAAAAAGAQAAIAAAABQAAAAAAAADIAAAkiABAAAAAAAAoAEAABAAAAAUAAAAKBAMABQAAAAABQQDIAAAoSABAAAAAAABqAIAAAAAAAAAAAABoAEAAAAAAACgAQAAAAAAAAAAAIIgAQAAEAAAAKABCAQQAAAAAAAAABQAAAAACAPzYAAAUSABAAAQAAAAoQEAAAAAAASAAAC:IAEAABAAAARgAQAAEAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAA2AAAFUgAQAAEAAAD2HhAAAQAAADYAAAWCABAAAQAAAAFAAAAAAIA:NgAABRIAEAACAAAAAUAAAAAAAAAwAAABMQAABxIAEAADAAAACgAQAAEAAAA6EBAAAgAAADEAAAciABAAAwAAAAFAAABd:lM:OgAQAAEAAAABAAAHEgAQAAMAAAAaABAAAwAAAAoAEAADAAAAGAAAByIAEAADAAAACgAQAAIAAAABQAAAAAAAAAEAAAcSABAAAwAAABoAEAADAAAACgAQAAMAAAAfAAQDCgAQAAMAAAAyAAAPMgAQAAMAAAAmChAAAQAAAAJAAAAAAIA:AACAvwAAAAAAAAAAAkAAAAAAAAAAAIA:AAAAAAAAAABIAAAL8gAQAAIAAABGABAAAwAAABZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAA0yABAAAwAAAEaAIAAAAAAAAAAAAAJAAAAAAAAAAAAAQAAAAAAAAAAAJgoQAAEAAAA2AAAFQgAQAAMAAAAaABAAAgAAADYAAAXSABAAAQAAAFYIEAADAAAABwAAARIAAAECAAABFQAAARYAAAE2AAAFIgAQAAIAAAA6ABAAAQAAADIAAA:CABAAAQAAAAYEEAACAAAAAkAAAAAAAAAAAAAAAAAAPwAAAMACQAAAAAAAAAAAAAAAAAY:AAACQEgAAAvyABAAAgAAAOYKEAABAAAARn4QAAIAAAAAYBAAAgAAAAFAAAAAAAAAMgAACUIAEAABAAAACgAQAAIAAAABQAAAAoEAwAFAAAAAAFBAMgAACyIAEAAAAAAAGoAggEEAAAAAAAAAAAAAACoAEAABAAAACgAQAAEAAAAyAAAL8gAQAAIAAAD2jyAAAAAAAAAAAAAWARAAAAAAAFYVEIBBAAAAAwAAAAAAAAryABAAAgAAAEYOEAACAAAAAkAAAAAAAD8AAAA:AAAAPwAAAD9BAAAF8gAQAAIAAABGDhAAAgAAAEsAAAZSABAAAQAAAPYOEICBAAAAAgAAADYAAAVCABAAAAAAAAoQEAAAAAAAMgAADTIAEAADAAAARoAgAAAAAAAAAAAAAkAAAAAAAAAAAIA:AAAAAAAAAABmChAAAAAAAAAAAAhCABAAAwAAABoAEIBBAAAAAwAAAAFAAAAAAIA:SAAAC:IAEAADAAAAhgAQAAMAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAA2AAAFEgAQAAMAAAAaABAAAQAAADIAAA%iABAAAQAAAAYEEAADAAAAAkAAAAAAAAAAAIBAAAAAAAAAgEACQAAAAAAAAAAAAD8AAAAAAAAAP0EAAAWiABAAAQAAAFYNEAABAAAAMgAADDIAEAABAAAA1gUQAAEAAAACQAAAAACAQQAAgEEAAAAAAAAAAIYAEAABAAAAMgAADzIAEAABAAAARgAQAAEAAAACQAAAzczMO6EO6joAAAAAAAAAAAJAAADNzEw7oQ5qOgAAAAAAAAAASAAAC:IAEAABAAAARgAQAAEAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAAdAAAJ8gAQAAIAAABGDhCAgQAAAAIAAAC2CxCAgQAAAAIAAAABAAAK8gAQAAIAAABGDhAAAgAAAAJAAAAAAIA:AACAPwAAQD8AAEA:AAAAB0IAEAAAAAAAGgAQAAIAAAAKABAAAgAAAA4AAAfCABAAAQAAAKYOEAACAAAApgoQAAAAAAA2AAAFggAQAAAAAAAqEBAAAwAAADIAAA0yABAAAgAAAEaAIAAAAAAAAAAAAAJAAAAAAIA:AAAAAAAAAAAAAAAANg8QAAAAAAAAAAAIQgAQAAIAAAAaABCAQQAAAAIAAAABQAAAAACAP0gAAAvyABAAAgAAAIYAEAACAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAACkIAEAAAAAAAKgAQgEEAAAABAAAAGgAQAAIAAAABQAAAAACAPwAAAAgyABAAAgAAAHYPEAAAAAAARoAgAAAAAAAAAAAAAAAACEIAEAACAAAAGgAQgEEAAAACAAAAAUAAAAAAgD9IAAAL8gAQAAIAAACGABAAAgAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIgAApCABAAAgAAADoAEIBBAAAAAQAAABoAEAACAAAAKgAQAAAAAAAyAAANMgAQAAMAAABGgCAAAAAAAAAAAAACQAAAAAAAwAAAAAAAAAAAAAAAADYPEAAAAAAAAAAACEIAEAADAAAAGgAQgEEAAAADAAAAAUAAAAAAgD9IAAAL8gAQAAMAAACGABAAAwAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAAoSABAAAAAAACoAEIBBAAAAAQAAABoAEAADAAAAAUAAAAAAgD8yAAANMgAQAAMAAABGgCAAAAAAAAAAAAACQAAAAAAAwAAAgD8AAAAAAAAAAHYPEAAAAAAAAAAACEIAEAADAAAAGgAQgEEAAAADAAAAAUAAAAAAgD9IAAAL8gAQAAMAAACGABAAAwAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIgAAqCABAAAgAAADoAEIBBAAAAAQAAABoAEAADAAAACgAQAAAAAAA4AAAHwiAQAAAAAAAGBBAAAQAAAKYOEAACAAAAEgAAATYAAAjCIBAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAFQAAAT4AAAFTVEFUdAAAAFgBAAAHAAAAAAAAAAYAAACfAAAAAAAAABAAAAATAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACMAAAAAAAAAAAAAAAAAAABGAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.smaa_blend_weight_vertData0="s1684:AXBvcwAAASRHbG9iYWxzAAACc2NyZWVuU2l6ZQAAAAAACAAAAAIBc2NyZWVuU2l6ZUludgAIAAAACAAAAAIBRFhCQ:tJQ9%XG8PQa3ZkPKHRRTEBAAAAsAQAAAUAAAA0AAAAIAEAAFQBAAAMAgAANAQAAFJERUbkAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAugAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAIAAABgAAAAEAAAAAAAAAAAAAAAkAAAAAAAAAAIAAAAAgAAAJwAAAAAAAAArAAAAAgAAAAIAAAAAgAAAJwAAAAAAAAAc2NyZWVuU2l6ZQCrAQADAAEAAgAAAAAAAAAAAHNjcmVlblNpemVJbnYATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAKurSVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR06wAAAABgAAAAgAAACYAAAAAAAAAAAAAAADAAAAAAAAAA8AAACYAAAAAQAAAAAAAAADAAAAAQAAAA8AAACYAAAAAgAAAAAAAAADAAAAAgAAAA8AAACYAAAAAwAAAAAAAAADAAAAAwAAAAMMAACYAAAABAAAAAAAAAADAAAAAwAAAAwDAAChAAAAAAAAAAEAAAADAAAABAAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSIAIAAEAAAQCIAAAAWQAABEaOIAAAAAAAAQAAAF8AAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGUAAAPyIBAAAQAAAGUAAAPyIBAAAgAAAGUAAAMyIBAAAwAAAGUAAAPCIBAAAwAAAGcAAATyIBAABAAAAAEAAABoAAACAwAAADIAAA:yABAAAAAAAEYUEAAAAAAAAkAAAAAAAD8AAAA:AAAAPwAAAD8CQAAAAAAAPwAAAD8AAAA:AAAAPzIAAA3yABAAAQAAAKaPIAAAAAAAAAAAAAJAAAAAAIC%AACgPwAAAL4AAAC%hg0QAAAAAAA2AAAF8iAQAAAAAACGDRAAAQAAADIAAA3yABAAAgAAAOaOIAAAAAAAAAAAAAJAAAAAAAC%AACAvgAAAL4AAKA:Rg4QAAAAAAA4AAAIMiAQAAMAAADmChAAAAAAAEaAIAAAAAAAAAAAADYAAAXyIBAAAQAAAEYOEAACAAAANgAABcIAEAABAAAAVg0QAAIAAAAyAAAN8iAQAAIAAACmjyAAAAAAAAAAAAACQAAAAAAAwgAAAEIAAADCAAAAQkYOEAABAAAAMgAAD8IgEAADAAAABhQQAAAAAAACQAAAAAAAAAAAAAAAAAA:AAAAPwJAAAAAAAAAAAAAAAAAAD8AAAA:NgAABTIgEAAEAAAARhAQAAAAAAA2AAAIwiAQAAQAAAACQAAAAAAAAAAAAAAAAAA:AACAPz4AAAFTVEFUdAAAAAwAAAADAAAAAAAAAAcAAAAGAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.smaa_edge_detect_fragData0="s2635:AAJfY29sb3JUZXhfc2FtcGxlcgAAY29sb3JUZXgAAABEWEJDGlOFKsrBMllxtOQiZOI5xwEAAACYBwAABQAAADQAAADcAAAAWAEAAIwBAAAcBwAAUkRFRqAAAAAAAAAAAAAAAAIAAAAcAAAAAAT::wABAAB3AAAAXAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAABuAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAF9jb2xvclRleF9zYW1wbGVyAGNvbG9yVGV4AE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQCrSVNHTnQAAAAEAAAACAAAAGgAAAAAAAAAAAAAAAMAAAAAAAAADw8AAGgAAAABAAAAAAAAAAMAAAABAAAADw8AAGgAAAACAAAAAAAAAAMAAAACAAAADw8AAGgAAAADAAAAAAAAAAMAAAADAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSiAUAAEAAAABiAQAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAPyEBAAAQAAAGIQAAPyEBAAAgAAAGIQAAMyEBAAAwAAAGUAAAPyIBAAAAAAAGgAAAIFAAAASAAAC:IAEAAAAAAARhAQAAMAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAABIAAAL8gAQAAEAAABGEBAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAAAAAAhyABAAAQAAAEYCEAAAAAAARgIQgEEAAAABAAAANAAACYIAEAAAAAAAGgAQgIEAAAABAAAACgAQgIEAAAABAAAANAAACBIAEAABAAAAKgAQgIEAAAABAAAAOgAQAAAAAABIAAAL8gAQAAIAAADmGhAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAAAAAAhyABAAAgAAAEYCEAAAAAAARgIQgEEAAAACAAAANAAACYIAEAAAAAAAGgAQgIEAAAACAAAACgAQgIEAAAACAAAANAAACCIAEAABAAAAKgAQgIEAAAACAAAAOgAQAAAAAAAdAAAKwgAQAAEAAAAGBBAAAQAAAAJAAAAAAAAAAAAAAM3MzD3NzMw9AQAACsIAEAABAAAApg4QAAEAAAACQAAAAAAAAAAAAAAAAIA:AACAPw8AAAqCABAAAAAAAOYKEAABAAAAAkAAAAAAgD8AAIA:AAAAAAAAAAAYAAAHggAQAAAAAAA6ABAAAAAAAAFAAAAAAAAADQAEAzoAEAAAAAAASAAAC:IAEAACAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAAAAAIcgAQAAIAAABGAhAAAAAAAEYCEIBBAAAAAgAAADQAAAmCABAAAAAAABoAEICBAAAAAgAAAAoAEICBAAAAAgAAADQAAAgSABAAAgAAACoAEICBAAAAAgAAADoAEAAAAAAASAAAC:IAEAADAAAA5hoQAAEAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAAAAAIcgAQAAMAAABGAhAAAAAAAEYCEIBBAAAAAwAAADQAAAmCABAAAAAAABoAEICBAAAAAwAAAAoAEICBAAAAAwAAADQAAAgiABAAAgAAACoAEICBAAAAAwAAADoAEAAAAAAANAAABzIAEAACAAAARgAQAAEAAABGABAAAgAAAEgAAAvyABAAAwAAAEYQEAACAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAAAAACHIAEAADAAAARgIQAAAAAABGAhCAQQAAAAMAAAA0AAAJggAQAAAAAAAaABCAgQAAAAMAAAAKABCAgQAAAAMAAAA0AAAIEgAQAAMAAAAqABCAgQAAAAMAAAA6ABAAAAAAAEgAAAvyABAABAAAAOYaEAACAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAAAAACHIAEAAAAAAARgIQAAAAAABGAhCAQQAAAAQAAAA0AAAJEgAQAAAAAAAaABCAgQAAAAAAAAAKABCAgQAAAAAAAAA0AAAIIgAQAAMAAAAqABCAgQAAAAAAAAAKABAAAAAAADQAAAcyABAAAAAAAEYAEAACAAAARgAQAAMAAAA0AAAHEgAQAAAAAAAaABAAAAAAAAoAEAAAAAAAAAAAB2IAEAAAAAAABgEQAAEAAAAGARAAAQAAAB0AAAcyABAAAAAAAJYFEAAAAAAABgAQAAAAAAABAAAKMgAQAAAAAABGABAAAAAAAAJAAAAAAIA:AACAPwAAAAAAAAAAOAAABzIgEAAAAAAARgAQAAAAAADmChAAAQAAADYAAAjCIBAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAPgAAAVNUQVR0AAAAJwAAAAUAAAAAAAAABQAAABsAAAAAAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.smaa_edge_detect_vertData0="s1438:AXBvcwAAASRHbG9iYWxzAAABc2NyZWVuU2l6ZUludgAAAAAACAAAAAIBRFhCQ2MEpf99vnGzBoKQRJKZVrgBAAAADAQAAAUAAAA0AAAA:AAAADABAADQAQAAkAMAAFJERUbAAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAmAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAEAAAAAAAAAAAAAAAeAAAAAAAAAAIAAAAAgAAAIgAAAAAAAAAc2NyZWVuU2l6ZUludgCrqwEAAwABAAIAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR06YAAAABQAAAAgAAACAAAAAAAAAAAAAAAADAAAAAAAAAA8AAACAAAAAAQAAAAAAAAADAAAAAQAAAA8AAACAAAAAAgAAAAAAAAADAAAAAgAAAA8AAACAAAAAAwAAAAAAAAADAAAAAwAAAAMMAACJAAAAAAAAAAEAAAADAAAABAAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSuAEAAEAAAQBuAAAAWQAABEaOIAAAAAAAAQAAAF8AAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGUAAAPyIBAAAQAAAGUAAAPyIBAAAgAAAGUAAAMyIBAAAwAAAGcAAATyIBAABAAAAAEAAABoAAACAQAAADIAAA:yABAAAAAAAEYUEAAAAAAAAkAAAAAAAD8AAAC:AAAAPwAAAL8CQAAAAAAAPwAAAD8AAAA:AAAAPzIAAA3yIBAAAAAAAEaEIAAAAAAAAAAAAAJAAAAAAIC:AAAAAAAAAAAAAIA:Rg4QAAAAAAAyAAAN8iAQAAEAAABGhCAAAAAAAAAAAAACQAAAAACAPwAAAAAAAAAAAACAv0YOEAAAAAAAMgAADfIgEAACAAAARoQgAAAAAAAAAAAAAkAAAAAAAMAAAAAAAAAAAAAAAEBGDhAAAAAAADIAAA8yIBAAAwAAAEYQEAAAAAAAAkAAAAAAAD8AAAC:AAAAAAAAAAACQAAAAAAAPwAAAD8AAAAAAAAAADYAAAUyIBAABAAAAEYQEAAAAAAANgAACMIgEAAEAAAAAkAAAAAAAAAAAAAAAAAAPwAAgD8%AAABU1RBVHQAAAAIAAAAAQAAAAAAAAAGAAAABQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.smaa_neighborhood_blend_fragData0="s2490:AAVfYmxlbmRUZXhfc2FtcGxlcgAAX2NvbG9yVGV4X3NhbXBsZXIAAWJsZW5kVGV4AABjb2xvclRleAABJEdsb2JhbHMAAAFzY3JlZW5TaXplSW52AAAAAAAIAAAAAgFEWEJDsyJjLpiVqYIgmI%b6ALRWQEAAADsBgAABQAAADQAAACwAQAA:AEAADACAABwBgAAUkRFRnQBAAABAAAA:AAAAAUAAAAcAAAAAAT::wABAABMAQAAvAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAADOAAAAAwAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAOAAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAA6QAAAAIAAAAFAAAABAAAAP::::8BAAAAAQAAAA0AAADyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAF9ibGVuZFRleF9zYW1wbGVyAF9jb2xvclRleF9zYW1wbGVyAGJsZW5kVGV4AGNvbG9yVGV4ACRHbG9iYWxzAKvyAAAAAQAAABQBAAAQAAAAAAAAAAAAAAAsAQAAAAAAAAgAAAACAAAAPAEAAAAAAABzY3JlZW5TaXplSW52AKurAQADAAEAAgAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAOAAAAAEAAAAAAAAAAwAAAAEAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFI4BAAAQAAAAA4BAABZAAAERo4gAAAAAAABAAAAWgAAAwBgEAAAAAAAWgAAAwBgEAABAAAAWBgABABwEAAAAAAAVVUAAFgYAAQAcBAAAQAAAFVVAABiEAAD8hAQAAAAAABiEAADMhAQAAEAAABlAAAD8iAQAAAAAABoAAACBAAAAEgAAAvyABAAAAAAAEYQEAAAAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAASAAAC:IAEAABAAAA5hoQAAAAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAABIAAAL8gAQAAIAAABGEBAAAQAAANZyEAAAAAAAAGAQAAAAAAABQAAAAAAAADYAAAUSABAAAgAAADoAEAAAAAAANgAABSIAEAACAAAAGgAQAAEAAAARAAAKEgAQAAAAAABGDhAAAgAAAAJAAAAAAIA:AACAPwAAgD8AAIA:MQAABxIAEAAAAAAACgAQAAAAAAABQAAArMUnNx8ABAMKABAAAAAAAEgAAAvyIBAAAAAAAEYQEAABAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAEgAAATQAAAcSABAAAAAAADoAEAAAAAAAKgAQAAIAAAA0AAAHIgAQAAAAAAA6ABAAAgAAABoAEAACAAAAMQAABxIAEAAAAAAAGgAQAAAAAAAKABAAAAAAADYAAAVSABAAAQAAAAYCEAACAAAANgAACKIAEAABAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA2AAAFEgAQAAIAAAABQAAAAAAAADcAAAnyABAAAwAAAAYAEAAAAAAARg4QAAEAAABGDBAAAgAAADcAAAkyABAAAAAAAAYAEAAAAAAAhgAQAAEAAADWBRAAAgAAAA8AAApCABAAAAAAAEYAEAAAAAAAAkAAAAAAgD8AAIA:AAAAAAAAAAAOAAAHMgAQAAAAAABGABAAAAAAAKYKEAAAAAAAOAAAC:IAEAABAAAARoQgAAAAAAAAAAAAAkAAAAAAgD8AAIA:AACAvwAAgL8yAAAP8gAQAAIAAABGFBAAAQAAAAJAAAAAAIA:AACAvwAAgD8AAIC:AkAAAAAAAAAAAIA:AAAAAAAAgD8yAAAJ8gAQAAEAAABGDhAAAwAAAEYOEAABAAAARg4QAAIAAAAyAAAP8gAQAAEAAABGDhAAAQAAAAJAAAAAAIA:AACAvwAAgD8AAIC:AkAAAAAAAAAAAIA:AAAAAAAAgD9IAAAL8gAQAAIAAABGABAAAQAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAAEgAAAvyABAAAQAAAOYKEAABAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAOAAAB:IAEAABAAAAVgUQAAAAAABGDhAAAQAAADIAAAnyIBAAAAAAAEYOEAACAAAABgAQAAAAAABGDhAAAQAAABUAAAE%AAABU1RBVHQAAAAeAAAABAAAAAAAAAADAAAADQAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.smaa_neighborhood_blend_vertData0="s1203:AXBvcwAAASRHbG9iYWxzAAABc2NyZWVuU2l6ZUludgAAAAAACAAAAAIBRFhCQwjEJl7yyOeRSGFzdzc78RABAAAAXAMAAAUAAAA0AAAA:AAAADABAACgAQAA4AIAAFJERUbAAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAmAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAEAAAAAAAAAAAAAAAeAAAAAAAAAAIAAAAAgAAAIgAAAAAAAAAc2NyZWVuU2l6ZUludgCrqwEAAwABAAIAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR05oAAAAAwAAAAgAAABQAAAAAAAAAAAAAAADAAAAAAAAAA8AAABQAAAAAQAAAAAAAAADAAAAAQAAAAMMAABZAAAAAAAAAAEAAAADAAAAAgAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSOAEAAEAAAQBOAAAAWQAABEaOIAAAAAAAAQAAAF8AAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGUAAAMyIBAAAQAAAGcAAATyIBAAAgAAAAEAAABoAAACAQAAADIAAA:yABAAAAAAAEYUEAAAAAAAAkAAAAAAAD8AAAC:AAAAPwAAAL8CQAAAAAAAPwAAAD8AAAA:AAAAPzIAAA3yIBAAAAAAAEaEIAAAAAAAAAAAAAJAAAAAAIA:AAAAAAAAAAAAAIC:Rg4QAAAAAAAyAAAPMiAQAAEAAABGEBAAAAAAAAJAAAAAAAA:AAAAvwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAA2AAAFMiAQAAIAAABGEBAAAAAAADYAAAjCIBAAAgAAAAJAAAAAAAAAAAAAAAAAAD8AAIA:PgAAAVNUQVR0AAAABgAAAAEAAAAAAAAABAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_Shaders.ssao_pass_fragData0="s4247:AAVfZ2J1ZmZlckRfc2FtcGxlcgAAX2didWZmZXIwX3NhbXBsZXIAAWdidWZmZXJEAABnYnVmZmVyMAABJEdsb2JhbHMAAAVleWVMb29rAAAAAAAMAAAAAwFjYW1lcmFQcm9qABAAAAAIAAAAAgFzY3JlZW5TaXplABgAAAAIAAAAAgFleWUAIAAAAAwAAAADAWludlZQADAAAABAAAAABAREWEJDUnxHbuq1YLxs5fSb0C1cSwEAAADQCwAABQAAADQAAABMAgAAmAIAAMwCAABUCwAAUkRFRhACAAABAAAA:AAAAAUAAAAcAAAAAAT::wABAADoAQAAvAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAADOAAAAAwAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAOAAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAA6QAAAAIAAAAFAAAABAAAAP::::8BAAAAAQAAAA0AAADyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAF9nYnVmZmVyRF9zYW1wbGVyAF9nYnVmZmVyMF9zYW1wbGVyAGdidWZmZXJEAGdidWZmZXIwACRHbG9iYWxzAKvyAAAABQAAABQBAABwAAAAAAAAAAAAAACMAQAAAAAAAAwAAAACAAAAlAEAAAAAAACkAQAAEAAAAAgAAAACAAAAsAEAAAAAAADAAQAAGAAAAAgAAAACAAAAsAEAAAAAAADLAQAAIAAAAAwAAAACAAAAlAEAAAAAAADPAQAAMAAAAEAAAAACAAAA2AEAAAAAAABleWVMb29rAAEAAwABAAMAAAAAAAAAAABjYW1lcmFQcm9qAKsBAAMAAQACAAAAAAAAAAAAc2NyZWVuU2l6ZQBleWUAaW52VlAAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAOAAAAAEAAAAAAAAAAwAAAAEAAAAHBwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAQ4AAFNWX1RhcmdldACrq1NIRFKACAAAQAAAACACAABZAAAERo4gAAAAAAAHAAAAWgAAAwBgEAAAAAAAWgAAAwBgEAABAAAAWBgABABwEAAAAAAAVVUAAFgYAAQAcBAAAQAAAFVVAABiEAADMhAQAAAAAABiEAADchAQAAEAAABlAAADEiAQAAAAAABoAAACBgAAAEgAAAvyABAAAAAAAEYQEAAAAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAACRIAEAAAAAAACgAQAAAAAAABQAAAAAAAQAFAAAAAAIC:OQAAByIAEAAAAAAACgAQAAAAAAABQAAAAACAPx8ABAMaABAAAAAAAEgAAAvyABAAAQAAAEYQEAAAAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAAAAAC%IAEAAAAAAABgEQgMEAAAABAAAAAkAAAAAAAAAAAIA:AACAPwAAgD8AAAAIQgAQAAIAAAAaABCAwQAAAAEAAAAaABAAAAAAAB0AAAciABAAAAAAACoAEAACAAAAAUAAAAAAAAAdAAAKwgAQAAEAAAAGBBAAAQAAAAJAAAAAAAAAAAAAAAAAAAAAAAAANwAAD8IAEAABAAAApg4QAAEAAAACQAAAAAAAAAAAAAAAAIA:AACAPwJAAAAAAAAAAAAAAAAAgL8AAIC:OAAAB8IAEAAAAAAApg4QAAAAAACmDhAAAQAAADcAAAkyABAAAgAAAFYFEAAAAAAARgAQAAEAAADmChAAAAAAABAAAAciABAAAAAAAEYCEAACAAAARgIQAAIAAABEAAAFIgAQAAAAAAAaABAAAAAAADgAAAfiABAAAAAAAFYFEAAAAAAABgkQAAIAAAAQAAAHEgAQAAEAAABGEhAAAQAAAEYSEAABAAAARAAABRIAEAABAAAACgAQAAEAAAA4AAAHcgAQAAEAAAAGABAAAQAAAEYSEAABAAAAMgAACRIAEAAAAAAACgAQAAAAAAABQAAAAAAAPwFAAAAAAAA:AAAACRIAEAAAAAAACgAQAAAAAAAKgCCAQQAAAAAAAAABAAAADgAACBIAEAAAAAAAGoAgAAAAAAABAAAACgAQAAAAAAAQAAAIggAQAAEAAABGgiAAAAAAAAAAAABGAhAAAQAAAA4AAAcSABAAAAAAAAoAEAAAAAAAOgAQAAEAAAA4AAAHcgAQAAIAAAAGABAAAAAAAEYCEAABAAAAEAAAB4IAEAABAAAARgIQAAIAAABGAhAAAgAAAEsAAAWCABAAAQAAADoAEAABAAAAOAAABxIAEAACAAAAOgAQAAEAAAABQAAAAACgQTgAAAhiABAAAgAAAAYREAAAAAAAposgAAAAAAABAAAAGwAABWIAEAACAAAAVgYQAAIAAAAmAAAIANAAAIIAEAACAAAAGgAQAAIAAAABQAAAAwAAACMAAAkiABAAAgAAABoAEAACAAAAKgAQAAIAAAAqABAAAgAAAFcAAAciABAAAgAAABoAEAACAAAAOgAQAAIAAAAmAAAIANAAACIAEAACAAAAGgAQAAIAAAABQAAACgAAACsAAAUiABAAAgAAABoAEAACAAAANgAABYIAEAADAAAAAUAAAAAAgD82AAAIwgAQAAIAAAACQAAAAAAAAAAAAAAAAAAAAAAAADAAAAEhAAAHEgAQAAQAAAA6ABAAAgAAAAFAAAAIAAAAAwAEAwoAEAAEAAAAKwAABRIAEAAEAAAAOgAQAAIAAAAAAAAHEgAQAAQAAAAKABAABAAAAAFAAAAAAAA:MgAACRIAEAAEAAAACgAQAAQAAAABQAAA2w9JPxoAEAACAAAATQAABxIAEAAEAAAAEgAQAAUAAAAKABAABAAAADYAAAUiABAABQAAAAoAEAAEAAAADgAABzIAEAAEAAAARgAQAAUAAAAGABAAAgAAAAAAAAcyABAABAAAAEYAEAAEAAAARhAQAAAAAABIAAAL8gAQAAUAAABGABAABAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAAlCABAAAwAAAAoAEAAFAAAAAUAAAAAAAEABQAAAAACAvwAAAAhCABAABAAAABoAEIBBAAAABAAAAAFAAAAAAIA:MgAADzIAEAADAAAAhgAQAAQAAAACQAAAAAAAQAAAAEAAAAAAAAAAAAJAAAAAAIC:AACAvwAAAAAAAAAAEQAACBIAEAAEAAAARg4QAAMAAABGjiAAAAAAAAMAAAARAAAIIgAQAAQAAABGDhAAAwAAAEaOIAAAAAAABAAAABEAAAhCABAABAAAAEYOEAADAAAARo4gAAAAAAAFAAAAEQAACBIAEAADAAAARg4QAAMAAABGjiAAAAAAAAYAAAAOAAAHcgAQAAMAAABGAhAABAAAAAYAEAADAAAAAAAACXIAEAADAAAARgIQAAMAAABGgiCAQQAAAAAAAAACAAAAMgAACnIAEAADAAAARgIQgEEAAAABAAAABgAQAAAAAABGAhAAAwAAABAAAAcSABAABAAAAEYCEAADAAAAlgcQAAAAAAAyAAAKEgAQAAQAAAA6ABCAQQAAAAEAAAABQAAAbxIDOgoAEAAEAAAANAAABxIAEAAEAAAACgAQAAQAAAABQAAAAAAAABAAAAcSABAAAwAAAEYCEAADAAAARgIQAAMAAAAAAAAHEgAQAAMAAAAKABAAAwAAAAFAAACPwnU8DgAABxIAEAADAAAACgAQAAQAAAAKABAAAwAAAAAAAAdCABAAAgAAACoAEAACAAAACgAQAAMAAAAeAAAHggAQAAIAAAA6ABAAAgAAAAFAAAABAAAAFgAAATIAAAoSIBAAAAAAACoAEIBBAAAAAgAAAAFAAACamRk9AUAAAAAAgD8SAAABNgAABRIgEAAAAAAAAUAAAAAAgD8VAAABPgAAAVNUQVR0AAAARwAAAAYAAAAAAAAAAwAAAC0AAAAFAAAAAQAAAAIAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";kha_System.renderListeners=[];kha_System.foregroundListeners=[];kha_System.resumeListeners=[];kha_System.pauseListeners=[];kha_System.backgroundListeners=[];kha_System.shutdownListeners=[];kha_System.dropFilesListeners=[];kha_SystemImpl.maxGamepads=4;kha_SystemImpl.mouseLockListeners=[];kha_Window.windows=[];kha_arrays_ByteArray.LITTLE_ENDIAN=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===120;kha_audio2_Audio.disableGcInteractions=false;kha_audio2_Audio.intBox=new kha_internal_IntBox(0);kha_audio2_Audio1.lastAllocationCount=0;kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE=[1.0649863e-7,1.1341951e-7,1.2079015e-7,1.2863978e-7,1.3699951e-7,1.4590251e-7,1.5538408e-7,1.6548181e-7,1.7623575e-7,1.8768855e-7,1.9988561e-7,2.128753e-7,2.2670913e-7,2.4144197e-7,2.5713223e-7,2.7384213e-7,2.9163793e-7,3.1059021e-7,3.3077411e-7,3.5226968e-7,3.7516214e-7,3.9954229e-7,4.255068e-7,4.5315863e-7,4.8260743e-7,5.1396998e-7,5.4737065e-7,5.8294187e-7,6.2082472e-7,6.6116941e-7,7.0413592e-7,7.4989464e-7,7.9862701e-7,8.505263e-7,9.0579828e-7,9.6466216e-7,10273513e-13,10941144e-13,11652161e-13,12409384e-13,13215816e-13,14074654e-13,14989305e-13,15963394e-13,17000785e-13,18105592e-13,19282195e-13,20535261e-13,21869758e-13,23290978e-13,24804557e-13,26416497e-13,2813319e-12,29961443e-13,31908506e-13,33982101e-13,36190449e-13,38542308e-13,41047004e-13,4371447e-12,46555282e-13,49580707e-13,5280274e-12,5623416e-12,59888572e-13,63780469e-13,67925283e-13,72339451e-13,77040476e-13,82047e-10,87378876e-13,93057248e-13,99104632e-13,10554501e-12,11240392e-12,11970856e-12,12748789e-12,13577278e-12,14459606e-12,15399272e-12,16400004e-12,17465768e-12,18600792e-12,19809576e-12,21096914e-12,22467911e-12,23928002e-12,25482978e-12,27139006e-12,28902651e-12,30780908e-12,32781225e-12,34911534e-12,37180282e-12,39596466e-12,42169667e-12,4491009e-11,47828601e-12,50936773e-12,54246931e-12,57772202e-12,61526565e-12,65524908e-12,69783085e-12,74317983e-12,79147585e-12,8429104e-11,89768747e-12,95602426e-12,.00010181521,.00010843174,.00011547824,.00012298267,.00013097477,.00013948625,.00014855085,.00015820453,.00016848555,.00017943469,.00019109536,.00020351382,.00021673929,.00023082423,.00024582449,.00026179955,.00027881276,.00029693158,.00031622787,.00033677814,.00035866388,.00038197188,.00040679456,.00043323036,.00046138411,.00049136745,.00052329927,.00055730621,.00059352311,.00063209358,.00067317058,716917e-9,.0007635063,.00081312324,.00086596457,.00092223983,.00098217216,.0010459992,.0011139742,.0011863665,.0012634633,.0013455702,.0014330129,.0015261382,.0016253153,.0017309374,.0018434235,.0019632195,.0020908006,.0022266726,.0023713743,.0025254795,.0026895994,.0028643847,.0030505286,.0032487691,.0034598925,.0036847358,.0039241906,.0041792066,.004450795,.0047400328,.0050480668,.0053761186,.0057254891,.0060975636,.0064938176,.0069158225,.0073652516,.0078438871,.0083536271,.0088964928,.009474637,.010090352,.01074608,.011444421,.012188144,.012980198,.013823725,.014722068,.015678791,.016697687,.017782797,.018938423,.020169149,.021479854,.022875735,.02436233,.025945531,.027631618,.029427276,.031339626,.033376252,.035545228,.037855157,.040315199,.042935108,.045725273,.048696758,.051861348,.055231591,.05882085,.062643361,.066714279,.071049749,.075666962,.080584227,.085821044,.091398179,.097337747,.1036633,.11039993,.11757434,.12521498,.13335215,.14201813,.15124727,.16107617,.1715438,.18269168,.19456402,.20720788,.22067342,.23501402,.25028656,.26655159,.28387361,.30232132,.32196786,.34289114,.36517414,.38890521,.41417847,.44109412,.4697589,.50028648,.53279791,.56742212,.6042964,.64356699,.68538959,.72993007,.77736504,.8278826,.88168307,.9389798,1];kha_input_Gamepad.__meta__={statics:{sendConnectEvent:{input:null},sendDisconnectEvent:{input:null}},fields:{sendAxisEvent:{input:null},sendButtonEvent:{input:null}}};kha_input_Gamepad.instances=[];kha_input_Gamepad.connectListeners=[];kha_input_Gamepad.disconnectListeners=[];kha_input_Keyboard.__meta__={fields:{sendDownEvent:{input:null},sendUpEvent:{input:null},sendPressEvent:{input:null}}};kha_input_Keyboard.keyBehavior=kha_input_BlockInterventions.Default;kha_input_Mouse.__meta__={fields:{sendLeaveEvent:{input:null},sendDownEvent:{input:null},sendUpEvent:{input:null},sendMoveEvent:{input:null},sendWheelEvent:{input:null}}};kha_input_Mouse.wheelEventBlockBehavior=kha_input_MouseEventBlockBehavior.Full;kha_input_Surface.touchDownEventBlockBehavior=kha_input_TouchDownEventBlockBehavior.Full;kha_krom_Graphics.mat=kha_arrays_Float32Array._new(16);kha_netsync_ControllerBuilder.nextId=0;Main.main()})(typeof exports!="undefined"?exports:typeof window!="undefined"?window:typeof self!="undefined"?self:this,typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this);